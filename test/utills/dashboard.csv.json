{
  "title": "Hawle Dashboard [Map] v2023.12.11.1",
  "image": null,
  "mobileHide": false,
  "mobileOrder": null,
  "configuration": {
    "description": "",
    "widgets": {
      "8bcdb52e-37cf-e493-5737-b1c7af71a155": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "823fc6e4-b7e0-35d0-05c3-23e30810c28a",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "count",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.18355668864384111
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "cardHtml": "<!--material symbol library-->\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n<div class='card'>\n    <div class='content'>\n        <div class='column'>\n            <div class='header'>\n                <span class=\"material-symbols-outlined icon-color-grey\">auto_activity_zone</span>\n                <p>{i18n:hawle-dashboard.zones}</p>\n            </div>\n            <div class='value'>\n                ${count:0}\n            </div>\n        </div>\n        <div class='column'>\n            <button id='add-button' type=\"button\" class=\"custom-btn\">\n                <span class=\"material-symbols-outlined add-icon\">\n                    add\n                </span>\n            </button>\n            <button id='all-button' type=\"button\" class=\"custom-btn\">\n                {i18n:hawle-dashboard.view-all}\n            </button>\n        </div>\n    </div>\n</div>",
            "cardCss": ".custom-btn {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    background: none;\n    height: 100%;\n    width: 100%; \n    color: #009FE3;\n    display: flex;\n    cursor: pointer;\n    font-weight: 700;\n    font-size: 0.8vw;\n}\n\n.card {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content {\n    padding: 8px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content .column {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    max-width: 50%;\n}\n\n.header {\n    display: inline-flex;\n     align-items: center;\n}\n\n.header p {\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 0.9vw;\n    font-weight: 700;\n    color: #64748B;\n}\n\n.header img {\n    height: 1.1vw;\n    width: 1.1vw;\n}\n\n.icon-color-grey {\n    color: #CBD4E1;\n    font-size: 1.1vw;\n}\n\n.card .value {\n    font-size: 1.5vw;\n    font-weight: 500;\n    display: flex;\n    color: #0F1A2A;\n}\n\n#all-button {\n    align-items: flex-end;\n    justify-content: flex-end;\n}\n\n#add-button {\n    align-items: flex-start;\n    justify-content: flex-end;\n}\n\n.add-icon {\n    font-size: 1.3vw;\n}"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "fontWeight": "800"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [],
            "elementClick": [
              {
                "name": "all-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "updateDashboardState",
                "targetDashboardStateId": "all_zone",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "126d5b74-5e5a-815b-9771-13ee0b408764"
              },
              {
                "name": "add-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_zone",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "a461ea87-7f8c-fa0f-5743-0f7a1902dff4"
              }
            ]
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "8bcdb52e-37cf-e493-5737-b1c7af71a155"
      },
      "7f901ab5-0fce-7740-b669-00ddd53555ac": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    background: #009FE3;\n    width: 100%;\n    height: 100%;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #fff;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.home,Home}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "7f901ab5-0fce-7740-b669-00ddd53555ac"
      },
      "cbd4ca76-42c2-b889-b698-24150c5d1268": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #FFF;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.zones, Zone}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_zone');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "cbd4ca76-42c2-b889-b698-24150c5d1268"
      },
      "c8b4bfec-67b7-37cf-9a35-ae810ed2bc94": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.hydrants, Hydrants }\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_hydrants');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "c8b4bfec-67b7-37cf-9a35-ae810ed2bc94"
      },
      "2b7f85e5-1353-34e1-baf0-4d42d4e5ac8c": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         D-Storz\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_dstorz');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "2b7f85e5-1353-34e1-baf0-4d42d4e5ac8c"
      },
      "a9c8b8e5-362e-606e-8501-a73f6003c5f7": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.user-management, User Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_users');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "a9c8b8e5-362e-606e-8501-a73f6003c5f7"
      },
      "06a3e4e9-13ce-e29e-d11f-5d67f57b1c71": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "5d6aae4b-1d67-f7b4-f915-d2e30c8a3eb5",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "count",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.18355668864384111
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "cardHtml": "<!--material symbol library-->\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n<div class='card'>\n    <div class='content'>\n        <div class='column'>\n            <div class='header'>\n                <span class=\"material-symbols-outlined icon-color-grey\">notifications_paused</span>\n                <p>{i18n:hawle-dashboard.temporary-deactivation}</p>\n            </div>\n            <div class='value'>\n                ${count:0}\n            </div>\n        </div>\n        <div class='column'>\n            <button id='add-button' type=\"button\" class=\"custom-btn\">\n                <span class=\"material-symbols-outlined add-icon\">\n                    add\n                </span>\n            </button>\n            <button id='all-button' type=\"button\" class=\"custom-btn\">\n                {i18n:hawle-dashboard.view-all}\n            </button>\n        </div>\n    </div>\n</div>",
            "cardCss": ".custom-btn {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    background: none;\n    height: 100%;\n    width: 100%; \n    color: #009FE3;\n    display: flex;\n    cursor: pointer;\n    font-weight: 700;\n    font-size: 0.8vw;\n}\n\n.card {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content {\n    padding: 8px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content .column {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    max-width: 50%;\n}\n\n.header {\n    display: inline-flex;\n     align-items: center;\n}\n\n.header p {\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 0.9vw;\n    font-weight: 700;\n    color: #64748B;\n}\n\n.header img {\n    height: 1.1vw;\n    width: 1.1vw;\n}\n\n.icon-color-grey {\n    color: #CBD4E1;\n    font-size: 1.1vw;\n}\n\n.card .value {\n    font-size: 1.5vw;\n    font-weight: 500;\n    display: flex;\n    color: #0F1A2A;\n}\n\n#all-button {\n    align-items: flex-end;\n    justify-content: flex-end;\n}\n\n#add-button {\n    align-items: flex-start;\n    justify-content: flex-end;\n}\n\n.add-icon {\n    font-size: 1.3vw;\n}"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [],
            "elementClick": [
              {
                "name": "all-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "updateDashboardState",
                "targetDashboardStateId": "all_temporary_deactivation",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "126d5b74-5e5a-815b-9771-13ee0b408764"
              },
              {
                "name": "add-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_temporary_deactivation",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "a461ea87-7f8c-fa0f-5743-0f7a1902dff4"
              }
            ]
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "06a3e4e9-13ce-e29e-d11f-5d67f57b1c71"
      },
      "7c584cea-91f7-ff30-6bf1-193b1c0a9be1": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.home,Home}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('default');\nwidgetContext.stateController.resetState()\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "7c584cea-91f7-ff30-6bf1-193b1c0a9be1"
      },
      "39c1efb7-b93e-1eb6-9132-257d3b17ee80": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #009FE3;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #fff;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.zones, Zone}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_zone');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "39c1efb7-b93e-1eb6-9132-257d3b17ee80"
      },
      "b02607e3-f61a-38f3-b8db-c775bb1d8a29": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.hydrants, Hydrants }\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_hydrants');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "b02607e3-f61a-38f3-b8db-c775bb1d8a29"
      },
      "f142ee74-ac62-1500-0ceb-d04067e36365": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         D-Storz\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_dstorz');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "f142ee74-ac62-1500-0ceb-d04067e36365"
      },
      "ff2800c8-35fc-08de-7074-b3f41bfb5cd7": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.user-management, User Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_users');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "ff2800c8-35fc-08de-7074-b3f41bfb5cd7"
      },
      "41a2cd82-b348-0db8-1359-4760842ecbdc": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.home,Home}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "widgetContext.stateController.resetState();\nopenDashboardState('default');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "41a2cd82-b348-0db8-1359-4760842ecbdc"
      },
      "00de56a8-b968-cddb-2f0e-31cf131da2d5": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #FFF;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.zones, Zone}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_zone');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "00de56a8-b968-cddb-2f0e-31cf131da2d5"
      },
      "d1a7364e-91bf-2377-b5c5-5fc69b19278a": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #009FE3;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #fff;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.hydrants, Hydrants }\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "d1a7364e-91bf-2377-b5c5-5fc69b19278a"
      },
      "1c4a1fba-136d-b514-d1e7-cc92a934ffc6": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         D-Storz\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_dstorz');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "1c4a1fba-136d-b514-d1e7-cc92a934ffc6"
      },
      "a39857d7-dd20-bac7-a128-9bb9d0466ad7": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.user-management, User Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_users');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "a39857d7-dd20-bac7-a128-9bb9d0466ad7"
      },
      "aff7f168-577f-f559-0040-d4bb014facec": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.home,Home}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('default');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "aff7f168-577f-f559-0040-d4bb014facec"
      },
      "87031e3b-90aa-31b4-5d93-1ed6d724db47": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #FFF;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.zones, Zone}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_zone');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "87031e3b-90aa-31b4-5d93-1ed6d724db47"
      },
      "40efd6ff-0b45-8cda-c615-28380e7d7bfd": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.hydrants, Hydrants }\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_hydrants');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "40efd6ff-0b45-8cda-c615-28380e7d7bfd"
      },
      "a1a6974b-1088-7830-e725-bca39b47e5df": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #009FE3;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #fff;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         D-Storz\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_dstorz');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "a1a6974b-1088-7830-e725-bca39b47e5df"
      },
      "93f8c934-0246-3f41-3a6f-e4b508404c83": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.user-management, User Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_users');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "93f8c934-0246-3f41-3a6f-e4b508404c83"
      },
      "bc16cad2-b29c-eef0-ddfe-15508b69a414": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.home,Home}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('default');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "bc16cad2-b29c-eef0-ddfe-15508b69a414"
      },
      "7ac22cac-8802-e4a8-5a91-386be95a2d45": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.hydrants, Hydrants}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_hydrants');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "7ac22cac-8802-e4a8-5a91-386be95a2d45"
      },
      "455681d1-2f60-76ed-0daa-8bb6249dbc2a": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #FFF;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.zones, Zone}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_zone');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "455681d1-2f60-76ed-0daa-8bb6249dbc2a"
      },
      "8c25eab5-743a-a1a3-7899-688ab4ee9f31": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         D-Storz\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_dstorz');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "8c25eab5-743a-a1a3-7899-688ab4ee9f31"
      },
      "2e51ee7b-565f-920d-0edc-1f2d6d0315e5": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #009FE3;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #fff;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n        {i18n:hawle-dashboard.user-management, User Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_users');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "2e51ee7b-565f-920d-0edc-1f2d6d0315e5"
      },
      "5b8117f2-0490-0b8a-20ea-bf064a325988": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "793b3a27-c500-48ae-d75c-383cda3397a8",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "count",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.18355668864384111
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "cardCss": ".custom-btn {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    background: none;\n    height: 100%;\n    width: 100%; \n    color: #009FE3;\n    display: flex;\n    cursor: pointer;\n    font-weight: 700;\n    font-size: 0.8vw;\n}\n\n.card {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content {\n    padding: 8px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content .column {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    max-width: 50%;\n}\n\n.header {\n    display: inline-flex;\n     align-items: center;\n}\n\n.header p {\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 0.9vw;\n    font-weight: 700;\n    color: #64748B;\n}\n\n.header img {\n    height: 1.1vw;\n    width: 1.1vw;\n}\n\n.icon-color-grey {\n    color: #CBD4E1;\n    font-size: 1.1vw;\n}\n\n.card .value {\n    font-size: 1.5vw;\n    font-weight: 500;\n    display: flex;\n    color: #0F1A2A;\n}\n\n#all-button {\n    align-items: flex-end;\n    justify-content: flex-end;\n}\n\n#add-button {\n    align-items: flex-start;\n    justify-content: flex-end;\n}\n\n.add-icon {\n    font-size: 1.3vw;\n}",
            "cardHtml": "<!--material symbol library-->\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n<div class='card'>\n    <div class='content'>\n        <div class='column'>\n            <div class='header'>\n                <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/hydrant.png?sp=r&amp;st=2023-11-02T15:10:05Z&amp;se=2035-11-02T23:10:05Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=nzMRhO5W4Zd0VW1RPolBp8HPnRaS%2Bb4d4l497X%2FiuuY%3D\"/>\n                <p>\n                    {i18n:hawle-dashboard.hydrants}\n                </p>\n            </div>\n            <div class='value'>\n                ${count:0}\n            </div>\n        </div>\n        <div class='column'>\n            <button id='add-button' type=\"button\" class=\"custom-btn\">\n                <span class=\"material-symbols-outlined add-icon\">\n                    add\n                </span>\n            </button>\n            <button id='all-button' type=\"button\" class=\"custom-btn\">\n                {i18n:hawle-dashboard.view-all}\n            </button>\n        </div>\n    </div>\n</div>\n"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "fontWeight": "800"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [],
            "elementClick": [
              {
                "name": "all-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "updateDashboardState",
                "targetDashboardStateId": "all_hydrants",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "126d5b74-5e5a-815b-9771-13ee0b408764"
              },
              {
                "name": "add-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_hydrant",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "a461ea87-7f8c-fa0f-5743-0f7a1902dff4"
              }
            ]
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "5b8117f2-0490-0b8a-20ea-bf064a325988"
      },
      "f48435c6-1d35-90bc-a397-fca503fbfc53": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "4c30635a-474a-9dbd-0d25-b9a38527e2cf",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "count",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.18355668864384111
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "cardCss": ".custom-btn {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    background: none;\n    height: 100%;\n    width: 100%; \n    color: #009FE3;\n    display: flex;\n    cursor: pointer;\n    font-weight: 700;\n    font-size: 0.8vw;\n}\n\n.card {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content {\n    padding: 8px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content .column {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    max-width: 50%;\n}\n\n.header {\n    display: inline-flex;\n     align-items: center;\n}\n\n.header p {\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 0.9vw;\n    font-weight: 700;\n    color: #64748B;\n}\n\n.header img {\n    height: 1.1vw;\n    width: 1.1vw;\n}\n\n.icon-color-grey {\n    color: #CBD4E1;\n    font-size: 1.1vw;\n}\n\n.card .value {\n    font-size: 1.5vw;\n    font-weight: 500;\n    display: flex;\n    color: #0F1A2A;\n}\n\n#all-button {\n    align-items: flex-end;\n    justify-content: flex-end;\n}\n\n#add-button {\n    align-items: flex-start;\n    justify-content: flex-end;\n}\n\n.add-icon {\n    font-size: 1.3vw;\n}",
            "cardHtml": "<!--material symbol library-->\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n<div class='card'>\n    <div class='content'>\n        <div class='column'>\n            <div class='header'>\n                <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/d-storz.png?sp=r&amp;st=2023-11-02T15:03:05Z&amp;se=2033-12-30T23:03:05Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=B%2F4s6Ion4qe6FqWLiTkE2jJe8Xpcx2EWVAmRvFWbedc%3D\"/>\n                <p>{i18n:hawle-dashboard.d-storz}</p>\n            </div>\n            <div class='value'>\n                ${count:0}\n            </div>\n        </div>\n        <div class='column'>\n            <button id='add-button' type=\"button\" class=\"custom-btn\">\n                <span class=\"material-symbols-outlined add-icon\">\n                    add\n                </span>\n            </button>\n            <button id='all-button' type=\"button\" class=\"custom-btn\">\n                {i18n:hawle-dashboard.view-all}\n            </button>\n        </div>\n    </div>\n</div>\n"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "fontWeight": "800"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [],
            "elementClick": [
              {
                "name": "all-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "updateDashboardState",
                "targetDashboardStateId": "all_dstorz",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "126d5b74-5e5a-815b-9771-13ee0b408764"
              },
              {
                "name": "add-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_dstorz",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "a461ea87-7f8c-fa0f-5743-0f7a1902dff4"
              }
            ]
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "f48435c6-1d35-90bc-a397-fca503fbfc53"
      },
      "64b077d1-7fcb-6335-6106-2921ae9979fa": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.alarm-management, Alarm Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "64b077d1-7fcb-6335-6106-2921ae9979fa"
      },
      "ce60fbd9-9e40-9724-ad58-7d0c30f52c6f": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 86400000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": true,
            "defaultPageSize": 10,
            "displayEntityName": false,
            "displayEntityType": false,
            "enableSelectColumnDisplay": false,
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "displayEntityLabel": false,
            "useRowStyleFunction": false,
            "rowStyleFunction": "{\n    \"width\": \"126px\"\n}",
            "entitiesTitle": "{i18n:hawle-dashboard.overview-of-all-deactivations}",
            "defaultSortOrder": "-createdTime",
            "enableExportDataDisplay": true
          },
          "title": "Temporary Deactivation Table",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "5d6aae4b-1d67-f7b4-f915-d2e30c8a3eb5",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled"
                  },
                  "_hash": 0.16098815197566152
                },
                {
                  "name": "description",
                  "type": "attribute",
                  "label": "Deactivation Reason",
                  "color": "#4caf50",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled"
                  },
                  "_hash": 0.6189506745302187,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "fromDate",
                  "type": "attribute",
                  "label": "From",
                  "color": "#8bc34a",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "function formatDateToCustomString(date) {\n    const yyyy = date.getFullYear();\n    const mm = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-11, so +1 and pad with a '0' if needed\n    const dd = String(date.getDate()).padStart(2, '0');\n    \n    const hh = String(date.getHours()).padStart(2, '0');\n    const min = String(date.getMinutes()).padStart(2, '0');\n    const ss = String(date.getSeconds()).padStart(2, '0');\n\n    return `${yyyy}-${mm}-${dd} ${hh}:${min}:${ss}`;\n}\n\n\nreturn value ? formatDateToCustomString(new Date(value)) : \"--\";  "
                  },
                  "_hash": 0.5551171108543909,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "toDate",
                  "type": "attribute",
                  "label": "To",
                  "color": "#9c27b0",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "function formatDateToCustomString(date) {\n    const yyyy = date.getFullYear();\n    const mm = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-11, so +1 and pad with a '0' if needed\n    const dd = String(date.getDate()).padStart(2, '0');\n    \n    const hh = String(date.getHours()).padStart(2, '0');\n    const min = String(date.getMinutes()).padStart(2, '0');\n    const ss = String(date.getSeconds()).padStart(2, '0');\n\n    return `${yyyy}-${mm}-${dd} ${hh}:${min}:${ss}`;\n}\n\n\nreturn value ? formatDateToCustomString(new Date(value)) : \"--\";  "
                  },
                  "_hash": 0.07974656214883602,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "temporaryDeactivation",
                  "type": "attribute",
                  "label": "Active",
                  "color": "#607d8b",
                  "settings": {
                    "columnWidth": "128px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "const temporaryDeactivation = JSON.parse(value).deactivationState;\nconst currentDateTimeMs = new Date().getTime()\nlet patchedValue = 'false';\nif (currentDateTimeMs >= temporaryDeactivation.fromDate && currentDateTimeMs <= temporaryDeactivation.toDate) {\n    patchedValue = 'true';\n}\nconst matIcon = patchedValue == \"true\" ? \"check\" : \"close\";\nlet style = \"\"\nstyle += patchedValue == \"true\" ? \"\" : \"color: #CBD4E1 !important;\";\nreturn `<mat-icon style=\"${style}\" class=\"mat-icon material-icons\">${matIcon}</mat-icon>`\n"
                  },
                  "_hash": 0.24100038820864778,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": false,
                  "postFuncBody": null
                },
                {
                  "name": "createdTime",
                  "type": "entityField",
                  "label": "Created time",
                  "color": "#9c27b0",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled"
                  },
                  "_hash": 0.6205673501627778
                }
              ]
            }
          ],
          "showTitleIcon": false,
          "titleTooltip": "",
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "actions": {
            "actionCellButton": [
              {
                "name": "edit",
                "icon": "edit",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "edit_temporary_deactivation",
                "setEntityId": true,
                "stateEntityParamName": "",
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "3d0bbe6e-19e3-cc93-5382-7e4f16a2ec8d"
              },
              {
                "name": "duplicate",
                "icon": "content_copy",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "duplicate_temporary_deactivation",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "41c8782c-3b55-a671-bfd6-6aedf216a6b7"
              },
              {
                "name": "delete",
                "icon": "delete",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\n\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\n\nopenDeleteEntityDialog();\n\nfunction openDeleteEntityDialog() {\n    const deleteText = getTranslation('hawle-dashboard.delete');\n    const cancelText = getTranslation('hawle-dashboard.cancel');\n    const contentText = getTranslation('hawle-dashboard.dialog-content');\n    \n    let title = deleteText + \" \" + 'Temporary Deactivation' + ' ' +\n                entityName;\n    let content = contentText + ' ' + entityName + '?';\n    dialogs.confirm(title, content, cancelText, deleteText).subscribe(\n        function(result) {\n            if (result) {\n                deleteEntity();\n            }\n        }\n    );\n}\n\nfunction getTranslation(translationText) {\n    widgetContext.$scope.translateService = widgetContext.$scope.$injector.get(widgetContext.servicesMap.get('translate'));\n    let translated = translationText;\n    try {\n        translated = widgetContext.$scope\n                .translateService.instant(\n                    translationText);\n    } catch (error) {\n        \n    }\n    return translated;\n}\n\nfunction deleteEntity() {\n    deleteEntityObservable(entityId).subscribe(\n        function success() {\n            widgetContext.showToast('success',\n                translationService.instant('hawle-dashboard.temporary-deactivation-deleted-successfully'), 2000,\n                'top', 'left');\n            widgetContext.updateAliases();\n        },\n        function fail() {\n            showErrorDialog();\n        }\n    );\n}\n\nfunction deleteEntityObservable(entityId) {\n     return assetService.deleteAsset(entityId.id);\n}\n\nfunction showErrorDialog() {\n    let title = 'Error';\n    let content = 'An error occurred while deleting the entity. Please try again.';\n    dialogs.alert(title, content, 'CLOSE').subscribe(\n        function(result) {}\n    );\n}\n",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "c58d0e2e-6160-1fb0-fdd5-dd0ea2709fef"
              }
            ],
            "headerButton": [
              {
                "name": "add",
                "icon": "add",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_temporary_deactivation",
                "setEntityId": false,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "eef7d8c6-da48-a94c-cbf9-b35558460f1d"
              }
            ],
            "rowClick": [
              {
                "name": "Show temporary deactivation details",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<mat-dialog id=\"popup-dialog\">\r\n    <header fxLayout=\"row\" fxLayoutAlign=\"space-between center\" class=\"header\">\r\n      <div fxLayout=\"column\">\r\n        <div id=\"dialog-title\">{{temporaryDeactivationInfo | translate}}</div>\r\n      </div>\r\n      <button mat-icon-button (click)=\"cancel()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </header>\r\n    \r\n    <div id=\"temporary-deactivation-map-container\">\r\n    </div>\r\n    \r\n    <section class=\"info-table-temp-deactivation-hydrant\" *ngIf=\"hydrantDataSourceReady\">\r\n         <mat-table mat-table [dataSource]=\"hydrantDataSource\" class=\"mat-elevation-z0\">\r\n      \r\n          <ng-container matColumnDef=\"selectedHydrants\">\r\n            <th mat-header-cell *matHeaderCellDef>{{selectedHydrantsLabel | translate}}</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ element.selectedHydrants }} </td>\r\n          </ng-container>\r\n        \r\n          <ng-container matColumnDef=\"brand\">\r\n            <th mat-header-cell *matHeaderCellDef> {{brand | translate}} </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ element.brand }} </td>\r\n          </ng-container>\r\n        \r\n          <ng-container matColumnDef=\"model\">\r\n            <th mat-header-cell *matHeaderCellDef> {{model | translate}} </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ element.model }} </td>\r\n          </ng-container>\r\n        \r\n          <ng-container matColumnDef=\"dStorz\">\r\n            <th mat-header-cell *matHeaderCellDef> D-Storz </th>\r\n            <td mat-cell *matCellDef=\"let element\" class=\"d-storz-cell\">{{ element.dStorz }}</td>\r\n          </ng-container>\r\n          \r\n         <ng-container matColumnDef=\"zone\">\r\n            <th mat-header-cell *matHeaderCellDef> {{zoneLabel | translate}} </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ element.zone }} </td>\r\n          </ng-container>\r\n        \r\n          <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n          <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n        </mat-table>\r\n    </section>\r\n    \r\n    <section class=\"temporary-deactivation-section-container\" >\r\n        <div class=\"temporary-deactivation-section\" >\r\n          <div class=\"section-title\">{{temporaryDeactivation | translate}}</div>\r\n          <div fxLayout=\"row\" fxLayoutGap=\"16px\" class=\"content\">\r\n            <div fxLayout=\"column\" fxFlex=\"25%\" class=\"column info-column\">\r\n              <div class=\"info-key\">{{reason | translate}}</div>\r\n              <div class=\"info-value\">{{tempDeactivationReason}}</div>\r\n            </div>\r\n        \r\n            <div fxLayout=\"column\" fxFlex=\"25%\" class=\"column info-column\">\r\n              <div class=\"info-key\">{{time | translate}}</div>\r\n              <div class=\"info-value\">{{fromLabel}}: {{notificationMuteStartDateFormatted}}<br>{{toLabel}}: {{notificationMuteEndDateFormatted}}\r\n              </div>\r\n            </div>\r\n        \r\n            <div fxLayout=\"column\" fxFlex=\"25%\" class=\"column info-column\">\r\n              <div class=\"info-key\">{{createdByLabel | translate}}</div>\r\n              <div class=\"info-value\">{{ createdBy }}</div>\r\n            </div>\r\n            \r\n            <div fxLayout=\"column\" fxFlex=\"25%\" class=\"column info-column\">\r\n              <div class=\"info-key\">{{eventTypeLabel | translate}}</div>\r\n              <div class=\"info-value\">{{ eventType }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n    </section>\r\n   \r\n</mat-dialog>",
                "customCss": ".mat-dialog-container {\r\n    border-radius: 10px;\r\n}\r\n\r\n#popup-dialog {\r\n    display: block;\r\n    height: 90vh;\r\n    width: 50vw;\r\n    padding: 2rem;\r\n}\r\n\r\n\r\n@media only screen and (max-width: 1500px) {\r\n#popup-dialog {\r\n      width: 80vw;\r\n      overflow-x: auto;\r\n  }\r\n}\r\n\r\n\r\n#dialog-title {\r\n    font-weight: bold;\r\n    margin-bottom: 1rem;\r\n    font-size: 24px;\r\n    font-style: normal;\r\n}\r\n\r\n#temporary-deactivation-map-container {\r\n    width: 100%;\r\n    height: 33%;\r\n    margin: 2rem 0;\r\n}\r\n\r\n.custom-badge{\r\n  font-size: 12px;\r\n  width: fit-content;\r\n  border-radius: 10px; \r\n  padding: 4px 8px; \r\n}\r\n.custom-icon {\r\n    margin-right: 4px; \r\n    font-size: 10px;\r\n    width: 10px;\r\n    height: 10px;\r\n}\r\n\r\n\r\n.custom-badge.isNoSignal  {\r\n    background-color: #FCE7F3;\r\n} \r\n.custom-badge.isNoSignal .custom-icon {\r\n  color: #F472B6;\r\n}\r\n.custom-badge.isNoSignal .custom-text {\r\n  color: #DB2777; \r\n}\r\n\r\n\r\n.custom-badge.isClosed {\r\n    background-color: #D1F5E9;\r\n}\r\n.custom-badge.isClosed .custom-text{\r\n    color: #218372;\r\n}\r\n.custom-badge.isClosed .custom-icon{\r\n    color: #32CDAC;\r\n}\r\n\r\n\r\n.custom-badge.isOpen {\r\n    background-color: #FEE2E2;\r\n}\r\n.custom-badge.isOpen .custom-text{\r\n    color: #DC2626;\r\n}\r\n.custom-badge.isOpen .custom-icon{\r\n    color: #F87171;\r\n}\r\n\r\n\r\n.custom-badge.isInactive {\r\n    background-color: #DDE8FC;\r\n}\r\n.custom-badge.isInactive .custom-text{\r\n    color: #325DDE;\r\n}\r\n.custom-badge.isInactive .custom-icon{\r\n    color: #6A9DF0;\r\n}\r\n\r\n\r\n.custom-badge.isNotAssigned {\r\n    background-color: #F1F4F9;\r\n}\r\n.custom-badge.isNotAssigned .custom-text{\r\n    color: #475569;\r\n}\r\n.custom-badge.isNotAssigned .custom-icon{\r\n    color: #94A3B8;\r\n}\r\n\r\n\r\n.custom-badge.isNotAssigned {\r\n    background-color: #F1F4F9;\r\n}\r\n.custom-badge.isNotAssigned .custom-text{\r\n    color: #475569;\r\n}\r\n.custom-badge.isNotAssigned .custom-icon{\r\n    color: #94A3B8;\r\n}\r\n\r\n\r\n.custom-badge.isTemporaryInactivated {\r\n    background-color: #FFEDD5;\r\n}\r\n.custom-badge.isTemporaryInactivated .custom-text{\r\n    color: #EA580C;\r\n}\r\n.custom-badge.isTemporaryInactivated .custom-icon{\r\n    color: #FB923C;\r\n}\r\n\r\n.entity-info {\r\n    margin: 3rem 0px;\r\n}\r\n\r\n.info-key {\r\n    font-size: 12px;\r\n    font-weight: bold;\r\n    margin-bottom: 4px;\r\n}\r\n\r\nth.mat-header-cell:first-of-type, td.mat-cell:first-of-type, td.mat-footer-cell:first-of-type{ \r\n    padding-left: 0 !important;\r\n}\r\n\r\n.info-table-temp-deactivation-hydrant .mat-header-cell {\r\n    font-weight: 600;\r\n    color: #000;\r\n}\r\n\r\n.info-table-temp-deactivation-hydrant .mat-cell {\r\n    font-size: 12px;\r\n    font-weight: 400;\r\n}\r\n\r\n.action-button {\r\n    border-radius: 5px;\r\n    border: 3px #E2E8F0 solid;\r\n}\r\n\r\n.temporary-deactivation-section {\r\n  font-size: 12px;\r\n  background-color: #FFF7ED;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n\r\n}\r\n\r\n.temporary-deactivation-section-container {\r\n    padding-top: 2rem;\r\n    padding-bottom: 2rem;\r\n}\r\n\r\n.temporary-deactivation-section .section-title {\r\n  font-weight: bold;\r\n  font-size: 15px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.unconfirmed-alarms-section {\r\n    margin-top: 2rem;\r\n    width: 100%;\r\n    background-color: #F8FAFC;\r\n    padding: 1rem;\r\n    color: #64748B;\r\n}\r\n\r\n.unconfirmed-alarms-section .bell-icon {\r\n  background-color: #CBD4E1;\r\n  color: #F8FAFC;\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-right: 1.5rem;\r\n}\r\n\r\n.unconfirmed-alarms-section button span {\r\n    color: #009FE3;\r\n    font-weight: 500;\r\n}\r\n\r\n.confirm-button {\r\n  background-color: #009FE3;\r\n  color: white;\r\n}\r\n\r\n.alarm-definition-detail-container {\r\n    margin-top: 2rem;\r\n}\r\n\r\n.alarm-definition-detail {\r\n    padding: 1rem;\r\n}\r\n\r\n.entity-info-zone {\r\n    padding-bottom: 2rem;\r\n}\r\n\r\n.info-table-temp-deactivation-hydrant {\r\n    background-color: #F8FAFC;\r\n    padding: 1.5rem;\r\n}\r\n\r\n.info-table-temp-deactivation-hydrant .mat-table{\r\n     background-color: #F8FAFC;\r\n}\r\n\r\n.info-table-temp-deactivation-hydrant .mat-table .mat-row:hover{\r\n     background-color: #e4eaf0;\r\n}\r\n\r\n.info-table-temp-deactivation-hydrant .mat-header-cell {\r\n    font-weight: 600;\r\n    color: #000;\r\n}\r\n\r\n.info-table-temp-deactivation-hydrant .mat-cell {\r\n    font-weight: 400;\r\n}\r\n\r\n.info-column,\r\n.d-storz-cell {\r\n    white-space: pre-wrap;\r\n    word-wrap: break-word\r\n}\r\n",
                "customFunction": "const blueMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjY5IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiMwMDlERTIiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMwMDZEQUIiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2NjkpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2NjkpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjY5IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2NjkiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY2OSIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY2OSIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjY5IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\n\r\nconst redMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjY0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiNFRjQ0NDQiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiNCOTFDMUMiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2NjQpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2NjQpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjY0IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2NjQiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY2NCIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY2NCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjY0IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\nconst crossedMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njc0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMC41MjQ2IDI3LjI1MjdMMjAuMjAxNiAyNi4zMDYzTDE5LjkwMzcgMjYuNDA4TDE5LjcxNzggMjYuNjYxOUwyMC41MjQ2IDI3LjI1MjdaTTExLjQ3OTUgMjcuMjU0MUwxMi4yODU5IDI2LjY2MjdMMTIuMDk5OSAyNi40MDkxTDExLjgwMjIgMjYuMzA3NkwxMS40Nzk1IDI3LjI1NDFaTTE1LjA2NDggMzEuNTk5TDE0LjMyODQgMzIuMjc1NUwxNC4zMjkzIDMyLjI3NjVMMTUuMDY0OCAzMS41OTlaTTE2Ljk0NzggMzEuNTk5TDE3LjY4MzMgMzIuMjc2NUwxNy42ODYxIDMyLjI3MzVMMTYuOTQ3OCAzMS41OTlaTTI5IDE0QzI5IDE5LjcwNzkgMjUuMzIwOCAyNC41NTkxIDIwLjIwMTYgMjYuMzA2M0wyMC44NDc2IDI4LjE5OTFDMjYuNzUxNyAyNi4xODM5IDMxIDIwLjU4OTQgMzEgMTRIMjlaTTE2IDFDMjMuMTc5NyAxIDI5IDYuODIwMyAyOSAxNEgzMUMzMSA1LjcxNTczIDI0LjI4NDMgLTEgMTYgLTFWMVpNMyAxNEMzIDYuODIwMyA4LjgyMDMgMSAxNiAxVi0xQzcuNzE1NzMgLTEgMSA1LjcxNTczIDEgMTRIM1pNMTEuODAyMiAyNi4zMDc2QzYuNjgxMDcgMjQuNTYxNSAzIDE5LjcwOTMgMyAxNEgxQzEgMjAuNTkxIDUuMjUwMzcgMjYuMTg2NyAxMS4xNTY4IDI4LjIwMDZMMTEuODAyMiAyNi4zMDc2Wk0xMC42NzMxIDI3Ljg0NTVDMTIuMDQxOCAyOS43MTE5IDEzLjQzNTkgMzEuMzA0IDE0LjMyODQgMzIuMjc1NUwxNS44MDEyIDMwLjkyMjRDMTQuOTM5MSAyOS45ODQgMTMuNTk3IDI4LjQ1MDUgMTIuMjg1OSAyNi42NjI3TDEwLjY3MzEgMjcuODQ1NVpNMTQuMzI5MyAzMi4yNzY1QzE1LjIxNzcgMzMuMjQwOSAxNi43OTUgMzMuMjQwOSAxNy42ODMzIDMyLjI3NjVMMTYuMjEyNCAzMC45MjE0QzE2LjE3NSAzMC45NjE5IDE2LjEwNDcgMzAuOTk5OCAxNi4wMDYzIDMwLjk5OThDMTUuOTA3OSAzMC45OTk4IDE1LjgzNzYgMzAuOTYxOSAxNS44MDAzIDMwLjkyMTRMMTQuMzI5MyAzMi4yNzY1Wk0xNy42ODYxIDMyLjI3MzVDMTguNTczIDMxLjMwMjggMTkuOTY0MyAyOS43MTA0IDIxLjMzMTQgMjcuODQzNkwxOS43MTc4IDI2LjY2MTlDMTguNDA4IDI4LjQ1MDQgMTcuMDY4MSAyOS45ODQ4IDE2LjIwOTYgMzAuOTI0NEwxNy42ODYxIDMyLjI3MzVaIiBmaWxsPSIjNjQ3NDhCIiBtYXNrPSJ1cmwoI3BhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njc0KSIvPgo8cGF0aCBkPSJNMTQuNjE1NSA5LjczMzA2TDEyLjQzODUgNi4wODcyMUMxMi4yMTM3IDUuNzEwNTggMTIuMzI5NiA1LjIyMzM3IDEyLjcgNC45ODgzN0wxNS4xNDUzIDMuNDM2OTVDMTUuNTI0OSAzLjE5NjE0IDE2LjAyNzkgMy4zMTA1NyAxNi4yNjU5IDMuNjkxODZMMTkuMDk5IDguMjI5ODhDMTkuMTc3MyA4LjM1NTE4IDE5LjIxOTcgOC40OTk0OSAxOS4yMjE4IDguNjQ3MThMMTkuMzQ3NiAxNy40OTYyQzE5LjM1NCAxNy45NDc5IDE4Ljk4OTYgMTguMzE3NCAxOC41MzggMTguMzE3NEgxNS41Mzk3QzE1LjA5MjUgMTguMzE3NCAxNC43MyAxNy45NTQ5IDE0LjczIDE3LjUwNzdWMTAuMTQ4MkMxNC43MyAxMC4wMDIgMTQuNjkwNSA5Ljg1ODU2IDE0LjYxNTUgOS43MzMwNloiIGZpbGw9IiMwMDlERTIiLz4KPHBhdGggZD0iTTEzLjA2ODEgNy43NTY2NEwxMi4yODIxIDYuNDY4MDhDMTIuMDQ4NSA2LjA4NTI3IDExLjU0ODMgNS45NjUxNSAxMS4xNjY0IDYuMjAwMTdMMTAuNjk2NyA2LjQ4OTI1QzEwLjMxMzEgNi43MjUzMyAxMC4xOTU5IDcuMjI5MDggMTAuNDM1OCA3LjYxMDI2TDExLjI1IDguOTAzNDJDMTEuNDkyNSA5LjI4ODU0IDEyLjAwNDYgOS4zOTgyNiAxMi4zODM2IDkuMTQ2MjdMMTIuODI1MiA4Ljg1MjU5QzEzLjE4NzQgOC42MTE3OCAxMy4yOTQ2IDguMTI3OTEgMTMuMDY4MSA3Ljc1NjY0WiIgZmlsbD0iIzAwOURFMiIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0iIzAwOURFMiIvPgo8bWFzayBpZD0icGF0aC00LW91dHNpZGUtMl8zNzc5XzE0Njc0IiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIzIiB5PSIxIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGZpbGw9ImJsYWNrIj4KPHJlY3QgZmlsbD0id2hpdGUiIHg9IjMiIHk9IjEiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2IDE0QzI2IDE5LjUyMjggMjEuNTIyOCAyNCAxNiAyNEMxMy41OTg3IDI0IDExLjM5NTEgMjMuMTUzNiA5LjY3MTI3IDIxLjc0MjlMMjMuNzQyOSA3LjY3MTI3QzI1LjE1MzYgOS4zOTUxNCAyNiAxMS41OTg3IDI2IDE0Wk04LjI1NzA1IDIwLjMyODdMMjIuMzI4NyA2LjI1NzA1QzIwLjYwNDkgNC44NDYzNyAxOC40MDEzIDQgMTYgNEMxMC40NzcyIDQgNiA4LjQ3NzE1IDYgMTRDNiAxNi40MDEzIDYuODQ2MzcgMTguNjA0OSA4LjI1NzA1IDIwLjMyODdaTTI4IDE0QzI4IDIwLjYyNzQgMjIuNjI3NCAyNiAxNiAyNkM5LjM3MjU4IDI2IDQgMjAuNjI3NCA0IDE0QzQgNy4zNzI1OCA5LjM3MjU4IDIgMTYgMkMyMi42Mjc0IDIgMjggNy4zNzI1OCAyOCAxNFoiLz4KPC9tYXNrPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2IDE0QzI2IDE5LjUyMjggMjEuNTIyOCAyNCAxNiAyNEMxMy41OTg3IDI0IDExLjM5NTEgMjMuMTUzNiA5LjY3MTI3IDIxLjc0MjlMMjMuNzQyOSA3LjY3MTI3QzI1LjE1MzYgOS4zOTUxNCAyNiAxMS41OTg3IDI2IDE0Wk04LjI1NzA1IDIwLjMyODdMMjIuMzI4NyA2LjI1NzA1QzIwLjYwNDkgNC44NDYzNyAxOC40MDEzIDQgMTYgNEMxMC40NzcyIDQgNiA4LjQ3NzE1IDYgMTRDNiAxNi40MDEzIDYuODQ2MzcgMTguNjA0OSA4LjI1NzA1IDIwLjMyODdaTTI4IDE0QzI4IDIwLjYyNzQgMjIuNjI3NCAyNiAxNiAyNkM5LjM3MjU4IDI2IDQgMjAuNjI3NCA0IDE0QzQgNy4zNzI1OCA5LjM3MjU4IDIgMTYgMkMyMi42Mjc0IDIgMjggNy4zNzI1OCAyOCAxNFoiIGZpbGw9IiNFRjQ0NDQiLz4KPHBhdGggZD0iTTkuNjcxMjcgMjEuNzQyOUw4Ljk2NDE2IDIxLjAzNThMOC4xODI4OSAyMS44MTcxTDkuMDM3OTYgMjIuNTE2OEw5LjY3MTI3IDIxLjc0MjlaTTIzLjc0MjkgNy42NzEyN0wyNC41MTY4IDcuMDM3OTZMMjMuODE3MSA2LjE4Mjg5TDIzLjAzNTggNi45NjQxNkwyMy43NDI5IDcuNjcxMjdaTTguMjU3MDUgMjAuMzI4N0w3LjQ4MzE1IDIwLjk2Mkw4LjE4Mjg5IDIxLjgxNzFMOC45NjQxNiAyMS4wMzU4TDguMjU3MDUgMjAuMzI4N1pNMjIuMzI4NyA2LjI1NzA1TDIzLjAzNTggNi45NjQxNkwyMy44MTcxIDYuMTgyODlMMjIuOTYyIDUuNDgzMTVMMjIuMzI4NyA2LjI1NzA1Wk0xNiAyNUMyMi4wNzUxIDI1IDI3IDIwLjA3NTEgMjcgMTRIMjVDMjUgMTguOTcwNiAyMC45NzA2IDIzIDE2IDIzVjI1Wk05LjAzNzk2IDIyLjUxNjhDMTAuOTMzOSAyNC4wNjg0IDEzLjM1OTUgMjUgMTYgMjVWMjNDMTMuODM3OSAyMyAxMS44NTYzIDIyLjIzODkgMTAuMzA0NiAyMC45NjlMOS4wMzc5NiAyMi41MTY4Wk0yMy4wMzU4IDYuOTY0MTZMOC45NjQxNiAyMS4wMzU4TDEwLjM3ODQgMjIuNDUwMUwyNC40NTAxIDguMzc4MzhMMjMuMDM1OCA2Ljk2NDE2Wk0yNyAxNEMyNyAxMS4zNTk1IDI2LjA2ODQgOC45MzM5NCAyNC41MTY4IDcuMDM3OTZMMjIuOTY5IDguMzA0NTdDMjQuMjM4OSA5Ljg1NjM0IDI1IDExLjgzNzkgMjUgMTRIMjdaTTguOTY0MTYgMjEuMDM1OEwyMy4wMzU4IDYuOTY0MTZMMjEuNjIxNiA1LjU0OTk1TDcuNTQ5OTUgMTkuNjIxNkw4Ljk2NDE2IDIxLjAzNThaTTIyLjk2MiA1LjQ4MzE1QzIxLjA2NjEgMy45MzE2MiAxOC42NDA1IDMgMTYgM1Y1QzE4LjE2MjEgNSAyMC4xNDM3IDUuNzYxMTEgMjEuNjk1NCA3LjAzMDk2TDIyLjk2MiA1LjQ4MzE1Wk0xNiAzQzkuOTI0ODcgMyA1IDcuOTI0ODcgNSAxNEg3QzcgOS4wMjk0NCAxMS4wMjk0IDUgMTYgNVYzWk01IDE0QzUgMTYuNjQwNSA1LjkzMTYyIDE5LjA2NjEgNy40ODMxNSAyMC45NjJMOS4wMzA5NiAxOS42OTU0QzcuNzYxMTEgMTguMTQzNyA3IDE2LjE2MjEgNyAxNEg1Wk0xNiAyN0MyMy4xNzk3IDI3IDI5IDIxLjE3OTcgMjkgMTRIMjdDMjcgMjAuMDc1MSAyMi4wNzUxIDI1IDE2IDI1VjI3Wk0zIDE0QzMgMjEuMTc5NyA4LjgyMDMgMjcgMTYgMjdWMjVDOS45MjQ4NyAyNSA1IDIwLjA3NTEgNSAxNEgzWk0xNiAxQzguODIwMyAxIDMgNi44MjAzIDMgMTRINUM1IDcuOTI0ODcgOS45MjQ4NyAzIDE2IDNWMVpNMjkgMTRDMjkgNi44MjAzIDIzLjE3OTcgMSAxNiAxVjNDMjIuMDc1MSAzIDI3IDcuOTI0ODcgMjcgMTRIMjlaIiBmaWxsPSJ3aGl0ZSIgbWFzaz0idXJsKCNwYXRoLTQtb3V0c2lkZS0yXzM3NzlfMTQ2NzQpIi8+Cjwvc3ZnPgo=';\r\n\r\nconst orangeMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njg3IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiNGOTczMTYiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiNDMjQxMEMiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2ODcpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2ODcpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0Njg3IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2ODciLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY4NyIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY4NyIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0Njg3IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\nconst greenMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjkyIiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiMyMkM1NUUiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMxNTgwM0QiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2OTIpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2OTIpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjkyIiB4PSI3LjMxMTI4IiB5PSIxLjE2MDc5IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkyIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2OTIiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY5MiIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY5MiIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjkyIiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\nconst greyMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjgyIiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiM2NDc0OEIiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMzMzQxNTUiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2ODIpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2ODIpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjgyIiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2ODIiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY4MiIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY4MiIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjgyIiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\nlet $injector = widgetContext.$scope.$injector;\r\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nlet deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\nlet http = $injector.get(widgetContext.servicesMap.get('http'));\r\nconst urlEntitiesQuery = `/api/entitiesQuery/find`;\r\n\r\nconst pageLink = {\r\n  page: 0,\r\n  pageSize: 10,\r\n  sortOrder: {\r\n    key: {\r\n      key: \"name\",\r\n      type: \"ENTITY_FIELD\",\r\n    },\r\n    direction: \"ASC\"\r\n  } \r\n}\r\n\r\nconst statusLabels = [\r\n  { key: \"isOpen\", label: \"Open\", icon: redMarker },\r\n  { key: \"isLowBattery\", label: \"Low battery\", icon: redMarker },\r\n  { key: \"isClosed\", label: \"Closed\", icon: greenMarker },\r\n  { key: \"isNoSignal\", label: \"No signal\", icon: crossedMarker },\r\n  { key: \"isInactive\", label: \"Inactive\", icon: blueMarker },\r\n  { key: \"isTemporaryDeactivated\", label: \"Temporary deactivated\", icon: orangeMarker },\r\n  { key: \"isNotAssigned\", label: \"Not assigned\", icon: greyMarker }\r\n];\r\n\r\nconst eventTypes = {\r\n  alarmOpen: \"Open\",\r\n  alarmNoSignal: \"No Signal\",\r\n  alarmLowBattery: \"Low battery\",\r\n  alarmClose: \"Close\"\r\n}\r\n\r\nconst statusPriorities = {\r\n    isTemporaryDeactivated: 0,\r\n    isOpen: 1,\r\n    isInactive: 2, \r\n    isLowBattery: 3,\r\n    isNoSignal: 4,\r\n    isNotAssigned: 5,\r\n    isClosed: 6,\r\n    isOnline: 7\r\n}\r\n\r\n\r\nconst tempDeactivationQuery = {\r\n  entityFilter: {\r\n    type: \"singleEntity\",\r\n    singleEntity: {\r\n      entityType: \"ASSET\",\r\n      id: entityId.id\r\n    }\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\"\r\n    }\r\n  ],\r\n  latestValues: [\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"description\"\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"temporaryDeactivation\"\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"createdBy\"\r\n    }\r\n  ],\r\n  pageLink: pageLink\r\n};\r\n\r\nconst relatedHydrantsQuery = {\r\n  filters: [\r\n    {\r\n      relationType: \"Contains\",\r\n      entityTypes: [\r\n        \"ASSET\",\r\n        \"DEVICE\"\r\n      ]\r\n    }\r\n  ],\r\n  parameters: {\r\n    rootId: entityId.id,\r\n    rootType: \"ASSET\",\r\n    direction: \"FROM\",\r\n    relationTypeGroup: \"COMMON\",\r\n    maxLevel: 4,\r\n    fetchLastLevelOnly: false\r\n  }\r\n};\r\n\r\nconst relatedEntitiesQuery = {\r\n  entityFilter: {\r\n    type: \"relationsQuery\",\r\n    rootEntity: {\r\n      entityType: \"ASSET\",\r\n      id: entityId.id\r\n    },\r\n    direction: \"FROM\",\r\n    maxLevel: 1,\r\n    fetchLastLevelOnly: true,\r\n    filters: [\r\n      {\r\n        relationType: \"Muted\",\r\n        entityTypes: [\r\n          \"ASSET\"\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\",\r\n    },\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"type\",\r\n    }\r\n  ],\r\n  latestValues: [],\r\n  pageLink: pageLink\r\n};\r\n\r\nconst hydrantListFilter = {\r\n  entityFilter: {\r\n    type: \"entityList\",\r\n    entityType: \"ASSET\",\r\n    entityList: []\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\"\r\n    }\r\n  ],\r\n  latestValues: [\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"hydrantsBrand\"\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"modelNumber\"\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"longitude\"\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"latitude\"\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"zone\"\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isOpen\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isClosed\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isNoSignal\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isInactive\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isTemporaryDeactivated\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isNotAssigned\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isLowBattery\",\r\n    }\r\n  ],\r\n  pageLink: pageLink\r\n}\r\n\r\nconst dStorzListFilter = {\r\n  entityFilter: {\r\n      type: \"entityList\",\r\n      entityType: \"DEVICE\",\r\n      entityList: []\r\n    },\r\n    entityFields: [\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"name\"\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"serialNumber\"\r\n        },\r\n    ],\r\n    pageLink: pageLink\r\n}\r\n\r\n\r\nfunction isTrue(value) {\r\n  return value !== undefined && value !== null && (value === 'true' || value === true);\r\n}\r\n\r\n\r\nfunction readTelemetryValue(telemetryName) {\r\n  if (telemetryName && telemetryName.value && telemetryName.value !== undefined) {\r\n    return isTrue(telemetryName.value);\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\n\r\nfunction getTranslation(translationText, extraParam = null) {\r\n  translateService = $injector.get(widgetContext.servicesMap.get('translate'));\r\n  let translated = \"\";\r\n  try {\r\n    translated = translateService.instant(translationText, extraParam);\r\n\r\n  } catch (error) {\r\n\r\n  }\r\n  return translated;\r\n}\r\n\r\nfunction unixToHumanReadable(unixTimestamp) {\r\n  if (isNaN(Number(unixTimestamp))) {\r\n    return 'Invalid Timestamp';\r\n  }\r\n\r\n  unixTimestamp = Number(unixTimestamp);\r\n\r\n  if (String(unixTimestamp).length <= 10) {\r\n    unixTimestamp *= 1000; \r\n  }\r\n  const date = new Date(unixTimestamp);\r\n\r\n  const year = date.getFullYear();\r\n  const month = date.toLocaleString('default', { month: 'short' });\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  const hours = String(date.getHours()).padStart(2, '0');\r\n  const minutes = String(date.getMinutes()).padStart(2, '0');\r\n\r\n  const humanReadableDate = ` ${day} ${month} ${year} | ${hours}:${minutes}`;\r\n\r\n  return humanReadableDate;\r\n}\r\n\r\nfunction mapHydrantAssetToDStorz(relationsInfo) {\r\n  const assetToDeviceMapping = {};\r\n\r\n  relationsInfo.forEach((relation) => {\r\n    const fromId = relation.from.id;\r\n    const toId = relation.to.id;\r\n    const toName = relation.toName;\r\n    const fromType = relation.from.entityType;\r\n    const toType = relation.to.entityType;\r\n\r\n    // Create an intermediate mapping from Asset Level 2 to devices\r\n    if (fromType === \"ASSET\" && toType === \"DEVICE\") {\r\n      if (!assetToDeviceMapping[fromId]) {\r\n        assetToDeviceMapping[fromId] = [];\r\n      }\r\n      dStorzListFilter.entityFilter.entityList.push(toId);\r\n      assetToDeviceMapping[fromId].push(toName);\r\n    }\r\n  });\r\n\r\n  const assetLevel1ToDeviceMapping = [];\r\n\r\n  relationsInfo.forEach((relation) => {\r\n    const fromId = relation.from.id;\r\n    const toId = relation.to.id;\r\n    const fromType = relation.from.entityType;\r\n    const toType = relation.to.entityType;\r\n\r\n    if (fromId == entityId.id || toId == entityId.id ) {\r\n      return;\r\n    }\r\n\r\n    // Create a mapping from Asset Level 1 to devices via Asset Level 2\r\n    if (fromType === \"ASSET\" && toType === \"ASSET\") {\r\n      const existingEntry = assetLevel1ToDeviceMapping.find(entry => entry.id === fromId);\r\n      \r\n      if (existingEntry) {\r\n        existingEntry.devices = existingEntry.devices.concat(assetToDeviceMapping[toId] || []);\r\n      } else {\r\n        assetLevel1ToDeviceMapping.push({ id: fromId, devices: assetToDeviceMapping[toId] || [] });\r\n      }\r\n    }\r\n  });\r\n\r\n  return assetLevel1ToDeviceMapping;\r\n}\r\n\r\nfunction findLatestState(timeseriesOfCurrentEntity, telemetryKeys) {\r\n  let latestTelemetry = { telemetryKeyName: \"\", ts: 0, label: \"\", priority: 100 };\r\n  for (let j = 0; j < telemetryKeys.length; ++j) {\r\n    let telemetryKey = telemetryKeys[j];\r\n    const inactiveDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isInactive\", priority: statusPriorities.isInactive, label: statusLabels.isInactive };\r\n    const lowBatteryDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isLowBattery\", priority: statusPriorities.isLowBattery, label: statusLabels.isLowBattery };\r\n    const temporaryDeactivationDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isTemporaryDeactivated\", priority: statusPriorities.isTemporaryDeactivated, label: statusLabels.isTemporaryDeactivated };\r\n    const noSignalDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isNoSignal\", priority: statusPriorities.isNoSignal, label: statusLabels.isNoSignal };\r\n    const notAssignedDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isNotAssigned\", priority: statusPriorities.isNotAssigned };\r\n    const openDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isOpen\", priority: statusPriorities.isOpen, label: statusLabels.isOpen };\r\n    const closedDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isClosed\", priority: statusPriorities.isClosed, label: statusLabels.isClosed };\r\n\r\n    if (timeseriesOfCurrentEntity[telemetryKey].ts > latestTelemetry.ts && timeseriesOfCurrentEntity[telemetryKey].ts > 0) {\r\n      if (telemetryKey == \"isInactive\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = inactiveDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = lowBatteryDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isTemporaryDeactivated\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = temporaryDeactivationDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = noSignalDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isNotAssigned\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = notAssignedDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isOpen\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = openDescriptor;\r\n      } else if (telemetryKey == \"isOpen\" && !isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = closedDescriptor;\r\n      }\r\n    }\r\n    else if (timeseriesOfCurrentEntity[telemetryKey].ts == latestTelemetry.ts && timeseriesOfCurrentEntity[telemetryKey].ts > 0) {\r\n      if (telemetryKey == \"isInactive\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isInactive < latestTelemetry.priority) {\r\n        latestTelemetry = inactiveDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isLowBattery < latestTelemetry.priority) {\r\n        latestTelemetry = lowBatteryDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isTemporaryDeactivated\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isTemporaryDeactivated < latestTelemetry.priority) {\r\n        latestTelemetry = temporaryDeactivationDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isNoSignal < latestTelemetry.priority) {\r\n        latestTelemetry = noSignalDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isNotAssigned\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isNotAssigned < latestTelemetry.priority) {\r\n        latestTelemetry = notAssignedDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isOpen\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isOpen < latestTelemetry.priority) {\r\n        latestTelemetry = openDescriptor;\r\n      } else if (telemetryKey == \"isOpen\" && !isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isClosed < latestTelemetry.priority) {\r\n        latestTelemetry = closedDescriptor;\r\n      }\r\n    }\r\n  }\r\n  return latestTelemetry;\r\n}\r\n\r\nfunction checkGoogleMaps(vm) {\r\n  if (window.google && window.google.maps) {\r\n    initMap(true, vm);\r\n  } else {\r\n    const script = document.createElement('script');\r\n    script.type = 'text/javascript';\r\n    script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyDE07XHeCdHUJci4OLOcRHGJZyAQc8SYUc';\r\n\r\n    // Listen for the script load event and initialize map after fully loaded\r\n    script.addEventListener('load', function () {\r\n      initMap(false, vm);\r\n    });\r\n\r\n    // Append the script tag to the document's head\r\n    document.head.appendChild(script);\r\n  }\r\n}\r\n\r\nfunction initMap(loadWithTimeout, vm) {\r\n  setTimeout(() => {\r\n    vm.map = new google.maps.Map(document.getElementById('temporary-deactivation-map-container'), {\r\n      center: { lat: 46.8182, lng: 8.2275 }, // Switzerland's approximate geographic center\r\n      zoom: 7, \r\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n      mapTypeControl: false,\r\n      fullscreenControl: false,\r\n      streetViewControl: false,\r\n      controlSize: 25,\r\n      zoomControl: true,\r\n      zoomControlOptions: {\r\n        position: google.maps.ControlPosition.TOP_LEFT\r\n      }\r\n    })\r\n    const bounds = new google.maps.LatLngBounds();\r\n\r\n     vm.hydrantLocations.forEach((location) => {\r\n      const marker = new google.maps.Marker({\r\n        position: {lat: location.lat, lng: location.lng},\r\n        map: vm.map,\r\n        icon: {\r\n          url: location.icon,\r\n          scaledSize: new google.maps.Size(32, 32) \r\n        }\r\n      });\r\n\r\n      bounds.extend(marker.getPosition());\r\n      if(vm.hydrantLocations.length == 1) {\r\n          vm.map.setCenter(marker.getPosition());\r\n          vm.map.setZoom(11);\r\n      }\r\n    });\r\n    \r\n    if(vm.hydrantLocations.length > 1) {\r\n         vm.map.fitBounds(bounds);\r\n    }\r\n\r\n  }, 100)\r\n}\r\n\r\nfunction fillHydrantTable(dStorzNameAndSerialNumbers, mappedHydrants, vm) {\r\n  http.post(urlEntitiesQuery, hydrantListFilter).pipe().subscribe((hydrantDetails) => {\r\n    mappedHydrants.forEach((hydrant) => {\r\n      const matchingEntity = hydrantDetails.data.find((entity) => entity.entityId.id === hydrant.id);\r\n      if (matchingEntity) {\r\n        const telemetryKeys = Object.keys(matchingEntity.latest.TIME_SERIES);\r\n        const statusTelemetryKeys = telemetryKeys.filter(item => item.startsWith(\"is\"));\r\n        let timeseriesOfCurrentEntity = matchingEntity.latest.TIME_SERIES;\r\n        let latestTelemetry = findLatestState(timeseriesOfCurrentEntity, statusTelemetryKeys);\r\n\r\n        hydrant.brand = matchingEntity.latest.ATTRIBUTE.hydrantsBrand.value ?? '--';\r\n        hydrant.model = matchingEntity.latest.ATTRIBUTE.modelNumber.value ?? '--';\r\n        hydrant.zone = matchingEntity.latest.ATTRIBUTE.zone.value ?? '--';\r\n\r\n        hydrant.deviceSerialNumbers = hydrant.devices.map(deviceName => dStorzNameAndSerialNumbers.find(dStorzNameAndSerialNumber => dStorzNameAndSerialNumber.name == deviceName).serialNumber); \r\n        console.debug(hydrant.deviceSerialNumbers);\r\n        vm.hydrantDataSource.push({\r\n          selectedHydrants: matchingEntity.latest.ENTITY_FIELD.name.value,\r\n          brand: hydrant.brand,\r\n          model: hydrant.model,\r\n          dStorz: hydrant.deviceSerialNumbers.length ? hydrant.deviceSerialNumbers.toString().replaceAll(\",\", \"\\n\") : '--',\r\n          zone: hydrant.zone\r\n        }\r\n        );\r\n        let resultTelemetryKey = latestTelemetry.telemetryKeyName ? latestTelemetry.telemetryKeyName : \"isNotAssigned\";\r\n        const statusDescriptor = statusLabels.find(item => item.key === resultTelemetryKey);\r\n        vm.hydrantLocations.push({\r\n          lat: Number(matchingEntity.latest.ATTRIBUTE.latitude.value),\r\n          lng: Number(matchingEntity.latest.ATTRIBUTE.longitude.value),\r\n          icon: statusDescriptor.icon\r\n        })\r\n      }\r\n    });\r\n    vm.hydrantDataSourceReady = true;\r\n\r\n    checkGoogleMaps(vm);\r\n  })\r\n}\r\n\r\n\r\nopenSideNavDrawer();\r\n\r\nfunction openSideNavDrawer() {\r\n\r\n  customDialog.customDialog(htmlTemplate,\r\n    popupDialogController).subscribe();\r\n  setTimeout(function () {\r\n    document.getElementById(\"popup-dialog\").classList.remove(\"closed\");\r\n  }, 10);\r\n}\r\n\r\nfunction popupDialogController(instance) {\r\n  let vm = instance;\r\n  vm.hydrantDataSourceReady = false;\r\n  vm.hydrantLocations = [];\r\n\r\n  vm.cancel = function () {\r\n    document.getElementById(\"popup-dialog\").classList.add(\"closed\");\r\n    vm.dialogRef.close(null);\r\n  };\r\n\r\n  vm.displayedColumns = ['selectedHydrants', 'brand', 'model', 'dStorz', 'zone'];\r\n\r\n\r\n  http.post(urlEntitiesQuery, tempDeactivationQuery).pipe().subscribe((tempDeactivationEntity) => {\r\n    if (tempDeactivationEntity.data.length) {\r\n      let tempDeactivationObject = tempDeactivationEntity.data[0];\r\n      let tempDeactivationDetails = tempDeactivationObject.latest.ATTRIBUTE.temporaryDeactivation.value ? JSON.parse(tempDeactivationObject.latest.ATTRIBUTE.temporaryDeactivation.value) : null ;\r\n      vm.tempDeactivationReason = tempDeactivationObject.latest.ATTRIBUTE.description.value;\r\n      let notificationMuteStartDate = tempDeactivationDetails?.deactivationState.fromDate;\r\n      let notificationMuteEndDate = tempDeactivationDetails?.deactivationState.toDate;\r\n      vm.notificationMuteStartDateFormatted = unixToHumanReadable(notificationMuteStartDate);\r\n      vm.notificationMuteEndDateFormatted = unixToHumanReadable(notificationMuteEndDate);\r\n      vm.createdBy = tempDeactivationObject.latest.ATTRIBUTE.createdBy.value;\r\n\r\n\r\n      let enabledEvents = [];\r\n      if (tempDeactivationDetails?.eventType.alarmLowBattery) {\r\n        enabledEvents.push(eventTypes.alarmLowBattery);\r\n      }\r\n      if (tempDeactivationDetails?.eventType.alarmOpen) {\r\n        enabledEvents.push(eventTypes.alarmOpen);\r\n      }\r\n      if (tempDeactivationDetails?.eventType.alarmNoSignal) {\r\n        enabledEvents.push(eventTypes.alarmNoSignal);\r\n      }\r\n      if (tempDeactivationDetails?.eventType.alarmClose) {\r\n        enabledEvents.push(eventTypes.alarmClose);\r\n      }\r\n      vm.eventType = enabledEvents.join(', ');\r\n    }\r\n  })\r\n\r\n  http.post(urlEntitiesQuery, relatedEntitiesQuery).pipe().subscribe((relatedEntities) => {\r\n    if (relatedEntities.data.length) {\r\n      let relatedEntitiesArray = relatedEntities.data;\r\n      //  let relatedHydrants = relatedEntitiesArray.filter(entity => entity.latest.ENTITY_FIELD.type.value == \"hydrant\");\r\n      let relatedZones = relatedEntitiesArray.filter(entity => entity.latest.ENTITY_FIELD.type.value == \"zone\");\r\n      let relatedZoneIds = relatedZones.map(entity => entity.entityId.id);\r\n      http.post(\"/api/relations/info\", relatedHydrantsQuery).pipe().subscribe((relatedHydrantsAndZones) => {\r\n        //removing all zone related relations\r\n        const zoneIds = new Set(relatedZones.map(zone => zone.entityId.id));\r\n        const relatedHydrantsRelations = relatedHydrantsAndZones.filter(relation => !zoneIds.has(relation.from.id) && !zoneIds.has(relation.to.id));\r\n        vm.hydrantDataSource = [];\r\n        let mappedHydrants = mapHydrantAssetToDStorz(relatedHydrantsRelations);\r\n        let allRelatedAssetIds = relatedHydrantsRelations.map(hydrant => hydrant.to.id);\r\n        const hydrantAssetIds = mappedHydrants.map(hydrant => hydrant.id);\r\n\r\n        hydrantListFilter.entityFilter.entityList = hydrantAssetIds;\r\n        if (hydrantAssetIds.length > 0) {\r\n          if(dStorzListFilter.entityFilter.entityList.length > 0) {\r\n            http.post(urlEntitiesQuery, dStorzListFilter).pipe().subscribe((dStorzDetails) => { \r\n              const dStorzNameAndSerialNumbers = dStorzDetails.data.map(dStorzDetail => ({name: dStorzDetail.latest.ENTITY_FIELD.name.value, serialNumber: dStorzDetail.latest.ATTRIBUTE.serialNumber.value}));\r\n\r\n              fillHydrantTable(dStorzNameAndSerialNumbers, mappedHydrants, vm);\r\n            })\r\n          } else {\r\n            dStorzNameAndSerialNumbers = [];\r\n            fillHydrantTable(dStorzNameAndSerialNumbers, mappedHydrants, vm);\r\n          }\r\n        } else {\r\n          checkGoogleMaps(vm);\r\n        }\r\n\r\n      });\r\n    } else {\r\n      checkGoogleMaps(vm);\r\n    }\r\n  })\r\n\r\n  vm.setAllTranslations = function () {\r\n    vm.dialogTitle = getTranslation(\"hawle-dashboard.hydrant.hydrant-info\");\r\n    vm.hydrantNumber = getTranslation(\"hawle-dashboard.hydrant.hydrant-number\");\r\n    vm.brand = getTranslation(\"hawle-dashboard.hydrant.brand\");\r\n    vm.model = getTranslation(\"hawle-dashboard.hydrant.model\");\r\n    vm.temporaryDeactivation = getTranslation(\"hawle-dashboard.temporary-deactivation\");\r\n    vm.outletInformation = getTranslation(\"hawle-dashboard.hydrant.outlet-information\");\r\n    vm.reason = getTranslation(\"hawle-dashboard.reason\");\r\n    vm.time = getTranslation(\"hawle-dashboard.time\");\r\n    vm.createdByLabel = getTranslation(\"hawle-dashboard.created-by\");\r\n    vm.assignedDStorz = getTranslation(\"hawle-dashboard.hydrant.assigned-dstorz\");\r\n    vm.statusTimestamp = getTranslation(\"hawle-dashboard.hydrant.status-timestamp\");\r\n    vm.routeTo = getTranslation(\"hawle-dashboard.hydrant.route-to\");\r\n    vm.locationLabel = getTranslation(\"hawle-dashboard.location\");\r\n    vm.zoneLabel = getTranslation(\"hawle-dashboard.zone\");\r\n    vm.temporaryDeactivationInfo = getTranslation(\"hawle-dashboard.temporary-deactivation-info\");\r\n    vm.eventTypeLabel = getTranslation(\"hawle-dashboard.event-type\");\r\n    vm.unconfirmedAlarms = getTranslation(\"hawle-dashboard.hydrant.unconfirmed-alarms\", { alarmCount: 10 });\r\n    vm.fromLabel = getTranslation(\"hawle-dashboard.from\");\r\n    vm.toLabel = getTranslation(\"hawle-dashboard.to\");\r\n    vm.selectedHydrantsLabel = getTranslation(\"hawle-dashboard.selected-hydrants\");\r\n  };\r\n\r\n  vm.setAllTranslations();\r\n}\r\n",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "0fa2601e-dadd-a240-1db6-23536498b020"
              }
            ]
          },
          "margin": "",
          "useCustomQueryService": true,
          "customQuery": "{\n  \"translateColumnName\": true\n}",
          "useColumnMapping": true,
          "columnMapping": "[\n  {\n    \"type\": \"ENTITY_FIELD\",\n    \"key\": \"name\",\n    \"columnName\": \"hawle-dashboard.name\",\n    \"defaultColumnName\": \"DEV-EUI\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"description\",\n    \"columnName\": \"hawle-dashboard.deactivation-reason\",\n    \"defaultColumnName\": \"Deactivation reason\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"fromDate\",\n    \"columnName\": \"hawle-dashboard.from\",\n    \"defaultColumnName\": \"From\",\n    \"humanReadableTs\": true,\n    \"tsPattern\": \"dd MMMM YYYY, HH:mm z\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"toDate\",\n    \"columnName\": \"hawle-dashboard.to\",\n    \"defaultColumnName\": \"To\",\n    \"humanReadableTs\": true,\n    \"tsPattern\": \"dd MMMM YYYY, HH:mm z\"\n  },\n  {\n    \"type\": \"ENTITY_FIELD\",\n    \"key\": \"createdTime\",\n    \"columnName\": \"hawle-dashboard.created-time\",\n    \"defaultColumnName\": \"Created time\",\n    \"humanReadableTs\": true,\n    \"tsPattern\": \"dd MMMM YYYY, HH:mm z\"\n  }\n]"
        },
        "row": 0,
        "col": 0,
        "id": "ce60fbd9-9e40-9724-ad58-7d0c30f52c6f"
      },
      "1709baca-3220-86cd-2d98-75812f4487bd": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".buttons-container {\n    height: 100%;\n    display: flex;\n    align-items: end;\n}\n\n.btn {\n    border-radius: 8px;\n    padding: 0px;\n    gap: 10px;\n    width: calc(50% - 5px);\n    height: 50%;\n    background: #fff;\n/*    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);*/\n    border: 0px !important;\n    cursor: pointer;\n    margin: 5px;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #009FE3;\n}\n\n.btn.btn-selected {\n    background: #009FE3;\n}\n\n.btn-selected .btn-text {\n    color: #fff;\n}\n",
            "cardHtml": "<div class=\"buttons-container\" fXflex fxLayout=\"row\" fxLayoutAlign=\"space-between end\" >\n    <button id='button-hydrants' type=\"button\" class=\"btn btn-selected\">\n        <div class=\"btn-text\">\n            {i18n:hawle-dashboard.overview-of-all-hydrants}\n        </div>\n    </button>\n    <button id='button-alarms' type=\"button\" class=\"btn\">\n        <div class=\"btn-text\">\n           {i18n:hawle-dashboard.overview-of-all-alarms}\n        </div>\n    </button>\n</div>"
          },
          "title": "New HTML Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "button-hydrants",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('default');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "05826cdd-e270-b95f-2ad3-0845e2414cd3"
              },
              {
                "name": "button-alarms",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('home_alarm_view');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "aedd3d5b-afc1-44d9-b2a7-317437320402"
              }
            ]
          }
        },
        "row": 0,
        "col": 0,
        "id": "1709baca-3220-86cd-2d98-75812f4487bd"
      },
      "7c93901c-d903-148b-8a02-d2c923adfe2e": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".buttons-container {\n    height: 100%;\n    display: flex;\n    align-items: end;\n}\n\n.btn {\n    border-radius: 8px;\n    padding: 0px;\n    gap: 10px;\n    width: calc(50% - 5px);\n    height: 50%;\n    background: #fff;\n/*    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);*/\n    border: 0px !important;\n    cursor: pointer;\n    margin: 5px;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #009FE3;\n}\n\n.btn.btn-selected {\n    background: #009FE3;\n}\n\n.btn-selected .btn-text {\n    color: #fff;\n}\n",
            "cardHtml": "<div class=\"buttons-container\" fXflex fxLayout=\"row\" fxLayoutAlign=\"space-between end\" >\n    <button id='button-hydrants' type=\"button\" class=\"btn\">\n        <div class=\"btn-text\">\n            {i18n:hawle-dashboard.overview-of-all-hydrants}\n        </div>\n    </button>\n    <button id='button-alarms' type=\"button\" class=\"btn btn-selected\">\n        <div class=\"btn-text\">\n           {i18n:hawle-dashboard.overview-of-all-alarms}\n        </div>\n    </button>\n</div>"
          },
          "title": "New HTML Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "button-hydrants",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('default');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "b5b6242d-5f53-b654-81a8-0b04bf46b935"
              },
              {
                "name": "button-alarms",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('home_alarm_view');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "9e3aad4e-083e-a5ef-f5d4-012d6e2699dd"
              }
            ]
          }
        },
        "row": 0,
        "col": 0,
        "id": "7c93901c-d903-148b-8a02-d2c923adfe2e"
      },
      "d136a63b-95af-76fd-2f6a-b3f3b4289496": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    background: #009FE3;\n    width: 100%;\n    height: 100%;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #fff;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:integraTranslations.menus.home,Home}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('analytics');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "d136a63b-95af-76fd-2f6a-b3f3b4289496"
      },
      "05614578-5db8-2af7-a6aa-5258cb4dbc0a": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.home,Home}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('default');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "05614578-5db8-2af7-a6aa-5258cb4dbc0a"
      },
      "5fba6445-9b81-8cb9-1dcb-bb315239c2f0": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #FFF;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.zones, Zone}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_zone');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "5fba6445-9b81-8cb9-1dcb-bb315239c2f0"
      },
      "9073d270-e707-6771-e646-19aebe15237f": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.d-storz, D-Storz}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_dstorz');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "9073d270-e707-6771-e646-19aebe15237f"
      },
      "4bcb63ca-5fe1-cabd-f1ae-5a200e716188": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.hydrants, Hydrants }\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_hydrants');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "4bcb63ca-5fe1-cabd-f1ae-5a200e716188"
      },
      "a754e896-f74e-96eb-bb9c-26c424693a45": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.user-management, User Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_users');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "a754e896-f74e-96eb-bb9c-26c424693a45"
      },
      "7ff56556-8e7c-c0f1-47e2-4dba5f571e46": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.alarm-management, Alarm Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "7ff56556-8e7c-c0f1-47e2-4dba5f571e46"
      },
      "98beea11-9156-36fd-b3a2-f99859dab7b5": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.alarm-management, Alarm Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "98beea11-9156-36fd-b3a2-f99859dab7b5"
      },
      "926190cf-913a-b319-a106-ed763d318044": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.alarm-management, Alarm Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "926190cf-913a-b319-a106-ed763d318044"
      },
      "56b95217-fb6f-717e-3c59-cbc3cd6bf9f1": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #009FE3;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #fff;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.alarm-management, Alarm Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "56b95217-fb6f-717e-3c59-cbc3cd6bf9f1"
      },
      "7d8233d2-e9cb-13d9-04c3-a3e9e0ac499b": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.alarm-management, Alarm Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "7d8233d2-e9cb-13d9-04c3-a3e9e0ac499b"
      },
      "1313106f-9f61-b401-f05e-a145e63183f1": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 86400000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": true,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "displayEntityName": false,
            "displayEntityType": false,
            "enableSelectColumnDisplay": true,
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "displayEntityLabel": false,
            "useRowStyleFunction": false,
            "entitiesTitle": "Users",
            "enableExportDataDisplay": true
          },
          "title": "Users",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "b1c13d37-1982-e4ab-6bbc-3d274f7ecf6a",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "firstName",
                  "type": "entityField",
                  "label": "First name",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.07115478168147371,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "lastName",
                  "type": "entityField",
                  "label": "Last name",
                  "color": "#4caf50",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.7463890771879576,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "email",
                  "type": "entityField",
                  "label": "Email",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.26877710515291486,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "role",
                  "type": "attribute",
                  "label": "Role",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return JSON.parse(value)[0].name\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.7508120029153538,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "createdTime",
                  "type": "entityField",
                  "label": "Created time",
                  "color": "#607d8b",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.5762950698788647,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "actions": {
            "actionCellButton": [
              {
                "name": "Edit User",
                "icon": "edit",
                "useShowWidgetActionFunction": false,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nconst translationService = $injector.get(widgetContext\n    .servicesMap.get('translate'))\n\nif (checkPermission()) {\n    const param = entityId;\n    param.name = entityName;\n    openDashboardState(param, 'edit_user');\n} else {\n    widgetContext.showToast('warn', getTranslation(\n        'hawle-dashboard.permission-denied'\n    ), 2000, 'top', 'left');\n}\n\nfunction openDashboardState(element, statedId) {\n    // widgetContext.stateController.resetState();\n    var currentState = widgetContext.stateController\n        .getStateId();\n\n    var params = {\n        entityLabel: element.name,\n        entityName: element.name,\n        entityId: {\n            id: element.id,\n            entityType: element.entityType\n        }\n    };\n\n    if (currentState !== statedId) {\n        widgetContext.stateController.openState(statedId, params);\n    }\n}\n\nfunction checkPermission() {\n    const permissions = widgetContext.authService\n        .allowedPermissions;\n\n    const genericPermissions = permissions\n        .userPermissions.genericPermissions;\n\n    if ((genericPermissions &&\n        genericPermissions.hasOwnProperty(\"ALL\") &&\n        genericPermissions[\"ALL\"] &&\n        genericPermissions[\"ALL\"].length &&\n        genericPermissions[\"ALL\"].includes(\"ALL\"))\n    ) {\n        return true;\n    }\n    return false;\n}\n\nfunction getTranslation(translationText) {\n    let translated = translationText;\n    try {\n        translated = translationService.instant(\n            translationText);\n    } catch (error) {\n\n    }\n    return translated;\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "82a9abf2-af09-48f2-5c3d-167ebe6c9265"
              },
              {
                "name": "Delete User",
                "icon": "delete",
                "useShowWidgetActionFunction": true,
                "showWidgetActionFunction": "console.debug(widgetContext)\n\nreturn true;",
                "type": "custom",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\nlet userService = $injector.get(widgetContext.servicesMap.get('userService'));\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\nlet rxjs = widgetContext.rxjs;\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\n\nif (checkPermission()) {\n    openDeleteEntityDialog();\n} else {\n    widgetContext.showToast('warn', getTranslation(\n        'hawle-dashboard.permission-denied'\n    ), 2000, 'top', 'left');\n}\n\nfunction checkPermission() {\n    const permissions = widgetContext.authService\n        .allowedPermissions;\n\n    const genericPermissions = permissions\n        .userPermissions.genericPermissions;\n\n    if ((genericPermissions &&\n        genericPermissions.hasOwnProperty(\"ALL\") &&\n        genericPermissions[\"ALL\"] &&\n        genericPermissions[\"ALL\"].length &&\n        genericPermissions[\"ALL\"].includes(\"ALL\"))\n    ) {\n        return true;\n    }\n    return false;\n}\n\nfunction showToaster(message, isErrorType=false) {\n    const translatedMessage =  translationService.instant(message);\n    if(isErrorType) {\n        widgetContext.showErrorToast(translatedMessage);\n    } else {\n        widgetContext.showSuccessToast(translatedMessage);\n    }\n}\n\nfunction openDeleteEntityDialog() {\n    const deleteText = getTranslation('hawle-dashboard.delete');\n    const cancelText = getTranslation('hawle-dashboard.cancel');\n    const contentText = getTranslation('hawle-dashboard.dialog-content');\n    \n    let title = deleteText + \" \" + entityId.entityType.toLowerCase() + ' ' +\n                entityName;\n    let content = contentText + ' ' + entityName + '?';\n    dialogs.confirm(title, content, cancelText, deleteText).subscribe(\n        function(result) {\n            if (result) {\n                deleteEntity();\n            }\n        }\n    );\n}\n\nfunction getTranslation(translationText) {\n    widgetContext.$scope.translateService = widgetContext.$scope.$injector.get(widgetContext.servicesMap.get('translate'));\n    let translated = translationText;\n    try {\n        translated = widgetContext.$scope\n                .translateService.instant(\n                    translationText);\n    } catch (error) {\n        \n    }\n    return translated;\n}\n\nfunction deleteEntity() {\n    deleteEntityObservable(entityId).subscribe(\n        function success() {\n            showToaster('hawle-dashboard.user-deleted-successfully');\n            widgetContext.updateAliases();\n        },\n        function fail() {\n            showErrorDialog();\n        }\n    );\n}\n\nfunction deleteEntityObservable(entityId) {\n    return getServerScopes(entityId.entityType, entityId.id).pipe(rxjs.mergeMap(userServerScopes=> \n        getMultipleEntitiesFeildsByIds( getAlarmDefinationRealtionsFromServerScopes(userServerScopes).map(alarmDefinationValue => alarmDefinationValue.id), 'ASSET', [], ['users'])\n            .pipe(rxjs.mergeMap((alarmDefinationList) => rxjs.forkJoin(\n                [...alarmDefinationList.filter((alarmDefination) => Object.keys(alarmDefination).includes('users')).map(_alarmDefination => ({..._alarmDefination, users: JSON.parse(_alarmDefination.users)}))\n                    .map((alarmDefination) => saveServerAttributes({users: alarmDefination.users.filter((user) => user.id !== entityId.id)}, 'ASSET', alarmDefination.id.id)), \n                    userService.deleteUser(entityId.id)\n                ]\n                )))));\n}\n\nfunction showErrorDialog() {\n    let title = 'Error';\n    let content = 'An error occurred while deleting the entity. Please try again.';\n    dialogs.alert(title, content, 'CLOSE').subscribe(\n        function(result) {}\n    );\n}\nfunction getServerScopes(entityType, entityId) {\n    let url = `/api/plugins/telemetry/${entityType}/${entityId}/values/attributes/SERVER_SCOPE`;\n    return http.get(url);\n}\n\nfunction getAlarmDefinationRealtionsFromServerScopes(serverScopes) {\n    return serverScopes.filter((serverScope) => {\n        if (serverScope.key.includes(\"alarmDefinition\")) {\n            return true;\n        }\n        return false;\n    }).map((serverScope) => {\n        return serverScope.value;\n    });\n}\nfunction saveServerAttributes(serverAttributes, entityType, EntityId) {\n    let url = `/api/plugins/telemetry/${entityType}/${EntityId}/SERVER_SCOPE`;\n    return http.post(url, serverAttributes);\n}\nfunction getMultipleEntitiesFeildsByIds(entityIds, entityTYpe, entityFields = [], attributeFields = []) {\n    const payload = {\n        \"entityFields\": [\n            \n        ],\n        \"latestValues\": [\n            \n        ],\n        \"entityFilter\": {\n            \"resolveMultiple\":true,\n            \"entityType\": entityTYpe,\n            \"type\": \"entityList\",\n            \"entityList\": entityIds\n        },\n        \"pageLink\": {\n            \"dynamic\": false,\n            \"pageSize\": 1000,\n            \"page\": 0,\n            \"textSearch\": null,\n            \"sortOrder\": {\n                \"key\": {\n                    \"type\": \"ENTITY_FIELD\",\n                    \"key\": \"createdTime\"\n                },\n                \"direction\": \"DESC\"\n            }\n        }\n    }\n    if (!Array.isArray(entityIds) || entityIds.length === 0) {\n        return rxjs.of([]);\n    }\n    entityFields.forEach((field) => { payload.entityFields.push({\"type\": \"ENTITY_FIELD\", \"key\": field }) });\n    attributeFields.forEach((field) => { payload.latestValues.push({ \"type\": \"SERVER_ATTRIBUTE\", \"key\": field }) });\n    return http.post(\"/api/entitiesQuery/find\", payload).pipe(rxjs.map((response) => {\n        const result = [];\n        if (response.totalElements === 0) {\n          return result;\n        }\n        response.data.forEach((entity) => {\n            const res = {};\n            if (!!entity.latest.SERVER_ATTRIBUTE) {\n                Object.keys(entity.latest.SERVER_ATTRIBUTE).forEach((key) => {\n                    res[key] = entity.latest.SERVER_ATTRIBUTE[key].value;\n                });\n            }\n            if (entity.latest.ENTITY_FIELD) {\n                Object.keys(entity.latest.ENTITY_FIELD).forEach((key) => {\n                    res[key] = entity.latest.ENTITY_FIELD[key].value;\n                });\n            }\n            res.id = entity.entityId;\n            result.push(res);\n        });\n        return result;\n    }));\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "26520484-7c0e-540b-54d0-36c4f5c8d4e3"
              }
            ],
            "headerButton": [
              {
                "name": "Add User",
                "icon": "add",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nconst translationService = $injector.get(widgetContext\n    .servicesMap.get('translate'))\n\nif (checkPermission()) {\n    openDashboardState('add_user');\n} else {\n    widgetContext.showToast('warn', getTranslation(\n        'hawle-dashboard.permission-denied'\n    ), 2000, 'top', 'left');\n}\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.openState(statedId,\n            params);\n    }\n}\n\nfunction checkPermission() {\n    const permissions = widgetContext.authService\n        .allowedPermissions;\n\n    const genericPermissions = permissions\n        .userPermissions.genericPermissions;\n\n    if ((genericPermissions &&\n        genericPermissions.hasOwnProperty(\"ALL\") &&\n        genericPermissions[\"ALL\"] &&\n        genericPermissions[\"ALL\"].length &&\n        genericPermissions[\"ALL\"].includes(\"ALL\"))\n    ) {\n        return true;\n    }\n    return false;\n}\n\nfunction getTranslation(translationText) {\n    let translated = translationText;\n    try {\n        translated = translationService.instant(\n            translationText);\n    } catch (error) {\n\n    }\n    return translated;\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "34ee091e-4bbf-3904-1e81-2572fbc1ae3e"
              }
            ],
            "rowClick": []
          },
          "showTitleIcon": false,
          "titleTooltip": "",
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "useCustomQueryService": true,
          "customQuery": "{\n  \"translateColumnName\": true\n}",
          "useColumnMapping": true,
          "columnMapping": "[\n  {\n    \"type\": \"ENTITY_FIELD\",\n    \"key\": \"firstName\",\n    \"columnName\": \"hawle-dashboard.first-name\",\n    \"defaultColumnName\": \"First name\"\n  },\n  {\n    \"type\": \"ENTITY_FIELD\",\n    \"key\": \"lastName\",\n    \"columnName\": \"hawle-dashboard.last-name\",\n    \"defaultColumnName\": \"Last name\"\n  },\n  {\n    \"type\": \"ENTITY_FIELD\",\n    \"key\": \"email\",\n    \"columnName\": \"hawle-dashboard.email\",\n    \"defaultColumnName\": \"Email\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"role\",\n    \"columnValueType\": \"JSON\",\n    \"columnJsonValueMap\": {\n      \"name\": {\n        \"columnName\": \"hawle-dashboard.role\",\n        \"defaultColumnName\": \"Role\"\n      }\n    }\n  }\n]"
        },
        "row": 0,
        "col": 0,
        "id": "1313106f-9f61-b401-f05e-a145e63183f1"
      },
      "8ab51863-328e-59f0-a81a-ed280cd2ad28": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 86400000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": true,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "displayEntityName": false,
            "displayEntityType": false,
            "enableSelectColumnDisplay": false,
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "displayEntityLabel": false,
            "useRowStyleFunction": false,
            "entitiesTitle": "{i18n:hawle-dashboard.overview-of-all-zones}",
            "enableExportDataDisplay": false
          },
          "title": "{i18n:hawle-dashboard.overview-of-all-zones}",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "823fc6e4-b7e0-35d0-05c3-23e30810c28a",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "{i18n:hawle-dashboard.name}",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled"
                  },
                  "_hash": 0.5414943069858966,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "createdTime",
                  "type": "entityField",
                  "label": "Created time",
                  "color": "#4caf50",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.5179467903133264,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "actions": {
            "actionCellButton": [
              {
                "name": "{i18n:hawle-dashboard.edit}",
                "icon": "edit",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "edit_zone",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "c18168fa-ce65-7b97-822f-9a07a6f4b5ba"
              },
              {
                "name": "{i18n:hawle-dashboard.delete}",
                "icon": "delete",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<!--=======================================================================-->\r\n<!--=====  There are two example templates: for edit and add entity   =====-->\r\n<!--=======================================================================-->\r\n<!--========================  Edit entity example  ========================-->\r\n<!--=======================================================================-->\r\n<!-- -->\r\n<!--<form #editEntityForm=\"ngForm\" [formGroup]=\"editEntityFormGroup\"-->\r\n<!--      (ngSubmit)=\"save()\"  class=\"edit-entity-form\">-->\r\n<!--    <mat-toolbar fxLayout=\"row\" color=\"primary\">-->\r\n<!--        <h2>Edit {{entityType.toLowerCase()}} {{entityName}}</h2>-->\r\n<!--        <span fxFlex></span>-->\r\n<!--        <button mat-icon-button (click)=\"cancel()\" type=\"button\">-->\r\n<!--            <mat-icon class=\"material-icons\">close</mat-icon>-->\r\n<!--        </button>-->\r\n<!--    </mat-toolbar>-->\r\n<!--    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">-->\r\n<!--    </mat-progress-bar>-->\r\n<!--    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>-->\r\n<!--    <div mat-dialog-content fxLayout=\"column\">-->\r\n<!--        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--            <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                <mat-label>Entity Name</mat-label>-->\r\n<!--                <input matInput formControlName=\"entityName\" required readonly=\"\">-->\r\n<!--            </mat-form-field>-->\r\n<!--            <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                <mat-label>Entity Label</mat-label>-->\r\n<!--                <input matInput formControlName=\"entityLabel\">-->\r\n<!--            </mat-form-field>-->\r\n<!--        </div>-->\r\n<!--        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--            <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                <mat-label>Entity Type</mat-label>-->\r\n<!--                <input matInput formControlName=\"entityType\" readonly>-->\r\n<!--            </mat-form-field>-->\r\n<!--            <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                <mat-label>Type</mat-label>-->\r\n<!--                <input matInput formControlName=\"type\" readonly>-->\r\n<!--            </mat-form-field>-->\r\n<!--        </div>-->\r\n<!--        <div formGroupName=\"attributes\" fxLayout=\"column\">-->\r\n<!--            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--                <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                    <mat-label>Latitude</mat-label>-->\r\n<!--                    <input type=\"number\" step=\"any\" matInput formControlName=\"latitude\">-->\r\n<!--                </mat-form-field>-->\r\n<!--                <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                    <mat-label>Longitude</mat-label>-->\r\n<!--                    <input type=\"number\" step=\"any\" matInput formControlName=\"longitude\">-->\r\n<!--                </mat-form-field>-->\r\n<!--            </div>-->\r\n<!--            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--                <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                    <mat-label>Address</mat-label>-->\r\n<!--                    <input matInput formControlName=\"address\">-->\r\n<!--                </mat-form-field>-->\r\n<!--                <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                    <mat-label>Owner</mat-label>-->\r\n<!--                    <input matInput formControlName=\"owner\">-->\r\n<!--                </mat-form-field>-->\r\n<!--            </div>-->\r\n<!--            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--                <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                    <mat-label>Integer Value</mat-label>-->\r\n<!--                    <input type=\"number\" step=\"1\" matInput formControlName=\"number\">-->\r\n<!--                    <mat-error *ngIf=\"editEntityFormGroup.get('attributes.number').hasError('pattern')\">-->\r\n<!--                        Invalid integer value.-->\r\n<!--                    </mat-error>-->\r\n<!--                </mat-form-field>-->\r\n<!--                <div class=\"boolean-value-input\" fxLayout=\"column\" fxLayoutAlign=\"center start\" fxFlex>-->\r\n<!--                    <label class=\"checkbox-label\">Boolean Value</label>-->\r\n<!--                    <mat-checkbox formControlName=\"booleanValue\" style=\"margin-bottom: 40px;\">-->\r\n<!--                        {{ (editEntityFormGroup.get('attributes.booleanValue').value ? \"value.true\" : \"value.false\") | translate }}-->\r\n<!--                    </mat-checkbox>-->\r\n<!--                </div>-->\r\n<!--            </div>-->\r\n<!--        </div>-->\r\n<!--        <div class=\"relations-list old-relations\">-->\r\n<!--            <div class=\"mat-body-1\" style=\"padding-bottom: 10px; color: rgba(0,0,0,0.57);\">Relations</div>-->\r\n<!--            <div class=\"body\" [fxShow]=\"oldRelations().length\">-->\r\n<!--                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" formArrayName=\"oldRelations\" -->\r\n<!--                     *ngFor=\"let relation of oldRelations().controls; let i = index;\">-->\r\n<!--                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">-->\r\n<!--                        <div fxFlex fxLayout=\"column\">-->\r\n<!--                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">-->\r\n<!--                                    <mat-label>Direction</mat-label>-->\r\n<!--                                    <mat-select formControlName=\"direction\" name=\"direction\">-->\r\n<!--                                        <mat-option *ngFor=\"let direction of entitySearchDirection | keyvalue\" [value]=\"direction.value\">-->\r\n<!--                                            {{ (\"relation.search-direction.\" + direction.value) | translate}}-->\r\n<!--                                        </mat-option>-->\r\n<!--                                    </mat-select>-->\r\n<!--                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">-->\r\n<!--                                        Relation direction is required.-->\r\n<!--                                    </mat-error>-->\r\n<!--                                </mat-form-field>-->\r\n<!--                                <tb-relation-type-autocomplete-->\r\n<!--                                        fxFlex class=\"mat-block\"-->\r\n<!--                                        formControlName=\"relationType\"-->\r\n<!--                                        required=\"true\">-->\r\n<!--                                </tb-relation-type-autocomplete>-->\r\n<!--                            </div>-->\r\n<!--                            <div fxLayout=\"row\" fxLayout.xs=\"column\">-->\r\n<!--                                <tb-entity-select-->\r\n<!--                                        fxFlex class=\"mat-block\"-->\r\n<!--                                        required=\"true\"-->\r\n<!--                                        formControlName=\"relatedEntity\">-->\r\n<!--                                </tb-entity-select>-->\r\n<!--                            </div>-->\r\n<!--                        </div>-->\r\n<!--                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">-->\r\n<!--                            <button mat-icon-button color=\"primary\"-->\r\n<!--                                    aria-label=\"Remove\"-->\r\n<!--                                    type=\"button\"-->\r\n<!--                                    (click)=\"removeOldRelation(i)\"-->\r\n<!--                                    matTooltip=\"Remove relation\"-->\r\n<!--                                    matTooltipPosition=\"above\">-->\r\n<!--                                <mat-icon>close</mat-icon>-->\r\n<!--                            </button>-->\r\n<!--                        </div>-->\r\n<!--                    </div>-->\r\n<!--                </div>-->\r\n<!--            </div>-->\r\n<!--        </div>-->\r\n<!--        <div class=\"relations-list\">-->\r\n<!--            <div class=\"mat-body-1\" style=\"padding-bottom: 10px; color: rgba(0,0,0,0.57);\">New Relations</div>-->\r\n<!--            <div class=\"body\" [fxShow]=\"relations().length\">-->\r\n<!--                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" formArrayName=\"relations\" *ngFor=\"let relation of relations().controls; let i = index;\">-->\r\n<!--                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">-->\r\n<!--                        <div fxFlex fxLayout=\"column\">-->\r\n<!--                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">-->\r\n<!--                                    <mat-label>Direction</mat-label>-->\r\n<!--                                    <mat-select formControlName=\"direction\" name=\"direction\">-->\r\n<!--                                        <mat-option *ngFor=\"let direction of entitySearchDirection | keyvalue\" [value]=\"direction.value\">-->\r\n<!--                                            {{ (\"relation.search-direction.\" + direction.value) | translate}}-->\r\n<!--                                        </mat-option>-->\r\n<!--                                    </mat-select>-->\r\n<!--                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">-->\r\n<!--                                        Relation direction is required.-->\r\n<!--                                    </mat-error>-->\r\n<!--                                </mat-form-field>-->\r\n<!--                                <tb-relation-type-autocomplete-->\r\n<!--                                        fxFlex class=\"mat-block\"-->\r\n<!--                                        formControlName=\"relationType\"-->\r\n<!--                                        [required]=\"true\">-->\r\n<!--                                </tb-relation-type-autocomplete>-->\r\n<!--                            </div>-->\r\n<!--                            <div fxLayout=\"row\" fxLayout.xs=\"column\">-->\r\n<!--                                <tb-entity-select-->\r\n<!--                                        fxFlex class=\"mat-block\"-->\r\n<!--                                        [required]=\"true\"-->\r\n<!--                                        formControlName=\"relatedEntity\">-->\r\n<!--                                </tb-entity-select>-->\r\n<!--                            </div>-->\r\n<!--                        </div>-->\r\n<!--                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">-->\r\n<!--                            <button mat-icon-button color=\"primary\"-->\r\n<!--                                    aria-label=\"Remove\"-->\r\n<!--                                    type=\"button\"-->\r\n<!--                                    (click)=\"removeRelation(i)\"-->\r\n<!--                                    matTooltip=\"Remove relation\"-->\r\n<!--                                    matTooltipPosition=\"above\">-->\r\n<!--                                <mat-icon>close</mat-icon>-->\r\n<!--                            </button>-->\r\n<!--                        </div>-->\r\n<!--                    </div>-->\r\n<!--                </div>-->\r\n<!--            </div>-->\r\n<!--            <div>-->\r\n<!--                <button mat-raised-button color=\"primary\"-->\r\n<!--                        type=\"button\"-->\r\n<!--                        (click)=\"addRelation()\"-->\r\n<!--                        matTooltip=\"Add Relation\"-->\r\n<!--                        matTooltipPosition=\"above\">-->\r\n<!--                    Add-->\r\n<!--                </button>-->\r\n<!--            </div>-->\r\n<!--        </div>-->\r\n<!--    </div>-->\r\n<!--    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">-->\r\n<!--        <button mat-button color=\"primary\"-->\r\n<!--                type=\"button\"-->\r\n<!--                [disabled]=\"(isLoading$ | async)\"-->\r\n<!--                (click)=\"cancel()\" cdkFocusInitial>-->\r\n<!--            Cancel-->\r\n<!--        </button>-->\r\n<!--        <button mat-button mat-raised-button color=\"primary\"-->\r\n<!--                type=\"submit\"-->\r\n<!--                [disabled]=\"(isLoading$ | async) || editEntityForm.invalid || !editEntityForm.dirty\">-->\r\n<!--            Save-->\r\n<!--        </button>-->\r\n<!--    </div>-->\r\n<!--</form>-->\r\n<!---->\r\n<!--========================================================================-->\r\n<!--=========================  Add entity example  =========================-->\r\n<!--========================================================================-->\r\n<!---->\r\n<!--<form #addEntityForm=\"ngForm\" [formGroup]=\"addEntityFormGroup\"-->\r\n<!--      (ngSubmit)=\"save()\" class=\"add-entity-form\">-->\r\n<!--    <mat-toolbar fxLayout=\"row\" color=\"primary\">-->\r\n<!--        <h2>Add entity</h2>-->\r\n<!--        <span fxFlex></span>-->\r\n<!--        <button mat-icon-button (click)=\"cancel()\" type=\"button\">-->\r\n<!--            <mat-icon class=\"material-icons\">close</mat-icon>-->\r\n<!--        </button>-->\r\n<!--    </mat-toolbar>-->\r\n<!--    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">-->\r\n<!--    </mat-progress-bar>-->\r\n<!--    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>-->\r\n<!--    <div mat-dialog-content fxLayout=\"column\">-->\r\n<!--        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--            <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                <mat-label>Entity Name</mat-label>-->\r\n<!--                <input matInput formControlName=\"entityName\" required>-->\r\n<!--                <mat-error *ngIf=\"addEntityFormGroup.get('entityName').hasError('required')\">-->\r\n<!--                    Entity name is required.-->\r\n<!--                </mat-error>-->\r\n<!--            </mat-form-field>-->\r\n<!--            <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                <mat-label>Entity Label</mat-label>-->\r\n<!--                <input matInput formControlName=\"entityLabel\" >-->\r\n<!--            </mat-form-field>-->\r\n<!--        </div>-->\r\n<!--        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--            <tb-entity-type-select-->\r\n<!--                    class=\"mat-block\"-->\r\n<!--                    formControlName=\"entityType\"-->\r\n<!--                    [showLabel]=\"true\"-->\r\n<!--                    [allowedEntityTypes]=\"allowedEntityTypes\"-->\r\n<!--            ></tb-entity-type-select>-->\r\n<!--            <tb-entity-subtype-autocomplete-->\r\n<!--                    fxFlex *ngIf=\"addEntityFormGroup.get('entityType').value == 'ASSET'\"-->\r\n<!--                    class=\"mat-block\"-->\r\n<!--                    formControlName=\"type\"-->\r\n<!--                    [required]=\"true\"-->\r\n<!--                    [entityType]=\"'ASSET'\"-->\r\n<!--            ></tb-entity-subtype-autocomplete>-->\r\n<!--            <tb-entity-subtype-autocomplete-->\r\n<!--                    fxFlex *ngIf=\"addEntityFormGroup.get('entityType').value != 'ASSET'\"-->\r\n<!--                    class=\"mat-block\"-->\r\n<!--                    formControlName=\"type\"-->\r\n<!--                    [required]=\"true\"-->\r\n<!--                    [entityType]=\"'DEVICE'\"-->\r\n<!--            ></tb-entity-subtype-autocomplete>-->\r\n<!--        </div>-->\r\n<!--        <div formGroupName=\"attributes\" fxLayout=\"column\">-->\r\n<!--            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--                <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                    <mat-label>Latitude</mat-label>-->\r\n<!--                    <input type=\"number\" step=\"any\" matInput formControlName=\"latitude\">-->\r\n<!--                </mat-form-field>-->\r\n<!--                <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                    <mat-label>Longitude</mat-label>-->\r\n<!--                    <input type=\"number\" step=\"any\" matInput formControlName=\"longitude\">-->\r\n<!--                </mat-form-field>-->\r\n<!--            </div>-->\r\n<!--            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--                <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                    <mat-label>Address</mat-label>-->\r\n<!--                    <input matInput formControlName=\"address\">-->\r\n<!--                </mat-form-field>-->\r\n<!--                <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                    <mat-label>Owner</mat-label>-->\r\n<!--                    <input matInput formControlName=\"owner\">-->\r\n<!--                </mat-form-field>-->\r\n<!--            </div>-->\r\n<!--            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--                <mat-form-field fxFlex class=\"mat-block\">-->\r\n<!--                    <mat-label>Integer Value</mat-label>-->\r\n<!--                    <input type=\"number\" step=\"1\" matInput formControlName=\"number\">-->\r\n<!--                    <mat-error *ngIf=\"addEntityFormGroup.get('attributes.number').hasError('pattern')\">-->\r\n<!--                        Invalid integer value.-->\r\n<!--                    </mat-error>-->\r\n<!--                </mat-form-field>-->\r\n<!--                <div class=\"boolean-value-input\" fxLayout=\"column\" fxLayoutAlign=\"center start\" fxFlex>-->\r\n<!--                    <label class=\"checkbox-label\">Boolean Value</label>-->\r\n<!--                    <mat-checkbox formControlName=\"booleanValue\" style=\"margin-bottom: 40px;\">-->\r\n<!--                        {{ (addEntityFormGroup.get('attributes.booleanValue').value ? \"value.true\" : \"value.false\") | translate }}-->\r\n<!--                    </mat-checkbox>-->\r\n<!--                </div>-->\r\n<!--            </div>-->\r\n<!--        </div>-->\r\n<!--        <div class=\"relations-list\">-->\r\n<!--            <div class=\"mat-body-1\" style=\"padding-bottom: 10px; color: rgba(0,0,0,0.57);\">Relations</div>-->\r\n<!--            <div class=\"body\" [fxShow]=\"relations().length\">-->\r\n<!--                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" formArrayName=\"relations\" *ngFor=\"let relation of relations().controls; let i = index;\">-->\r\n<!--                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">-->\r\n<!--                        <div fxFlex fxLayout=\"column\">-->\r\n<!--                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\"  fxLayoutGap.xs=\"0\">-->\r\n<!--                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">-->\r\n<!--                                    <mat-label>Direction</mat-label>-->\r\n<!--                                    <mat-select formControlName=\"direction\" name=\"direction\">-->\r\n<!--                                        <mat-option *ngFor=\"let direction of entitySearchDirection | keyvalue\" [value]=\"direction.value\">-->\r\n<!--                                            {{ (\"relation.search-direction.\" + direction.value) | translate}}-->\r\n<!--                                        </mat-option>-->\r\n<!--                                    </mat-select>-->\r\n<!--                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">-->\r\n<!--                                        Relation direction is required.-->\r\n<!--                                    </mat-error>-->\r\n<!--                                </mat-form-field>-->\r\n<!--                                <tb-relation-type-autocomplete-->\r\n<!--                                        fxFlex class=\"mat-block\"-->\r\n<!--                                        formControlName=\"relationType\"-->\r\n<!--                                        [required]=\"true\">-->\r\n<!--                                </tb-relation-type-autocomplete>-->\r\n<!--                            </div>-->\r\n<!--                            <div fxLayout=\"row\" fxLayout.xs=\"column\">-->\r\n<!--                                <tb-entity-select-->\r\n<!--                                        fxFlex class=\"mat-block\"-->\r\n<!--                                        [required]=\"true\"-->\r\n<!--                                        formControlName=\"relatedEntity\">-->\r\n<!--                                </tb-entity-select>-->\r\n<!--                            </div>-->\r\n<!--                        </div>-->\r\n<!--                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">-->\r\n<!--                            <button mat-icon-button color=\"primary\"-->\r\n<!--                                    aria-label=\"Remove\"-->\r\n<!--                                    type=\"button\"-->\r\n<!--                                    (click)=\"removeRelation(i)\"-->\r\n<!--                                    matTooltip=\"Remove relation\"-->\r\n<!--                                    matTooltipPosition=\"above\">-->\r\n<!--                                <mat-icon>close</mat-icon>-->\r\n<!--                            </button>-->\r\n<!--                        </div>-->\r\n<!--                    </div>-->\r\n<!--                </div>-->\r\n<!--            </div>-->\r\n<!--            <div>-->\r\n<!--                <button mat-raised-button color=\"primary\"-->\r\n<!--                        type=\"button\"-->\r\n<!--                        (click)=\"addRelation()\"-->\r\n<!--                        matTooltip=\"Add Relation\"-->\r\n<!--                        matTooltipPosition=\"above\">-->\r\n<!--                    Add-->\r\n<!--                </button>-->\r\n<!--            </div>-->\r\n<!--        </div>-->\r\n<!--    </div>-->\r\n<!--    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">-->\r\n<!--        <button mat-button color=\"primary\"-->\r\n<!--                type=\"button\"-->\r\n<!--                [disabled]=\"(isLoading$ | async)\"-->\r\n<!--                (click)=\"cancel()\" cdkFocusInitial>-->\r\n<!--            Cancel-->\r\n<!--        </button>-->\r\n<!--        <button mat-button mat-raised-button color=\"primary\"-->\r\n<!--                type=\"submit\"-->\r\n<!--                [disabled]=\"(isLoading$ | async) || addEntityForm.invalid || !addEntityForm.dirty\">-->\r\n<!--            Create-->\r\n<!--        </button>-->\r\n<!--    </div>-->\r\n<!--</form>-->\r\n",
                "customCss": "/*=======================================================================*/\r\n/*==========  There are two examples: for edit and add entity  ==========*/\r\n/*=======================================================================*/\r\n/*========================  Edit entity example  ========================*/\r\n/*=======================================================================*/\r\n/*\r\n.edit-entity-form .boolean-value-input {\r\n    padding-left: 5px;\r\n}\r\n\r\n.edit-entity-form .boolean-value-input .checkbox-label {\r\n    margin-bottom: 8px;\r\n    color: rgba(0,0,0,0.54);\r\n    font-size: 12px;\r\n}\r\n\r\n.relations-list .header {\r\n    padding-right: 5px;\r\n    padding-bottom: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .header .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n    font-size: 12px;\r\n    font-weight: 700;\r\n    color: rgba(0, 0, 0, .54);\r\n    white-space: nowrap;\r\n}\r\n\r\n.relations-list .mat-form-field-infix {\r\n    width: auto !important;\r\n}\r\n\r\n.relations-list .body {\r\n    padding-right: 5px;\r\n    padding-bottom: 15px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .row {\r\n    padding-top: 5px;\r\n}\r\n\r\n.relations-list .body .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .md-button {\r\n    margin: 0;\r\n}\r\n*/\r\n/*========================================================================*/\r\n/*=========================  Add entity example  =========================*/\r\n/*========================================================================*/\r\n/*\r\n.add-entity-form .boolean-value-input {\r\n    padding-left: 5px;\r\n}\r\n\r\n.add-entity-form .boolean-value-input .checkbox-label {\r\n    margin-bottom: 8px;\r\n    color: rgba(0,0,0,0.54);\r\n    font-size: 12px;\r\n}\r\n\r\n.relations-list .header {\r\n    padding-right: 5px;\r\n    padding-bottom: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .header .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n    font-size: 12px;\r\n    font-weight: 700;\r\n    color: rgba(0, 0, 0, .54);\r\n    white-space: nowrap;\r\n}\r\n\r\n.relations-list .mat-form-field-infix {\r\n    width: auto !important;\r\n}\r\n\r\n.relations-list .body {\r\n    padding-right: 5px;\r\n    padding-bottom: 15px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .row {\r\n    padding-top: 5px;\r\n}\r\n\r\n.relations-list .body .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .md-button {\r\n    margin: 0;\r\n}\r\n*/\r\n",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\r\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\r\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nlet userService = $injector.get(widgetContext.servicesMap.get('userService'));\r\nlet http = $injector.get(widgetContext.servicesMap.get('http'));\r\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\n\r\nconst relatedHydrantsQuery = {\r\n  filters: [\r\n    {\r\n      relationType: \"Contains\",\r\n      entityTypes: [\r\n        \"ASSET\"\r\n      ]\r\n    }\r\n  ],\r\n  parameters: {\r\n    rootId: entityId.id,\r\n    rootType: \"ASSET\",\r\n    direction: \"FROM\",\r\n    relationTypeGroup: \"COMMON\",\r\n    maxLevel: 1,\r\n    fetchLastLevelOnly: true\r\n  }\r\n};\r\n\r\nopenDeleteEntityDialog();\r\n\r\nfunction openDeleteEntityDialog() {\r\n    \r\n    http.post(\"/api/relations/info\", relatedHydrantsQuery).pipe().subscribe((relatedHydrants) => {\r\n        if(relatedHydrants.length > 0) {\r\n            let title = getTranslation('hawle-dashboard.delete-zone') + ' ' +  entityName + ' ' + getTranslation('hawle-dashboard.not-allowed');\r\n            let content = getTranslation('hawle-dashboard.this-zonecannot_');\r\n            dialogs.confirm(title, content).subscribe(\r\n                function(result) {\r\n                    if (result) {}\r\n                }\r\n            )\r\n        } else {\r\n            let title = getTranslation('hawle-dashboard.delete-zone') + ' ' +  entityName;\r\n            let content = getTranslation('hawle-dashboard.Do-you-really-want__') + ' ' + entityName + '? ' + getTranslation('hawle-dashboard.You-can-not-undo__');\r\n            dialogs.confirm(title, content, getTranslation('hawle-dashboard.cancel'), getTranslation('hawle-dashboard.delete')).subscribe(\r\n                function(result) {\r\n                    if (result) {\r\n                        deleteEntity();\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    })\r\n    \r\n    \r\n\r\n}\r\n\r\nfunction deleteEntity() {\r\n    deleteEntityObservable(entityId).subscribe(\r\n        function success() {\r\n            widgetContext.updateAliases();\r\n            widgetContext.showToast('success',\r\n                translationService.instant('hawle-dashboard.zone-deleted-successfully'), 2000,\r\n                'top', 'left');\r\n        },\r\n        function fail() {\r\n            showErrorDialog();\r\n        }\r\n    );\r\n}\r\n\r\nfunction deleteEntityObservable(entityId) {\r\n     return assetService.deleteAsset(entityId.id);\r\n}\r\n\r\nfunction showErrorDialog() {\r\n    let title = 'Error';\r\n    let content = getTranslation('hawle-dashboard.An-error-occurred-while-deleting__');\r\n    dialogs.alert(title, content, 'CLOSE').subscribe(\r\n        function(result) {}\r\n    );\r\n}\r\n\r\nfunction getTranslation(translationText) {\r\n    widgetContext.$scope.translateService = widgetContext.$scope.$injector.get(widgetContext.servicesMap.get('translate'));\r\n    let translated = translationText;\r\n    try {\r\n        translated = widgetContext.$scope\r\n                .translateService.instant(\r\n                    translationText);\r\n    } catch (error) {\r\n        \r\n    }\r\n    return translated;\r\n}",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "75807f21-f617-3fdf-6529-6f3f48bcf751"
              }
            ],
            "headerButton": [
              {
                "name": "add",
                "icon": "add",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_zone",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "e08be075-c219-3877-8e42-cc05abfb18c8"
              }
            ],
            "rowClick": []
          },
          "showTitleIcon": false,
          "titleTooltip": "",
          "widgetStyle": {
            "borderRadius": "8px"
          },
          "widgetCss": "",
          "enableDataExport": true,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "useCustomQueryService": true,
          "customQuery": "{\n  \"translateColumnName\": true\n}",
          "useColumnMapping": true,
          "columnMapping": "[\n  {\n    \"type\": \"ENTITY_FIELD\",\n    \"key\": \"name\",\n    \"columnName\": \"hawle-dashboard.name\",\n    \"defaultColumnName\": \"Name\"\n  }\n]"
        },
        "row": 0,
        "col": 0,
        "id": "8ab51863-328e-59f0-a81a-ed280cd2ad28"
      },
      "ce2c8f7d-2cf4-3c83-ef03-4f6ed5905287": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "4d2ec0c3-6e69-c1a7-0039-19a117669949",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "count",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.18355668864384111
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "cardHtml": "<!--material symbol library-->\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n<div class='card'>\n    <div class='content'>\n        <div class='column'>\n            <div class='header'>\n                <span class=\"material-symbols-outlined icon-color-grey\">wifi_notification</span>\n                <p>{i18n:hawle-dashboard.alarm-definition}</p>\n            </div>\n            <div class='value'>\n                ${count:0}\n            </div>\n        </div>\n        <div class='column'>\n            <button id='add-button' type=\"button\" class=\"custom-btn\">\n                <span class=\"material-symbols-outlined add-icon\">\n                    add\n                </span>\n            </button>\n            <button id='all-button' type=\"button\" class=\"custom-btn\">\n                {i18n:hawle-dashboard.view-all}\n            </button>\n        </div>\n    </div>\n</div>",
            "cardCss": ".custom-btn {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    background: none;\n    height: 100%;\n    width: 100%; \n    color: #009FE3;\n    display: flex;\n    cursor: pointer;\n    font-weight: 700;\n    font-size: 0.8vw;\n}\n\n.card {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content {\n    padding: 8px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content .column {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    max-width: 50%;\n}\n\n.header {\n    display: inline-flex;\n     align-items: center;\n}\n\n.header p {\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 0.9vw;\n    font-weight: 700;\n    color: #64748B;\n}\n\n.header img {\n    height: 1.1vw;\n    width: 1.1vw;\n}\n\n.icon-color-grey {\n    color: #CBD4E1;\n    font-size: 1.1vw;\n}\n\n.card .value {\n    font-size: 1.5vw;\n    font-weight: 500;\n    display: flex;\n    color: #0F1A2A;\n}\n\n#all-button {\n    align-items: flex-end;\n    justify-content: flex-end;\n}\n\n#add-button {\n    align-items: flex-start;\n    justify-content: flex-end;\n}\n\n.add-icon {\n    font-size: 1.3vw;\n}"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "fontWeight": "800"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [],
            "elementClick": [
              {
                "name": "all-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "updateDashboardState",
                "targetDashboardStateId": "all_alarm_definitions",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "126d5b74-5e5a-815b-9771-13ee0b408764"
              },
              {
                "name": "add-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_alarm_definition",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "a461ea87-7f8c-fa0f-5743-0f7a1902dff4"
              }
            ]
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "ce2c8f7d-2cf4-3c83-ef03-4f6ed5905287"
      },
      "afa125eb-1832-ed60-2571-430378a4484f": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 86400000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": true,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "displayEntityName": false,
            "displayEntityType": false,
            "enableSelectColumnDisplay": true,
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "displayEntityLabel": false,
            "useRowStyleFunction": false,
            "entitiesTitle": "{i18n:hawle-dashboard.hydrants-list}",
            "enableExportDataDisplay": true
          },
          "title": "Hydrants List",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "793b3a27-c500-48ae-d75c-383cda3397a8",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "{i18n:hawle-dashboard.hydrant-number}",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled"
                  },
                  "_hash": 0.3157655346815189,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "hydrantsBrand",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.brand}",
                  "color": "#4caf50",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.09695052122639236,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "modelNumber",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.model}",
                  "color": "#9c27b0",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.0862709273061204,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "dstorzCount",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.D-Storz-Count}",
                  "color": "#9c27b0",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.13474898835691218,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "createdTime",
                  "type": "entityField",
                  "label": "{i18n:hawle-dashboard.created-time}",
                  "color": "#8bc34a",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.6832442090461153,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "zone",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.zone}",
                  "color": "#607d8b",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.1329348479126835,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "city",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.city}",
                  "color": "#3f51b5",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.7855537314111052,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "zip",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.zip}",
                  "color": "#e91e63",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.9042813430857175,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "country",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.country}",
                  "color": "#ffeb3b",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.8230280861409314,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "street",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.street}",
                  "color": "#03a9f4",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.7419546284939664,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "state",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.state}",
                  "color": "#ff9800",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.9809350466238291,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "dstorzCount",
                  "type": "attribute",
                  "label": "dstorzCount",
                  "color": "#ff9800",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.261436716585717,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "actions": {
            "actionCellButton": [
              {
                "name": "edit",
                "icon": "edit",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "edit_hydrant",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "f3c35b9b-ef7d-9004-6369-9e98a7f88b5d"
              },
              {
                "name": "copy",
                "icon": "content_copy",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "duplicate_hydrant",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "668df886-c5af-3c63-1a63-f5f358c64ecd"
              },
              {
                "name": "delete",
                "icon": "delete",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\nlet rxjs = widgetContext.rxjs;\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\nconst dstorzCount = additionalParams.entity.dstorzCount;\n\nopenDeleteEntityDialog();\n\nfunction openDeleteEntityDialog() {\n    if(dstorzCount && dstorzCount > 0) {                \n        const deleteText = getTranslation('hawle-dashboard.delete');\n        const cancelText = getTranslation('hawle-dashboard.cancel');\n        const contentText = getTranslation('hawle-dashboard.hydrantCantDeleteMessage');\n\n        let title = getTranslation('hawle-dashboard.delete-hydrant') + ' ' +  entityName + ' ' + getTranslation('hawle-dashboard.not-allowed');\n        dialogs.confirm(title, contentText).subscribe(\n            function(result) {\n                    if (result) {}\n            }\n        )\n    } else {\n        const deleteText = getTranslation('hawle-dashboard.delete');\n        const cancelText = getTranslation('hawle-dashboard.cancel');\n        const contentText = getTranslation('hawle-dashboard.dialog-content');\n        \n        let title = deleteText + \" \" + 'Hydrant' + ' ' +\n                    entityName;\n        let content = contentText + ' ' + entityName + '?';\n        dialogs.confirm(title, content, cancelText, deleteText).subscribe(\n            function(result) {\n                if (result) {\n                    deleteEntity();\n                }\n            }\n        );\n    }\n}\n\nfunction getTranslation(translationText) {\n    widgetContext.$scope.translateService = widgetContext.$scope.$injector.get(widgetContext.servicesMap.get('translate'));\n    let translated = translationText;\n    try {\n        translated = widgetContext.$scope\n                .translateService.instant(\n                    translationText);\n    } catch (error) {\n        \n    }\n    return translated;\n}\n\nfunction deleteEntity() {\n    deleteEntityObservable(entityId).subscribe(\n        function success() {\n            widgetContext.showToast('success',\n                translationService.instant('hawle-dashboard.hydrant-deleted-successfully'), 2000,\n                'top', 'left');\n            widgetContext.updateAliases();\n        },\n        function fail() {\n            showErrorDialog();\n        }\n    );\n}\n\nfunction deleteEntityObservable(entityId) {\n    return getHydrantsStorzAndDstorzByRelations(entityId).pipe(rxjs.mergeMap((storzAndDstorz) => {\n        const callList = [];\n        const deleteBulkEntityRelationsPayload = [];\n        storzAndDstorz.storzList.forEach((storz) => {\n            deleteBulkEntityRelationsPayload.push({\n                fromId: storz.id.id,\n                fromType: storz.id.entityType,\n                relationType: \"Contains\"\n            });\n            callList.push(deleteEntityServerAttributes(storz.id, ['assignedStorz']));\n        });\n        storzAndDstorz.dstorzList.forEach((dstorz) => {\n            deleteBulkEntityRelationsPayload.push({\n                toId: dstorz.id.id,\n                toType: dstorz.id.entityType,\n                relationType: \"Contains\"\n            });\n            callList.push(deleteEntityServerAttributes(dstorz.id, ['country', 'exitNode', 'hydrantId', 'hydrantNumber', 'hydrantsBrand', 'zip', 'city', 'street']));\n        });\n        callList.push(deleteBulkEntityRelations(deleteBulkEntityRelationsPayload));\n        callList.push(assetService.deleteAsset(entityId.id));\n        return rxjs.forkJoin(callList);\n    }));\n}\n\nfunction showErrorDialog() {\n    let title = 'Error';\n    let content = 'An error occurred while deleting the entity. Please try again.';\n    dialogs.alert(title, content, 'CLOSE').subscribe(\n        function(result) {}\n    );\n}\nfunction getEntityServerAttributes(entityId = {entityType:null, id: null}) {\n    return attributeService.getEntityAttributes({ entityType: entityId.entityType, id: entityId.id }, \"SERVER_SCOPE\").pipe(rxjs.map((response) => {\n        const result = {};\n        if (response.length === 0) {\n        return result;\n        }\n        response.forEach((entity) => {\n                result[entity.key] = entity.value;\n            });\n            return result;\n        }));\n}\nfunction getHydrantsStorzAndDstorzByRelations(entityId) {\n    const payload = {\n        \"entityFields\": [\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"name\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"type\"\n            }\n        ],\n        \"latestValues\": [\n            {\n                \"type\": \"ATTRIBUTE\",\n                \"key\": \"assignedDStorz\"\n            },\n            {\n                \"type\": \"ATTRIBUTE\",\n                \"key\": \"country\"\n            },\n            {\n                \"type\": \"ATTRIBUTE\",\n                \"key\": \"exitNode\"\n            },\n            {\n                \"type\": \"ATTRIBUTE\",\n                \"key\": \"hydrantId\"\n            },\n            {\n                \"type\": \"ATTRIBUTE\",\n                \"key\": \"hydrantNumber\"\n            },\n            {\n                \"type\": \"ATTRIBUTE\",\n                \"key\": \"hydrantsBrand\"\n            },\n            {\n                \"type\": \"ATTRIBUTE\",\n                \"key\": \"zip\"\n            },\n            {\n                \"type\": \"ATTRIBUTE\",\n                \"key\": \"city\"\n            },\n            {\n                \"type\": \"ATTRIBUTE\",\n                \"key\": \"street\"\n            },\n        ],\n        \"entityFilter\": {\n        \"type\": \"relationsQuery\",\n        \"rootEntity\": entityId,\n        \"direction\": \"FROM\",\n        \"maxLevel\": 2,\n        \"fetchLastLevelOnly\": false,\n        \"filters\": [\n            {\n            \"relationType\": \"Contains\",\n            \"entityTypes\": [\n                \"DEVICE\",\n                \"ASSET\"\n            ]\n            }\n        ]\n        },\n        \"pageLink\": {\n        \"dynamic\": false,\n        \"pageSize\": 1000,\n        \"page\": 0,\n        \"textSearch\": null,\n        \"sortOrder\": {\n            \"key\": {\n            \"type\": \"ENTITY_FIELD\",\n            \"key\": \"createdTime\"\n            },\n            \"direction\": \"DESC\"\n        }\n        }\n    };\n    return http.post(\"/api/entitiesQuery/find\", payload).pipe(rxjs.map((response) => {\n        const result = {\n            storzList: [],\n            dstorzList: []\n        };\n        if (response.totalElements === 0) {\n            return result;\n        }\n        response.data.forEach((entity) => {\n            const res = {};\n            Object.keys(entity.latest.ATTRIBUTE).forEach((key) => {\n                res[key] = entity.latest.ATTRIBUTE[key].value;\n            });\n            Object.keys(entity.latest.ENTITY_FIELD).forEach((key) => {\n                res[key] = entity.latest.ENTITY_FIELD[key].value;\n            });\n            res.id = entity.entityId;\n            if (res.type === \"storz\") {\n                result.storzList.push(res);\n            } else if (entity.entityId.entityType === \"DEVICE\") {\n                result.dstorzList.push(res);\n            }\n        });\n        return result;\n    }));\n}\n\nfunction deleteEntityServerAttributes(entityId, attributeFields) {\n    return attributeService.deleteEntityAttributes(entityId, 'SERVER_SCOPE', attributeFields.map(field => ({ key: field, value: null})) );\n}\n\nfunction deleteBulkEntityRelations(relationPayload=[]) {\n    let url = `/api/relationsByType`;\n    return http.post(url, relationPayload);\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "7f14335b-a9fa-814e-b9a6-0308715bce60"
              }
            ],
            "headerButton": [
              {
                "name": "add",
                "icon": "add",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_hydrant",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "0e7df08c-06fa-c8bf-487a-5668d6994fee"
              }
            ],
            "rowClick": []
          },
          "showTitleIcon": false,
          "titleTooltip": "",
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "useCustomQueryService": true,
          "customQuery": "{\n  \"translateColumnName\": true\n}",
          "useColumnMapping": true,
          "columnMapping": "[\n  {\n    \"type\": \"ENTITY_FIELD\",\n    \"key\": \"name\",\n    \"columnName\": \"hawle-dashboard.hydrant.hydrant-number\",\n    \"defaultColumnName\": \"Hydrant Number\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"hydrantsBrand\",\n    \"columnName\": \"hawle-dashboard.brand\",\n    \"defaultColumnName\": \"Brand\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"modelNumber\",\n    \"columnName\": \"hawle-dashboard.model\",\n    \"defaultColumnName\": \"Model\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"dstorzCount\",\n    \"columnName\": \"hawle-dashboard.dstorzCount\",\n    \"defaultColumnName\": \"D-Storz Count\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"zone\",\n    \"columnName\": \"hawle-dashboard.zone\",\n    \"defaultColumnName\": \"Zone\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"city\",\n    \"columnName\": \"hawle-dashboard.city\",\n    \"defaultColumnName\": \"City\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"country\",\n    \"columnName\": \"hawle-dashboard.country\",\n    \"defaultColumnName\": \"Country\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"street\",\n    \"columnName\": \"hawle-dashboard.street\",\n    \"defaultColumnName\": \"Street\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"state\",\n    \"columnName\": \"hawle-dashboard.state\",\n    \"defaultColumnName\": \"State\"\n  }\n]"
        },
        "row": 0,
        "col": 0,
        "id": "afa125eb-1832-ed60-2571-430378a4484f"
      },
      "ef31ef0a-77ea-feca-63dd-76aeab802626": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #FFF;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.zones, Zone}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_zone');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "ef31ef0a-77ea-feca-63dd-76aeab802626"
      },
      "5f343c86-576d-769b-4633-c9beaebfe254": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.hydrants, Hydrants }\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_hydrants');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "5f343c86-576d-769b-4633-c9beaebfe254"
      },
      "c62a592b-6910-95ae-e52a-74ea3d8abac0": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         D-Storz\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_dstorz');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "c62a592b-6910-95ae-e52a-74ea3d8abac0"
      },
      "902e6c53-f7bc-996d-d842-34be9cf9694e": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.alarm-management, Alarm Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "902e6c53-f7bc-996d-d842-34be9cf9694e"
      },
      "3eee72e2-5bce-2dec-c533-ec4e5c061411": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.user-management, User Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_users');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "3eee72e2-5bce-2dec-c533-ec4e5c061411"
      },
      "081fcf54-dd5b-87e1-98ff-f54427298848": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".buttons-container {\n    height: 100%;\n    display: flex;\n    align-items: end;\n}\n\n.btn {\n    border-radius: 8px;\n    padding: 0px;\n    gap: 10px;\n    width: 48%;\n    height: 50%;\n    background: #fff;\n/*    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);*/\n    border: 0px !important;\n    cursor: pointer;\n    margin: 5px 10px 5px 0px;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #009FE3;\n}\n\n.btn.btn-selected {\n    background: #009FE3;\n}\n\n.btn-selected .btn-text {\n    color: #fff;\n}\n\n\n@media screen and (max-width: 1536px) {\n  .btn-text {\n    font-size: 12px;\n  }\n  \n  .btn { \n    height: 70%;\n    margin: 0px 1% 0px 0px;\n  }\n}",
            "cardHtml": "<div class=\"buttons-container\" fXflex fxLayout=\"row\" fxLayoutAlign=\"space-between end\" >\r\n    <button id='button-alarm-overview' type=\"button\"  class=\"btn\">\r\n        <div class=\"btn-text\">\r\n            {i18n:hawle-dashboard.alarms-overview}\r\n        </div>\r\n    </button>\r\n    <button id='button-alarm-definitions' type=\"button\" class=\"btn\">\r\n        <div class=\"btn-text\">\r\n            {i18n:hawle-dashboard.alarm-definitions}\r\n        </div>\r\n    </button>\r\n        <button id='button-temporary-deactivation' type=\"button\" class=\"btn btn-selected\">\r\n        <div class=\"btn-text\">\r\n            {i18n:hawle-dashboard.temporary-deactivations}\r\n        </div>\r\n    </button>\r\n</div>"
          },
          "title": "New HTML Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "button-alarm-overview",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "12313879-a332-53fb-2c91-45935fa466e9"
              },
              {
                "name": "button-alarm-definitions",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarm_definitions');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "86fbb8e5-7b8d-7658-2311-191b1c9c2846"
              },
              {
                "name": "button-temporary-deactivation",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_temporary_deactivation');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "1d9abb35-61c6-038e-df8b-c518f25910aa"
              }
            ]
          }
        },
        "row": 0,
        "col": 0,
        "id": "081fcf54-dd5b-87e1-98ff-f54427298848"
      },
      "e5d9c957-5e21-85df-af04-96508d709f5c": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.home,Home}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('default');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "e5d9c957-5e21-85df-af04-96508d709f5c"
      },
      "e8a506f7-eecf-a789-32af-b54423d8ab7c": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #FFF;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.zones, Zone}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_zone');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "e8a506f7-eecf-a789-32af-b54423d8ab7c"
      },
      "fdd96616-e2d5-0b9d-0a57-81e5d23beddc": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.hydrants, Hydrants }\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_hydrants');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "fdd96616-e2d5-0b9d-0a57-81e5d23beddc"
      },
      "1f5939cb-880e-d574-da18-68f297bd9da7": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         D-Storz\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_dstorz');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "1f5939cb-880e-d574-da18-68f297bd9da7"
      },
      "3bc61c07-7415-ffab-2c1f-10b906f5b8d9": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #009FE3;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #fff;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.alarm-management, Alarm Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "3bc61c07-7415-ffab-2c1f-10b906f5b8d9"
      },
      "a1b2524c-1afc-bed7-558f-9c802b2bdc17": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.user-management, User Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_users');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "a1b2524c-1afc-bed7-558f-9c802b2bdc17"
      },
      "6bcc11a3-bec5-717d-fd32-f02d88f376e8": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".buttons-container {\n    height: 100%;\n    display: flex;\n    align-items: end;\n}\n\n.btn {\n    border-radius: 8px;\n    padding: 0px;\n    gap: 10px;\n    width: 48%;\n    height: 50%;\n    background: #fff;\n/*    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);*/\n    border: 0px !important;\n    cursor: pointer;\n    margin: 5px 10px 5px 0px;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #009FE3;\n}\n\n.btn.btn-selected {\n    background: #009FE3;\n}\n\n.btn-selected .btn-text {\n    color: #fff;\n}\n\n\n@media screen and (max-width: 1536px) {\n  .btn-text {\n    font-size: 12px;\n  }\n  \n  .btn { \n    height: 70%;\n    margin: 0px 1% 0px 0px;\n  }\n}",
            "cardHtml": "<div class=\"buttons-container\" fXflex fxLayout=\"row\" fxLayoutAlign=\"space-between end\" >\r\n    <button id='button-alarm-overview' type=\"button\"  class=\"btn btn-selected\">\r\n        <div class=\"btn-text\">\r\n            {i18n:hawle-dashboard.alarms-overview}\r\n        </div>\r\n    </button>\r\n    <button id='button-alarm-definitions' type=\"button\" class=\"btn\">\r\n        <div class=\"btn-text\">\r\n            {i18n:hawle-dashboard.alarm-definitions}\r\n        </div>\r\n    </button>\r\n        <button id='button-temporary-deactivation' type=\"button\" class=\"btn\">\r\n        <div class=\"btn-text\">\r\n            {i18n:hawle-dashboard.temporary-deactivations}\r\n        </div>\r\n    </button>\r\n</div>"
          },
          "title": "New HTML Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "button-alarm-overview",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "3760393f-d249-e13f-b11b-c8078efa3417"
              },
              {
                "name": "button-alarm-definitions",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarm_definitions');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "c9f587af-6a84-6190-f218-115a3d2e6d44"
              },
              {
                "name": "button-temporary-deactivation",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_temporary_deactivation');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "ae7f94af-af59-bbba-ba42-54c102173630"
              }
            ]
          }
        },
        "row": 0,
        "col": 0,
        "id": "6bcc11a3-bec5-717d-fd32-f02d88f376e8"
      },
      "26abbf97-d406-0cd7-37c9-a5237cba176b": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".buttons-container {\n    height: 100%;\n    display: flex;\n    align-items: end;\n}\n\n.btn {\n    border-radius: 8px;\n    padding: 0px;\n    gap: 10px;\n    width: 48%;\n    height: 50%;\n    background: #fff;\n/*    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);*/\n    border: 0px !important;\n    cursor: pointer;\n    margin: 5px 10px 5px 0px;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #009FE3;\n}\n\n.btn.btn-selected {\n    background: #009FE3;\n}\n\n.btn-selected .btn-text {\n    color: #fff;\n}\n\n\n@media screen and (max-width: 1536px) {\n  .btn-text {\n    font-size: 12px;\n  }\n  \n  .btn { \n    height: 70%;\n    margin: 0px 1% 0px 0px;\n  }\n}",
            "cardHtml": "<div class=\"buttons-container\" fXflex fxLayout=\"row\" fxLayoutAlign=\"space-between end\" >\r\n    <button id='button-alarm-overview' type=\"button\"  class=\"btn\">\r\n        <div class=\"btn-text\">\r\n            {i18n:hawle-dashboard.alarms-overview}\r\n        </div>\r\n    </button>\r\n    <button id='button-alarm-definitions' type=\"button\" class=\"btn btn-selected\">\r\n        <div class=\"btn-text\">\r\n            {i18n:hawle-dashboard.alarm-definitions}\r\n        </div>\r\n    </button>\r\n        <button id='button-temporary-deactivation' type=\"button\" class=\"btn\">\r\n        <div class=\"btn-text\">\r\n            {i18n:hawle-dashboard.temporary-deactivations}\r\n        </div>\r\n    </button>\r\n</div>"
          },
          "title": "New HTML Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false,
          "actions": {
            "elementClick": [
              {
                "name": "button-alarm-overview",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "8066a47a-7bfa-8b1c-d424-87e725d671b0"
              },
              {
                "name": "button-alarm-definitions",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarm_definitions');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "7adc5d91-5a19-59f9-ccde-c6dd90c1f7fb"
              },
              {
                "name": "button-temporary-deactivation",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_temporary_deactivation');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "ce2aaab2-4c34-78fa-7b57-ca292208b58d"
              }
            ]
          }
        },
        "row": 0,
        "col": 0,
        "id": "26abbf97-d406-0cd7-37c9-a5237cba176b"
      },
      "b98f4ed8-852a-2959-798a-5454e5ce5ce2": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.home,Home}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('default');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "b98f4ed8-852a-2959-798a-5454e5ce5ce2"
      },
      "16f67d2c-d8b1-3dbc-5776-2f6e04290bf4": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #FFF;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.zones, Zone}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_zone');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "16f67d2c-d8b1-3dbc-5776-2f6e04290bf4"
      },
      "cf00e5f6-7a94-c498-6572-a930cf7b7ee8": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.hydrants, Hydrants }\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_hydrants');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "cf00e5f6-7a94-c498-6572-a930cf7b7ee8"
      },
      "b391ee46-129c-17eb-ddbd-fe85e2119d20": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         D-Storz\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_dstorz');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "b391ee46-129c-17eb-ddbd-fe85e2119d20"
      },
      "a7618d32-117e-5f3c-f63b-070e7d04b90b": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #009FE3;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #fff;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.alarm-management, Alarm Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "a7618d32-117e-5f3c-f63b-070e7d04b90b"
      },
      "4ea993dc-c627-8595-5315-fa7175e15bb6": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.user-management, User Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_users');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "4ea993dc-c627-8595-5315-fa7175e15bb6"
      },
      "c7cc8224-3512-2cd2-be2f-101a26b78564": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "hawle_alarm_card",
        "type": "alarm",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 10.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "hideInterval": false,
            "hideAggregation": false,
            "hideAggInterval": false,
            "hideTimezone": false,
            "selectedTab": 1,
            "history": {
              "historyType": 0,
              "timewindowMs": 31536000000,
              "interval": 1000,
              "fixedTimewindow": {
                "startTimeMs": 1695364417581,
                "endTimeMs": 1695450817581
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            },
            "displayValue": "History - last 365 days "
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "alarmSeverityColorFunction": "if(severity == 'CRITICAL') {return 'red';} else if (severity == 'MAJOR') {return 'orange';} else return 'green'; ",
            "isSingleAsset": false
          },
          "title": "New Hawle Alarm Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "name": null,
            "entityAliasId": "4c30635a-474a-9dbd-0d25-b9a38527e2cf",
            "filterId": null,
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.021092237451093787
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "Originator",
                "color": "#4caf50",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.2780007688856758
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Type",
                "color": "#f44336",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.7323586880398418
              },
              {
                "name": "severity",
                "type": "alarm",
                "label": "Severity",
                "color": "#ffc107",
                "settings": {
                  "useCellStyleFunction": false,
                  "useCellContentFunction": false
                },
                "_hash": 0.09927019860088193
              },
              {
                "name": "status",
                "type": "alarm",
                "label": "Status",
                "color": "#607d8b",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.6588418951443418
              }
            ]
          },
          "alarmSearchStatus": "ANY",
          "alarmsPollingInterval": 5,
          "showTitleIcon": false,
          "titleIcon": "more_horiz",
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "widgetStyle": {},
          "displayTimewindow": false,
          "actions": {},
          "alarmStatusList": [
            "ACTIVE_UNACK"
          ],
          "alarmSeverityList": [],
          "alarmTypeList": [],
          "searchPropagatedAlarms": false,
          "datasources": [],
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "useCustomQueryService": true,
          "customQuery": "{\n\"hello\": \"hello\"\n}"
        },
        "row": 0,
        "col": 0,
        "id": "c7cc8224-3512-2cd2-be2f-101a26b78564"
      },
      "f68737b4-e45b-6ba0-6bec-4db08f846a16": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 86400000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": true,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "displayEntityName": false,
            "displayEntityType": false,
            "enableSelectColumnDisplay": false,
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "displayEntityLabel": false,
            "useRowStyleFunction": false,
            "entitiesTitle": "{i18n:hawle-dashboard.overview-of-all-alarm-definitions}",
            "enableExportDataDisplay": true
          },
          "title": "Alarm Definition Table",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "4d2ec0c3-6e69-c1a7-0039-19a117669949",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled"
                  },
                  "_hash": 0.49861709114196895
                },
                {
                  "name": "fromDate",
                  "type": "attribute",
                  "label": "From",
                  "color": "#607d8b",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "function formatDateToCustomString(date) {\n    const yyyy = date.getFullYear();\n    const mm = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-11, so +1 and pad with a '0' if needed\n    const dd = String(date.getDate()).padStart(2, '0');\n    \n    const hh = String(date.getHours()).padStart(2, '0');\n    const min = String(date.getMinutes()).padStart(2, '0');\n    const ss = String(date.getSeconds()).padStart(2, '0');\n\n    return `${yyyy}-${mm}-${dd} ${hh}:${min}:${ss}`;\n}\n\nreturn value ? formatDateToCustomString(new Date(value)) : \"--\";  "
                  },
                  "_hash": 0.9413889656349714,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "toDate",
                  "type": "attribute",
                  "label": "To",
                  "color": "#9c27b0",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "function formatDateToCustomString(date) {\n    const yyyy = date.getFullYear();\n    const mm = String(date.getMonth() + 1).padStart(2, '0'); // Months are 0-11, so +1 and pad with a '0' if needed\n    const dd = String(date.getDate()).padStart(2, '0');\n    \n    const hh = String(date.getHours()).padStart(2, '0');\n    const min = String(date.getMinutes()).padStart(2, '0');\n    const ss = String(date.getSeconds()).padStart(2, '0');\n\n    return `${yyyy}-${mm}-${dd} ${hh}:${min}:${ss}`;\n}\n\nreturn value ? formatDateToCustomString(new Date(value)) : \"--\";  "
                  },
                  "_hash": 0.7355281460116099,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "isActive",
                  "type": "attribute",
                  "label": "Active",
                  "color": "#ffc107",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "const matIcon = value == \"true\" ? \"check\" : \"close\";\nlet style = \"\"\nstyle += value == \"true\" ? \"\" : \"color: #CBD4E1 !important;\";\nreturn `<mat-icon style=\"${style}\" class=\"mat-icon material-icons\">${matIcon}</mat-icon>`\n"
                  },
                  "_hash": 0.6136877030378485,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "createdTime",
                  "type": "entityField",
                  "label": "Created time",
                  "color": "#607d8b",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.20524606886019647,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "actions": {
            "rowClick": [
              {
                "name": "Show alarm definition details",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<mat-dialog id=\"popup-dialog\">\r\n    <header fxLayout=\"row\" fxLayoutAlign=\"space-between center\" class=\"header\">\r\n      <div fxLayout=\"column\">\r\n        <div id=\"dialog-title\">{{dialogTitle | translate}}</div>\r\n      </div>\r\n      <button mat-icon-button (click)=\"cancel()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </header>\r\n    \r\n    <div id=\"alarm-definition-map-container\">\r\n    </div>\r\n    \r\n    <section class=\"info-table-alarm-definition-hydrant\" *ngIf=\"hydrantDataSourceReady\">\r\n         <mat-table mat-table [dataSource]=\"hydrantDataSource\" class=\"mat-elevation-z0\">\r\n      \r\n          <ng-container matColumnDef=\"selectedHydrants\">\r\n            <th mat-header-cell *matHeaderCellDef> {{ selectedHydrantsLabel | translate }} </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ element.selectedHydrants }} </td>\r\n          </ng-container>\r\n        \r\n          <ng-container matColumnDef=\"brand\">\r\n            <th mat-header-cell *matHeaderCellDef> {{brand | translate}} </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ element.brand }} </td>\r\n          </ng-container>\r\n        \r\n          <ng-container matColumnDef=\"model\">\r\n            <th mat-header-cell *matHeaderCellDef> {{model | translate}} </th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ element.model }} </td>\r\n          </ng-container>\r\n        \r\n          <ng-container matColumnDef=\"dStorz\">\r\n            <th mat-header-cell *matHeaderCellDef>{{ dStorzLabel | translate }}  </th>\r\n            <td mat-cell *matCellDef=\"let element\" class=\"d-storz-cell\">{{ element.dStorz }}</td>\r\n          </ng-container>\r\n        \r\n          <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n          <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n        </mat-table>\r\n    </section>\r\n        \r\n  <section fxLayout=\"row wrap\" class=\"alarm-definition-detail-container\">\r\n      <!-- Assign Zones -->\r\n      <div fxFlex=\"24%\" class=\"alarm-definition-detail\">\r\n        <div class=\"info-key\">{{ assignZonesLabel | translate }} </div>\r\n        <div>{{ assignZones }}</div>\r\n      </div>\r\n    \r\n      <!-- Event Type -->\r\n      <div fxFlex=\"24%\" class=\"alarm-definition-detail\">\r\n        <div class=\"info-key\">{{ eventTypeLabel | translate }} </div>\r\n        <div>{{ eventType }}</div>\r\n      </div>\r\n    \r\n      <!-- Assign User -->\r\n      <div fxFlex=\"24%\" class=\"alarm-definition-detail\">\r\n        <div class=\"info-key\">{{ assignUserLabel | translate }} </div>\r\n        <div class=\"assign-user-info\">{{ assignUser }}</div>\r\n      </div>\r\n    \r\n      <!-- Assign User Roles -->\r\n      <div fxFlex=\"24%\" class=\"alarm-definition-detail\">\r\n        <div class=\"info-key\">{{ assignUserRolesLabel | translate }} </div>\r\n        <div>{{ assignUserRoles }}</div>\r\n      </div>\r\n    \r\n      <!-- Notification Type -->\r\n      <div fxFlex=\"24%\" class=\"alarm-definition-detail\">\r\n        <div class=\"info-key\">{{ notificationTypeLabel | translate }} </div>\r\n        <div>{{ notificationType }}</div>\r\n      </div>\r\n    \r\n      <!-- Delay -->\r\n      <div fxFlex=\"24%\" class=\"alarm-definition-detail\">\r\n        <div class=\"info-key\">{{ delayLabel | translate }} </div>\r\n         <div>{{ alarmDelayTime }}</div>\r\n      </div>\r\n    \r\n      <!-- Re-notification -->\r\n      <div fxFlex=\"24%\" class=\"alarm-definition-detail\" *ngIf=\"repeatEnabled\">\r\n        <div class=\"info-key\">{{ reNotificationLabel | translate }} </div>\r\n        <div>{{ reNotification }} min</div>\r\n      </div>\r\n    \r\n      <!-- Alarm State -->\r\n      <div fxFlex=\"24%\" class=\"alarm-definition-detail\">\r\n        <div class=\"info-key\">{{ alarmStateLabel | translate }} </div>\r\n        <div id=\"status-badge\" fxLayout=\"row\" fxLayoutAlign=\"start center\" matBadge=\"open\" matBadgeColor=\"primary\" matBadgeOverlap=\"false\" matBadgeSize=\"small\" class=\"custom-badge\">\r\n          <mat-icon class=\"custom-icon\">lens</mat-icon>\r\n          <span class=\"custom-text\">{{ notificationStatus }}</span>\r\n        </div>\r\n      </div>\r\n    \r\n      <!-- Active from -->\r\n      <div fxFlex=\"24%\" class=\"alarm-definition-detail\">\r\n        <div class=\"info-key\">{{ activeFromLabel | translate }} </div>\r\n        <div>{{ notificationStartDateFormatted }}</div>\r\n      </div>\r\n    \r\n      <!-- Active till -->\r\n      <div fxFlex=\"24%\" class=\"alarm-definition-detail\">\r\n        <div class=\"info-key\">{{ activeTillLabel | translate }} </div>\r\n        <div>{{ notificationEndDateFormatted }}</div>\r\n      </div>\r\n    </section>\r\n   \r\n</mat-dialog>",
                "customCss": ".mat-dialog-container {\r\n    border-radius: 10px;\r\n}\r\n\r\n#popup-dialog {\r\n    display: block;\r\n    height: 90vh;\r\n    width: 50vw;\r\n    padding: 2rem;\r\n}\r\n\r\n@media only screen and (max-width: 1500px) {\r\n#popup-dialog {\r\n      width: 80vw;\r\n      overflow-x: auto;\r\n  }\r\n}\r\n\r\n#dialog-title {\r\n    font-weight: 700;\r\n    margin-bottom: 1rem;\r\n    font-size: 24px;\r\n    font-style: normal;\r\n}\r\n\r\n#alarm-definition-map-container {\r\n    width: 100%;\r\n    height: 33%;\r\n    margin: 2rem 0;\r\n}\r\n\r\n.custom-badge{\r\n  width: fit-content;\r\n  border-radius: 10px; \r\n  padding: 4px 8px; \r\n}\r\n.custom-icon {\r\n    margin-right: 4px; \r\n    font-size: 10px;\r\n    width: 10px;\r\n    height: 10px;\r\n}\r\n\r\n\r\n.custom-badge.isNoSignal  {\r\n    background-color: #FCE7F3;\r\n} \r\n.custom-badge.isNoSignal .custom-icon {\r\n  color: #F472B6;\r\n}\r\n.custom-badge.isNoSignal .custom-text {\r\n  color: #DB2777; \r\n}\r\n\r\n\r\n.custom-badge.isClosed {\r\n    background-color: #D1F5E9;\r\n}\r\n.custom-badge.isClosed .custom-text{\r\n    color: #218372;\r\n}\r\n.custom-badge.isClosed .custom-icon{\r\n    color: #32CDAC;\r\n}\r\n\r\n\r\n.custom-badge.isOpen {\r\n    background-color: #FEE2E2;\r\n}\r\n.custom-badge.isOpen .custom-text{\r\n    color: #DC2626;\r\n}\r\n.custom-badge.isOpen .custom-icon{\r\n    color: #F87171;\r\n}\r\n\r\n\r\n.custom-badge.isInactive {\r\n    background-color: #DDE8FC;\r\n}\r\n.custom-badge.isInactive .custom-text{\r\n    color: #325DDE;\r\n}\r\n.custom-badge.isInactive .custom-icon{\r\n    color: #6A9DF0;\r\n}\r\n\r\n\r\n.custom-badge.isNotAssigned {\r\n    background-color: #F1F4F9;\r\n}\r\n.custom-badge.isNotAssigned .custom-text{\r\n    color: #475569;\r\n}\r\n.custom-badge.isNotAssigned .custom-icon{\r\n    color: #94A3B8;\r\n}\r\n\r\n\r\n.custom-badge.isNotAssigned {\r\n    background-color: #F1F4F9;\r\n}\r\n.custom-badge.isNotAssigned .custom-text{\r\n    color: #475569;\r\n}\r\n.custom-badge.isNotAssigned .custom-icon{\r\n    color: #94A3B8;\r\n}\r\n\r\n\r\n.custom-badge.isTemporaryInactivated {\r\n    background-color: #FFEDD5;\r\n}\r\n.custom-badge.isTemporaryInactivated .custom-text{\r\n    color: #EA580C;\r\n}\r\n.custom-badge.isTemporaryInactivated .custom-icon{\r\n    color: #FB923C;\r\n}\r\n\r\n.entity-info {\r\n    margin: 3rem 0px;\r\n}\r\n\r\n.info-key {\r\n    font-size: 12px;\r\n    font-weight: bold;\r\n    margin-bottom: 4px;\r\n}\r\n\r\nth.mat-header-cell:first-of-type, td.mat-cell:first-of-type, td.mat-footer-cell:first-of-type{ \r\n    padding-left: 0 !important;\r\n}\r\n\r\n.info-table-alarm-definition-hydrant .mat-header-cell {\r\n    font-weight: 600;\r\n    color: #000;\r\n}\r\n\r\n.info-table-alarm-definition-hydrant .mat-cell {\r\n    font-size: 12px;\r\n    font-weight: 400;\r\n}\r\n\r\n.info-table-alarm-definition-hydrant {\r\n    background-color: #F8FAFC;\r\n    padding: 1.5rem;\r\n}\r\n\r\n.info-table-alarm-definition-hydrant .mat-table{\r\n     background-color: #F8FAFC;\r\n}\r\n\r\n.info-table-alarm-definition-hydrant .mat-table .mat-row:hover{\r\n     background-color: #e4eaf0;\r\n}\r\n\r\n.info-table-alarm-definition-hydrant .mat-header-cell {\r\n    font-weight: 600;\r\n    color: #000;\r\n}\r\n\r\n.info-table-alarm-definiton-hydrant .mat-cell {\r\n    font-weight: 400;\r\n}\r\n\r\n\r\n\r\n.action-button {\r\n    border-radius: 5px;\r\n    border: 3px #E2E8F0 solid;\r\n}\r\n\r\n.temporary-deactivation-section {\r\n  margin-top: 2rem;\r\n  background-color: #FFF7ED;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.temporary-deactivation-section .section-title {\r\n  font-size: 1.1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.unconfirmed-alarms-section {\r\n    margin-top: 2rem;\r\n    width: 100%;\r\n    background-color: #F8FAFC;\r\n    padding: 1rem;\r\n    color: #64748B;\r\n}\r\n\r\n.unconfirmed-alarms-section .bell-icon {\r\n  background-color: #CBD4E1;\r\n  color: #F8FAFC;\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-right: 1.5rem;\r\n}\r\n\r\n.unconfirmed-alarms-section button span {\r\n    color: #009FE3;\r\n    font-weight: 500;\r\n}\r\n\r\n.confirm-button {\r\n  background-color: #009FE3;\r\n  color: white;\r\n}\r\n\r\n.alarm-definition-detail-container {\r\n    padding: 2rem 0;\r\n}\r\n\r\n.alarm-definition-detail {\r\n    font-size: 12px;\r\n    padding: 1rem;\r\n    overflow: auto;\r\n}\r\n\r\n.assign-user-info,\r\n.d-storz-cell{\r\n     white-space: pre-wrap;\r\n}\r\n",
                "customFunction": "const blueMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjY5IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiMwMDlERTIiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMwMDZEQUIiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2NjkpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2NjkpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjY5IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2NjkiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY2OSIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY2OSIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjY5IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\n\r\nconst redMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjY0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiNFRjQ0NDQiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiNCOTFDMUMiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2NjQpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2NjQpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjY0IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2NjQiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY2NCIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY2NCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjY0IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\nconst crossedMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njc0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMC41MjQ2IDI3LjI1MjdMMjAuMjAxNiAyNi4zMDYzTDE5LjkwMzcgMjYuNDA4TDE5LjcxNzggMjYuNjYxOUwyMC41MjQ2IDI3LjI1MjdaTTExLjQ3OTUgMjcuMjU0MUwxMi4yODU5IDI2LjY2MjdMMTIuMDk5OSAyNi40MDkxTDExLjgwMjIgMjYuMzA3NkwxMS40Nzk1IDI3LjI1NDFaTTE1LjA2NDggMzEuNTk5TDE0LjMyODQgMzIuMjc1NUwxNC4zMjkzIDMyLjI3NjVMMTUuMDY0OCAzMS41OTlaTTE2Ljk0NzggMzEuNTk5TDE3LjY4MzMgMzIuMjc2NUwxNy42ODYxIDMyLjI3MzVMMTYuOTQ3OCAzMS41OTlaTTI5IDE0QzI5IDE5LjcwNzkgMjUuMzIwOCAyNC41NTkxIDIwLjIwMTYgMjYuMzA2M0wyMC44NDc2IDI4LjE5OTFDMjYuNzUxNyAyNi4xODM5IDMxIDIwLjU4OTQgMzEgMTRIMjlaTTE2IDFDMjMuMTc5NyAxIDI5IDYuODIwMyAyOSAxNEgzMUMzMSA1LjcxNTczIDI0LjI4NDMgLTEgMTYgLTFWMVpNMyAxNEMzIDYuODIwMyA4LjgyMDMgMSAxNiAxVi0xQzcuNzE1NzMgLTEgMSA1LjcxNTczIDEgMTRIM1pNMTEuODAyMiAyNi4zMDc2QzYuNjgxMDcgMjQuNTYxNSAzIDE5LjcwOTMgMyAxNEgxQzEgMjAuNTkxIDUuMjUwMzcgMjYuMTg2NyAxMS4xNTY4IDI4LjIwMDZMMTEuODAyMiAyNi4zMDc2Wk0xMC42NzMxIDI3Ljg0NTVDMTIuMDQxOCAyOS43MTE5IDEzLjQzNTkgMzEuMzA0IDE0LjMyODQgMzIuMjc1NUwxNS44MDEyIDMwLjkyMjRDMTQuOTM5MSAyOS45ODQgMTMuNTk3IDI4LjQ1MDUgMTIuMjg1OSAyNi42NjI3TDEwLjY3MzEgMjcuODQ1NVpNMTQuMzI5MyAzMi4yNzY1QzE1LjIxNzcgMzMuMjQwOSAxNi43OTUgMzMuMjQwOSAxNy42ODMzIDMyLjI3NjVMMTYuMjEyNCAzMC45MjE0QzE2LjE3NSAzMC45NjE5IDE2LjEwNDcgMzAuOTk5OCAxNi4wMDYzIDMwLjk5OThDMTUuOTA3OSAzMC45OTk4IDE1LjgzNzYgMzAuOTYxOSAxNS44MDAzIDMwLjkyMTRMMTQuMzI5MyAzMi4yNzY1Wk0xNy42ODYxIDMyLjI3MzVDMTguNTczIDMxLjMwMjggMTkuOTY0MyAyOS43MTA0IDIxLjMzMTQgMjcuODQzNkwxOS43MTc4IDI2LjY2MTlDMTguNDA4IDI4LjQ1MDQgMTcuMDY4MSAyOS45ODQ4IDE2LjIwOTYgMzAuOTI0NEwxNy42ODYxIDMyLjI3MzVaIiBmaWxsPSIjNjQ3NDhCIiBtYXNrPSJ1cmwoI3BhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njc0KSIvPgo8cGF0aCBkPSJNMTQuNjE1NSA5LjczMzA2TDEyLjQzODUgNi4wODcyMUMxMi4yMTM3IDUuNzEwNTggMTIuMzI5NiA1LjIyMzM3IDEyLjcgNC45ODgzN0wxNS4xNDUzIDMuNDM2OTVDMTUuNTI0OSAzLjE5NjE0IDE2LjAyNzkgMy4zMTA1NyAxNi4yNjU5IDMuNjkxODZMMTkuMDk5IDguMjI5ODhDMTkuMTc3MyA4LjM1NTE4IDE5LjIxOTcgOC40OTk0OSAxOS4yMjE4IDguNjQ3MThMMTkuMzQ3NiAxNy40OTYyQzE5LjM1NCAxNy45NDc5IDE4Ljk4OTYgMTguMzE3NCAxOC41MzggMTguMzE3NEgxNS41Mzk3QzE1LjA5MjUgMTguMzE3NCAxNC43MyAxNy45NTQ5IDE0LjczIDE3LjUwNzdWMTAuMTQ4MkMxNC43MyAxMC4wMDIgMTQuNjkwNSA5Ljg1ODU2IDE0LjYxNTUgOS43MzMwNloiIGZpbGw9IiMwMDlERTIiLz4KPHBhdGggZD0iTTEzLjA2ODEgNy43NTY2NEwxMi4yODIxIDYuNDY4MDhDMTIuMDQ4NSA2LjA4NTI3IDExLjU0ODMgNS45NjUxNSAxMS4xNjY0IDYuMjAwMTdMMTAuNjk2NyA2LjQ4OTI1QzEwLjMxMzEgNi43MjUzMyAxMC4xOTU5IDcuMjI5MDggMTAuNDM1OCA3LjYxMDI2TDExLjI1IDguOTAzNDJDMTEuNDkyNSA5LjI4ODU0IDEyLjAwNDYgOS4zOTgyNiAxMi4zODM2IDkuMTQ2MjdMMTIuODI1MiA4Ljg1MjU5QzEzLjE4NzQgOC42MTE3OCAxMy4yOTQ2IDguMTI3OTEgMTMuMDY4MSA3Ljc1NjY0WiIgZmlsbD0iIzAwOURFMiIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0iIzAwOURFMiIvPgo8bWFzayBpZD0icGF0aC00LW91dHNpZGUtMl8zNzc5XzE0Njc0IiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIzIiB5PSIxIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGZpbGw9ImJsYWNrIj4KPHJlY3QgZmlsbD0id2hpdGUiIHg9IjMiIHk9IjEiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2IDE0QzI2IDE5LjUyMjggMjEuNTIyOCAyNCAxNiAyNEMxMy41OTg3IDI0IDExLjM5NTEgMjMuMTUzNiA5LjY3MTI3IDIxLjc0MjlMMjMuNzQyOSA3LjY3MTI3QzI1LjE1MzYgOS4zOTUxNCAyNiAxMS41OTg3IDI2IDE0Wk04LjI1NzA1IDIwLjMyODdMMjIuMzI4NyA2LjI1NzA1QzIwLjYwNDkgNC44NDYzNyAxOC40MDEzIDQgMTYgNEMxMC40NzcyIDQgNiA4LjQ3NzE1IDYgMTRDNiAxNi40MDEzIDYuODQ2MzcgMTguNjA0OSA4LjI1NzA1IDIwLjMyODdaTTI4IDE0QzI4IDIwLjYyNzQgMjIuNjI3NCAyNiAxNiAyNkM5LjM3MjU4IDI2IDQgMjAuNjI3NCA0IDE0QzQgNy4zNzI1OCA5LjM3MjU4IDIgMTYgMkMyMi42Mjc0IDIgMjggNy4zNzI1OCAyOCAxNFoiLz4KPC9tYXNrPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2IDE0QzI2IDE5LjUyMjggMjEuNTIyOCAyNCAxNiAyNEMxMy41OTg3IDI0IDExLjM5NTEgMjMuMTUzNiA5LjY3MTI3IDIxLjc0MjlMMjMuNzQyOSA3LjY3MTI3QzI1LjE1MzYgOS4zOTUxNCAyNiAxMS41OTg3IDI2IDE0Wk04LjI1NzA1IDIwLjMyODdMMjIuMzI4NyA2LjI1NzA1QzIwLjYwNDkgNC44NDYzNyAxOC40MDEzIDQgMTYgNEMxMC40NzcyIDQgNiA4LjQ3NzE1IDYgMTRDNiAxNi40MDEzIDYuODQ2MzcgMTguNjA0OSA4LjI1NzA1IDIwLjMyODdaTTI4IDE0QzI4IDIwLjYyNzQgMjIuNjI3NCAyNiAxNiAyNkM5LjM3MjU4IDI2IDQgMjAuNjI3NCA0IDE0QzQgNy4zNzI1OCA5LjM3MjU4IDIgMTYgMkMyMi42Mjc0IDIgMjggNy4zNzI1OCAyOCAxNFoiIGZpbGw9IiNFRjQ0NDQiLz4KPHBhdGggZD0iTTkuNjcxMjcgMjEuNzQyOUw4Ljk2NDE2IDIxLjAzNThMOC4xODI4OSAyMS44MTcxTDkuMDM3OTYgMjIuNTE2OEw5LjY3MTI3IDIxLjc0MjlaTTIzLjc0MjkgNy42NzEyN0wyNC41MTY4IDcuMDM3OTZMMjMuODE3MSA2LjE4Mjg5TDIzLjAzNTggNi45NjQxNkwyMy43NDI5IDcuNjcxMjdaTTguMjU3MDUgMjAuMzI4N0w3LjQ4MzE1IDIwLjk2Mkw4LjE4Mjg5IDIxLjgxNzFMOC45NjQxNiAyMS4wMzU4TDguMjU3MDUgMjAuMzI4N1pNMjIuMzI4NyA2LjI1NzA1TDIzLjAzNTggNi45NjQxNkwyMy44MTcxIDYuMTgyODlMMjIuOTYyIDUuNDgzMTVMMjIuMzI4NyA2LjI1NzA1Wk0xNiAyNUMyMi4wNzUxIDI1IDI3IDIwLjA3NTEgMjcgMTRIMjVDMjUgMTguOTcwNiAyMC45NzA2IDIzIDE2IDIzVjI1Wk05LjAzNzk2IDIyLjUxNjhDMTAuOTMzOSAyNC4wNjg0IDEzLjM1OTUgMjUgMTYgMjVWMjNDMTMuODM3OSAyMyAxMS44NTYzIDIyLjIzODkgMTAuMzA0NiAyMC45NjlMOS4wMzc5NiAyMi41MTY4Wk0yMy4wMzU4IDYuOTY0MTZMOC45NjQxNiAyMS4wMzU4TDEwLjM3ODQgMjIuNDUwMUwyNC40NTAxIDguMzc4MzhMMjMuMDM1OCA2Ljk2NDE2Wk0yNyAxNEMyNyAxMS4zNTk1IDI2LjA2ODQgOC45MzM5NCAyNC41MTY4IDcuMDM3OTZMMjIuOTY5IDguMzA0NTdDMjQuMjM4OSA5Ljg1NjM0IDI1IDExLjgzNzkgMjUgMTRIMjdaTTguOTY0MTYgMjEuMDM1OEwyMy4wMzU4IDYuOTY0MTZMMjEuNjIxNiA1LjU0OTk1TDcuNTQ5OTUgMTkuNjIxNkw4Ljk2NDE2IDIxLjAzNThaTTIyLjk2MiA1LjQ4MzE1QzIxLjA2NjEgMy45MzE2MiAxOC42NDA1IDMgMTYgM1Y1QzE4LjE2MjEgNSAyMC4xNDM3IDUuNzYxMTEgMjEuNjk1NCA3LjAzMDk2TDIyLjk2MiA1LjQ4MzE1Wk0xNiAzQzkuOTI0ODcgMyA1IDcuOTI0ODcgNSAxNEg3QzcgOS4wMjk0NCAxMS4wMjk0IDUgMTYgNVYzWk01IDE0QzUgMTYuNjQwNSA1LjkzMTYyIDE5LjA2NjEgNy40ODMxNSAyMC45NjJMOS4wMzA5NiAxOS42OTU0QzcuNzYxMTEgMTguMTQzNyA3IDE2LjE2MjEgNyAxNEg1Wk0xNiAyN0MyMy4xNzk3IDI3IDI5IDIxLjE3OTcgMjkgMTRIMjdDMjcgMjAuMDc1MSAyMi4wNzUxIDI1IDE2IDI1VjI3Wk0zIDE0QzMgMjEuMTc5NyA4LjgyMDMgMjcgMTYgMjdWMjVDOS45MjQ4NyAyNSA1IDIwLjA3NTEgNSAxNEgzWk0xNiAxQzguODIwMyAxIDMgNi44MjAzIDMgMTRINUM1IDcuOTI0ODcgOS45MjQ4NyAzIDE2IDNWMVpNMjkgMTRDMjkgNi44MjAzIDIzLjE3OTcgMSAxNiAxVjNDMjIuMDc1MSAzIDI3IDcuOTI0ODcgMjcgMTRIMjlaIiBmaWxsPSJ3aGl0ZSIgbWFzaz0idXJsKCNwYXRoLTQtb3V0c2lkZS0yXzM3NzlfMTQ2NzQpIi8+Cjwvc3ZnPgo=';\r\n\r\nconst orangeMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njg3IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiNGOTczMTYiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiNDMjQxMEMiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2ODcpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2ODcpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0Njg3IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2ODciLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY4NyIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY4NyIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0Njg3IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\nconst greenMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjkyIiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiMyMkM1NUUiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMxNTgwM0QiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2OTIpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2OTIpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjkyIiB4PSI3LjMxMTI4IiB5PSIxLjE2MDc5IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkyIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2OTIiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY5MiIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY5MiIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjkyIiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\nconst greyMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjgyIiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiM2NDc0OEIiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMzMzQxNTUiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2ODIpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2ODIpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjgyIiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2ODIiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY4MiIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY4MiIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjgyIiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\n\r\nlet $injector = widgetContext.$scope.$injector;\r\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nlet deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\nlet http = $injector.get(widgetContext.servicesMap.get('http'));\r\nconst urlEntitiesQuery = `/api/entitiesQuery/find`;\r\n\r\nconst pageLink = {\r\n  page: 0,\r\n  pageSize: 10,\r\n  sortOrder: {\r\n    key: {\r\n      key: \"name\",\r\n      type: \"ENTITY_FIELD\",\r\n    },\r\n    direction: \"ASC\"\r\n  } \r\n}\r\n\r\n\r\nconst statusLabels = [\r\n  { key: \"isOpen\", label: \"Open\", icon: redMarker },\r\n  { key: \"isLowBattery\", label: \"Low battery\", icon: redMarker },\r\n  { key: \"isClosed\", label: \"Closed\", icon: greenMarker },\r\n  { key: \"isNoSignal\", label: \"No signal\", icon: crossedMarker },\r\n  { key: \"isInactive\", label: \"Inactive\", icon: blueMarker },\r\n  { key: \"isTemporaryDeactivated\", label: \"Temporary deactivated\", icon: orangeMarker },\r\n  { key: \"isNotAssigned\", label: \"Not assigned\", icon: greyMarker }\r\n];\r\n\r\nconst notificationTypes = {\r\n    email: \"Email\",\r\n    sms: \"SMS\"\r\n}\r\n\r\nconst eventTypes = {\r\n    alarmOpen: \"Open\" ,\r\n    alarmLowBattery: \"Low battery\",\r\n    alarmNoSignal: \"No Signal\",\r\n    alarmClose: \"Close\"\r\n}\r\n\r\n\r\nconst statusPriorities = {\r\n    isTemporaryDeactivated: 0,\r\n    isOpen: 1,\r\n    isInactive: 2, \r\n    isLowBattery: 3,\r\n    isNoSignal: 4,\r\n    isNotAssigned: 5,\r\n    isClosed: 6,\r\n    isOnline: 7\r\n}\r\n\r\n\r\nconst alarmDefinitionQuery = { \r\n    entityFilter: {\r\n      type: \"singleEntity\",\r\n      singleEntity: {\r\n        entityType: \"ASSET\",\r\n        id: entityId.id\r\n      }\r\n    },\r\n    entityFields: [\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"name\"\r\n        }\r\n        ],\r\n        latestValues: [\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"alarmDefinition\"\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"userGroups\"\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"users\"\r\n        }\r\n    ],\r\n    pageLink: pageLink\r\n};\r\n\r\n\r\nconst relatedEntitiesQuery = { \r\n    entityFilter: {\r\n      type: \"relationsQuery\",\r\n      rootEntity: {\r\n        entityType: \"ASSET\",\r\n        id: entityId.id\r\n      },\r\n      direction: \"FROM\",\r\n      maxLevel: 1,\r\n      fetchLastLevelOnly: true,\r\n      filters: [\r\n        {\r\n          relationType: \"ManagesAlarms\",\r\n          entityTypes: [\r\n            \"ASSET\"\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    entityFields: [\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"name\",\r\n        },\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"type\",\r\n        }\r\n    ],\r\n    latestValues: [],\r\n    pageLink: pageLink\r\n};\r\n\r\nconst relatedHydrantsQuery = {\r\n  filters: [\r\n    {\r\n      relationType: \"Contains\",\r\n      entityTypes: [\r\n        \"ASSET\",\r\n        \"DEVICE\"\r\n      ]\r\n    }\r\n  ],\r\n  parameters: {\r\n    rootId: entityId.id,\r\n    rootType: \"ASSET\",\r\n    direction: \"FROM\",\r\n    relationTypeGroup: \"COMMON\",\r\n    maxLevel: 4,\r\n    fetchLastLevelOnly: false\r\n  }\r\n};\r\n\r\nconst hydrantListFilter = {\r\n  entityFilter: {\r\n      type: \"entityList\",\r\n      entityType: \"ASSET\",\r\n      entityList: []\r\n    },\r\n    entityFields: [\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"name\"\r\n        },\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"type\"\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"hydrantsBrand\"\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"modelNumber\"\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"longitude\"\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"latitude\"\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isOpen\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isClosed\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isNoSignal\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isInactive\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isActive\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isTemporaryDeactivated\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isNotAssigned\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isLowBattery\",\r\n        }\r\n    ],\r\n    pageLink: pageLink\r\n}\r\n\r\nconst assignedUserQuery = {\r\n    entityFilter: {\r\n      type: \"relationsQuery\",\r\n      rootEntity: {\r\n        entityType: \"ASSET\",\r\n        id: entityId.id\r\n      },\r\n      direction: \"TO\",\r\n      maxLevel: 1,\r\n      fetchLastLevelOnly: true,\r\n      filters: [\r\n        {\r\n          relationType: \"Owns\",\r\n          entityTypes: [\r\n            \"USER\"\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    entityFields: [\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"name\",\r\n        },\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"type\",\r\n        },\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"email\",\r\n        }\r\n    ],\r\n    latestValues: [],\r\n    pageLink: pageLink\r\n};\r\n\r\nconst dStorzListFilter = {\r\n  entityFilter: {\r\n      type: \"entityList\",\r\n      entityType: \"DEVICE\",\r\n      entityList: []\r\n    },\r\n    entityFields: [\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"name\"\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"serialNumber\"\r\n        },\r\n    ],\r\n    pageLink: pageLink\r\n}\r\n\r\n\r\nfunction unixToHumanReadable(unixTimestamp) {\r\n  if (isNaN(Number(unixTimestamp))) {\r\n    return 'Invalid Timestamp';\r\n  }\r\n\r\n  // Convert to a number if it's a string\r\n  unixTimestamp = Number(unixTimestamp);\r\n  \r\n  if (String(unixTimestamp).length <= 10) {\r\n    unixTimestamp *= 1000;  // Convert to milliseconds\r\n  }\r\n  // Create a new Date object\r\n  const date = new Date(unixTimestamp);\r\n  \r\n  // Formatting the date and time\r\n  const year = date.getFullYear();\r\n  const month = date.toLocaleString('default', { month: 'short' }); // Get the short name of the month\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  const hours = String(date.getHours()).padStart(2, '0');\r\n  const minutes = String(date.getMinutes()).padStart(2, '0');\r\n\r\n  // Combine into a human-readable string\r\n  const humanReadableDate = ` ${day} ${month} ${year} | ${hours}:${minutes}`;\r\n\r\n  return humanReadableDate;\r\n}\r\n\r\n\r\nfunction mapHydrantAssetToDStorz(relationsInfo) {\r\n  const assetToDeviceMapping = {};\r\n  \r\n  relationsInfo.forEach((relation) => {\r\n    const fromId = relation.from.id;\r\n    const toId = relation.to.id;\r\n    const toName = relation.toName;\r\n    const fromType = relation.from.entityType;\r\n    const toType = relation.to.entityType;\r\n\r\n    if (fromType === \"ASSET\" && toType === \"DEVICE\") {\r\n      if (!assetToDeviceMapping[fromId]) {\r\n        assetToDeviceMapping[fromId] = [];\r\n      }\r\n      dStorzListFilter.entityFilter.entityList.push(toId);\r\n      assetToDeviceMapping[fromId].push(toName);  \r\n    }\r\n  });\r\n\r\n  const assetLevel1ToDeviceMapping = [];\r\n\r\n  relationsInfo.forEach((relation) => {\r\n    const fromId = relation.from.id;\r\n    const toId = relation.to.id;\r\n    const fromType = relation.from.entityType;\r\n    const toType = relation.to.entityType;\r\n        \r\n    if (fromId == entityId.id || toId == entityId.id) {\r\n      return;\r\n    }\r\n\r\n    // Create a mapping from Asset Level 1 to devices via Asset Level 2\r\n    if (fromType === \"ASSET\" && toType === \"ASSET\") {\r\n      const existingEntry = assetLevel1ToDeviceMapping.find(entry => entry.id === fromId);\r\n\r\n      if (existingEntry) {\r\n        existingEntry.devices = existingEntry.devices.concat(assetToDeviceMapping[toId] || []);\r\n      } else {\r\n        assetLevel1ToDeviceMapping.push({ id: fromId, devices: assetToDeviceMapping[toId] || [] });\r\n      }\r\n    }\r\n  });\r\n\r\n  return assetLevel1ToDeviceMapping;\r\n}\r\n\r\n\r\nfunction isTrue(value) {\r\n  return value !== undefined && value !== null && (value === 'true' || value === true || value == 1 || value == '1');\r\n}\r\n\r\n\r\nfunction readTelemetryValue(telemetryName) {\r\n  if (telemetryName && telemetryName.value && telemetryName.value !== undefined) {\r\n    return isTrue(telemetryName.value);\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction getTranslation(translationText, extraParam = null) {\r\n    translateService = $injector.get(widgetContext.servicesMap.get('translate'));\r\n    let translated = \"\";\r\n    try {\r\n        translated = translateService.instant(translationText, extraParam);\r\n\r\n    } catch (error) {\r\n\r\n    }\r\n    return translated;\r\n}\r\n\r\nfunction formatStringArray(str) {\r\n    // Remove brackets and split by comma\r\n    const items = str.slice(1, -1).split(',');\r\n\r\n    return items\r\n        .map(item => {\r\n            // Remove quotes and trim\r\n            const cleanItem = item.trim().slice(1, -1);\r\n            // Capitalize the first letter and add space before capital letters\r\n            return cleanItem.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());\r\n        })\r\n        .join(', ');\r\n}\r\n\r\nfunction formatEmailArray(str) {\r\n    // Extract the substrings within the double quotes and split into an array\r\n    const emailRegex = /[\"']([^\"']+)[\"']/g;\r\n    const emails = [];\r\n    let match;\r\n    while ((match = emailRegex.exec(str)) !== null) {\r\n        emails.push(match[1]);\r\n    }\r\n    return emails.join(', ');\r\n}\r\n\r\nfunction findLatestState(timeseriesOfCurrentEntity, telemetryKeys) {\r\n  let latestTelemetry = { telemetryKeyName: \"\", ts: 0, label: \"\", priority: 100 };\r\n  for (let j = 0; j < telemetryKeys.length; ++j) {\r\n    let telemetryKey = telemetryKeys[j];\r\n    const inactiveDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isInactive\", priority: statusPriorities.isInactive, label: statusLabels.isInactive };\r\n    const lowBatteryDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isLowBattery\", priority: statusPriorities.isLowBattery, label: statusLabels.isLowBattery };\r\n    const temporaryDeactivationDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isTemporaryDeactivated\", priority: statusPriorities.isTemporaryDeactivated, label: statusLabels.isTemporaryDeactivated };\r\n    const noSignalDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isNoSignal\", priority: statusPriorities.isNoSignal, label: statusLabels.isNoSignal };\r\n    const notAssignedDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isNotAssigned\", priority: statusPriorities.isNotAssigned };\r\n    const openDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isOpen\", priority: statusPriorities.isOpen, label: statusLabels.isOpen };\r\n    const closedDescriptor = { telemetryKeyName: telemetryKey, ts: timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isClosed\", priority: statusPriorities.isClosed, label: statusLabels.isClosed };\r\n\r\n    if (timeseriesOfCurrentEntity[telemetryKey].ts > latestTelemetry.ts && timeseriesOfCurrentEntity[telemetryKey].ts > 0) {\r\n      if (telemetryKey == \"isInactive\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = inactiveDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = lowBatteryDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isTemporaryDeactivated\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = temporaryDeactivationDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = noSignalDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isNotAssigned\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = notAssignedDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isOpen\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = openDescriptor;\r\n      } else if (telemetryKey == \"isOpen\" && !isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n        latestTelemetry = closedDescriptor;\r\n      }\r\n    }\r\n    else if (timeseriesOfCurrentEntity[telemetryKey].ts == latestTelemetry.ts && timeseriesOfCurrentEntity[telemetryKey].ts > 0) {\r\n      if (telemetryKey == \"isInactive\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isInactive < latestTelemetry.priority) {\r\n        latestTelemetry = inactiveDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isLowBattery < latestTelemetry.priority) {\r\n        latestTelemetry = lowBatteryDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isTemporaryDeactivated\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isTemporaryDeactivated < latestTelemetry.priority) {\r\n        latestTelemetry = temporaryDeactivationDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isNoSignal < latestTelemetry.priority) {\r\n        latestTelemetry = noSignalDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isNotAssigned\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isNotAssigned < latestTelemetry.priority) {\r\n        latestTelemetry = notAssignedDescriptor;\r\n      }\r\n      else if (telemetryKey == \"isOpen\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isOpen < latestTelemetry.priority) {\r\n        latestTelemetry = openDescriptor;\r\n      } else if (telemetryKey == \"isOpen\" && !isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isClosed < latestTelemetry.priority) {\r\n        latestTelemetry = closedDescriptor;\r\n      }\r\n    }\r\n  }\r\n  return latestTelemetry;\r\n}\r\n\r\nfunction fillHydrantTable(dStorzNameAndSerialNumbers, mappedHydrants, vm) {\r\n  http.post(urlEntitiesQuery, hydrantListFilter).pipe().subscribe((hydrantDetails) => {  \r\n    mappedHydrants.forEach((hydrant) => {\r\n        const matchingEntity = hydrantDetails.data.find((entity) => entity.entityId.id === hydrant.id);\r\n        \r\n        if (matchingEntity) {\r\n            const telemetryKeys = Object.keys(matchingEntity.latest.TIME_SERIES);  \r\n            const statusTelemetryKeys = telemetryKeys.filter(item => item.startsWith(\"is\"));\r\n            let timeseriesOfCurrentEntity = matchingEntity.latest.TIME_SERIES;\r\n            let latestTelemetry = findLatestState(timeseriesOfCurrentEntity, statusTelemetryKeys);\r\n            \r\n            hydrant.brand = matchingEntity.latest.ATTRIBUTE.hydrantsBrand.value ?? \"--\";\r\n            hydrant.model = matchingEntity.latest.ATTRIBUTE.modelNumber.value ?? \"--\";\r\n\r\n            hydrant.deviceSerialNumbers = hydrant.devices.map(deviceName => dStorzNameAndSerialNumbers.find(dStorzNameAndSerialNumber => dStorzNameAndSerialNumber.name == deviceName).serialNumber); \r\n            vm.hydrantDataSource.push({\r\n            selectedHydrants: matchingEntity.latest.ENTITY_FIELD.name.value, \r\n            brand: hydrant.brand, \r\n            model: hydrant.model, \r\n            dStorz: hydrant.deviceSerialNumbers.length ? hydrant.deviceSerialNumbers.toString().replaceAll(\",\", \"\\n\") : \"--\"\r\n            }\r\n        );\r\n        \r\n        let resultTelemetryKey = latestTelemetry.status ? latestTelemetry.status : \"isNotAssigned\";\r\n        const statusDescriptor = statusLabels.find(item => item.key === resultTelemetryKey);\r\n        vm.hydrantLocations.push({\r\n            lat: Number(matchingEntity.latest.ATTRIBUTE.latitude.value), \r\n            lng: Number(matchingEntity.latest.ATTRIBUTE.longitude.value),\r\n            icon: statusDescriptor.icon\r\n        })\r\n        }\r\n    });\r\n    vm.hydrantDataSourceReady = true;\r\n  \r\n    checkGoogleMaps(vm);\r\n})\r\n}\r\n\r\nfunction checkGoogleMaps(vm) {\r\n  if (window.google && window.google.maps) {\r\n    initMap(true, vm);\r\n  } else {\r\n    const script = document.createElement('script');\r\n    script.type = 'text/javascript';\r\n    script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyDE07XHeCdHUJci4OLOcRHGJZyAQc8SYUc';\r\n\r\n    // Listen for the script load event and initialize map after fully loaded\r\n    script.addEventListener('load', function () {\r\n      initMap(false, vm);\r\n    });\r\n\r\n    // Append the script tag to the document's head\r\n    document.head.appendChild(script);\r\n  }\r\n}\r\n\r\nfunction initMap(loadWithTimeout, vm) {\r\n  setTimeout(() => {\r\n    vm.map = new google.maps.Map(document.getElementById('alarm-definition-map-container'), {\r\n      center: { lat: 46.8182, lng: 8.2275 }, // Switzerland's approximate geographic center\r\n      zoom: 7, \r\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n      mapTypeControl: false,\r\n      fullscreenControl: false,\r\n      streetViewControl: false,\r\n      controlSize: 25,\r\n      zoomControl: true,\r\n      zoomControlOptions: {\r\n        position: google.maps.ControlPosition.TOP_LEFT\r\n      }\r\n    })\r\n    const bounds = new google.maps.LatLngBounds();\r\n\r\n     vm.hydrantLocations.forEach((location) => {\r\n      const marker = new google.maps.Marker({\r\n        position: {lat: location.lat, lng: location.lng},\r\n        map: vm.map,\r\n        icon: {\r\n          url: location.icon,\r\n          scaledSize: new google.maps.Size(32, 32) \r\n        }\r\n      });\r\n\r\n      bounds.extend(marker.getPosition());\r\n      if(vm.hydrantLocations.length == 1) {\r\n          vm.map.setCenter(marker.getPosition());\r\n          vm.map.setZoom(11);\r\n      }\r\n    });\r\n    \r\n    if(vm.hydrantLocations.length > 1) {\r\n         vm.map.fitBounds(bounds);\r\n    }\r\n\r\n  }, 100)\r\n}\r\n\r\nopenSideNavDrawer();\r\n\r\nfunction openSideNavDrawer() {\r\n  customDialog.customDialog(htmlTemplate,\r\n    popupDialogController).subscribe();\r\n  setTimeout(function () {\r\n    document.getElementById(\"popup-dialog\").classList.remove(\"closed\");\r\n  }, 10);\r\n}\r\n\r\nfunction popupDialogController(instance) {\r\n  let vm = instance;\r\n  vm.hydrantDataSourceReady = false;\r\n  vm.hydrantLocations = [];\r\n\r\n\r\n  checkGoogleMaps(vm);\r\n\r\n\r\n  vm.cancel = function () {\r\n    document.getElementById(\"popup-dialog\").classList.add(\"closed\");\r\n    vm.dialogRef.close(null);\r\n  };\r\n\r\n  vm.displayedColumns = ['selectedHydrants', 'brand', 'model', 'dStorz'];\r\n\r\n  setTimeout(() => {\r\n    document.getElementById(\"status-badge\").classList.add(\"isInactive\");\r\n  }, 100);\r\n     \r\n       http.post(urlEntitiesQuery, alarmDefinitionQuery).pipe().subscribe((alarmDefinitionEntity) => {\r\n    if(alarmDefinitionEntity.data.length) {\r\n        let alarmDefinitionObject = alarmDefinitionEntity.data[0];\r\n        let alarmDefinitionDetails = JSON.parse(alarmDefinitionObject.latest.ATTRIBUTE.alarmDefinition.value);\r\n        let userGroupDetails = JSON.parse(alarmDefinitionObject.latest.ATTRIBUTE.userGroups.value);\r\n        \r\n        if(alarmDefinitionObject.latest.ATTRIBUTE.userGroups && alarmDefinitionObject.latest.ATTRIBUTE.userGroups.value) {\r\n            let userGroupDetails = JSON.parse(alarmDefinitionObject.latest.ATTRIBUTE.userGroups.value);\r\n            vm.assignUserRoles = userGroupDetails && userGroupDetails.length ? (userGroupDetails.map(group => group.name)).join(', '): '--';\r\n        } else {\r\n            vm.assignUserRoles = \"--\";\r\n        }\r\n        \r\n        \r\n        if(alarmDefinitionObject.latest.ATTRIBUTE.users && alarmDefinitionObject.latest.ATTRIBUTE.users.value) {\r\n            let usersListArray = JSON.parse(alarmDefinitionObject.latest.ATTRIBUTE.users.value);\r\n            vm.assignUser = usersListArray && usersListArray.length ? (usersListArray.map(user => user.name)).join(\"\\n\") : \"--\";\r\n        } else {\r\n            vm.assignUser = \"--\"\r\n        }\r\n        \r\n        let notificationStartDate = alarmDefinitionDetails.alarmState.fromDate;\r\n        let notificationEndDate = alarmDefinitionDetails.alarmState.toDate;\r\n        vm.notificationStartDateFormatted = unixToHumanReadable(notificationStartDate);\r\n        vm.notificationEndDateFormatted = notificationEndDate > 0 ? unixToHumanReadable(notificationEndDate) : \"--\";\r\n        vm.alarmDelayTime = alarmDefinitionDetails.notification.delay ? `${alarmDefinitionDetails.notification.delay/1000/60} min` : 'None'; //ms -> min\r\n        \r\n        vm.repeatEnabled = alarmDefinitionDetails.notification.reNotificationOnMissingAck && alarmDefinitionDetails.notification.reNotificationOnMissingAck > 0;\r\n        vm.reNotification = alarmDefinitionDetails.notification.reNotificationOnMissingAck/1000/60; //ms -> min\r\n        \r\n        let enabledEvents = [];\r\n        if(alarmDefinitionDetails.eventType.alarmOpen) {\r\n            enabledEvents.push(eventTypes.alarmOpen);\r\n        }\r\n        if(alarmDefinitionDetails.eventType.alarmNoSignal) {\r\n            enabledEvents.push(eventTypes.alarmNoSignal);\r\n        }\r\n        if(alarmDefinitionDetails.eventType.alarmLowBattery) {\r\n            enabledEvents.push(eventTypes.alarmLowBattery);\r\n        }\r\n        if(alarmDefinitionDetails.eventType.alarmClose) {\r\n            enabledEvents.push(eventTypes.alarmClose);\r\n        }\r\n        vm.eventType = enabledEvents.length ? enabledEvents.join(', ') : \"--\";\r\n        \r\n\r\n        let enabledNotifications = [];\r\n        if(alarmDefinitionDetails.notification.email) {\r\n            enabledNotifications.push(notificationTypes.email);\r\n        }\r\n        if(alarmDefinitionDetails.notification.sms) {\r\n            enabledNotifications.push(notificationTypes.sms);\r\n        }\r\n        vm.notificationType = enabledNotifications.length ? enabledNotifications.join(', '): '--';\r\n        \r\n        vm.notificationStatus = alarmDefinitionDetails.alarmState.isActive ? \"Active\" : \"Inactive\";\r\n    }\r\n  })\r\n  \r\n    http.post(urlEntitiesQuery, relatedEntitiesQuery).pipe().subscribe((relatedEntities) => {\r\n      if(relatedEntities.data.length) {\r\n        let relatedEntitiesArray = relatedEntities.data;\r\n        let relatedHydrants = relatedEntitiesArray.filter(entity => entity.latest.ENTITY_FIELD.type.value == \"hydrant\");\r\n        let relatedZones = relatedEntitiesArray.filter(entity => entity.latest.ENTITY_FIELD.type.value == \"zone\");\r\n        vm.assignZones = relatedZones.length ? (relatedZones.map(zone => zone.latest.ENTITY_FIELD.name.value)).join(\", \") : '--';\r\n  \r\n        http.post(\"/api/relations/info\", relatedHydrantsQuery).pipe().subscribe((relatedHydrantsAndZones) => {\r\n              //removing all zone related relations\r\n              const zoneIds = new Set(relatedZones.map(zone => zone.entityId.id));\r\n              const relatedHydrantsRelations = relatedHydrantsAndZones.filter(relation => !zoneIds.has(relation.from.id) && !zoneIds.has(relation.to.id));\r\n              vm.hydrantDataSource = [];\r\n              let mappedHydrants = mapHydrantAssetToDStorz(relatedHydrantsRelations);\r\n              let allRelatedAssetIds = relatedHydrantsRelations.map(hydrant => hydrant.to.id);\r\n              const hydrantAssetIds = mappedHydrants.map(hydrant => hydrant.id);\r\n              hydrantListFilter.entityFilter.entityList = hydrantAssetIds;\r\n              if(hydrantAssetIds.length > 0) {\r\n                if(dStorzListFilter.entityFilter.entityList.length > 0) {\r\n                  http.post(urlEntitiesQuery, dStorzListFilter).pipe().subscribe((dStorzDetails) => { \r\n                    const dStorzNameAndSerialNumbers = dStorzDetails.data.map(dStorzDetail => ({name: dStorzDetail.latest.ENTITY_FIELD.name.value, serialNumber: dStorzDetail.latest.ATTRIBUTE.serialNumber.value}));\r\n  \r\n                    fillHydrantTable(dStorzNameAndSerialNumbers, mappedHydrants, vm);\r\n                  })\r\n                } else {\r\n                  dStorzNameAndSerialNumbers = [];\r\n                  fillHydrantTable(dStorzNameAndSerialNumbers, mappedHydrants, vm);\r\n                }\r\n\r\n              } else {\r\n                  checkGoogleMaps(vm);\r\n              } \r\n              \r\n          });\r\n      }\r\n      });\r\n\r\n    vm.setAllTranslations = function() {\r\n      vm.dialogTitle = getTranslation(\"hawle-dashboard.alarm-definition-info\");\r\n      vm.hydrantNumber = getTranslation(\"hawle-dashboard.hydrant.hydrant-number\");\r\n      vm.brand = getTranslation(\"hawle-dashboard.hydrant.brand\");\r\n      vm.model = getTranslation(\"hawle-dashboard.hydrant.model\");\r\n      vm.temporaryDeactivation = getTranslation(\"hawle-dashboard.temporary-deactivation\");\r\n      vm.outletInformation = getTranslation(\"hawle-dashboard.hydrant.outlet-information\");\r\n      vm.reason = getTranslation(\"hawle-dashboard.reason\");\r\n      vm.time = getTranslation(\"hawle-dashboard.time\");\r\n      vm.createdBy = getTranslation(\"hawle-dashboard.created-by\");\r\n      vm.assignedDStorz = getTranslation(\"hawle-dashboard.hydrant.assigned-dstorz\");\r\n      vm.statusTimestamp = getTranslation(\"hawle-dashboard.hydrant.status-timestamp\");\r\n      vm.routeTo = getTranslation(\"hawle-dashboard.hydrant.route-to\");\r\n      vm.locationLabel = getTranslation(\"hawle-dashboard.location\");\r\n      vm.zoneLabel = getTranslation(\"hawle-dashboard.zone\");\r\n      vm.unconfirmedAlarms = getTranslation(\"hawle-dashboard.hydrant.unconfirmed-alarms\", {alarmCount: 10});\r\n      vm.fromLabel = getTranslation(\"hawle-dashboard.from\");\r\n      vm.toLabel = getTranslation(\"hawle-dashboard.to\");\r\n      vm.selectedHydrantsLabel = getTranslation(\"hawle-dashboard.selected-hydrants\");\r\n      vm.dStorzLabel = getTranslation(\"hawle-dashboard.d-storz\");\r\n      vm.selectedHydrantsLabel = getTranslation(\"hawle-dashboard.selected-hydrants\");\r\n      vm.dStorzLabel = getTranslation(\"hawle-dashboard.d-storz\");\r\n      vm.assignZonesLabel = getTranslation('hawle-dashboard.assign-zones');\r\n        vm.eventTypeLabel = getTranslation('hawle-dashboard.event-type');\r\n        vm.assignUserLabel = getTranslation('hawle-dashboard.assign-user');\r\n        vm.assignUserRolesLabel = getTranslation('hawle-dashboard.assign-user-roles');\r\n        vm.notificationTypeLabel = getTranslation('hawle-dashboard.notification-type');\r\n        vm.alarmStateLabel = getTranslation('hawle-dashboard.alarm-state');\r\n        vm.delayLabel = getTranslation('hawle-dashboard.delay');\r\n        vm.reNotificationLabel = getTranslation('hawle-dashboard.re-notification');\r\n        vm.activeFromLabel = getTranslation('hawle-dashboard.active-from');\r\n        vm.activeTillLabel = getTranslation('hawle-dashboard.active-till');\r\n    };\r\n           \r\n    vm.setAllTranslations();\r\n}\r\n",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "8b28e83a-db76-7296-ed50-36bb019dd598"
              }
            ],
            "headerButton": [
              {
                "name": "Alarm definition additon",
                "icon": "add",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_alarm_definition",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "b81457e7-8fff-f219-d637-c4684c3916fa"
              }
            ],
            "actionCellButton": [
              {
                "name": "Edit",
                "icon": "edit",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "edit_alarm_definition",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "aa1441db-d764-7828-7f91-a6107a2ca1db"
              },
              {
                "name": "Duplicate",
                "icon": "content_copy",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "duplicate_alarm_definition",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "7eb7e173-fdde-e949-f413-2bca97ca677d"
              },
              {
                "name": "Delete",
                "icon": "delete",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\r\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\r\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\r\nlet rxjs = widgetContext.rxjs;\r\nlet currentEntityId = {id: widgetContext.datasources[0].entityId, entityType: widgetContext.datasources[0].entityType};\r\nopenDeleteEntityDialog();\r\n\r\nfunction openDeleteEntityDialog() {\r\n    const deleteText = getTranslation('hawle-dashboard.delete');\r\n    const cancelText = getTranslation('hawle-dashboard.cancel');\r\n    const contentText = getTranslation('hawle-dashboard.dialog-content');\r\n    \r\n    let title = deleteText+ \" \" + 'Alarm Definition' + ' ' +\r\n                entityName;\r\n    let content = contentText + ' ' + entityName + '?';\r\n    dialogs.confirm(title, content, cancelText, deleteText).subscribe(\r\n        function(result) {\r\n            if (result) {\r\n                removePreviousEntityGroupServerAttributesAndAllRelations().pipe(\r\n                        rxjs.defaultIfEmpty(null),\r\n                        rxjs.finalize(() => deleteEntity()) \r\n                    ).subscribe();\r\n            }\r\n        }\r\n    );\r\n}\r\n\r\nfunction getTranslation(translationText) {\r\n    widgetContext.$scope.translateService = widgetContext.$scope.$injector.get(widgetContext.servicesMap.get('translate'));\r\n    let translated = translationText;\r\n    try {\r\n        translated = widgetContext.$scope\r\n                .translateService.instant(\r\n                    translationText);\r\n    } catch (error) {\r\n        \r\n    }\r\n    return translated;\r\n}\r\n\r\nfunction deleteEntity() {\r\n    deleteEntityObservable(entityId).subscribe(\r\n        function success() {\r\n            widgetContext.showToast('success',\r\n                getTranslation('hawle-dashboard.alarm-definition-deleted-successfully'), 2000,\r\n                'top', 'left');\r\n            widgetContext.updateAliases();\r\n        },\r\n        function fail() {\r\n            showErrorDialog();\r\n        }\r\n    );\r\n}\r\n\r\nfunction deleteEntityObservable(entityId) {\r\n     return assetService.deleteAsset(entityId.id);\r\n}\r\n\r\nfunction showErrorDialog() {\r\n    let title = 'Error';\r\n    let content = 'An error occurred while deleting the entity. Please try again.';\r\n    dialogs.alert(title, content, 'CLOSE').subscribe(\r\n        function(result) {}\r\n    );\r\n}\r\nfunction getEntityServerAttributes(entityId = {entityType:null, id: null}) {\r\n    return attributeService.getEntityAttributes({ entityType: entityId.entityType, id: entityId.id }, \"SERVER_SCOPE\").pipe(rxjs.map((response) => {\r\n      const result = {};\r\n      if (response.length === 0) {\r\n        return result;\r\n      }\r\n      response.forEach((entity) => {\r\n        result[entity.key] = entity.value;\r\n      });\r\n      return result;\r\n    }));\r\n  }\r\n\r\n  function removePreviousEntityGroupServerAttributesAndAllRelations() {\r\n    return getEntityServerAttributes(currentEntityId).pipe(rxjs.mergeMap((serverAttributes) => {\r\n        const calls = [];\r\n        if (Array.isArray(serverAttributes.userGroups)) {\r\n            serverAttributes.userGroups.forEach((userGroup) => {\r\n                calls.push(attributeService.deleteEntityAttributes({ entityType: 'ENTITY_GROUP', id: userGroup.id }, 'SERVER_SCOPE', [{\r\n                    key: `alarmDefinition_${currentEntityId.id}`,\r\n                    value: {}\r\n                }]));\r\n            });\r\n        }\r\n        if (Array.isArray(serverAttributes.users)) {\r\n            serverAttributes.users.forEach((user) => {\r\n                calls.push(attributeService.deleteEntityAttributes({ entityType: 'USER', id: user.id }, 'SERVER_SCOPE', [{\r\n                    key: `alarmDefinition_${currentEntityId.id}`,\r\n                    value: {}\r\n                }]));\r\n            });\r\n        }\r\n        return rxjs.forkJoin(calls);\r\n    }));\r\n  }",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "d8f9aa01-96bb-1862-14dd-03be2f1bc742"
              }
            ]
          },
          "showTitleIcon": false,
          "titleTooltip": "",
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "useCustomQueryService": true,
          "customQuery": "{\n  \"translateColumnName\": true\n}",
          "useColumnMapping": true,
          "columnMapping": "[\n  {\n    \"type\": \"ENTITY_FIELD\",\n    \"key\": \"name\",\n    \"columnName\": \"hawle-dashboard.name\",\n    \"defaultColumnName\": \"Name\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"fromDate\",\n    \"columnName\": \"hawle-dashboard.from\",\n    \"defaultColumnName\": \"From\",\n    \"humanReadableTs\": true,\n    \"tsPattern\": \"dd MMMM YYYY, HH:mm z\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"toDate\",\n    \"columnName\": \"hawle-dashboard.to\",\n    \"defaultColumnName\": \"To\",\n    \"humanReadableTs\": true,\n    \"tsPattern\": \"dd MMMM YYYY, HH:mm z\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"createdTime\",\n    \"columnName\": \"hawle-dashboard.created-time\",\n    \"defaultColumnName\": \"Created time\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"isActive\",\n    \"columnName\": \"hawle-dashboard.active\",\n    \"defaultColumnName\": \"Active\"\n  }\n]"
        },
        "row": 0,
        "col": 0,
        "id": "f68737b4-e45b-6ba0-6bec-4db08f846a16"
      },
      "016ce364-1831-adf9-6925-591118c1eb8c": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "16px 0 0 0",
          "settings": {
            "cardCss": ".container {\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    padding: 0px;\n    width: 100%;\n    height: 100%;\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.container .btn-text {\n    display: flex;\n    flex-direction: row;\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #009FE3;\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.icon-color-blue {\n    color: #009FE3;\n    font-size: 1.1vw;\n}",
            "cardHtml": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n <div id='container' type=\"button\" class=\"container\">\n     <span class=\"material-symbols-outlined icon-color-blue\">history</span>\n     <button type=\"button\" class=\"btn-text\">\n         {i18n:hawle-dashboard.view-alarm-history,View Alarm History}\n     </button>\n </div>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "container",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarm_history');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "016ce364-1831-adf9-6925-591118c1eb8c"
      },
      "74b5face-9df4-2a88-79a4-3885ac77476b": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "16px 0 0 0",
          "settings": {
            "cardCss": ".container {\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    padding: 0px;\n    width: 100%;\n    height: 100%;\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.container .btn-text {\n    display: flex;\n    flex-direction: row;\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #009FE3;\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.icon-color-blue {\n    color: #009FE3;\n    font-size: 1.1vw;\n}",
            "cardHtml": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n <div id='container' type=\"button\" class=\"container\">\n     <span class=\"material-symbols-outlined icon-color-blue\">history</span>\n     <button type=\"button\" class=\"btn-text\">\n         {i18n:hawle-dashboard.view-alarm-history,View Alarm History}\n     </button>\n </div>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "container",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarm_history');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "74b5face-9df4-2a88-79a4-3885ac77476b"
      },
      "53098cdf-8c66-9e9c-7de4-e8be25f76c94": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "16px 0 0 0",
          "settings": {
            "cardCss": ".container {\n    display: flex;\n    justify-content: flex-end;\n    align-items: center;\n    padding: 0px;\n    width: 100%;\n    height: 100%;\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.container .btn-text {\n    display: flex;\n    flex-direction: row;\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #009FE3;\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.icon-color-blue {\n    color: #009FE3;\n    font-size: 1.1vw;\n}",
            "cardHtml": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n <div id='container' type=\"button\" class=\"container\">\n     <span class=\"material-symbols-outlined icon-color-blue\">history</span>\n     <button type=\"button\" class=\"btn-text\">\n         {i18n:hawle-dashboard.view-alarm-history,View Alarm History}\n     </button>\n </div>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "container",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarm_history');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "53098cdf-8c66-9e9c-7de4-e8be25f76c94"
      },
      "98f3c67b-235c-14eb-38da-167601367842": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.home,Home}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('default');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "98f3c67b-235c-14eb-38da-167601367842"
      },
      "7e710b98-54a5-b5e8-dc3b-f6cf28156a80": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #FFF;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.zones, Zone}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_zone');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "7e710b98-54a5-b5e8-dc3b-f6cf28156a80"
      },
      "1d1a6afa-bd46-3c21-a6af-cb81b1a2b72b": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.hydrants, Hydrants }\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_hydrants');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "1d1a6afa-bd46-3c21-a6af-cb81b1a2b72b"
      },
      "b6e05da9-b14a-ed31-c577-a13c9109e35d": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         D-Storz\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_dstorz');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "b6e05da9-b14a-ed31-c577-a13c9109e35d"
      },
      "ab8a6511-f479-5734-15b7-e4c0c83ff88c": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #009FE3;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #fff;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.alarm-management, Alarm Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_alarms');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "ab8a6511-f479-5734-15b7-e4c0c83ff88c"
      },
      "89e6dbc1-c3af-2a9f-67f1-20ceec89ab59": {
        "isSystemType": false,
        "bundleAlias": "integra_widgets",
        "typeAlias": "integra_navigation_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0px",
          "settings": {
            "cardCss": ".btn {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0px;\n    gap: 10px;\n    width: 100%;\n    height: 100%;\n    background: #fff;\n    box-shadow: 0px 0.5px 1.75px rgba(6, 77, 116, 0.039), 0px 1.85px 6.25px rgba(6, 77, 116, 0.19);\n    border: 0px !important;\n    cursor: pointer;\n}\n\n.btn-text {\n    font-style: normal;\n    font-weight: 700;\n    font-size: clamp(1rem, -1.3855rem + 1.8336vw, 2.5rem);\n    line-height: 140%;\n    text-align: center;\n    color: #000;\n}",
            "cardHtml": " <button id='button' type=\"button\" class=\"btn\">\n     <div class=\"btn-text\">\n         {i18n:hawle-dashboard.user-management, User Management}\n     </div>\n </button>"
          },
          "title": "New Integra Navigation Card",
          "dropShadow": false,
          "actions": {
            "elementClick": [
              {
                "name": "button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "openDashboardState('all_users');\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "67c44353-3e6e-83c0-469e-f16daf6090d8"
              }
            ]
          },
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "border": "1px solid #009FE3"
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "89e6dbc1-c3af-2a9f-67f1-20ceec89ab59"
      },
      "c2940664-443d-b015-3a7c-12699c28b8ce": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px 0px 8px 0px",
          "settings": {
            "cardHtml": "<div class='card'>\n    <span>\n        {i18n:hawle-dashboard.alarm-history}\n    </span>\n</div>",
            "cardCss": ".card {\n    font-weight: bold;\n    font-size: 32px;\n    color: #999;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: end;\n    justify-content: start;\n}\n\n.card span {\n    font-weight: 700;\n    color: #000;\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 1.2rem;\n}"
          },
          "title": "New HTML Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "c2940664-443d-b015-3a7c-12699c28b8ce"
      },
      "b6909eb6-5b86-e105-802d-c3f1f15dbe5b": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "823fc6e4-b7e0-35d0-05c3-23e30810c28a",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.862471050464255
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": false,
            "isExternalBtn": true,
            "externalBtnName": "Save & Add Hydrant",
            "externalBtnFunction": "console.log(formData);\nconsole.log(widgetContext);\nconsole.log(stepsSettings);\n\n\nlet $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    'http'));\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\n\nconst url = '/api/entityGroups/ASSET';\n\nhttp.get(url).pipe().subscribe((\n    assetGroups) => {\n    var assetCreateUrl = '';\n    assetGroups.forEach((\n        assetGroup) => {\n        if (assetGroup.name ===\n            \"All\") {\n            assetCreateUrl =\n                `/api/asset?entityGroupId=${assetGroup.id.id}`;\n        }\n    });\n    if (assetCreateUrl !== '') {\n        const zoneInfo = {\n            name: formData.value.name,\n            type: \"zone\"\n        }\n        http.post(assetCreateUrl, zoneInfo)\n            .pipe().subscribe((zoneResponse) => {\n                widgetContext.updateAliases();\n                \n                widgetContext.showToast('success',\n                    translationService.instant('hawle-dashboard.zone-saved-successfully'), 2000,\n                    'top', 'left');\n                \n                openDashboardState(zoneResponse, 'add_hydrant_from_zone_select');\n            })\n    }\n});\n\n\nfunction openDashboardState(element, statedId) {\n    // widgetContext.stateController.resetState();\n    var currentState = widgetContext.stateController\n        .getStateId();\n\n    var params = {\n        entityLabel: element.name,\n        entityName: element.name,\n        entityId: {\n            id: element.id.id,\n            entityType: element.id.entityType\n        }\n    };\n\n    if (currentState !== statedId) {\n        widgetContext.stateController.openState(statedId, params);\n    }\n}",
            "formName": "hawle-dashboard.create-new-zone",
            "steps": [
              {
                "stepName": "hawle-dashboard.zone-info",
                "formFields": [
                  {
                    "label": "hawle-dashboard.zone-name",
                    "fieldName": "name",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": null,
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              }
            ],
            "genericFormFunction": "console.log(formData);\nconsole.log(widgetContext);\nconsole.log(stepsSettings);\n\n\nlet $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    'http'));\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\n\nconst url = '/api/entityGroups/ASSET';\n\nhttp.get(url).pipe().subscribe((\n    assetGroups) => {\n    var assetCreateUrl = '';\n    assetGroups.forEach((\n        assetGroup) => {\n        if (assetGroup.name ===\n            \"All\") {\n            assetCreateUrl =\n                `/api/asset?entityGroupId=${assetGroup.id.id}`;\n        }\n    });\n    if (assetCreateUrl !== '') {\n        const zoneInfo = {\n            name: formData.value.name,\n            type: \"zone\"\n        }\n        http.post(assetCreateUrl, zoneInfo)\n            .pipe().subscribe((zoneResponse) => {\n                widgetContext.updateAliases();\n                \n                widgetContext.showToast('success',\n                    translationService.instant('hawle-dashboard.zone-saved-successfully'), 2000,\n                    'top', 'left');\n                \n                openDashboardState('all_zone');\n            })\n    }\n});\n\n\nfunction openDashboardState(statedId) {\n    widgetContext.stateController.resetState();\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params);\n    }\n}"
          },
          "title": "New Generic Form",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "b6909eb6-5b86-e105-802d-c3f1f15dbe5b"
      },
      "1929837c-df75-f3d1-a1d9-97bcfaa324eb": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "852a4008-a4df-0350-7561-a86b82b6b796",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "line1",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.line1}",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.17372206089501607,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "line2",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.line2}",
                  "color": "#ffc107",
                  "settings": {},
                  "_hash": 0.5787494777836164,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": false,
            "isExternalBtn": false,
            "formName": "Create New D-Storz",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "hawle-dashboard.line1",
                    "fieldName": "line1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": null,
                    "required": true,
                    "suffix": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.line2",
                    "fieldName": "line2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div style=\"width:100%;height:100%; display: flex; justify-content: center; align-items: bottom;\">\n    <div style=\"height: 200px; width: 200px;\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&amp;st=2023-11-02T15:08:18Z&amp;se=2035-11-02T23:08:18Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n    \n    <div style=\"height: 250px; width: 200px\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_qr.png?sp=r&amp;st=2023-11-02T15:08:45Z&amp;se=2035-11-02T23:08:45Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=lWjN20%2FcXQugQxx9QuU9HbBmbNwkiFQPmjRZT%2BdZ0O4%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n</div>\n\n<div style=\"text-align: center; margin-bottom: 30px;\">\n    <div>\n       <b style=\"margin: 0 auto;\">Where to find Line 1 & Line 2 ?</b> \n    </div>\n    <div style=\"margin: 0 auto;\">\n         They are under the QR code of your D-Storz\n    </div>\n</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div style=\"width:100%;height:100%; display: flex; justify-content: center; align-items: bottom;\">\n    <div style=\"height: 200px; width: 200px;\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&amp;st=2023-11-02T15:08:18Z&amp;se=2035-11-02T23:08:18Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n    \n    <div style=\"height: 250px; width: 200px\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_qr.png?sp=r&amp;st=2023-11-02T15:08:45Z&amp;se=2035-11-02T23:08:45Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=lWjN20%2FcXQugQxx9QuU9HbBmbNwkiFQPmjRZT%2BdZ0O4%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n</div>\n\n<div style=\"text-align: center; margin-bottom: 30px;\">\n    <div>\n       <b style=\"margin: 0 auto;\">Where to find Line 1 & Line 2 ?</b> \n    </div>\n    <div style=\"margin: 0 auto;\">\n         They are under the QR code of your D-Storz\n    </div>\n</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 4",
                    "fieldName": "step0field4",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div style=\"width:100%;height:100%; display: flex; justify-content: center; align-items: bottom;\">\n    <div style=\"height: 180px; width: 180px;\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&amp;st=2023-11-02T15:08:18Z&amp;se=2035-11-02T23:08:18Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n    \n    <div style=\"height: 225px; width: 180px;\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_qr.png?sp=r&amp;st=2023-11-02T15:08:45Z&amp;se=2035-11-02T23:08:45Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=lWjN20%2FcXQugQxx9QuU9HbBmbNwkiFQPmjRZT%2BdZ0O4%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n</div>\n\n<div style=\"text-align: center; margin-bottom: 30px;\">\n    <div>\n       <b style=\"margin: 0 auto;\">Where to find Line 1 & Line 2 ?</b> \n    </div>\n    <div style=\"margin: 0 auto;\">\n         They are under the QR code of your D-Storz\n    </div>\n</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div style=\"width:100%;height:100%; display: flex; justify-content: center; align-items: bottom;\">\n    <div style=\"height: 180px; width: 180px;\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&amp;st=2023-11-02T15:08:18Z&amp;se=2035-11-02T23:08:18Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n    \n    <div style=\"height: 225px; width: 180px;\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_qr.png?sp=r&amp;st=2023-11-02T15:08:45Z&amp;se=2035-11-02T23:08:45Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=lWjN20%2FcXQugQxx9QuU9HbBmbNwkiFQPmjRZT%2BdZ0O4%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n</div>\n\n<div style=\"text-align: center; margin-bottom: 30px;\">\n    <div>\n       <b style=\"margin: 0 auto;\">Where to find Line 1 & Line 2 ?</b> \n    </div>\n    <div style=\"margin: 0 auto;\">\n         They are under the QR code of your D-Storz\n    </div>\n</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              }
            ],
            "genericFormFunction": "console.log(formData);\nconsole.log(widgetContext);\nconsole.log(stepsSettings);\n\nconst $injector = widgetContext.$scope.$injector;\nconst http = $injector.get(widgetContext.servicesMap.get(\n    'http'));\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\n\nif (checkPermission()) {\n    if(formData.value.line1 && formData.value.line1.length < 6) {\n        widgetContext.showToast('warn',\n        translationService.instant(\"hawle-dashboard.line-one-value-should-be-six-character-long\"), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    } else if(formData.value.line2 && formData.value.line2.length < 6) {\n        widgetContext.showToast('warn',\n        translationService.instant(\"hawle-dashboard.line-two-value-should-be-six-character-long\"), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    } else {\n        executeClaim()\n    }\n} else {\n    widgetContext.showToast('warn',\n        getTranslation(\"hawle-dashboard.You-dont-need-to-claim-your-own-device\"), 2000,\n        'top', 'left');\n}\n\nfunction executeClaim() {\n    const serialNumber =\n        `${formData.value.line1}${formData.value.line2}`;\n    validateSerialNumber(serialNumber).subscribe((\n        validationResponse) => {\n        if (validationResponse && validationResponse\n            .device && validationResponse\n            .deviceCredentials) {\n            const deviceToken = validationResponse\n                .deviceCredentials.credentialsId;\n            const deviceName = validationResponse\n                .device.name;\n            const deviceId = validationResponse\n                .device.id;\n            saveSecretKeyInDevice(deviceToken, \"\")\n                .subscribe((\n                    saveDeviceInfoResponse) => {\n                    claimDeviceToCustomer(\n                            deviceName, \"\")\n                        .subscribe((\n                            claimResponse\n                        ) => {\n                            \n\n                            sendToRuleEngine(deviceId.id, deviceName).subscribe(() => {});\n                            \n                            widgetContext.showToast('success',\n                            getTranslation(\"hawle-dashboard.Device-claimed-successfully\"),\n                            2000,\n                            'top', 'left');\n                            \n                            openDashboardState(\"all_dstorz\")\n                        })\n                })\n        } else {\n            widgetContext.showToast('warn',\n            getTranslation(\"hawle-dashboard.Could_not_found_any_deivce__\"),\n                2000,\n                'top', 'left');\n        }\n    })\n}\n\nfunction validateSerialNumber(serialNumber) {\n    const apiURL =\n        `/api/device/deviceInfo/serverAttribute?serverAttributeKey=serialNumber&serverAttributeValue=${serialNumber}`;\n    return http.get(apiURL).pipe();\n}\n\nfunction saveSecretKeyInDevice(deviceToken, secretKey) {\n    const payload = {\n        \"secretKey\": secretKey\n    }\n    const apiURL = `/api/v1/${deviceToken}/claim`;\n    return http.post(apiURL, payload).pipe();\n}\n\nfunction claimDeviceToCustomer(deviceName, secretKey) {\n    const payload = {\n        \"secretKey\": secretKey\n    }\n    const apiURL =\n        `/api/customer/device/${deviceName}/claim`;\n    return http.post(apiURL, payload).pipe();\n}\n\nfunction openDashboardState(statedId) {\n    widgetContext.stateController.resetState();\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params);\n    }\n}\n\nfunction checkPermission() {\n    const authority = widgetContext.currentUser.authority;\n    if (authority === \"CUSTOMER_USER\") return true\n    return false;\n}\nfunction getTranslation(translationText) {\n    widgetContext.$scope.translateService = widgetContext.$scope.$injector.get(widgetContext.servicesMap.get('translate'));\n    let translated = translationText;\n    try {\n        translated = widgetContext.$scope\n                .translateService.instant(\n                    translationText);\n    } catch (error) {\n        \n    }\n    return translated;\n}\n\n\nfunction sendToRuleEngine(deviceId, deviceName) {\n    const apiURL =\n        `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=swisscom`;\n    const payload = {\n        \"msg\": null,\n        \"metadata\": {\n            \"deviceName\": deviceName,\n            \"deviceType\": \"d-storz\",\n            \"operationType\": \"CREATE\"\n        }\n    }\n    return http.post(apiURL, payload).pipe();\n}\n"
          },
          "title": "",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "1929837c-df75-f3d1-a1d9-97bcfaa324eb"
      },
      "06ab9b5a-8df5-f17a-563a-24ec23ede392": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "line1",
                  "type": "attribute",
                  "label": "line1",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.5131038992495045
                },
                {
                  "name": "line2",
                  "type": "attribute",
                  "label": "line2",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.8034858089877552
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": true,
            "formName": "Edit D-Storz",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Line 1",
                    "fieldName": "line1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "optionList": [],
                    "required": true,
                    "row": 0,
                    "column": 0,
                    "value": ""
                  },
                  {
                    "label": "Line 2",
                    "fieldName": "line2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "optionList": [],
                    "required": true,
                    "row": 0,
                    "column": 0,
                    "value": ""
                  }
                ]
              }
            ],
            "genericFormFunction": "console.log(formData);\nconsole.log(widgetContext);\nconsole.log(stepsSettings);\n\nconst entityId = widgetContext.datasources[0].entityId;\nconst $injector = widgetContext.$scope.$injector;\nconst http = $injector.get(widgetContext.servicesMap.get(\n    'http'));\nconst attributeService = $injector.get(widgetContext\n    .servicesMap.get('attributeService'));\n    \nsaveAttributes('DEVICE', entityId).subscribe(() => {\n    openDashboardState('all_dstorz');\n});\n\nfunction saveAttributes(entityType, entityId) {\n    const attributes = {\n        line1: formData.value.line1,\n        line2: formData.value.line2,\n        serialNumber: `${formData.value.line1}${formData.value.line2}`\n    };\n    var serverAttributeUrl =\n        `/api/plugins/telemetry/${entityType}/${entityId}/SERVER_SCOPE`;\n    return http.post(serverAttributeUrl, attributes);\n}\n\n\nfunction openDashboardState(statedId) {\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params, false);\n    }\n}"
          },
          "title": "New Generic Form Builder",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "06ab9b5a-8df5-f17a-563a-24ec23ede392"
      },
      "4c9cc318-dcb2-6c1a-f6fc-a67b29fb8934": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.3563554625370138
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": true,
            "isExternalBtn": false,
            "formName": "hawle-dashboard.edit-zone",
            "steps": [
              {
                "stepName": "hawle-dashboard.zone-info",
                "formFields": [
                  {
                    "label": "hawle-dashboard.zone-name",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": null,
                    "required": true,
                    "suffix": "",
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              }
            ],
            "genericFormFunction": "console.log(formData);\r\nconsole.log(widgetContext);\r\nconsole.log(stepsSettings);\r\n\r\nconst entityId = widgetContext.datasources[0].entity.id;\r\nconst $injector = widgetContext.$scope.$injector;\r\nconst assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nconst entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\r\nconst http = $injector.get(widgetContext.servicesMap.get('http'));\r\nconst attributeService = widgetContext.$injector.get(widgetContext.servicesMap.get('attributeService'));\r\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\n\r\n\r\n\r\ngetEntityInfo(entityId);\r\n\r\n\r\nfunction getEntityInfo(entityId) {\r\n    entityService.getEntity(entityId.entityType, entityId.id).pipe().subscribe((entityInfo) => {\r\n        if (entityInfo) {\r\n            entityInfo.name = formData.value.name;\r\n            assetService.saveAsset(entityInfo).pipe().subscribe((zoneResponse) => {\r\n                updateRelatedHydrantsZoneAttribute();\r\n\r\n                widgetContext.showToast('success',\r\n                    translationService.instant('hawle-dashboard.zone-saved-successfully'), 2000,\r\n                    'top', 'left');\r\n                widgetContext.updateAliases();\r\n                openDashboardState('all_zone');\r\n            })\r\n        }\r\n    }\r\n    );\r\n}\r\n\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.updateState(statedId,\r\n            params);\r\n    }\r\n}\r\n\r\nfunction updateRelatedHydrantsZoneAttribute() {\r\n    const relatedEntitiesQuery = {\r\n        relatedEntityData: {\r\n            entityFilter: {\r\n                type: \"relationsQuery\",\r\n                rootEntity: {\r\n                    entityType: \"ASSET\",\r\n                    id: entityId.id\r\n                },\r\n                direction: \"FROM\",\r\n                maxLevel: 1,\r\n                fetchLastLevelOnly: true,\r\n                assetTypes: [\r\n                    \"zone\",\r\n                ],\r\n                filters: [\r\n                    {\r\n                        relationType: \"Contains\",\r\n                        entityTypes: [\r\n                            \"ASSET\"\r\n                        ]\r\n                    }\r\n                ]\r\n            },\r\n            keyFilters: [],\r\n            entityFields: [],\r\n            latestValues: [],\r\n            pageLink: {\r\n                sortOrder: {\r\n                    key: {\r\n                        key: \"name\",\r\n                        type: \"ENTITY_FIELD\"\r\n                    },\r\n                    direction: \"ASC\"\r\n                }\r\n            }\r\n        },\r\n        attributes: {\r\n            \"zone\": formData.value.name\r\n        }\r\n    };\r\n\r\n    http.post('/api/updateRelatedEntityScope?scope=SERVER_SCOPE', relatedEntitiesQuery).pipe().subscribe((relatedEntities) => {\r\n    })\r\n}\r\n"
          },
          "title": "New Generic Form",
          "showTitleIcon": false,
          "titleTooltip": "",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "4c9cc318-dcb2-6c1a-f6fc-a67b29fb8934"
      },
      "40750290-5432-d807-03bf-187545ebd1fd": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "823fc6e4-b7e0-35d0-05c3-23e30810c28a",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "count",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.18355668864384111
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "cardHtml": "<!--material symbol library-->\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n<div class='card'>\n    <div class='content'>\n        <div class='column'>\n            <div class='header'>\n                <span class=\"material-symbols-outlined icon-color-grey\">auto_activity_zone</span>\n                <p>{i18n:hawle-dashboard.zones}</p>\n            </div>\n            <div class='value'>\n                ${count:0}\n            </div>\n        </div>\n        <div class='column'>\n            <button id='add-button' type=\"button\" class=\"custom-btn\">\n                <span class=\"material-symbols-outlined add-icon\">\n                    add\n                </span>\n            </button>\n            <button id='all-button' type=\"button\" class=\"custom-btn\">\n                {i18n:hawle-dashboard.view-all}\n            </button>\n        </div>\n    </div>\n</div>",
            "cardCss": ".custom-btn {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    background: none;\n    height: 100%;\n    width: 100%; \n    color: #009FE3;\n    display: flex;\n    cursor: pointer;\n    font-weight: 700;\n    font-size: 0.8vw;\n}\n\n.card {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content {\n    padding: 8px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content .column {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    max-width: 50%;\n}\n\n.header {\n    display: inline-flex;\n     align-items: center;\n}\n\n.header p {\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 0.9vw;\n    font-weight: 700;\n    color: #64748B;\n}\n\n.header img {\n    height: 1.1vw;\n    width: 1.1vw;\n}\n\n.icon-color-grey {\n    color: #CBD4E1;\n    font-size: 1.1vw;\n}\n\n.card .value {\n    font-size: 1.5vw;\n    font-weight: 500;\n    display: flex;\n    color: #0F1A2A;\n}\n\n#all-button {\n    align-items: flex-end;\n    justify-content: flex-end;\n}\n\n#add-button {\n    align-items: flex-start;\n    justify-content: flex-end;\n}\n\n.add-icon {\n    font-size: 1.3vw;\n}"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "fontWeight": "800"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [],
            "elementClick": [
              {
                "name": "all-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "updateDashboardState",
                "targetDashboardStateId": "all_zone",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "126d5b74-5e5a-815b-9771-13ee0b408764"
              },
              {
                "name": "add-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_zone",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "a461ea87-7f8c-fa0f-5743-0f7a1902dff4"
              }
            ]
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "40750290-5432-d807-03bf-187545ebd1fd"
      },
      "20991c15-aa4f-d11e-c6c6-432e35ec4332": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "793b3a27-c500-48ae-d75c-383cda3397a8",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "count",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.18355668864384111
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "cardCss": ".custom-btn {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    background: none;\n    height: 100%;\n    width: 100%; \n    color: #009FE3;\n    display: flex;\n    cursor: pointer;\n    font-weight: 700;\n    font-size: 0.8vw;\n}\n\n.card {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content {\n    padding: 8px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content .column {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    max-width: 50%;\n}\n\n.header {\n    display: inline-flex;\n     align-items: center;\n}\n\n.header p {\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 0.9vw;\n    font-weight: 700;\n    color: #64748B;\n}\n\n.header img {\n    height: 1.1vw;\n    width: 1.1vw;\n}\n\n.icon-color-grey {\n    color: #CBD4E1;\n    font-size: 1.1vw;\n}\n\n.card .value {\n    font-size: 1.5vw;\n    font-weight: 500;\n    display: flex;\n    color: #0F1A2A;\n}\n\n#all-button {\n    align-items: flex-end;\n    justify-content: flex-end;\n}\n\n#add-button {\n    align-items: flex-start;\n    justify-content: flex-end;\n}\n\n.add-icon {\n    font-size: 1.3vw;\n}",
            "cardHtml": "<!--material symbol library-->\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n<div class='card'>\n    <div class='content'>\n        <div class='column'>\n            <div class='header'>\n                <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/hydrant.png?sp=r&amp;st=2023-11-02T15:10:05Z&amp;se=2035-11-02T23:10:05Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=nzMRhO5W4Zd0VW1RPolBp8HPnRaS%2Bb4d4l497X%2FiuuY%3D\"/>\n                <p>\n                    {i18n:hawle-dashboard.hydrants}\n                </p>\n            </div>\n            <div class='value'>\n                ${count:0}\n            </div>\n        </div>\n        <div class='column'>\n            <button id='add-button' type=\"button\" class=\"custom-btn\">\n                <span class=\"material-symbols-outlined add-icon\">\n                    add\n                </span>\n            </button>\n            <button id='all-button' type=\"button\" class=\"custom-btn\">\n                {i18n:hawle-dashboard.view-all}\n            </button>\n        </div>\n    </div>\n</div>\n"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "fontWeight": "800"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [],
            "elementClick": [
              {
                "name": "all-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "updateDashboardState",
                "targetDashboardStateId": "all_hydrants",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "126d5b74-5e5a-815b-9771-13ee0b408764"
              },
              {
                "name": "add-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_hydrant",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "a461ea87-7f8c-fa0f-5743-0f7a1902dff4"
              }
            ]
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "20991c15-aa4f-d11e-c6c6-432e35ec4332"
      },
      "779ac906-6371-31b2-6b35-4a33d80c61d4": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "hawle_alarm_card",
        "type": "alarm",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 10.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "hideInterval": false,
            "hideAggregation": false,
            "hideAggInterval": false,
            "hideTimezone": false,
            "selectedTab": 1,
            "history": {
              "historyType": 0,
              "timewindowMs": 31536000000,
              "interval": 1000,
              "fixedTimewindow": {
                "startTimeMs": 1695364417581,
                "endTimeMs": 1695450817581
              },
              "quickInterval": "CURRENT_DAY"
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            },
            "displayValue": "History - last 365 days "
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "alarmSeverityColorFunction": "if(severity == 'CRITICAL') {return 'red';} else if (severity == 'MAJOR') {return 'orange';} else return 'green'; ",
            "isSingleAsset": false
          },
          "title": "New Hawle Alarm Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "name": null,
            "entityAliasId": "4c30635a-474a-9dbd-0d25-b9a38527e2cf",
            "filterId": null,
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.021092237451093787
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "Originator",
                "color": "#4caf50",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.2780007688856758
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Type",
                "color": "#f44336",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.7323586880398418
              },
              {
                "name": "severity",
                "type": "alarm",
                "label": "Severity",
                "color": "#ffc107",
                "settings": {
                  "useCellStyleFunction": false,
                  "useCellContentFunction": false
                },
                "_hash": 0.09927019860088193
              },
              {
                "name": "status",
                "type": "alarm",
                "label": "Status",
                "color": "#607d8b",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.6588418951443418
              }
            ]
          },
          "alarmSearchStatus": "ANY",
          "alarmsPollingInterval": 5,
          "showTitleIcon": false,
          "titleIcon": "more_horiz",
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "widgetStyle": {},
          "displayTimewindow": false,
          "actions": {},
          "alarmStatusList": [
            "ACTIVE"
          ],
          "alarmSeverityList": [],
          "alarmTypeList": [],
          "searchPropagatedAlarms": false,
          "datasources": [],
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "779ac906-6371-31b2-6b35-4a33d80c61d4"
      },
      "470d1891-ca89-6fca-02ce-74c464f9a2a7": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "4c30635a-474a-9dbd-0d25-b9a38527e2cf",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "count",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.18355668864384111
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "cardCss": ".custom-btn {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    background: none;\n    height: 100%;\n    width: 100%; \n    color: #009FE3;\n    display: flex;\n    cursor: pointer;\n    font-weight: 700;\n    font-size: 0.8vw;\n}\n\n.card {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content {\n    padding: 8px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content .column {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    max-width: 50%;\n}\n\n.header {\n    display: inline-flex;\n     align-items: center;\n}\n\n.header p {\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 0.9vw;\n    font-weight: 700;\n    color: #64748B;\n}\n\n.header img {\n    height: 1.1vw;\n    width: 1.1vw;\n}\n\n.icon-color-grey {\n    color: #CBD4E1;\n    font-size: 1.1vw;\n}\n\n.card .value {\n    font-size: 1.5vw;\n    font-weight: 500;\n    display: flex;\n    color: #0F1A2A;\n}\n\n#all-button {\n    align-items: flex-end;\n    justify-content: flex-end;\n}\n\n#add-button {\n    align-items: flex-start;\n    justify-content: flex-end;\n}\n\n.add-icon {\n    font-size: 1.3vw;\n}",
            "cardHtml": "<!--material symbol library-->\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n<div class='card'>\n    <div class='content'>\n        <div class='column'>\n            <div class='header'>\n                <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/d-storz.png?sp=r&amp;st=2023-11-02T15:03:05Z&amp;se=2033-12-30T23:03:05Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=B%2F4s6Ion4qe6FqWLiTkE2jJe8Xpcx2EWVAmRvFWbedc%3D\"/>\n                <p>{i18n:hawle-dashboard.d-storz}</p>\n            </div>\n            <div class='value'>\n                ${count:0}\n            </div>\n        </div>\n        <div class='column'>\n            <button id='add-button' type=\"button\" class=\"custom-btn\">\n                <span class=\"material-symbols-outlined add-icon\">\n                    add\n                </span>\n            </button>\n            <button id='all-button' type=\"button\" class=\"custom-btn\">\n                {i18n:hawle-dashboard.view-all}\n            </button>\n        </div>\n    </div>\n</div>\n"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "fontWeight": "800"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [],
            "elementClick": [
              {
                "name": "all-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "updateDashboardState",
                "targetDashboardStateId": "all_dstorz",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "126d5b74-5e5a-815b-9771-13ee0b408764"
              },
              {
                "name": "add-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_dstorz",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "a461ea87-7f8c-fa0f-5743-0f7a1902dff4"
              }
            ]
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "470d1891-ca89-6fca-02ce-74c464f9a2a7"
      },
      "d734c24d-6434-f7c7-3ed2-db3843659ba3": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "5d6aae4b-1d67-f7b4-f915-d2e30c8a3eb5",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "count",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.18355668864384111
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "cardHtml": "<!--material symbol library-->\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n<div class='card'>\n    <div class='content'>\n        <div class='column'>\n            <div class='header'>\n                <span class=\"material-symbols-outlined icon-color-grey\">notifications_paused</span>\n                <p>{i18n:hawle-dashboard.temporary-deactivation}</p>\n            </div>\n            <div class='value'>\n                ${count:0}\n            </div>\n        </div>\n        <div class='column'>\n            <button id='add-button' type=\"button\" class=\"custom-btn\">\n                <span class=\"material-symbols-outlined add-icon\">\n                    add\n                </span>\n            </button>\n            <button id='all-button' type=\"button\" class=\"custom-btn\">\n                {i18n:hawle-dashboard.view-all}\n            </button>\n        </div>\n    </div>\n</div>",
            "cardCss": ".custom-btn {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    background: none;\n    height: 100%;\n    width: 100%; \n    color: #009FE3;\n    display: flex;\n    cursor: pointer;\n    font-weight: 700;\n    font-size: 0.8vw;\n}\n\n.card {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content {\n    padding: 8px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content .column {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    max-width: 50%;\n}\n\n.header {\n    display: inline-flex;\n     align-items: center;\n}\n\n.header p {\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 0.9vw;\n    font-weight: 700;\n    color: #64748B;\n}\n\n.header img {\n    height: 1.1vw;\n    width: 1.1vw;\n}\n\n.icon-color-grey {\n    color: #CBD4E1;\n    font-size: 1.1vw;\n}\n\n.card .value {\n    font-size: 1.5vw;\n    font-weight: 500;\n    display: flex;\n    color: #0F1A2A;\n}\n\n#all-button {\n    align-items: flex-end;\n    justify-content: flex-end;\n}\n\n#add-button {\n    align-items: flex-start;\n    justify-content: flex-end;\n}\n\n.add-icon {\n    font-size: 1.3vw;\n}"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [],
            "elementClick": [
              {
                "name": "all-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "updateDashboardState",
                "targetDashboardStateId": "all_temporary_deactivation",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "126d5b74-5e5a-815b-9771-13ee0b408764"
              },
              {
                "name": "add-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_temporary_deactivation",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "a461ea87-7f8c-fa0f-5743-0f7a1902dff4"
              }
            ]
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "d734c24d-6434-f7c7-3ed2-db3843659ba3"
      },
      "7ae4654b-9cef-e159-2e47-fae1368eeab8": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_value_card",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entityCount",
              "name": null,
              "entityAliasId": "4d2ec0c3-6e69-c1a7-0039-19a117669949",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "count",
                  "type": "count",
                  "label": "count",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.18355668864384111
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "0.5vw",
          "settings": {
            "cardHtml": "<!--material symbol library-->\n<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,\nGRAD@20..48,100..700,0..1,-50..200\" />\n\n<div class='card'>\n    <div class='content'>\n        <div class='column'>\n            <div class='header'>\n                <span class=\"material-symbols-outlined icon-color-grey\">wifi_notification</span>\n                <p>{i18n:hawle-dashboard.alarm-definition}</p>\n            </div>\n            <div class='value'>\n                ${count:0}\n            </div>\n        </div>\n        <div class='column'>\n            <button id='add-button' type=\"button\" class=\"custom-btn\">\n                <span class=\"material-symbols-outlined add-icon\">\n                    add\n                </span>\n            </button>\n            <button id='all-button' type=\"button\" class=\"custom-btn\">\n                {i18n:hawle-dashboard.view-all}\n            </button>\n        </div>\n    </div>\n</div>",
            "cardCss": ".custom-btn {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    background: none;\n    height: 100%;\n    width: 100%; \n    color: #009FE3;\n    display: flex;\n    cursor: pointer;\n    font-weight: 700;\n    font-size: 0.8vw;\n}\n\n.card {\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content {\n    padding: 8px;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    height: 100%;\n    box-sizing: border-box;\n}\n\n.card .content .column {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: 100%;\n    max-width: 50%;\n}\n\n.header {\n    display: inline-flex;\n     align-items: center;\n}\n\n.header p {\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 0.9vw;\n    font-weight: 700;\n    color: #64748B;\n}\n\n.header img {\n    height: 1.1vw;\n    width: 1.1vw;\n}\n\n.icon-color-grey {\n    color: #CBD4E1;\n    font-size: 1.1vw;\n}\n\n.card .value {\n    font-size: 1.5vw;\n    font-weight: 500;\n    display: flex;\n    color: #0F1A2A;\n}\n\n#all-button {\n    align-items: flex-end;\n    justify-content: flex-end;\n}\n\n#add-button {\n    align-items: flex-start;\n    justify-content: flex-end;\n}\n\n.add-icon {\n    font-size: 1.3vw;\n}"
          },
          "title": "New HTML Value Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {
            "borderRadius": "8px",
            "fontWeight": "800"
          },
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "actions": {
            "headerButton": [],
            "elementClick": [
              {
                "name": "all-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "updateDashboardState",
                "targetDashboardStateId": "all_alarm_definitions",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "126d5b74-5e5a-815b-9771-13ee0b408764"
              },
              {
                "name": "add-button",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_alarm_definition",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "a461ea87-7f8c-fa0f-5743-0f7a1902dff4"
              }
            ]
          },
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "7ae4654b-9cef-e159-2e47-fae1368eeab8"
      },
      "e20ac5ab-3780-200b-444a-f8f03032e6fd": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "entities_table",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "realtime": {
              "interval": 1000,
              "timewindowMs": 86400000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            }
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSearch": true,
            "displayPagination": true,
            "defaultPageSize": 10,
            "displayEntityName": false,
            "displayEntityType": false,
            "enableSelectColumnDisplay": true,
            "enableStickyHeader": true,
            "enableStickyAction": true,
            "reserveSpaceForHiddenAction": "true",
            "displayEntityLabel": false,
            "useRowStyleFunction": false,
            "entitiesTitle": "D-Storz",
            "defaultSortOrder": "-createdTime",
            "enableExportDataDisplay": true
          },
          "title": "D-Storz",
          "dropShadow": false,
          "enableFullscreen": false,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "4c30635a-474a-9dbd-0d25-b9a38527e2cf",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "{i18n:hawle-dashboard.d-storz-number}",
                  "color": "#2196f3",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.4566359985879245,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "serialNumber",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.d-storz-number}",
                  "color": "#673ab7",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.022920457130320537,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "{i18n:hawle-dashboard.lpn-id}",
                  "color": "#9e9e9e",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled"
                  },
                  "_hash": 0.2912137427561734,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "hydrantNumber",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.hydrant.hydrant-number}",
                  "color": "#4caf50",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"Not assigned\"\n}"
                  },
                  "_hash": 0.4699717360547775,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "exitNode",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.exit}",
                  "color": "#f44336",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.988472119451993,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "lastTelemetryValue",
                  "type": "timeseries",
                  "label": "{i18n:hawle-dashboard.last-message}",
                  "color": "#9e9e9e",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                  },
                  "_hash": 0.6884233127949171,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "lastTelemetryTs",
                  "type": "timeseries",
                  "label": "{i18n:hawle-dashboard.date}",
                  "color": "#2962ff",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "if (value == null || value == undefined || !value)\r\n    return \"--\";\r\n\r\nvar dateTime = '';\r\n\r\nvar formattedDate = new Date(value);\r\n\r\nvar dd = formattedDate.getDate();\r\nvar mm = formattedDate.getMonth() + 1;\r\nvar yyyy = formattedDate.getFullYear();\r\n\r\nif (formattedDate) {\r\n\tvar minute = formattedDate.getHours();\r\n\tminute = minute.toString().length == 1 ? \"0\" + minute : minute;\r\n\t\r\n\tvar second = formattedDate.getMinutes();\r\n\tsecond = second.toString().length == 1 ? \"0\" + second : second;\r\n\t\r\n    dateTime =\r\n        `${dd} ${getMonthName(mm)} ${\r\n    yyyy}, ${minute}:${second}`;\r\n}\r\n\r\nreturn dateTime;\r\n\r\nfunction getMonthName(monthInNumber) {\r\n    var monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\",\r\n        \"June\", \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\",\r\n        \"Dec\"\r\n    ];\r\n    return monthNames[monthInNumber - 1];\r\n}"
                  },
                  "_hash": 0.5775867594481428,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "active",
                  "type": "attribute",
                  "label": "{i18n:hawle-dashboard.active}",
                  "color": "#9c27b0",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "const matIcon = value == \"true\" ? \"check\" : \"close\";\nlet style = \"\"\nstyle += value == \"true\" ? \"\" : \"color: #CBD4E1 !important;\";\nreturn `<mat-icon style=\"${style}\" class=\"mat-icon material-icons\">${matIcon}</mat-icon>`\n"
                  },
                  "_hash": 0.5383357442279946,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "signalStrength",
                  "type": "timeseries",
                  "label": "{i18n:hawle-dashboard.signal-strength}",
                  "color": "#3f51b5",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.8407113369612627,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "name",
                  "color": "#ffeb3b",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.242553343511569,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "active",
                  "type": "attribute",
                  "label": "active",
                  "color": "#03a9f4",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.47898256469866896,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "return value == \"true\" ? true : false;"
                },
                {
                  "name": "hydrantNumber",
                  "type": "attribute",
                  "label": "hydrantNumber",
                  "color": "#03a9f4",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.7807221409120055,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "createdTime",
                  "type": "entityField",
                  "label": "Created time",
                  "color": "#ff9800",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.8512129929511656,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "serialNumber",
                  "type": "attribute",
                  "label": "lpnId",
                  "color": "#673ab7",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.15309463800187895,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "country",
                  "type": "attribute",
                  "label": "country",
                  "color": "#cddc39",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.8501179689242204,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "hydrantsBrand",
                  "type": "attribute",
                  "label": "hydrantsBrand",
                  "color": "#009688",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.7327210946894631,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "zip",
                  "type": "attribute",
                  "label": "zip",
                  "color": "#795548",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.20496264431181,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "city",
                  "type": "attribute",
                  "label": "city",
                  "color": "#00bcd4",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.86668101801021,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "street",
                  "type": "attribute",
                  "label": "street",
                  "color": "#ff5722",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.0010263816904447776,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "isInactive",
                  "type": "timeseries",
                  "label": "{i18n:hawle-dashboard.magnetically-active}",
                  "color": "#2962ff",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": true,
                    "defaultColumnVisibility": "visible",
                    "columnSelectionToDisplay": "enabled",
                    "cellContentFunction": "value = value == \"true\" ? \"No\" : \"Yes\";\nlet style = \"\"\nstyle += value == \"Yes\" ? \"color: #009688\" : \"color: #CBD4E1 !important;\";\nreturn `<div style=\"${style}\">${value}</div>`\n"
                  },
                  "_hash": 0.742232984540105,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "hydrantId",
                  "type": "attribute",
                  "label": "hydrantId",
                  "color": "#00c853",
                  "settings": {
                    "columnWidth": "0px",
                    "useCellStyleFunction": false,
                    "cellStyleFunction": "",
                    "useCellContentFunction": false,
                    "cellContentFunction": "",
                    "defaultColumnVisibility": "hidden",
                    "columnSelectionToDisplay": "disabled"
                  },
                  "_hash": 0.4131001736728064,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            }
          ],
          "showTitleIcon": false,
          "titleTooltip": "",
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "actions": {
            "actionCellButton": [
              {
                "name": "Deactivate",
                "icon": "block",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "",
                "customCss": ".deactivation-content {\n    color: red !important;\n    white-space: pre-line;\n}",
                "customFunction": "const $injector = widgetContext.$scope.$injector;\r\nconst dialogs = $injector.get(widgetContext.servicesMap.get(\r\n  'dialogs'));\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n  'http'));\r\nconst translationService = $injector.get(widgetContext\r\n  .servicesMap.get(\"translate\"));\r\n\r\nlet title = getTranslation('hawle-dashboard.Magnetically-Deactivate') + ' ' + entityName + '?';\r\nlet content = getTranslation('hawle-dashboard.Caution:-Reactivation-is-only-possible__');\r\ndialogs.confirm(title, content, getTranslation('hawle-dashboard.cancel'), getTranslation('hawle-dashboard.deactivate'), ['deactivation-content'])\r\n  .subscribe(\r\n    function (result) {\r\n      if (result) {\r\n        sendToRuleEngine(entityId.id, entityName).subscribe(() => {\r\n            widgetContext.updateAliases();\r\n        });\r\n      }\r\n    }\r\n  );\r\n\r\nfunction getTranslation(translationText) {\r\n    widgetContext.$scope.translateService = widgetContext.$scope.$injector.get(widgetContext.servicesMap.get('translate'));\r\n    let translated = translationText;\r\n    try {\r\n        translated = widgetContext.$scope\r\n                .translateService.instant(\r\n                    translationText);\r\n    } catch (error) {\r\n        \r\n    }\r\n    return translated;\r\n}\r\n\r\nfunction sendToRuleEngine(deviceId, deviceName) {\r\n    const apiURL =\r\n        `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=swisscom`;\r\n    const payload = {\r\n        \"msg\": null,\r\n        \"metadata\": {\r\n            \"deviceName\": deviceName,\r\n            \"deviceType\": \"d-storz\",\r\n            \"operationType\": \"DEACTIVATE\"\r\n        }\r\n    }\r\n    return http.post(apiURL, payload).pipe();\r\n}",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "2dfc97d2-9333-6f3d-5595-b3dc43673933"
              },
              {
                "name": "delete",
                "icon": "delete",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\nlet deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\nlet userService = $injector.get(widgetContext.servicesMap.get('userService'));\nlet entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\nlet http = $injector.get(widgetContext.servicesMap.get('http'));\nlet rxjs = widgetContext.rxjs;\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\nconst relatedHydrantId = additionalParams.entity.hydrantId;\n\nfunction reduceDStorzCountInRelatedHydrant() {\n    if(relatedHydrantId && relatedHydrantId.length) {\n        console.debug(\"query asset\")\n        getAssetServerAttributes(relatedHydrantId, [\"dstorzCount\"]).subscribe((response) => {\n            console.debug(response)\n            if(response && response.length) {\n                let dstorzCountInHydrant = parseInt(response[0].value);\n                let reducedDStorzCount = dstorzCountInHydrant > 0 ? dstorzCountInHydrant - 1 : 0;\n                saveEntityAttributes(relatedHydrantId, [{\n                    key: \"dstorzCount\",\n                    value: reducedDStorzCount\n                }]).subscribe();\n            }\n        });\n     }\n}\n\n\n\nconst relatedStorzQuery = {\n    filters: [\n      {\n        relationType: \"Contains\",\n        entityTypes: [\n          \"ASSET\"\n        ]\n      }\n    ],\n    parameters: {\n      rootId: entityId.id,\n      rootType: \"DEVICE\",\n      direction: \"TO\",\n      relationTypeGroup: \"COMMON\",\n      maxLevel: 1,\n      fetchLastLevelOnly: true\n    }\n  };\n  \n\n\nopenDeleteEntityDialog();\n\nfunction openDeleteEntityDialog() {\n    if(widgetContext.currentUser.authority == \"CUSTOMER_USER\") {\n        let title = getTranslation('hawle-dashboard.Remove-D-Storz') + ' ' +  entityName;\n        let content = getTranslation('hawle-dashboard.Do-you-really-want-to-remove-D-Storz') + ' ' + entityName + '? ';\n        dialogs.confirm(title, content, getTranslation('hawle-dashboard.cancel'), getTranslation('hawle-dashboard.remove')).subscribe(\n            function(result) {\n                if (result) {\n                    reclaimEntity();\n                }\n            }\n        );\n    } else {\n        let title = getTranslation(\"hawle-dashboard.Cannot-remove-D-Storz\") + ' ' +  entityName;\n        let content = getTranslation('hawle-dashboard.You-already-own-D-Storz') + ' ' + entityName + ' ' + getTranslation(\"and-cannot-remove/reclaim-it.\") ;\n        dialogs.confirm(title, content).subscribe();\n    }\n}\n\nfunction reclaimEntity() {\n    let config = {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    };\n    \n\n\n    http.post(\"/api/relations/info\", relatedStorzQuery).pipe().subscribe((relationsInfo) => {\n        let storzToDStorzRelation;\n        if (relationsInfo.length > 0) {\n          storzToDStorzRelation = relationsInfo.find(relation => relation.from.entityType == 'ASSET' && relation.to.entityType == 'DEVICE');\n          if (storzToDStorzRelation) {\n              \n             if(relatedHydrantId && relatedHydrantId.length) {\n                 \n                // unassinging dstorz;\n                const sendToRuleEngineKey = \"resetAlarm\";\n                const sendToRuleEngineURL = `/api/rule-engine/sendToRuleEngine?entityId=${relatedHydrantId}&entityType=ASSET&key=${sendToRuleEngineKey}`;\n                const sendToRuleEngineBody = {\n                    \"msg\": null,\n                    \"metadata\": {\n                        \"deviceName\": entityName,\n                        \"deviceType\": \"d-storz\",\n                        \"operationType\": \"UNASSIGN\"\n                    }\n                }\n                http.post(sendToRuleEngineURL, sendToRuleEngineBody).pipe().subscribe(() => {})\n            \n                reduceDStorzCountInRelatedHydrant();\n             }\n            \n            const combinedObservable = deleteHydrantRelatedAttributesInDStorz(config).pipe(\n              rxjs.switchMap(() => deleteDStorzRelatedAttributesInStorz(storzToDStorzRelation, config)),\n              rxjs.switchMap(() => deleteStorzToDStorzRelation(storzToDStorzRelation)),\n              rxjs.switchMap(() => reclaimEntityObservable())\n            );\n        \n            combinedObservable.subscribe(() => {\n                \n                sendToRuleEngine(entityId.id, entityName).subscribe(() => {});\n                                \n                widgetContext.showToast('success',\n                    translationService.instant('hawle-dashboard.d-storz-deleted-successfully'), 2000,\n                    'top', 'left');\n                widgetContext.updateAliases();\n            });\n          }\n        } else {\n            reclaimEntityObservable().subscribe(() => {\n                \n                sendToRuleEngine(entityId.id, entityName).subscribe(() => {});\n                \n                widgetContext.showToast('success',\n                    translationService.instant('hawle-dashboard.d-storz-deleted-successfully'), 2000,\n                    'top', 'left');\n                widgetContext.updateAliases();\n            });\n        }\n    })\n}\n\nfunction getAssetServerAttributes(entityId, keys) {\n   return attributeService.getEntityAttributes({ entityType: \"ASSET\", id: entityId }, \"SERVER_SCOPE\", keys);\n}\n\nfunction saveEntityAttributes(entityId, attributes, entityType = \"ASSET\") {\n  return attributeService.saveEntityAttributes({ entityType, id: entityId }, \"SERVER_SCOPE\", attributes);\n}\n\nfunction deleteStorzToDStorzRelation(storzToDStorzRelation) {\n   return http.delete(`/api/relation?fromId=${storzToDStorzRelation.from.id}&fromType=${storzToDStorzRelation.from.entityType}&relationType=${storzToDStorzRelation.type}&relationTypeGroup=${storzToDStorzRelation.typeGroup}&toId=${storzToDStorzRelation.to.id}&toType=${storzToDStorzRelation.to.entityType}`);\n}\n\nfunction deleteDStorzRelatedAttributesInStorz(storzToDStorzRelation, config) {\n    let dStorzRelatedAttributesInStorz = [\"assignedDStorz\"];\n    return http.delete(`/api/plugins/telemetry/ASSET/${storzToDStorzRelation.from.id}/SERVER_SCOPE?keys=${dStorzRelatedAttributesInStorz.join(\",\")}`, config)\n}\n\nfunction deleteHydrantRelatedAttributesInDStorz(config) {\n    let hydrantRelatedAttributes = [\"hydrantNumber\", \"hydrantId\", \"hydrantsBrand\", \"country\", \"state\", \"zip\", \"city\", \"street\", \"exitNode\"];\n    return http.delete(`/api/plugins/telemetry/DEVICE/${entityId.id}/SERVER_SCOPE?keys=${hydrantRelatedAttributes.join(\",\")}`, config);\n}\n\nfunction reclaimEntityObservable() {\n    return http.delete(`/api/customer/device/${entityName}/claim`);\n}\n\nfunction showErrorDialog() {\n    let title = 'Error';\n    let content = getTranslation('hawle-dashboard.An-error-occurred-while-deleting__');\n    dialogs.alert(title, content, 'CLOSE').subscribe(\n        function(result) {}\n    );\n}\n\nfunction getTranslation(translationText) {\n    widgetContext.$scope.translateService = widgetContext.$scope.$injector.get(widgetContext.servicesMap.get('translate'));\n    let translated = translationText;\n    try {\n        translated = widgetContext.$scope\n                .translateService.instant(\n                    translationText);\n    } catch (error) {\n        \n    }\n    return translated;\n}\n\n\nfunction sendToRuleEngine(deviceId, deviceName) {\n    const apiURL =\n        `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=swisscom`;\n    const payload = {\n        \"msg\": null,\n        \"metadata\": {\n            \"deviceName\": deviceName,\n            \"deviceType\": \"d-storz\",\n            \"operationType\": \"DELETE\"\n        }\n    }\n    return http.post(apiURL, payload).pipe();\n}",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "5f3c0d59-2407-3cff-2fca-a37521663ae7"
              }
            ],
            "rowClick": [
              {
                "name": "D-storz-details",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<div *ngIf=\"!!entityValue\" class=\"d-storz-details\">\n    <div class=\"frame\">\n        <div class=\"div\">\n            <div class=\"text-wrapper\">{{ \"hawle-dashboard.d-storz-details\" | translate }}</div>\n            <div *ngIf=\"!!entityValue?.active\" class=\"badges\">\n                <div class=\"ellipse\"></div>\n                <div class=\"badge mt-1\">{{ \"hawle-dashboard.active\" | translate }}</div>\n            </div>\n            <div *ngIf=\"!entityValue?.active\" class=\"badges-inactive\">\n                <div class=\"ellipse-inactive\"></div>\n                <div class=\"badge-inactive mt-1\">{{entityValue?.active}}{{ \"hawle-dashboard.inactive\" | translate }}\n                </div>\n            </div>\n        </div>\n        <button class=\"w-0 h-0\" mat-icon-button type=\"button\">\n        </button>\n        <button [disabled]=\"dataSaving\" (click)=\"cancel()\" mat-icon-button type=\"button\">\n            <mat-icon style=\"cursor: pointer\">close</mat-icon>\n        </button>\n    </div>\n    <div class=\"frame-2\">\n        <div class=\"frame-3\">\n            <div class=\"frame-4\">\n                <div class=\"text-wrapper-2\">{{ \"hawle-dashboard.d-storz-number\" | translate }}</div>\n                <div class=\"text-wrapper-3\">{{entityValue?.lpnId}}</div>\n            </div>\n            <div class=\"frame-4\">\n                <div class=\"text-wrapper-2\">{{ \"hawle-dashboard.lpn-id\" | translate }}</div>\n                <div class=\"text-wrapper-3\">{{entityValue?.name}}</div>\n            </div>\n            <div class=\"frame-4\">\n                <div class=\"text-wrapper-2\">{{ \"hawle-dashboard.signal-strength\" | translate }}</div>\n                <div class=\"text-wrapper-3\">{{entityValue?.signalStrength }}</div>\n            </div>\n        </div>\n    </div>\n    <div class=\"frame-6\" [formGroup]=\"entityForm\">\n        <div class=\"text-wrapper-4\">{{ \"hawle-dashboard.assigned-hydrant\" | translate }}</div>\n        <div class=\"frame-7\">\n            <div class=\"min-w-296\">\n                <tb-entity-autocomplete formControlName=\"hydrantId\" [requiredText]=\"'hawle-dashboard.hydrant-name-is-required'\"\n                    [labelText]=\"'hawle-dashboard.hydrant.hydrant'\" [notFoundText]=\"'hawle-dashboard.hydrant-not-found'\" [entityType]=\"'ASSET'\" useCustomTranslations=\"true\"\n                    [entitySubtype]=\"'hydrant'\" required>\n                </tb-entity-autocomplete>\n            </div>\n            <div class=\"frame-8\">\n                <div class=\"frame-4\">\n                    <div class=\"text-wrapper-2\">{{ \"hawle-dashboard.brand\" | translate }}</div>\n                    <div class=\"text-wrapper-3\">{{entityValue?.hydrantBrand }}</div>\n                </div>\n                <div class=\"frame-4\">\n                    <div class=\"text-wrapper-2\">{{ \"hawle-dashboard.model\" | translate }}</div>\n                    <div class=\"text-wrapper-3\">{{entityValue?.hydrantModel }}</div>\n                </div>\n            </div>\n        </div>\n        <div class=\"frame-9\">\n            <div class=\"frame-10\">\n                <div class=\"text-wrapper-5\">{{ \"hawle-dashboard.outlet-information\" | translate }}</div>\n                <div class=\"text-wrapper-5\">{{ \"hawle-dashboard.assigned-d-storz\" | translate }}</div>\n                <div class=\"text-wrapper-5\">{{ \"hawle-dashboard.action\" | translate }}</div>\n            </div>\n            <div class=\"frame-11 min-h-124\">\n                <div *ngFor=\"let storz of entityValue.selectedHydrantStorzList\" class=\"frame-12\"\n                    [class.current-dstorz]=\"storz.id === entityValue.storzId\">\n                    <div class=\"text-wrapper-6\">{{storz.exitName + ', ' + storz.exitDiameter + (storz.exitDiameterUnit\n                        || 'mm')}}</div>\n                    <div class=\"text-wrapper-6\">{{storz.assignedDStorzSerialNumber || '--'}}</div>\n                    <div class=\"frame-13\" *ngIf=\"!!storz.assignedDStorz\">\n                        <!--<mat-icon-->\n                        <!--    [style.cursor]=\"!!entityValue.storzId && storz.id !== entityValue.storzId ? 'default' : 'pointer'\"-->\n                        <!--    [style.color]=\"!!entityValue.storzId && storz.id !== entityValue.storzId ? 'rgba(0, 0, 0, 0.3)' : 'rgba(0, 0, 0, 0.87)'\"-->\n                        <!--    matTooltipPosition=\"above\"-->\n                        <!--    matTooltip=\"{{ 'hawle-dashboard.deactivate-d-storz' | translate }}\" class=\"text-buttons\"-->\n                        <!--    style=\"cursor: pointer; font-size:16px\">block</mat-icon>-->\n                        <mat-icon\n                            [style.cursor]=\"!!entityValue.storzId && storz.id !== entityValue.storzId ? 'default' : 'pointer'\"\n                            [style.color]=\"!!entityValue.storzId && storz.id !== entityValue.storzId ? 'rgba(0, 0, 0, 0.3)' : 'rgba(0, 0, 0, 0.87)'\"\n                            matTooltipPosition=\"above\" matTooltip=\"{{ 'hawle-dashboard.delete-d-storz' | translate }}\"\n                            (click)=\"removeDstorz(storz)\" class=\"text-buttons\"\n                            style=\"cursor: pointer; font-size:16px\">close</mat-icon>\n                        <mat-icon\n                            [style.cursor]=\"!!entityValue.storzId && storz.id !== entityValue.storzId ? 'default' : 'pointer'\"\n                            [style.color]=\"!!entityValue.storzId && storz.id !== entityValue.storzId ? 'rgba(0, 0, 0, 0.3)' : 'rgba(0, 0, 0, 0.87)'\"\n                            matTooltipPosition=\"above\" matTooltip=\"{{ '' }}\" class=\"text-buttons\"\n                            style=\"cursor: pointer; font-size:16px\">info_outline</mat-icon>\n                        <mat-icon\n                            [style.cursor]=\"!!entityValue.storzId && storz.id !== entityValue.storzId ? 'default' : 'pointer'\"\n                            [style.color]=\"!!entityValue.storzId && storz.id !== entityValue.storzId ? 'rgba(0, 0, 0, 0.3)' : 'rgba(0, 0, 0, 0.87)'\"\n                            matTooltipPosition=\"above\" matTooltip=\"{{ 'hawle-dashboard.replace-d-storz' | translate }}\"\n                            (click)=\"replaceDstorz(storz)\" *ngIf=\"storz.id !== entityValue.storzId\" class=\"text-buttons\"\n                            style=\"cursor: pointer; font-size:16px\">replay</mat-icon>\n                        <div class=\"w-32\" *ngIf=\"storz.id === entityValue.storzId\"></div>\n                    </div>\n                    <div *ngIf=\"!storz.assignedDStorz\" class=\"w-132\"></div>\n                    <button type=\"button\" (click)=\"assignDstorz(storz)\"\n                        *ngIf=\"!storz.assignedDStorz && !entityValue.storzId\" mat-raised-button\n                        class=\"primary-button min-w-138\">{{ \"hawle-dashboard.assign-d-storz\" | translate }}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"frame-15\">\n        <button [disabled]=\"dataSaving\" (click)=\"cancel()\" mat-button>{{ \"hawle-dashboard.cancel\" | translate\n            }}</button>\n        <button [disabled]=\"!entityValue.storzId || entityValue.storzId === initStorzId\"\n            [style.opacity]=\"!entityValue.storzId || entityValue.storzId === initStorzId ? 0.2 : 1\" mat-raised-button\n            class=\"save-button\" (click)=\"save()\" type=\"submit\">{{ (isAlreadyAssignedInHydrant ? \"hawle-dashboard.save\" :\n            \"hawle-dashboard.assign-a-hydrant\") | translate }}</button>\n    </div>\n</div>\n",
                "customCss": "html,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font-size: 100%;\n    vertical-align: baseline\n}\n\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n    display: block\n}\n\nbody {\n    line-height: 1\n}\n\nol,\nul {\n    list-style: none\n}\n\nblockquote,\nq {\n    quotes: none\n}\n\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n    content: '';\n    content: none\n}\n\ntable {\n    border-collapse: collapse;\n    border-spacing: 0\n}\n\n* {\n    -webkit-font-smoothing: antialiased;\n    box-sizing: border-box;\n}\n\nhtml,\nbody {\n    margin: 0px;\n    height: 100%;\n}\n\n/* a blue color as a generic focus style */\nbutton:focus-visible {\n    outline: 2px solid #4a90e2 !important;\n    outline: -webkit-focus-ring-color auto 5px !important;\n}\n\na {\n    text-decoration: none;\n}\n\n:root {\n    --hawido-brand-green-100: #DCFCE7;\n    --hawido-brand-green-700: #15803D;\n    --hawido-brandblue900: rgba(6, 77, 116, 1);\n    --hawido-brandblue800: rgba(0, 93, 141, 1);\n    --hawido-brandblue700: rgba(0, 110, 171, 1);\n    --hawido-brandblue600: rgba(0, 138, 212, 1);\n    --hawido-brandblue500: rgba(0, 159, 227, 1);\n    --hawido-brandblue400: rgba(44, 196, 255, 1);\n    --hawido-brandblue300: rgba(117, 216, 255, 1);\n    --hawido-brandblue200: rgba(182, 232, 255, 1);\n    --hawido-brandblue100: rgba(222, 242, 255, 1);\n    --hawido-brandblue50: rgba(239, 249, 255, 1);\n    --hawido-brandgrey900: rgba(15, 26, 42, 1);\n    --hawido-brandgrey800: rgba(30, 42, 59, 1);\n    --hawido-brandgrey700: rgba(51, 65, 85, 1);\n    --hawido-brandgrey600: rgba(71, 85, 105, 1);\n    --hawido-brandgrey500: rgba(100, 116, 139, 1);\n    --hawido-brandgrey400: rgba(148, 163, 184, 1);\n    --hawido-brandgrey300: rgba(203, 212, 225, 1);\n    --hawido-brandgrey200: rgba(226, 232, 240, 1);\n    --hawido-brandgrey100: rgba(241, 244, 249, 1);\n    --hawido-brandgrey50: rgba(248, 250, 252, 1);\n    --hawido-brandgreen900: rgba(20, 83, 45, 1);\n    --hawido-brandgreen800: rgba(22, 101, 52, 1);\n    --hawido-brandgreen700: rgba(21, 128, 61, 1);\n    --hawido-brandgreen600: rgba(22, 163, 74, 1);\n    --hawido-brandgreen500: rgba(34, 197, 94, 1);\n    --hawido-brandgreen400: rgba(74, 222, 128, 1);\n    --hawido-brandgreen300: rgba(134, 239, 172, 1);\n    --hawido-brandgreen200: rgba(187, 247, 208, 1);\n    --hawido-brandgreen100: rgba(220, 252, 231, 1);\n    --hawido-brandgreen50: rgba(240, 253, 244, 1);\n    --hawido-brandorange900: rgba(124, 45, 18, 1);\n    --hawido-brandorange800: rgba(154, 52, 18, 1);\n    --hawido-brandorange700: rgba(194, 65, 12, 1);\n    --hawido-brandorange600: rgba(234, 88, 12, 1);\n    --hawido-brandorange500: rgba(249, 115, 22, 1);\n    --hawido-brandorange400: rgba(251, 146, 60, 1);\n    --hawido-brandorange300: rgba(253, 186, 116, 1);\n    --hawido-brandorange200: rgba(254, 215, 170, 1);\n    --hawido-brandorange100: rgba(255, 237, 213, 1);\n    --hawido-brandorange50: rgba(255, 247, 237, 1);\n    --hawido-brandred900: rgba(127, 29, 29, 1);\n    --hawido-brandred800: rgba(153, 27, 27, 1);\n    --hawido-brandred700: rgba(185, 28, 28, 1);\n    --hawido-brandred600: rgba(220, 38, 38, 1);\n    --hawido-brandred500: rgba(239, 68, 68, 1);\n    --hawido-brandred400: rgba(248, 113, 113, 1);\n    --hawido-brandred300: rgba(252, 165, 165, 1);\n    --hawido-brandred200: rgba(254, 202, 202, 1);\n    --hawido-brandred100: rgba(254, 226, 226, 1);\n    --hawido-brandred50: rgba(254, 242, 242, 1);\n    --basic-colorsblack: rgba(0, 0, 0, 1);\n    --basic-colorswhite: rgba(255, 255, 255, 1);\n    --brandteal-400: rgba(50, 205, 172, 1);\n    --brandteal-600: rgba(33, 131, 114, 1);\n    --brandteal-100: rgba(209, 245, 233, 1);\n    --hawlegray-700: rgba(51, 65, 85, 1);\n    --gray-300: rgba(203, 212, 225, 1);\n    --gray-700: rgba(51, 65, 85, 1);\n    --gray-500: rgba(100, 116, 139, 1);\n    --blue-700: rgba(0, 110, 171, 1);\n    --blue-100: rgba(222, 242, 255, 1);\n    --awttblue-500: rgba(0, 159, 227, 1);\n    --blue-500: rgba(0, 159, 227, 1);\n    --statuserror: rgba(224, 0, 0, 1);\n    --red-50: rgba(254, 242, 242, 1);\n    --awttred-500: rgba(239, 68, 68, 1);\n    --textdisabled: rgba(162, 163, 164, 1);\n    --gray-200: rgba(226, 232, 240, 1);\n    --brandblue-400: rgba(106, 157, 240, 1);\n    --brandblue-600: rgba(50, 93, 222, 1);\n    --brandblue-100: rgba(221, 232, 252, 1);\n    --brandsky-400: rgba(49, 184, 255, 1);\n    --brandsky-600: rgba(0, 126, 201, 1);\n    --brandsky-100: rgba(223, 241, 255, 1);\n    --tailwindred-400: rgba(248, 113, 113, 1);\n    --tailwindred-600: rgba(220, 38, 38, 1);\n    --tailwindred-100: rgba(254, 226, 226, 1);\n    --brandyellow-400: rgba(232, 184, 55, 1);\n    --brandyellow-600: rgba(200, 119, 23, 1);\n    --brandyellow-100: rgba(249, 240, 204, 1);\n    --tailwindviolate-400: rgba(167, 139, 250, 1);\n    --tailwindviolate-600: rgba(124, 58, 237, 1);\n    --tailwindviolate-100: rgba(237, 233, 254, 1);\n    --tailwindindigo-400: rgba(129, 140, 248, 1);\n    --tailwindindigo-600: rgba(79, 70, 229, 1);\n    --tailwindindigo-100: rgba(224, 231, 255, 1);\n    --tailwindslate-400: rgba(148, 163, 184, 1);\n    --tailwindslate-600: rgba(71, 85, 105, 1);\n    --tailwindslate-100: rgba(241, 244, 249, 1);\n    --tailwindorange-400: rgba(251, 146, 60, 1);\n    --tailwindorange-600: rgba(234, 88, 12, 1);\n    --tailwindorange-100: rgba(255, 237, 213, 1);\n    --tailwindpink-400: rgba(244, 114, 182, 1);\n    --tailwindpink-600: rgba(219, 39, 119, 1);\n    --tailwindpink-100: rgba(252, 231, 243, 1);\n    --heading-xs-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --heading-xs-font-weight: 700;\n    --heading-xs-font-size: 12px;\n    --heading-xs-letter-spacing: 0px;\n    --heading-xs-line-height: 120.00000476837158%;\n    --heading-xs-font-style: normal;\n    --heading-sm-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --heading-sm-font-weight: 700;\n    --heading-sm-font-size: 16px;\n    --heading-sm-letter-spacing: 0px;\n    --heading-sm-line-height: 120.00000476837158%;\n    --heading-sm-font-style: normal;\n    --heading-base-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --heading-base-font-weight: 700;\n    --heading-base-font-size: 24px;\n    --heading-base-letter-spacing: 0px;\n    --heading-base-line-height: 120.00000476837158%;\n    --heading-base-font-style: normal;\n    --heading-lg-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --heading-lg-font-weight: 700;\n    --heading-lg-font-size: 20px;\n    --heading-lg-letter-spacing: 0px;\n    --heading-lg-line-height: 120.00000476837158%;\n    --heading-lg-font-style: normal;\n    --heading-xl-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --heading-xl-font-weight: 700;\n    --heading-xl-font-size: 25.007999420166016px;\n    --heading-xl-letter-spacing: 0px;\n    --heading-xl-line-height: 120.00000476837158%;\n    --heading-xl-font-style: normal;\n    --heading-2xl-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --heading-2xl-font-weight: 700;\n    --heading-2xl-font-size: 31.24799919128418px;\n    --heading-2xl-letter-spacing: 0px;\n    --heading-2xl-line-height: 120.00000476837158%;\n    --heading-2xl-font-style: normal;\n    --heading-3xl-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --heading-3xl-font-weight: 700;\n    --heading-3xl-font-size: 39.055999755859375px;\n    --heading-3xl-letter-spacing: -0.7811199951171875px;\n    --heading-3xl-line-height: 110.00000238418579%;\n    --heading-3xl-font-style: normal;\n    --heading-4xl-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --heading-4xl-font-weight: 700;\n    --heading-4xl-font-size: 48.832000732421875px;\n    --heading-4xl-letter-spacing: -0.9766400146484375px;\n    --heading-4xl-line-height: 110.00000238418579%;\n    --heading-4xl-font-style: normal;\n    --heading-5xl-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --heading-5xl-font-weight: 700;\n    --heading-5xl-font-size: 61.040000915527344px;\n    --heading-5xl-letter-spacing: -1.220800018310547px;\n    --heading-5xl-line-height: 110.00000238418579%;\n    --heading-5xl-font-style: normal;\n    --heading-6xl-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --heading-6xl-font-weight: 700;\n    --heading-6xl-font-size: 76.28800201416016px;\n    --heading-6xl-letter-spacing: -1.5257600402832032px;\n    --heading-6xl-line-height: 110.00000238418579%;\n    --heading-6xl-font-style: normal;\n    --heading-7xl-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --heading-7xl-font-weight: 700;\n    --heading-7xl-font-size: 95.36000061035156px;\n    --heading-7xl-letter-spacing: -1.9072000122070312px;\n    --heading-7xl-line-height: 110.00000238418579%;\n    --heading-7xl-font-style: normal;\n    --body-xs-font-family: \"HelveticaNeue-Regular\", Helvetica;\n    --body-xs-font-weight: 400;\n    --body-xs-font-size: 12px;\n    --body-xs-letter-spacing: 0px;\n    --body-xs-line-height: 160.0000023841858%;\n    --body-xs-font-style: normal;\n    --body-sm-font-family: \"HelveticaNeue-Regular\", Helvetica;\n    --body-sm-font-weight: 400;\n    --body-sm-font-size: 12.800000190734863px;\n    --body-sm-letter-spacing: 0px;\n    --body-sm-line-height: 160.0000023841858%;\n    --body-sm-font-style: normal;\n    --body-base-font-family: \"HelveticaNeue-Regular\", Helvetica;\n    --body-base-font-weight: 400;\n    --body-base-font-size: 16px;\n    --body-base-letter-spacing: 0px;\n    --body-base-line-height: 160.0000023841858%;\n    --body-base-font-style: normal;\n    --subtitles-base-font-family: \"HelveticaNeue-Medium\", Helvetica;\n    --subtitles-base-font-weight: 500;\n    --subtitles-base-font-size: 16px;\n    --subtitles-base-letter-spacing: 0px;\n    --subtitles-base-line-height: 160.0000023841858%;\n    --subtitles-base-font-style: normal;\n    --subtitles-lg-font-family: \"HelveticaNeue-Medium\", Helvetica;\n    --subtitles-lg-font-weight: 500;\n    --subtitles-lg-font-size: 20px;\n    --subtitles-lg-letter-spacing: 0px;\n    --subtitles-lg-line-height: 160.0000023841858%;\n    --subtitles-lg-font-style: normal;\n    --subtitles-xl-font-family: \"HelveticaNeue-Medium\", Helvetica;\n    --subtitles-xl-font-weight: 500;\n    --subtitles-xl-font-size: 25.007999420166016px;\n    --subtitles-xl-letter-spacing: 0px;\n    --subtitles-xl-line-height: 160.0000023841858%;\n    --subtitles-xl-font-style: normal;\n    --badge-text-lg-font-family: \"HelveticaNeue-Medium\", Helvetica;\n    --badge-text-lg-font-weight: 500;\n    --badge-text-lg-font-size: 12.800000190734863px;\n    --badge-text-lg-letter-spacing: 0px;\n    --badge-text-lg-line-height: 100%;\n    --badge-text-lg-font-style: normal;\n    --badge-text-base-font-family: \"HelveticaNeue-Medium\", Helvetica;\n    --badge-text-base-font-weight: 500;\n    --badge-text-base-font-size: 12px;\n    --badge-text-base-letter-spacing: 0px;\n    --badge-text-base-line-height: 100%;\n    --badge-text-base-font-style: normal;\n    --button-text-sm-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --button-text-sm-font-weight: 700;\n    --button-text-sm-font-size: 12.800000190734863px;\n    --button-text-sm-letter-spacing: 0px;\n    --button-text-sm-line-height: 160.0000023841858%;\n    --button-text-sm-font-style: normal;\n    --button-text-base-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --button-text-base-font-weight: 700;\n    --button-text-base-font-size: 16px;\n    --button-text-base-letter-spacing: 0px;\n    --button-text-base-line-height: 160.0000023841858%;\n    --button-text-base-font-style: normal;\n    --button-text-lg-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --button-text-lg-font-weight: 700;\n    --button-text-lg-font-size: 20px;\n    --button-text-lg-letter-spacing: 0px;\n    --button-text-lg-line-height: 160.0000023841858%;\n    --button-text-lg-font-style: normal;\n    --pre-header-overline-base-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --pre-header-overline-base-font-weight: 700;\n    --pre-header-overline-base-font-size: 12.800000190734863px;\n    --pre-header-overline-base-letter-spacing: 1.5360000228881836px;\n    --pre-header-overline-base-line-height: 160.0000023841858%;\n    --pre-header-overline-base-font-style: normal;\n    --pre-header-overline-sm-font-family: \"HelveticaNeue-Bold\", Helvetica;\n    --pre-header-overline-sm-font-weight: 700;\n    --pre-header-overline-sm-font-size: 10.199999809265137px;\n    --pre-header-overline-sm-letter-spacing: 1.6319999694824219px;\n    --pre-header-overline-sm-line-height: 160.0000023841858%;\n    --pre-header-overline-sm-font-style: normal;\n    --button-text-inter-sm-font-family: \"Inter-SemiBold\", Helvetica;\n    --button-text-inter-sm-font-weight: 600;\n    --button-text-inter-sm-font-size: 12.800000190734863px;\n    --button-text-inter-sm-letter-spacing: 0px;\n    --button-text-inter-sm-line-height: 160.0000023841858%;\n    --button-text-inter-sm-font-style: normal;\n    --button-text-inter-base-font-family: \"Inter-SemiBold\", Helvetica;\n    --button-text-inter-base-font-weight: 600;\n    --button-text-inter-base-font-size: 16px;\n    --button-text-inter-base-letter-spacing: 0px;\n    --button-text-inter-base-line-height: 160.0000023841858%;\n    --button-text-inter-base-font-style: normal;\n    --button-text-inter-lg-font-family: \"Inter-SemiBold\", Helvetica;\n    --button-text-inter-lg-font-weight: 600;\n    --button-text-inter-lg-font-size: 20px;\n    --button-text-inter-lg-letter-spacing: 0px;\n    --button-text-inter-lg-line-height: 160.0000023841858%;\n    --button-text-inter-lg-font-style: normal;\n    --badge-text-inter-base-font-family: \"Inter-Medium\", Helvetica;\n    --badge-text-inter-base-font-weight: 500;\n    --badge-text-inter-base-font-size: 10.239999771118164px;\n    --badge-text-inter-base-letter-spacing: 0px;\n    --badge-text-inter-base-line-height: 100%;\n    --badge-text-inter-base-font-style: normal;\n    --badge-text-inter-lg-font-family: \"Inter-Medium\", Helvetica;\n    --badge-text-inter-lg-font-weight: 500;\n    --badge-text-inter-lg-font-size: 12.800000190734863px;\n    --badge-text-inter-lg-letter-spacing: 0px;\n    --badge-text-inter-lg-line-height: 100%;\n    --badge-text-inter-lg-font-style: normal;\n    --drop-shadow-default-16dp: 0px 7px 24px 0px rgba(15, 26, 42, 0.19), 0px 3px 6px 0px rgba(15, 26, 42, 0.04);\n    --drop-shadow-default-12dp: 0px 3.75px 11px 0px rgba(15, 26, 42, 0.19), 0px 0.5px 5px 0px rgba(15, 26, 42, 0.04);\n    --drop-shadow-default-8dp: 0px 3.75px 11px 0px rgba(15, 26, 42, 0.19), 0px 0.5px 5px 0px rgba(15, 26, 42, 0.04);\n    --drop-shadow-default-6dp: 0px 2.75px 9px 0px rgba(15, 26, 42, 0.19), 0px 0.25px 3px 0px rgba(15, 26, 42, 0.04);\n    --drop-shadow-default-4dp: 0px 1.850000023841858px 6.25px 0px rgba(15, 26, 42, 0.19),\n        0px 0.5px 1.75px 0px rgba(15, 26, 42, 0.04);\n    --drop-shadow-default-2dp: 0px 0.8500000238418579px 3px 0px rgba(15, 26, 42, 0.19),\n        0px 0.25px 1px 0px rgba(15, 26, 42, 0.04);\n    --drop-shadow-default-1dp: 0px 0.5px 1.5px 0px rgba(15, 26, 42, 0.19), 0px 0px 1px 0px rgba(15, 26, 42, 0.04);\n    --drop-shadow-default-24dp: 0px 10.5px 36px 0px rgba(15, 26, 42, 0.19), 0px 3px 13px 0px rgba(15, 26, 42, 0.04);\n    --drop-shadow-blue-24dp: 0px 10.5px 36px 0px rgba(6, 77, 116, 0.19), 0px 3px 13px 0px rgba(6, 77, 116, 0.04);\n    --drop-shadow-blue-16dp: 0px 7px 24px 0px rgba(6, 77, 116, 0.19), 0px 3px 6px 0px rgba(6, 77, 116, 0.04);\n    --drop-shadow-blue-12dp: 0px 3.75px 11px 0px rgba(6, 77, 116, 0.19), 0px 0.5px 5px 0px rgba(6, 77, 116, 0.04);\n    --drop-shadow-blue-8dp: 0px 3.75px 11px 0px rgba(6, 77, 116, 0.19), 0px 0.5px 5px 0px rgba(6, 77, 116, 0.04);\n    --drop-shadow-blue-6dp: 0px 2.75px 9px 0px rgba(6, 77, 116, 0.19), 0px 0.25px 3px 0px rgba(6, 77, 116, 0.04);\n    --drop-shadow-blue-4dp: 0px 1.850000023841858px 6.25px 0px rgba(6, 77, 116, 0.19),\n        0px 0.5px 1.75px 0px rgba(6, 77, 116, 0.04);\n    --drop-shadow-blue-2dp: 0px 0.8500000238418579px 3px 0px rgba(6, 77, 116, 0.19),\n        0px 0.25px 1px 0px rgba(6, 77, 116, 0.04);\n    --drop-shadow-blue-1dp: 0px 0.5px 1.5px 0px rgba(6, 77, 116, 0.19), 0px 0px 1px 0px rgba(6, 77, 116, 0.04);\n}\n\n.d-storz-details {\n    min-width: 732px;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 16px;\n    padding: 24px;\n    position: relative;\n    background-color: #ffffff;\n}\n\n.d-storz-details .frame {\n    align-items: flex-start;\n    gap: 8px;\n    align-self: stretch;\n    width: 100%;\n    flex: 0 0 auto;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .div {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 8px;\n    flex: 1;\n    flex-grow: 1;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .text-wrapper {\n    width: 437px;\n    color: #000000;\n    font-size: var(--heading-base-font-size);\n    line-height: var(--heading-base-line-height);\n    position: relative;\n    margin-top: -1px;\n    /*font-family: var(--heading-base-font-family);*/\n    font-weight: var(--heading-base-font-weight);\n    letter-spacing: var(--heading-base-letter-spacing);\n    font-style: var(--heading-base-font-style);\n}\n\n.d-storz-details .badges {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 4px;\n    padding: 4px 8px 4px 6px;\n    position: relative;\n    flex: 0 0 auto;\n    background-color: var(--brandteal-100);\n    border-radius: 10px;\n}\n\n.d-storz-details .ellipse {\n    position: relative;\n    width: 6px;\n    height: 6px;\n    background-color: var(--brandteal-400);\n    border-radius: 3px;\n}\n\n.d-storz-details .badge {\n    position: relative;\n    width: fit-content;\n    margin-top: -1px;\n    /*font-family: var(--badge-text-base-font-family);*/\n    font-weight: var(--badge-text-base-font-weight);\n    color: var(--brandteal-600);\n    font-size: var(--badge-text-base-font-size);\n    letter-spacing: var(--badge-text-base-letter-spacing);\n    line-height: var(--badge-text-base-line-height);\n    white-space: nowrap;\n    font-style: var(--badge-text-base-font-style);\n}\n\n.d-storz-details .badges-inactive {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 4px;\n    padding: 4px 8px 4px 6px;\n    position: relative;\n    flex: 0 0 auto;\n    background-color: var(--tailwindslate-100);\n    border-radius: 10px;\n}\n\n.d-storz-details .ellipse-inactive {\n    position: relative;\n    width: 6px;\n    height: 6px;\n    background-color: var(--tailwindslate-400);\n    border-radius: 3px;\n}\n\n.d-storz-details .badge-inactive {\n    position: relative;\n    width: fit-content;\n    margin-top: -1px;\n    /*font-family: var(--badge-text-base-font-family);*/\n    font-weight: var(--badge-text-base-font-weight);\n    color: var(--tailwindslate-600);\n    font-size: var(--badge-text-base-font-size);\n    letter-spacing: var(--badge-text-base-letter-spacing);\n    line-height: var(--badge-text-base-line-height);\n    white-space: nowrap;\n    font-style: var(--badge-text-base-font-style);\n}\n\n.d-storz-details .close {\n    position: relative;\n    width: 24px;\n    height: 24px;\n}\n\n.d-storz-details .frame-2 {\n    flex-direction: column;\n    align-items: flex-start;\n    align-self: stretch;\n    width: 100%;\n    flex: 0 0 auto;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .frame-3 {\n    align-items: flex-start;\n    gap: 16px;\n    padding: 16px 0px;\n    align-self: stretch;\n    width: 100%;\n    flex: 0 0 auto;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .frame-4 {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 4px;\n    flex: 1;\n    flex-grow: 1;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .text-wrapper-2 {\n    align-self: stretch;\n    color: var(--hawlegray-700);\n    font-size: var(--heading-xs-font-size);\n    line-height: var(--heading-xs-line-height);\n    position: relative;\n    margin-top: -1px;\n    /*font-family: var(--heading-xs-font-family);*/\n    font-weight: var(--heading-xs-font-weight);\n    letter-spacing: var(--heading-xs-letter-spacing);\n    font-style: var(--heading-xs-font-style);\n}\n\n.d-storz-details .text-wrapper-3 {\n    position: relative;\n    align-self: stretch;\n    /*font-family: var(--body-xs-font-family);*/\n    font-weight: var(--body-xs-font-weight);\n    color: var(--hawido-brandgrey700);\n    font-size: var(--body-xs-font-size);\n    letter-spacing: var(--body-xs-letter-spacing);\n    line-height: var(--body-xs-line-height);\n    font-style: var(--body-xs-font-style);\n}\n\n.d-storz-details .frame-5 {\n    flex-direction: column;\n    width: 222.33px;\n    align-items: flex-start;\n    gap: 4px;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .frame-6 {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 16px;\n    padding: 24px;\n    align-self: stretch;\n    width: 100%;\n    flex: 0 0 auto;\n    background-color: var(--basic-colorswhite);\n    border-radius: 8px;\n    box-shadow: var(--drop-shadow-default-4dp);\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .text-wrapper-4 {\n    position: relative;\n    align-self: stretch;\n    margin-top: -1px;\n    /*font-family: var(--heading-sm-font-family);*/\n    font-weight: var(--heading-sm-font-weight);\n    color: var(--hawlegray-700);\n    font-size: var(--heading-sm-font-size);\n    letter-spacing: var(--heading-sm-letter-spacing);\n    line-height: var(--heading-sm-line-height);\n    font-style: var(--heading-sm-font-style);\n}\n\n.d-storz-details .frame-7 {\n    align-items: center;\n    gap: 32px;\n    align-self: stretch;\n    width: 100%;\n    flex: 0 0 auto;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .input-textfield-wrapper {\n    flex-direction: column;\n    width: 309.5px;\n    height: 55px;\n    align-items: flex-start;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .input-textfield {\n    position: relative;\n    align-self: stretch;\n    width: 100%;\n    height: 74px;\n    margin-bottom: -19px;\n}\n\n.d-storz-details .overlap-group {\n    position: relative;\n    width: 310px;\n    height: 55px;\n}\n\n.d-storz-details .master-border {\n    position: absolute;\n    width: 310px;\n    height: 48px;\n    top: 7px;\n    left: 0;\n    background-color: #ffffff;\n    border-radius: 4px;\n    border: 1px solid;\n    border-color: var(--gray-300);\n}\n\n.d-storz-details .master-text-input {\n    display: inline-flex;\n    align-items: flex-start;\n    gap: 4px;\n    position: absolute;\n    top: 19px;\n    left: 16px;\n}\n\n.d-storz-details .input {\n    position: relative;\n    width: fit-content;\n    margin-top: -1px;\n    /*font-family: var(--body-base-font-family);*/\n    font-weight: var(--body-base-font-weight);\n    color: var(--gray-700);\n    font-size: var(--body-base-font-size);\n    letter-spacing: var(--body-base-letter-spacing);\n    line-height: var(--body-base-line-height);\n    white-space: nowrap;\n    font-style: var(--body-base-font-style);\n}\n\n.d-storz-details .master-label {\n    display: inline-flex;\n    align-items: flex-start;\n    gap: 4px;\n    padding: 0px 4px;\n    position: absolute;\n    top: 0;\n    left: 12px;\n    background-color: #ffffff;\n    border-radius: 4px;\n}\n\n.d-storz-details .label {\n    position: relative;\n    width: fit-content;\n    margin-top: -1px;\n    /*font-family: var(--body-xs-font-family);*/\n    font-weight: var(--body-xs-font-weight);\n    color: var(--gray-700);\n    font-size: var(--body-xs-font-size);\n    letter-spacing: var(--body-xs-letter-spacing);\n    line-height: var(--body-xs-line-height);\n    white-space: nowrap;\n    font-style: var(--body-xs-font-style);\n}\n\n.d-storz-details .arrow-drop-down {\n    position: absolute;\n    width: 24px;\n    height: 24px;\n    top: 19px;\n    left: 274px;\n}\n\n.d-storz-details .frame-8 {\n    align-items: flex-start;\n    gap: 32px;\n    flex: 1;\n    flex-grow: 1;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .frame-9 {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 8px;\n    padding: 16px 0px 0px;\n    align-self: stretch;\n    width: 100%;\n    flex: 0 0 auto;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .frame-10 {\n    align-items: center;\n    gap: 16px;\n    align-self: stretch;\n    width: 100%;\n    flex: 0 0 auto;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .text-wrapper-5 {\n    position: relative;\n    flex: 1;\n    margin-top: -1px;\n    /*font-family: var(--heading-xs-font-family);*/\n    font-weight: var(--heading-xs-font-weight);\n    color: var(--hawlegray-700);\n    font-size: var(--heading-xs-font-size);\n    letter-spacing: var(--heading-xs-letter-spacing);\n    line-height: var(--heading-xs-line-height);\n    font-style: var(--heading-xs-font-style);\n}\n\n.d-storz-details .frame-11 {\n    flex-direction: column;\n    align-items: flex-start;\n    align-self: stretch;\n    width: 100%;\n    flex: 0 0 auto;\n    border-top-width: 1px;\n    border-top-style: solid;\n    border-color: var(--hawido-brandgrey300);\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .frame-12 {\n    align-items: center;\n    gap: 16px;\n    padding: 8px;\n    align-self: stretch;\n    width: 100%;\n    min-height: 48px;\n    flex: 0 0 auto;\n    display: flex;\n    position: relative;\n    border-bottom-width: 1px;\n    border-bottom-style: solid;\n    border-color: var(--hawido-brandgrey100);\n}\n\n\n.d-storz-details .text-wrapper-6 {\n    position: relative;\n    flex: 1;\n    /*font-family: var(--body-xs-font-family);*/\n    font-weight: var(--body-xs-font-weight);\n    color: var(--hawido-brandgrey700);\n    font-size: var(--body-xs-font-size);\n    letter-spacing: var(--body-xs-letter-spacing);\n    line-height: var(--body-xs-line-height);\n    font-style: var(--body-xs-font-style);\n}\n\n.d-storz-details .frame-13 {\n    align-items: center;\n    justify-content: space-between;\n    flex: 1;\n    flex-grow: 1;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .text-buttons {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 4px;\n    padding: 4px;\n    position: relative;\n    flex: 0 0 auto;\n    border-radius: 8px;\n}\n\n.d-storz-details .img {\n    position: relative;\n    width: 16px;\n    height: 16px;\n}\n\n.d-storz-details .frame-14 {\n    align-items: center;\n    gap: 16px;\n    padding: 8px;\n    align-self: stretch;\n    width: 100%;\n    flex: 0 0 auto;\n    border-top-width: 1px;\n    border-top-style: solid;\n    border-bottom-width: 1px;\n    border-bottom-style: solid;\n    border-color: var(--hawido-brandgrey100);\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .primary-buttons {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 4px 16px;\n    position: relative;\n    flex: 1;\n    flex-grow: 1;\n    background-color: var(--hawido-brandblue500);\n    border-radius: 4px;\n    border: 1px solid;\n    border-color: var(--hawido-brandblue600);\n}\n\n.d-storz-details .button-label {\n    position: relative;\n    width: fit-content;\n    margin-top: -1px;\n    /*font-family: var(--button-text-sm-font-family);*/\n    font-weight: var(--button-text-sm-font-weight);\n    color: #ffffff;\n    font-size: var(--button-text-sm-font-size);\n    letter-spacing: var(--button-text-sm-letter-spacing);\n    line-height: var(--button-text-sm-line-height);\n    white-space: nowrap;\n    font-style: var(--button-text-sm-font-style);\n}\n\n.d-storz-details .frame-15 {\n    align-items: flex-start;\n    justify-content: flex-end;\n    gap: 16px;\n    padding: 16px 0px 0px;\n    align-self: stretch;\n    width: 100%;\n    flex: 0 0 auto;\n    display: flex;\n    position: relative;\n}\n\n.d-storz-details .button-label-wrapper {\n    display: inline-flex;\n    height: 36px;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 8px 16px;\n    position: relative;\n    flex: 0 0 auto;\n    border-radius: 4px;\n    all: unset;\n    box-sizing: border-box;\n}\n\n.d-storz-details .button {\n    color: var(--hawido-brandblue500);\n    position: relative;\n    width: fit-content;\n    margin-top: -1px;\n    /*font-family: var(--button-text-inter-sm-font-family);*/\n    font-weight: var(--button-text-inter-sm-font-weight);\n    font-size: var(--button-text-inter-sm-font-size);\n    letter-spacing: var(--button-text-inter-sm-letter-spacing);\n    line-height: var(--button-text-inter-sm-line-height);\n    white-space: nowrap;\n    font-style: var(--button-text-inter-sm-font-style);\n    all: unset;\n    box-sizing: border-box;\n}\n\n.d-storz-details .div-wrapper {\n    display: inline-flex;\n    height: 36px;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 8px 16px;\n    position: relative;\n    flex: 0 0 auto;\n    background-color: var(--hawido-brandblue500);\n    border-radius: 4px;\n    border: 1px solid;\n    border-color: var(--hawido-brandblue600);\n    opacity: 0.2;\n}\n\n.d-storz-details .button-label-2 {\n    color: #ffffff;\n    position: relative;\n    width: fit-content;\n    margin-top: -1px;\n    /*font-family: var(--button-text-inter-sm-font-family);*/\n    font-weight: var(--button-text-inter-sm-font-weight);\n    font-size: var(--button-text-inter-sm-font-size);\n    letter-spacing: var(--button-text-inter-sm-letter-spacing);\n    line-height: var(--button-text-inter-sm-line-height);\n    white-space: nowrap;\n    font-style: var(--button-text-inter-sm-font-style);\n}\n\n.save-button {\n    background-color: var(--tb-accent-A200) !important;\n    color: #ffffff !important;\n    font-weight: 700;\n}\n\n.primary-button {\n    background-color: var(--tb-accent-A200) !important;\n    color: #ffffff !important;\n    font-weight: 700;\n}\n\n.current-dstorz {\n    background-color: var(--hawido-brand-green-100);\n    color: var(--hawido-brand-green-700);\n}\n",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get(\"customDialog\"));\r\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\nlet rxjs = widgetContext.rxjs;\r\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\r\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\nlet entityData = additionalParams && additionalParams.entity || {};\r\nlet isAlreadyAssignedInHydrant = false;\r\nlet selectedEntityValue = {\r\n    id: entityData && entityData.id || null,\r\n    entityType: entityData && entityData.entityType || null,\r\n    exitOutlet: entityData && entityData.exitOutlet || null,\r\n    exitOutletPosition: entityData && entityData.exitOutletPosition || null,\r\n    lpnId: entityData && entityData.lpnId || null,\r\n    signalStrength: entityData && entityData.signalStrength || null,\r\n    hydrantId: entityData && entityData.hydrantId || null,\r\n    name: entityData && entityData.name || null,\r\n    active: entityData && entityData.active || null,\r\n    hydrantBrand: entityData && entityData.hydrantBrand || null,\r\n    hydrantModel: entityData && entityData.hydrantModel || null,\r\n    storzId: entityData && entityData.storzId || null,\r\n    selectedHydrantStorzList: entityData && entityData.selectedHydrantStorzList || [],\r\n    hydrantNumber: entityData && entityData.hydrantNumber || null,\r\n    hydrantId: entityData && entityData.hydrantId || null,\r\n    hydrantsBrand: entityData && entityData.hydrantsBrand || null,\r\n    country: entityData && entityData.country || null,\r\n    zip: entityData && entityData.zip || null,\r\n    city: entityData && entityData.city || null,\r\n    street: entityData && entityData.street || null,\r\n\r\n}\r\nlet initDstorzNumberInSelectedHydrant = 0;\r\nif (!widgetContext.dstorzDetailsModalDataLoading) {\r\n    openAddEntityDialog();\r\n}\r\n\r\nfunction openAddEntityDialog() {\r\n    widgetContext.dstorzDetailsModalDataLoading = true;\r\n    initEntityHydrantAndStorz(selectedEntityValue.id.id).subscribe((response) => {\r\n        selectedEntityValue = {\r\n            ...selectedEntityValue,\r\n            ...response,\r\n        };\r\n        if (selectedEntityValue.hydrantId) {\r\n            isAlreadyAssignedInHydrant = true;\r\n            getHydrantRelations(selectedEntityValue.hydrantId).subscribe((response) => {\r\n                selectedEntityValue.selectedHydrantStorzList = response.sort((storz1, storz2) => storz1.storzNumber.localeCompare(storz2.storzNumber));\r\n                getHydrantDstorzCount(selectedEntityValue.hydrantId).subscribe((hydrantCount) => {\r\n                    initDstorzNumberInSelectedHydrant = hydrantCount;\r\n                    customDialog.customDialog(htmlTemplate, AddEntityDialogController).subscribe();\r\n                });\r\n            });\r\n        } else {\r\n            isAlreadyAssignedInHydrant = false;\r\n            customDialog.customDialog(htmlTemplate, AddEntityDialogController).subscribe();\r\n        }\r\n    });\r\n}\r\n\r\nfunction AddEntityDialogController(instance) {\r\n    widgetContext.dstorzDetailsModalDataLoading = false;\r\n    let vm = instance;\r\n    vm.dataSaving = false;\r\n    vm.callList = [];\r\n    vm.isAlreadyAssignedInHydrant = isAlreadyAssignedInHydrant;\r\n    vm.entityValue = { ...selectedEntityValue, selectedHydrantStorzList: [...selectedEntityValue.selectedHydrantStorzList] };\r\n    vm.initStorzId = selectedEntityValue.storzId;\r\n    vm.initHydrantId = selectedEntityValue.hydrantId;\r\n    vm.initSelectedHydrantStorzList = ([...selectedEntityValue.selectedHydrantStorzList] || []).map(val => ({ ...val }));\r\n    vm.entityForm = vm.fb.group({\r\n        hydrantId: [vm.entityValue.hydrantId || null, []],\r\n    });\r\n    onHydrantIdChange();\r\n\r\n    function onHydrantIdChange() {\r\n        // .pipe(rxjs.startWith(vm.entityValue.hydrantId))\r\n        vm.entityForm.get(\"hydrantId\").valueChanges.subscribe((value) => {\r\n            initHydrant(value);\r\n        });\r\n    }\r\n    function initHydrant(hydrantId) {\r\n        if (hydrantId && hydrantId !== vm.entityValue.hydrantId) {\r\n            getAssetServerAttributes(hydrantId).subscribe((res) => {\r\n                if (!!res) {\r\n                    vm.entityValue.hydrantModel = res.modelNumber;\r\n                    vm.entityValue.hydrantBrand = res.hydrantsBrand;\r\n                    vm.entityValue.hydrantId = hydrantId;\r\n                    vm.entityValue.hydrantNumber = res.hydrantNumber;\r\n                    vm.entityValue.hydrantId = res.hydrantId;\r\n                    vm.entityValue.hydrantsBrand = res.hydrantsBrand;\r\n                    vm.entityValue.country = res.country;\r\n                    vm.entityValue.zip = res.zip;\r\n                    vm.entityValue.city = res.city;\r\n                    vm.entityValue.street = res.street;\r\n                    vm.entityValue.storzCount = res.storzCount;\r\n                    vm.entityValue.dstorzCount = res.dstorzCount;\r\n                    getHydrantRelations(vm.entityValue.hydrantId).subscribe((response) => {\r\n                        vm.entityValue.selectedHydrantStorzList = response.sort((storz1, storz2) => storz1.storzNumber.localeCompare(storz2.storzNumber));\r\n                        const assignedStorz = vm.entityValue.selectedHydrantStorzList.find((storz) => storz.assignedDStorz === vm.entityValue.name);\r\n                        if (assignedStorz) {\r\n                            vm.entityValue.storzId = assignedStorz.id;\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        } else if (!hydrantId) {\r\n            vm.entityValue.hydrantModel = null;\r\n            vm.entityValue.hydrantBrand = null;\r\n            vm.entityValue.hydrantId = null;\r\n            vm.entityValue.selectedHydrantStorzList = [];\r\n            vm.entityValue.storzId = null;\r\n        }\r\n    }\r\n    function saveTimeSeries(timeSeries, entityType, entityId) {\r\n        var timeSeriesUrl =\r\n            `/api/plugins/telemetry/${entityType}/${entityId}/timeseries/ANY`;\r\n        return http.post(timeSeriesUrl, timeSeries);\r\n    }\r\n    vm.save = function () {\r\n        vm.callList = [];\r\n        const lastCallList = [];\r\n        vm.dataSaving = true;\r\n        const changedStorzList = vm.entityValue.selectedHydrantStorzList.filter((storz) => storz.updated);\r\n        let relationCall = null;\r\n        if (vm.isAlreadyAssignedInHydrant && vm.entityValue.hydrantId !== vm.initHydrantId) {\r\n            if (initDstorzNumberInSelectedHydrant === 0) {\r\n                const timeSeriesPrev = {\r\n                    isNotAssigned: true\r\n                };\r\n                vm.callList.push(saveTimeSeries(timeSeriesPrev, 'ASSET', vm.initHydrantId));\r\n            }\r\n\r\n            let newDStorzCountForUnassigned = initDstorzNumberInSelectedHydrant && initDstorzNumberInSelectedHydrant > 0 ? initDstorzNumberInSelectedHydrant - 1 : 0;\r\n            vm.callList.push(saveEntityAttributes(vm.initHydrantId, [{\r\n                key: 'dstorzCount',\r\n                value: newDStorzCountForUnassigned\r\n            }]));\r\n            changedStorzList.push({\r\n                ...vm.initSelectedHydrantStorzList.find((storz) => storz.assignedDStorz === selectedEntityValue.name),\r\n                assignedDStorz: null,\r\n                assignedDStorzSerialNumber: null\r\n            });\r\n        }\r\n        const timeSeries = {\r\n            isNotAssigned: false\r\n        };\r\n        vm.callList.push(saveTimeSeries(timeSeries, 'ASSET', vm.entityValue.hydrantId));\r\n        changedStorzList.forEach((storz) => {\r\n            vm.callList.push(\r\n                saveEntityAttributes(storz.id, [{\r\n                    key: 'assignedDStorz',\r\n                    value: storz.assignedDStorz\r\n                },\r\n                {\r\n                    key: 'assignedDStorzSerialNumber',\r\n                    value: storz.assignedDStorzSerialNumber\r\n                }\r\n                ]));\r\n            vm.callList.push(\r\n                deleteRelations(storz.id, vm)\r\n            );\r\n            if (storz.assignedDStorz === vm.entityValue.name) {\r\n                lastCallList.push(saveRelation(storz.id, vm.entityValue.id.id));\r\n                lastCallList.push(saveEntityAttributes(vm.entityValue.id.id, [{\r\n                    key: 'hydrantNumber',\r\n                    value: vm.entityValue.hydrantNumber\r\n                },\r\n                {\r\n                    key: 'hydrantId',\r\n                    value: vm.entityValue.hydrantId\r\n                },\r\n                {\r\n                    key: 'exitNode',\r\n                    value: storz.exitDiameter + (storz.exitDiameterUnit || 'mm') + ', ' + storz.exitName\r\n                },\r\n                {\r\n                    key: 'hydrantsBrand',\r\n                    value: vm.entityValue.hydrantsBrand\r\n                },\r\n                {\r\n                    key: 'country',\r\n                    value: vm.entityValue.country\r\n                },\r\n                {\r\n                    key: 'zip',\r\n                    value: vm.entityValue.zip\r\n                },\r\n                {\r\n                    key: 'city',\r\n                    value: vm.entityValue.city\r\n                },\r\n                {\r\n                    key: 'street',\r\n                    value: vm.entityValue.street\r\n                }\r\n                ], \"DEVICE\"\r\n                ));\r\n            }\r\n        })\r\n        rxjs.forkJoin(vm.callList).subscribe((response) => {\r\n            rxjs.forkJoin(lastCallList).subscribe((response) => {\r\n                // saving telemetry\r\n                getHydrantDstorzCount(vm.entityValue.hydrantId).subscribe((dStrozCount) => {\r\n                    if (dStrozCount > 1) {\r\n                        // saveActiveTelemetry('ASSET', vm.entityValue.hydrantId, selectedEntityValue.active).subscribe();\r\n                        saveEntityAttributes(vm.entityValue.hydrantId, [{\r\n                            key: 'dstorzCount',\r\n                            value: dStrozCount\r\n                        }]).subscribe();\r\n                    } else if (dStrozCount === 1) {\r\n                        // saveActiveTelemetry('ASSET', vm.entityValue.hydrantId, selectedEntityValue.active, true).subscribe();\r\n                        saveEntityAttributes(vm.entityValue.hydrantId, [{\r\n                            key: 'dstorzCount',\r\n                            value: dStrozCount\r\n                        }]).subscribe();\r\n                    }\r\n                });\r\n\r\n                // assign dstorz;\r\n                const sendToRuleEngineKey = \"resetAlarm\";\r\n                const sendToRuleEngineURL = `/api/rule-engine/sendToRuleEngine?entityId=${vm.entityValue.id.id}&entityType=${vm.entityValue.id.entityType}&key=${sendToRuleEngineKey}`;\r\n                const sendToRuleEngineBody = {\r\n                    \"msg\": null,\r\n                    \"metadata\": {\r\n                        \"deviceName\": vm.entityValue.name,\r\n                        \"deviceType\": \"d-storz\",\r\n                        \"operationType\": \"ASSIGN\"\r\n                    }\r\n                }\r\n                http.post(sendToRuleEngineURL, sendToRuleEngineBody).pipe().subscribe(() => { })\r\n\r\n                widgetContext.updateAliases();\r\n                vm.dataSaving = false;\r\n                vm.dialogRef.close(response);\r\n                vm.callList = [];\r\n            });\r\n        });\r\n    }\r\n    vm.replaceDstorz = function (storz) {\r\n        if (!!vm.entityValue.storzId && storz.id !== vm.entityValue.storzId) {\r\n            return;\r\n        }\r\n        vm.removeDstorz(storz);\r\n        vm.assignDstorz(storz);\r\n    };\r\n    vm.removeDstorz = function (storz) {\r\n        if (!!vm.entityValue.storzId && storz.id !== vm.entityValue.storzId) {\r\n            return;\r\n        }\r\n        if (storz.assignedDStorz === vm.entityValue.name) {\r\n            vm.entityValue.storzId = null;\r\n        }\r\n        storz.assignedDStorz = null;\r\n        storz.assignedDStorzSerialNumber = null;\r\n        storz.updated = true;\r\n    };\r\n    vm.assignDstorz = function (storz) {\r\n        if (!!vm.entityValue.storzId && storz.id !== vm.entityValue.storzId) {\r\n            return;\r\n        }\r\n        storz.assignedDStorz = vm.entityValue.name;\r\n        storz.assignedDStorzSerialNumber = selectedEntityValue.lpnId;\r\n        vm.entityValue.storzId = storz.id;\r\n        storz.updated = true;\r\n    };\r\n    vm.cancel = function () {\r\n        widgetContext.dstorzDetailsModalDataLoading = false;\r\n        vm.dialogRef.close(null);\r\n    };\r\n}\r\nfunction initEntityHydrantAndStorz(entityId) {\r\n    const payload = {\r\n        \"entityFields\": [\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"name\"\r\n            },\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"type\"\r\n            }\r\n        ],\r\n        \"latestValues\": [\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"hydrantsBrand\"\r\n            },\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"modelNumber\"\r\n            },\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"exitDiameter\"\r\n            },\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"exitDiameterUnit\"\r\n            },\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"exitName\"\r\n            },\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"storzNumber\"\r\n            }\r\n        ],\r\n        \"entityFilter\": {\r\n            \"type\": \"relationsQuery\",\r\n            \"rootEntity\": {\r\n                \"entityType\": \"DEVICE\",\r\n                \"id\": null\r\n            },\r\n            \"direction\": \"TO\",\r\n            \"maxLevel\": 2,\r\n            \"fetchLastLevelOnly\": false,\r\n            \"filters\": [\r\n                {\r\n                    \"relationType\": \"Contains\",\r\n                    \"entityTypes\": [\r\n                        \"ASSET\"\r\n                    ]\r\n                }\r\n            ]\r\n        },\r\n        \"pageLink\": {\r\n            \"dynamic\": false,\r\n            \"pageSize\": 10,\r\n            \"page\": 0,\r\n            \"textSearch\": null,\r\n            \"sortOrder\": {\r\n                \"key\": {\r\n                    \"type\": \"ENTITY_FIELD\",\r\n                    \"key\": \"createdTime\"\r\n                },\r\n                \"direction\": \"DESC\"\r\n            }\r\n        }\r\n    }\r\n    payload.entityFilter.rootEntity.id = entityId;\r\n    if (entityId) {\r\n\r\n        return http.post(\"/api/entitiesQuery/find\", payload).pipe(rxjs.map((response) => {\r\n            const result = {};\r\n            if (response.totalElements === 0) {\r\n                return result;\r\n            }\r\n            response.data.forEach((entity) => {\r\n                if (entity.entityId.entityType === \"ASSET\") {\r\n                    const res = {};\r\n                    Object.keys(entity.latest.ATTRIBUTE).forEach((key) => {\r\n                        res[key] = entity.latest.ATTRIBUTE[key].value;\r\n                    });\r\n                    Object.keys(entity.latest.ENTITY_FIELD).forEach((key) => {\r\n                        res[key] = entity.latest.ENTITY_FIELD[key].value;\r\n                    });\r\n                    res.id = entity.entityId.id;\r\n                    if (res.type === \"hydrant\") {\r\n                        result.hydrantModel = res.modelNumber;\r\n                        result.hydrantBrand = res.hydrantsBrand;\r\n                        result.hydrantId = res.id;\r\n                    } else if (res.type === \"storz\") {\r\n                        result.exitDiameter = res.exitDiameter;\r\n                        result.exitDiameterUnit = res.exitDiameterUnit;\r\n                        result.exitName = res.name;\r\n                        result.storzNumber = res.storzNumber;\r\n                        result.storzId = res.id;\r\n                    }\r\n                }\r\n            });\r\n            return result;\r\n        }));\r\n    }\r\n}\r\nfunction getHydrantRelations(entityId) {\r\n    const payload = {\r\n        \"entityFields\": [\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"name\"\r\n            },\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"type\"\r\n            }\r\n        ],\r\n        \"latestValues\": [\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"assignedDStorz\"\r\n            },\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"assignedDStorzSerialNumber\"\r\n            },\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"exitDiameter\"\r\n            },\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"exitDiameterUnit\"\r\n            },\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"exitName\"\r\n            },\r\n            {\r\n                \"type\": \"ATTRIBUTE\",\r\n                \"key\": \"storzNumber\"\r\n            }\r\n        ],\r\n        \"entityFilter\": {\r\n            \"type\": \"relationsQuery\",\r\n            \"rootEntity\": {\r\n                \"entityType\": \"ASSET\",\r\n                \"id\": null\r\n            },\r\n            \"direction\": \"FROM\",\r\n            \"maxLevel\": 1,\r\n            \"fetchLastLevelOnly\": false,\r\n            \"filters\": [\r\n                {\r\n                    \"relationType\": \"Contains\",\r\n                    \"entityTypes\": [\r\n                        \"ASSET\"\r\n                    ]\r\n                }\r\n            ]\r\n        },\r\n        \"pageLink\": {\r\n            \"dynamic\": false,\r\n            \"pageSize\": 10,\r\n            \"page\": 0,\r\n            \"textSearch\": null,\r\n            \"sortOrder\": {\r\n                \"key\": {\r\n                    \"type\": \"ENTITY_FIELD\",\r\n                    \"key\": \"createdTime\"\r\n                },\r\n                \"direction\": \"DESC\"\r\n            }\r\n        }\r\n    };\r\n    payload.entityFilter.rootEntity.id = entityId;\r\n    if (entityId) {\r\n\r\n        return http.post(\"/api/entitiesQuery/find\", payload).pipe(rxjs.map((response) => {\r\n            const result = [];\r\n            if (response.totalElements === 0) {\r\n                return result;\r\n            }\r\n            response.data.forEach((entity) => {\r\n                if (entity.entityId.entityType === \"ASSET\") {\r\n                    const res = {};\r\n                    Object.keys(entity.latest.ATTRIBUTE).forEach((key) => {\r\n                        res[key] = entity.latest.ATTRIBUTE[key].value;\r\n                    });\r\n                    Object.keys(entity.latest.ENTITY_FIELD).forEach((key) => {\r\n                        res[key] = entity.latest.ENTITY_FIELD[key].value;\r\n                    });\r\n                    res.id = entity.entityId.id;\r\n                    if (res.type === \"storz\") {\r\n                        result.push(res);\r\n                    }\r\n                }\r\n            });\r\n            return result;\r\n        }));\r\n    }\r\n\r\n}\r\nfunction getAssetServerAttributes(entityId) {\r\n    return attributeService.getEntityAttributes({ entityType: \"ASSET\", id: entityId }, \"SERVER_SCOPE\").pipe(rxjs.map((response) => {\r\n        const result = {};\r\n        if (response.length === 0) {\r\n            return result;\r\n        }\r\n        response.forEach((entity) => {\r\n            result[entity.key] = entity.value;\r\n        });\r\n        return result;\r\n    }));\r\n}\r\nfunction saveEntityAttributes(entityId, attributes, entityType = \"ASSET\") {\r\n    return attributeService.saveEntityAttributes({ entityType, id: entityId }, \"SERVER_SCOPE\", attributes);\r\n}\r\nfunction deleteRelations(entityId, vm) {\r\n    return findRelationByFrom(entityId).pipe(rxjs.mergeMap((response) => {\r\n        const relationList = [];\r\n        response.forEach((relation) => {\r\n\r\n            // unassign dstorz\r\n            if (vm.initHydrantId !== vm.entityValue.hydrantId || relation.toName !== entityName) {\r\n                const hydrantId = relation.toName === entityName ? vm.initHydrantId : vm.entityValue.hydrantId;\r\n                const sendToRuleEngineURL = `/api/rule-engine/sendToRuleEngine?entityId=${hydrantId}&entityType=ASSET&key=resetAlarm`;\r\n                const sendToRuleEngineBody = {\r\n                    \"msg\": null,\r\n                    \"metadata\": {\r\n                        \"deviceName\": relation.toName,\r\n                        \"deviceType\": \"d-storz\",\r\n                        \"operationType\": \"UNASSIGN\"\r\n                    }\r\n                }\r\n                relationList.push(http.post(sendToRuleEngineURL, sendToRuleEngineBody));\r\n            }\r\n\r\n            relationList.push(entityRelationService.deleteRelation(relation.from, 'Contains', relation.to));\r\n            relationList.push(saveEntityAttributes(relation.to.id, [{\r\n                key: 'hydrantNumber',\r\n                value: null\r\n            },\r\n            {\r\n                key: 'hydrantId',\r\n                value: null\r\n            },\r\n            {\r\n                key: 'exitNode',\r\n                value: null\r\n            },\r\n            {\r\n                key: 'hydrantsBrand',\r\n                value: null\r\n            },\r\n            {\r\n                key: 'country',\r\n                value: null\r\n            },\r\n            {\r\n                key: 'zip',\r\n                value: null\r\n            },\r\n            {\r\n                key: 'city',\r\n                value: null\r\n            },\r\n            {\r\n                key: 'street',\r\n                value: null\r\n            }\r\n            ], \"DEVICE\"\r\n            ));\r\n        });\r\n        if (relationList.length === 0) {\r\n            return rxjs.of({});\r\n        }\r\n        return rxjs.forkJoin(relationList);\r\n    }));\r\n\r\n}\r\nfunction findRelationByFrom(entityId) {\r\n    // return entityRelationService.findByFrom({ entityType: \"ASSET\", id: entityId });\r\n    const findRelationURL = `/api/relations/info?fromId=${entityId}&fromType=ASSET`\r\n    return http.get(findRelationURL);\r\n}\r\nfunction saveRelation(storzId, dStorzId) {\r\n    return entityRelationService.saveRelation({\r\n        from: {\r\n            entityType: \"ASSET\",\r\n            id: storzId\r\n        },\r\n        to: {\r\n            entityType: \"DEVICE\",\r\n            id: dStorzId\r\n        },\r\n        type: \"Contains\",\r\n        typeGroup: \"COMMON\"\r\n    });\r\n}\r\n\r\nfunction getHydrantDstorzCount(entityId) {\r\n    const payload = {\r\n        \"entityFields\": [\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"name\"\r\n            }\r\n        ],\r\n        \"latestValues\": [\r\n\r\n        ],\r\n        \"entityFilter\": {\r\n            \"type\": \"relationsQuery\",\r\n            \"rootEntity\": {\r\n                \"entityType\": \"ASSET\",\r\n                \"id\": null\r\n            },\r\n            \"direction\": \"FROM\",\r\n            \"maxLevel\": 2,\r\n            \"fetchLastLevelOnly\": false,\r\n            \"filters\": [\r\n                {\r\n                    \"relationType\": \"Contains\",\r\n                    \"entityTypes\": [\r\n                        \"DEVICE\"\r\n                    ]\r\n                }\r\n            ]\r\n        },\r\n        \"pageLink\": {\r\n            \"dynamic\": false,\r\n            \"pageSize\": 10,\r\n            \"page\": 0,\r\n            \"textSearch\": null,\r\n            \"sortOrder\": {\r\n                \"key\": {\r\n                    \"type\": \"ENTITY_FIELD\",\r\n                    \"key\": \"createdTime\"\r\n                },\r\n                \"direction\": \"DESC\"\r\n            }\r\n        }\r\n    };\r\n    payload.entityFilter.rootEntity.id = entityId;\r\n    if (entityId) {\r\n        let count = 0;\r\n        return http.post(\"/api/entitiesQuery/find\", payload).pipe(rxjs.map((response) => {\r\n            if (response.totalElements === 0) {\r\n                return count;\r\n            }\r\n            response.data.forEach((entity) => {\r\n                if (entity.entityId.entityType === \"DEVICE\") {\r\n                    count += 1;\r\n                }\r\n            });\r\n            return count;\r\n        }));\r\n    }\r\n}\r\n\r\nfunction saveActiveTelemetry(entityType, entityId, isActive, changeInactive) {\r\n    const payload = {\r\n        isNoSignal: isActive ? false : true\r\n    }\r\n    if (changeInactive) payload.isInactive = true;\r\n    var timeSeriesUrl =\r\n        `/api/plugins/telemetry/${entityType}/${entityId}/timeseries/ANY`;\r\n    return http.post(timeSeriesUrl, payload);\r\n}",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "52a8d1f4-6044-fd47-ccea-7c76c42fc7fb"
              }
            ],
            "headerButton": [
              {
                "name": "Add DStroz",
                "icon": "add",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "openDashboardState",
                "targetDashboardStateId": "add_dstorz",
                "setEntityId": true,
                "stateEntityParamName": null,
                "openRightLayout": false,
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "9552daa3-eb9f-bc8a-76cf-49951668135d"
              },
              {
                "name": "Choose Rule Chain",
                "icon": "settings_ethernet",
                "useShowWidgetActionFunction": true,
                "showWidgetActionFunction": "const $injector = widgetContext.$scope.$injector;\nconst permissions = widgetContext.authService\n    .allowedPermissions;\nconst authority = widgetContext.currentUser.authority;\n\nconst genericPermissions = permissions\n    .userPermissions.genericPermissions;\n\n\nif (genericPermissions && genericPermissions\n    .hasOwnProperty(\"ALL\") &&\n    genericPermissions[\"ALL\"] &&\n    genericPermissions[\"ALL\"].length &&\n    genericPermissions[\"ALL\"].includes(\"ALL\") &&\n    authority === \"TENANT_ADMIN\"\n) {\n    return true;\n}\nreturn false;",
                "type": "customPretty",
                "customHtml": "<form #editEntityForm=\"ngForm\"\r\n    [formGroup]=\"selectRuleChainGroup\" (ngSubmit)=\"save()\"\r\n    class=\"edit-entity-form\">\r\n    <div style=\"min-width:500px;\">\r\n        <mat-toolbar fxLayout=\"row\" color=\"primary\">\r\n            <h2>{{'hawle-dashboard.rulechain.choose-rule-chain' | translate}}</h2>\r\n            <span fxFlex></span>\r\n            <button mat-icon-button (click)=\"cancel()\"\r\n                type=\"button\">\r\n                <mat-icon class=\"material-icons\">close\r\n                </mat-icon>\r\n            </button>\r\n        </mat-toolbar>\r\n        <mat-progress-bar color=\"warn\" mode=\"indeterminate\"\r\n            *ngIf=\"isLoading$ | async\">\r\n        </mat-progress-bar>\r\n        <div style=\"height: 4px;\"\r\n            *ngIf=\"!(isLoading$ | async)\"></div>\r\n        <div mat-dialog-content fxLayout=\"column\">\r\n            <mat-form-field fxFlex class=\"mat-block\" appearance=\"fill\">\r\n                <mat-label>{{'hawle-dashboard.rulechain.select-rule-chain' | translate}}</mat-label>\r\n                <mat-select\r\n                    formControlName=\"swisscomRuleChainId\">\r\n                    <mat-option\r\n                        *ngFor=\"let ruleChain of ruleChainList\"\r\n                        [value]=\"ruleChain.id.id\">\r\n                        {{ ruleChain.name }}\r\n                    </mat-option>\r\n                </mat-select>\r\n            </mat-form-field>\r\n        </div>\r\n        <div mat-dialog-actions fxLayout=\"row\"\r\n            fxLayoutAlign=\"end center\">\r\n            <button mat-button color=\"primary\" type=\"button\"\r\n                [disabled]=\"(isLoading$ | async)\"\r\n                (click)=\"cancel()\" cdkFocusInitial>\r\n                {{'hawle-dashboard.rulechain.cancel' | translate}}\r\n            </button>\r\n            <button mat-button mat-raised-button\r\n                color=\"primary\" type=\"submit\"\r\n                [disabled]=\"(isLoading$ | async) || editEntityForm.invalid || !editEntityForm.dirty\">\r\n                {{'hawle-dashboard.rulechain.save' | translate}}\r\n            </button>\r\n        </div>\r\n    </div>\r\n</form>",
                "customCss": "/* Timeline Container */\r\n.timeline {\r\n    background: #fff;\r\n    margin: 0 auto;\r\n    padding: 20px 0;\r\n}\r\n\r\n/* Information about the timeline */\r\n.info {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n/* Title of the card */\r\n.device-title {\r\n    color: orangered;\r\n    position: relative;\r\n}\r\n\r\n#selectRuleChainInfo h3 {\r\n    margin: 0;\r\n}\r\n\r\n.device-title::before {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 10px;\r\n    height: 10px;\r\n    border-radius: 999px;\r\n    left: -37px;\r\n    top: 35px;\r\n    background: #FFFFFF;\r\n    border: 1px solid #00AFAA;\r\n}\r\n\r\n#selectRuleChainHeader h2 {\r\n    font-style: normal;\r\n    font-weight: 800;\r\n    font-size: 16px;\r\n    line-height: 120%;\r\n    color: #000000;\r\n}\r\n\r\n#selectRuleChainHeader h4 {\r\n    font-style: normal;\r\n    font-weight: 600;\r\n    font-size: 12px;\r\n    color: #00AFAA;\r\n}\r\n\r\n#selectRuleChainToolbar {\r\n    position: relative;\r\n}\r\n\r\n\r\n#selectRuleChainToolbar button {\r\n    position: absolute;\r\n    right: 15px;\r\n}\r\n\r\n.card {\r\n   width: 100%;\r\n   height: 100%;\r\n}\r\n\r\n.card .row::after {\r\n  content: \"\";\r\n  clear: both;\r\n  display: table;\r\n}\r\n\r\n.card .row .column {\r\n    float: left;\r\n  padding: 15px;\r\n  min-width: 15rem;\r\n  max-width: 15rem;\r\n}\r\n\r\n.card .row .title {\r\n    font-weight: 600;\r\n}\r\n\r\n.equipment-no-data {\r\n    justify-content: center;\r\n    display: flex;\r\n}\r\n",
                "customFunction": "const $injector = widgetContext.$scope.$injector;\r\nconst rxjs = widgetContext.rxjs;\r\nconst customDialog = $injector.get(widgetContext.servicesMap\r\n    .get('customDialog'));\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    'http'));\r\n\r\nconst ATTRIBUTE_KEY = \"swisscomRuleChainId\";\r\n\r\ncustomDialog.customDialog(htmlTemplate,\r\n    selectRuleChainDialogController).subscribe();\r\n\r\nfunction selectRuleChainDialogController(instance) {\r\n    let vm = instance;\r\n    vm.selectRuleChainGroup = vm.fb.group({\r\n        [ATTRIBUTE_KEY]: ['', [vm.validators\r\n            .required\r\n        ]],\r\n    });\r\n\r\n    getEntitiesByQuery().pipe(rxjs.take(1)).subscribe((\r\n        entityResponse) => {\r\n        if (entityResponse && entityResponse\r\n            .length) {\r\n            const selectedRuleChainValue =\r\n                entityResponse[0].value;\r\n            vm.selectRuleChainGroup.patchValue({\r\n                [ATTRIBUTE_KEY]: selectedRuleChainValue\r\n            })\r\n        }\r\n    });\r\n\r\n    vm.ruleChainList = [];\r\n    http.get(\r\n        `/api/ruleChains?pageSize=100&page=0&sortProperty=createdTime&sortOrder=DESC&type=CORE`\r\n    ).pipe(rxjs.take(1)).subscribe((\r\n        ruleChainResponse) => {\r\n        if (ruleChainResponse && ruleChainResponse\r\n            .data && ruleChainResponse.data.length\r\n        ) {\r\n            vm.ruleChainList = ruleChainResponse\r\n                .data;\r\n        }\r\n    })\r\n\r\n    vm.cancel = function() {\r\n        vm.dialogRef.close(null);\r\n    };\r\n\r\n    vm.save = function() {\r\n        const payload = {\r\n            [ATTRIBUTE_KEY]: vm\r\n                .selectRuleChainGroup.get(\r\n                    [ATTRIBUTE_KEY]).value\r\n        }\r\n        saveTenantAttribute(payload).pipe(rxjs.take(1))\r\n            .subscribe((res) => {\r\n                vm.dialogRef.close(null);\r\n            })\r\n    };\r\n}\r\n\r\nfunction saveTenantAttribute(payload) {\r\n    const tenantId = widgetContext.currentUser.tenantId\r\n    return http.post(\r\n        `/api/plugins/telemetry/TENANT/${tenantId}/SERVER_SCOPE`,\r\n        payload);\r\n}\r\n\r\nfunction getEntitiesByQuery() {\r\n    const tenantId = widgetContext.currentUser.tenantId\r\n    return http.get(\r\n        `/api/plugins/telemetry/TENANT/${tenantId}/values/attributes?keys=${ATTRIBUTE_KEY}`\r\n    );\r\n}",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "bd2e29b8-7f1e-4f30-f4a9-3d161d3904b5"
              }
            ]
          },
          "useCustomQueryService": true,
          "customQuery": "{\n  \"translateColumnName\": true\n}",
          "useColumnMapping": true,
          "columnMapping": " [\n    {\n      \"type\": \"ATTRIBUTE\",\n      \"key\": \"serialNumber\",\n      \"columnName\": \"hawle-dashboard.d-storz-number\",\n      \"defaultColumnName\": \"D-Storz Number\"\n    },\n    {\n      \"type\": \"ENTITY_FIELD\",\n      \"key\": \"name\",\n      \"columnName\": \"hawle-dashboard.lpn-id\",\n      \"defaultColumnName\": \"LPN ID\"\n    },\n    {\n      \"type\": \"ATTRIBUTE\",\n      \"key\": \"hydrantNumber\",\n      \"columnName\": \"hawle-dashboard.hydrant.hydrant-number\",\n      \"defaultColumnName\": \"Hydrant Number\"\n    },\n    {\n      \"type\": \"ATTRIBUTE\",\n      \"key\": \"exitNode\",\n      \"columnName\": \"hawle-dashboard.exit\",\n      \"defaultColumnName\": \"Exit\"\n    },\n    {\n      \"type\": \"TIME_SERIES\",\n      \"key\": \"lastTelemetryValue\",\n      \"columnName\": \"hawle-dashboard.last-message\",\n      \"defaultColumnName\": \"Last message\"\n    },\n    {\n      \"type\": \"TIME_SERIES\",\n      \"key\": \"lastTelemetryTs\",\n      \"columnName\": \"hawle-dashboard.date\",\n      \"defaultColumnName\": \"Date\",\n      \"humanReadableTs\": true,\n      \"tsPattern\": \"dd MMMM YYYY, HH:mm z\"\n    },\n    {\n      \"type\": \"ATTRIBUTE\",\n      \"key\": \"active\",\n      \"columnName\": \"hawle-dashboard.active\",\n      \"defaultColumnName\": \"Active\"\n    },\n    {\n      \"type\": \"TIME_SERIES\",\n      \"key\": \"isInactive\",\n      \"columnName\": \"hawle-dashboard.magnetically-active\",\n      \"defaultColumnName\": \"Magnetically Active\"\n    }\n  ]"
        },
        "row": 0,
        "col": 0,
        "id": "e20ac5ab-3780-200b-444a-f8f03032e6fd"
      },
      "ed5f1dcc-d356-fdad-8b31-662b65da78cc": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "5d6aae4b-1d67-f7b4-f915-d2e30c8a3eb5",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.4291951067313693
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": false,
            "isExternalBtn": false,
            "formName": "Create New Temporary Deactivations",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Name",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Assign Zone",
                    "fieldName": "zoneList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=zone&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Select Hydrant",
                    "fieldName": "hydrantList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=hydrant&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Event Type *",
                    "fieldName": "eventList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Open\", value: \"open\"},\n    {name: \"Low Battery\", value: \"lowBattery\"},\n    {name: \"No Signal\", value: \"noSignal\"},\n    {name: \"Close\", value: \"close\"},\n])",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Deactivation Reason",
                    "fieldName": "description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 6",
                    "fieldName": "step0field6",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "fieldHtml": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone has to be assigned\n</div>\n",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone has to be assigned\n</div>\n"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              },
              {
                "stepName": "Date",
                "formFields": [
                  {
                    "label": "Temporary Pause Period From",
                    "fieldName": "pausePeriodFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "fieldHtml": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period From</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period From</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Temporary Pause Period To",
                    "fieldName": "pausePeriodTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "fieldHtml": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period To</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period To</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              }
            ],
            "genericFormFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get(\"customDialog\"));\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\nlet rxjs = widgetContext.rxjs;\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\n\nlet currentEntityValue = formData.value;\nif(!currentEntityValue.eventList || (currentEntityValue.eventList && !currentEntityValue.eventList.length) ) {\n    widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.assign-event-type-mandatory'), 2000,\n        'top', 'left');\n    return;\n}\n\nif(!currentEntityValue.hydrantList && !currentEntityValue.zoneList) {\n    widgetContext.showToast('error',\n    translationService.instant('hawle-dashboard.assign-zone-hydrant-mandatory'), 2000,\n    'top', 'left', widgetContext.toastTargetId);\n    return;\n}\n\nif(!currentEntityValue.eventList || \n    (currentEntityValue.eventList && !currentEntityValue.eventList.length)) {\n    widgetContext.showToast('error',\n    translationService.instant('hawle-dashboard.assign-event-mandatory'), 2000,\n    'top', 'left', widgetContext.toastTargetId);\n    return;\n}\n\n\nconst fromDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateFrom, currentEntityValue.timeFrom);\nconst toDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateTo, currentEntityValue.timeTo);\nconst nowDate = new Date().getTime();\nif((toDate < fromDate) || (toDate < nowDate)) {\n    widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.invalid-date-selection'), 2000,\n        'top', 'left');\n    return;\n}\n\n\nfunction saveEntity(paylload, entityType) {\n    let url = `/api/${entityType}`;\n    return http.post(url, paylload);\n}\n\n\nfunction saveEntityRelations(relationsFromToList=[], RelationType) {\n    const relationPayload = []\n    relationsFromToList.forEach((relation) => {\n        relationPayload.push({\n            \"type\": RelationType,\n            \"additionalInfo\": null,\n            \"typeGroup\": \"COMMON\",\n            \"from\": relation.from,\n            \"to\": relation.to\n        })\n    });\n    let url = `/api/relation/bulk`;\n    return http.post(url, relationPayload);\n}\n\nfunction saveServerAttributes(serverAttributes, entityType, EntityId) {\n    let url = `/api/plugins/telemetry/${entityType}/${EntityId}/SERVER_SCOPE`;\n    return http.post(url, serverAttributes);\n}\n\nfunction getMsTimeAfterAddTimeInDate(date, time) {\n    let newDate = new Date(date);\n    let newTime = new Date(time);\n    let hours = newTime.getHours();\n    let minutes = newTime.getMinutes();\n    newDate.setHours(hours);\n    newDate.setMinutes(minutes);\n    return newDate.getTime();\n}\n\nfunction main() {\n    let paylload = {\n        \"name\": currentEntityValue.name,\n        \"type\": \"temporaryDeactivation\",\n        \"additionalInfo\": {\n            \"description\": currentEntityValue.description\n        }\n    }\n\n    saveEntity(paylload, \"asset\").subscribe((entity) => { \n        const dateFrom = getMsTimeAfterAddTimeInDate(currentEntityValue.dateFrom, currentEntityValue.timeFrom);\n        const dateTo = getMsTimeAfterAddTimeInDate(currentEntityValue.dateTo, currentEntityValue.timeTo);\n        const serverAttributesPayload = {\n            \"description\": currentEntityValue.description,\n            \"fromDate\": dateFrom,\n            \"toDate\": dateTo,\n            temporaryDeactivation: {\n                \"deactivationState\": {\n                  \"fromDate\": dateFrom,\n                  \"toDate\": dateTo,\n                },\n                \"eventType\": {\n                  \"alarmOpen\": currentEntityValue.eventList.includes(\"open\"),\n                  \"alarmLowBattery\": currentEntityValue.eventList.includes(\"lowBattery\"),\n                  \"alarmNoSignal\": currentEntityValue.eventList.includes(\"noSignal\"),\n                  \"alarmClose\": currentEntityValue.eventList.includes(\"close\")\n                }\n              },\n              createdBy: widgetContext.currentUser.sub\n        }\n        saveServerAttributes(serverAttributesPayload, \"ASSET\", entity.id.id).subscribe((serverAttributes) => {\n            const relationPayload = []\n            if(currentEntityValue.hydrantList) {\n                currentEntityValue.hydrantList.forEach((hydrantId) => {\n                    relationPayload.push({\n                        'from':  entity.id,\n                        'to': {\n                            'entityType': 'ASSET',\n                            'id': hydrantId\n                        },\n                    })\n                });\n            }\n            if(currentEntityValue.zoneList) {\n                currentEntityValue.zoneList.forEach((zoneId) => {\n                    relationPayload.push({\n                        'from':  entity.id,\n                        'to': {\n                            'entityType': 'ASSET',\n                            'id': zoneId\n                        },\n                    })\n                });\n            }\n            console.debug(relationPayload);\n            saveEntityRelations(relationPayload, \"Muted\").subscribe((relations) => {\n                openDashboardState('all_temporary_deactivation');\n                widgetContext.updateAliases();\n                // customDialog.showAlert(translationService.instant('asset.saved'), true).subscribe(() => {\n                //     widgetContext.close();\n                // });\n            });\n        });\n    });\n}\n\n\nwidgetContext.isGenericLoading$.next(true);\n\nfunction showToaster(message, isErrorType=false) {\n    const translatedMessage =  translationService.instant(message);\n    if(isErrorType) {\n        widgetContext.showErrorToast(translatedMessage);\n    } else {\n        widgetContext.showSuccessToast(translatedMessage);\n    }\n}\n\nfunction openDashboardState(statedId) {\n    widgetContext.isGenericLoading$.next(false);\n    showToaster('hawle-dashboard.temporary-deactivation-saved-successfully');\n    widgetContext.stateController.resetState();\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.openState(statedId, params);\n    }\n}\n\nmain()"
          },
          "title": "New Generic Form Builder v1.0",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "ed5f1dcc-d356-fdad-8b31-662b65da78cc"
      },
      "6090588a-7d1c-c59d-a43f-c6e3a617d8e0": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "5d6aae4b-1d67-f7b4-f915-d2e30c8a3eb5",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.4291951067313693
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": false,
            "isExternalBtn": false,
            "formName": "Create New Alarm Definitions",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Name",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Assign Zone",
                    "fieldName": "zoneList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=zone&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Select Hydrant",
                    "fieldName": "hydrantList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=hydrant&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Event Type *",
                    "fieldName": "eventList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Open\", value: \"open\"},\n    {name: \"Low Battery\", value: \"lowBattery\"},\n    {name: \"No Signal\", value: \"noSignal\"},\n    {name: \"Close\", value: \"close\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Assign User Roles",
                    "fieldName": "roleList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/entityGroups/USER`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response.filter(res => !res.groupAll)\n        .map(\n            data => ({\n                name: data.name,\n                value: JSON.stringify({\n                    id: data.id.id,\n                    name: data.name\n                })\n            })).filter(data => data.name.toLowerCase().includes(searchTerm && searchTerm.trim() ? searchTerm.trim() : ''))\n            ));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Assign Users",
                    "fieldName": "userList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nfunction getGroupAllUserList() {\n    const payload = {\n        \"entityFields\": [\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"createdTime\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"firstName\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"lastName\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"email\"\n            }\n        ],\n        \"latestValues\": [],\n        \"entityFilter\": {\n            \"resolveMultiple\":true,\n            \"entityType\": \"USER\",\n            \"type\": \"entityType\"\n        },\n        \"pageLink\": {\n            \"dynamic\": false,\n            \"pageSize\": 10,\n            \"page\": 0,\n            \"textSearch\": null,\n            \"sortOrder\": {\n                \"key\": {\n                    \"type\": \"ENTITY_FIELD\",\n                    \"key\": \"createdTime\"\n                },\n                \"direction\": \"DESC\"\n            }\n        }\n    };\n    if (searchTerm) {\n        payload.pageLink.textSearch = searchTerm;\n    }\n    return http.post(\"/api/entitiesQuery/find\", payload).pipe(\n        rxjs.debounceTime(150),\n        rxjs.distinctUntilChanged(),\n        rxjs.map((response) => {\n        const result = [];\n        if (response.totalElements === 0) {\n          return result;\n        }\n        response.data.forEach((entity) => {\n          if (entity.entityId.entityType === \"USER\") {\n            result.push({\n              name: entity.latest.ENTITY_FIELD.email.value,\n              value: JSON.stringify({\n                    id: entity.entityId.id,\n                    name: entity.latest.ENTITY_FIELD.email.value\n                })\n            })\n          }\n        });\n        return result;\n      }))\n}\nreturn getGroupAllUserList();",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Field 7",
                    "fieldName": "step0field7",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone and at least 1 user or user role has to be assigned\n</div>\n",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone and at least 1 user or user role has to be assigned\n</div>\n"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              },
              {
                "stepName": "Notification",
                "formFields": [
                  {
                    "label": "Notification Type *",
                    "fieldName": "notificationType",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Email\", value: \"email\"},\n    {name: \"SMS\", value: \"sms\"},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Delay",
                    "fieldName": "notificationDelay",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"None\", value: 0},\n    {name: \"15 min\", value: 15},\n    {name: \"30 min\", value: 30},\n    {name: \"60 min\", value: 60},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Re-notification on missing acknowledgement",
                    "fieldName": "reNotificationDelay",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"None\", value: 0},\n    {name: \"15 min\", value: 15},\n    {name: \"60 min\", value: 60},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              },
              {
                "stepName": "Date",
                "formFields": [
                  {
                    "label": "Alarm State",
                    "fieldName": "alarmState",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div></div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div></div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Alarm State",
                    "fieldName": "isAlarmActive",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Active\", value: true},\n    {name: \"Inactive\", value: false}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "From",
                    "fieldName": "from",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div class=\"mt-24 mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">From</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div class=\"mt-24 mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">From</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "To",
                    "fieldName": "to",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div class=\"mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">To</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div class=\"mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">To</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              }
            ],
            "genericFormFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get(\"customDialog\"));\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\nlet rxjs = widgetContext.rxjs;\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\n\nlet currentEntityValue = formData.value;\n\n\nfunction saveEntity(paylload, entityType) {\n    let url = `/api/${entityType}`;\n    return http.post(url, paylload);\n}\n\n\nfunction saveEntityRelations(relationsFromToList=[], defaultRelationType=null) {\n    const relationPayload = []\n    relationsFromToList.forEach((relation) => {\n        relationPayload.push({\n            \"type\": defaultRelationType || relation.type,\n            \"additionalInfo\": relation.additionalInfo || null,\n            \"typeGroup\": relation.typeGroup || \"COMMON\",\n            \"from\": relation.from,\n            \"to\": relation.to\n        })\n    });\n    let url = `/api/relation/bulk`;\n    return http.post(url, relationPayload);\n}\n\nfunction saveServerAttributes(serverAttributes, entityType, EntityId) {\n    let url = `/api/plugins/telemetry/${entityType}/${EntityId}/SERVER_SCOPE`;\n    return http.post(url, serverAttributes);\n}\n\nfunction getMsTimeAfterAddTimeInDate(date, time) {\n    let newDate = new Date(date);\n    let newTime = new Date(time);\n    let hours = newTime.getHours();\n    let minutes = newTime.getMinutes();\n    newDate.setHours(hours);\n    newDate.setMinutes(minutes);\n    return newDate.getTime();\n}\n\nfunction main() {\n    if(!currentEntityValue.roleList && !currentEntityValue.userList && !currentEntityValue.hydrantList && !currentEntityValue.zoneList) {\n        widgetContext.showToast('error',\n        translationService.instant(\"hawle-dashboard.assign-user-role-zone-hydrant-mandatory\"), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    }\n    if(!currentEntityValue.roleList && !currentEntityValue.userList) {\n        widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.assign-user-role-mandatory'), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    }\n\n    if(!currentEntityValue.hydrantList && !currentEntityValue.zoneList) {\n        widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.assign-zone-hydrant-mandatory'), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    }\n    if(!currentEntityValue.eventList || \n        (currentEntityValue.eventList && !currentEntityValue.eventList.length)) {\n        widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.assign-event-mandatory'), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    }\n    \n    if(!currentEntityValue.notificationType || \n        (currentEntityValue.notificationType && !currentEntityValue.notificationType.length)) {\n        widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.assign-notification-type-mandatory'), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    }\n    \n    const fromDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateFrom, currentEntityValue.timeFrom);\n    const toDate = currentEntityValue.dateTo ? getMsTimeAfterAddTimeInDate(currentEntityValue.dateTo, currentEntityValue.timeTo) : 0;\n    const nowDate = new Date().getTime();\n    if(   toDate > 0 && \n        ((toDate < fromDate) || (toDate < nowDate))\n    ) {\n        widgetContext.showToast('error',\n            translationService.instant('hawle-dashboard.invalid-date-selection'), 2000,\n            'top', 'left');\n        return;\n    }\n\n    let currentEntityValueRoleList = currentEntityValue.roleList ? currentEntityValue.roleList.map((role) => JSON.parse(role)) : [];\n    let currentEntityValueUserList = currentEntityValue.userList ? currentEntityValue.userList.map((user) => JSON.parse(user)) : [];\n    let paylload = {\n        \"name\": currentEntityValue.name,\n        \"type\": \"alarmDefinition\"\n    }\n\n    saveEntity(paylload, \"asset\").subscribe((entity) => { \n        const notificationType = currentEntityValue.notificationType ? currentEntityValue.notificationType : [];\n        const serverAttributesPayload = {\n            fromDate: fromDate,\n            toDate: toDate,\n            isActive: currentEntityValue.isAlarmActive,\n            userGroups: currentEntityValueRoleList,\n            users: currentEntityValueUserList,\n            alarmDefinition: {\n                alarmState: {\n                  isActive: currentEntityValue.isAlarmActive,\n                  fromDate: fromDate,\n                  toDate: toDate\n                },\n                eventType: {\n                  alarmOpen: currentEntityValue.eventList.includes(\"open\"),\n                  alarmLowBattery: currentEntityValue.eventList.includes(\"lowBattery\"),\n                  alarmNoSignal: currentEntityValue.eventList.includes(\"noSignal\"),\n                  alarmClose: currentEntityValue.eventList.includes(\"close\")\n                },\n                notification: {\n                  email: notificationType.includes(\"email\"),\n                  sms: notificationType.includes(\"sms\"),\n                  delay: currentEntityValue.notificationDelay * 60000,\n                  reNotificationOnMissingAck: currentEntityValue.reNotificationDelay * 60000 || null\n                }\n              }\n        }\n        saveServerAttributes(serverAttributesPayload, \"ASSET\", entity.id.id).subscribe((serverAttributes) => {\n            const relationPayload = []\n            if(currentEntityValue.hydrantList) {\n                currentEntityValue.hydrantList.forEach((hydrantId) => {\n                    relationPayload.push({\n                        \"type\": \"ManagesAlarms\",\n                        'from':  entity.id,\n                        'to': {\n                            'entityType': 'ASSET',\n                            'id': hydrantId\n                        },\n                    })\n                });\n            }\n            if(currentEntityValue.zoneList) {\n                currentEntityValue.zoneList.forEach((zoneId) => {\n                    relationPayload.push({\n                        \"type\": \"ManagesAlarms\",\n                        'from':  entity.id,\n                        'to': {\n                            'entityType': 'ASSET',\n                            'id': zoneId\n                        },\n                    })\n                });\n            }\n            if(currentEntityValueUserList) {\n                currentEntityValueUserList.forEach((user) => {\n                    relationPayload.push({\n                        \"type\": \"Owns\",\n                        'to':  entity.id,\n                        'from': {\n                            'entityType': 'USER',\n                            'id': user.id\n                        },\n                    })\n                })\n            }\n            if(currentEntityValueRoleList) {\n                currentEntityValueRoleList.forEach((role) => {\n                    relationPayload.push({\n                        \"type\": \"Owns\",\n                        'to':  entity.id,\n                        'from': {\n                            'entityType': 'ENTITY_GROUP',\n                            'id': role.id\n                        },\n                    })\n                })\n            }\n            saveEntityRelations(relationPayload).subscribe((relations) => {\n\n                rxjs.forkJoin(\n                    [...(Array.isArray(currentEntityValueRoleList) ? currentEntityValueRoleList : []).map(role => {\n                        const userServerAttributesPayload = {}\n                        userServerAttributesPayload[`alarmDefinition_${entity.id.id}`] = {\n                            name: currentEntityValue.name,\n                            id: entity.id.id\n                          }\n                        return saveServerAttributes(userServerAttributesPayload, \"ENTITY_GROUP\", role.id)\n                    }),\n                    ...(Array.isArray(currentEntityValueUserList) ? currentEntityValueUserList : []).map(user => {\n                        const userServerAttributesPayload = {}\n                        userServerAttributesPayload[`alarmDefinition_${entity.id.id}`] = {\n                            name: currentEntityValue.name,\n                            id: entity.id.id\n                          }\n                        return saveServerAttributes(userServerAttributesPayload, \"USER\", user.id)\n                    })\n                ]\n                ).subscribe((response) => {\n                    widgetContext.showToast('success',\n                        translationService.instant('hawle-dashboard.alarm-definition-saved-successfully'), 2000,\n                        'top', 'left');\n                    openDashboardState('all_alarm_definitions');\n                    widgetContext.updateAliases();\n                  });\n                //   widgetContext.updateAliases();\n                //     openDashboardState('all_alarm_definitions');\n                // saveServerAttributes(serverAttributesPayload, \"ASSET\", entity.id.id).subscribe((serverAttributes) => {\n                // customDialog.showAlert(translationService.instant('asset.saved'), true).subscribe(() => {\n                //     widgetContext.close();\n                // });\n            });\n        });\n    });\n}\n\nfunction openDashboardState(statedId) {\n    widgetContext.stateController.resetState();\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.openState(statedId, params);\n    }\n}\nmain()"
          },
          "title": "New Generic Form Builder v1.0",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "6090588a-7d1c-c59d-a43f-c6e3a617d8e0"
      },
      "a549e8da-5b5a-eb58-1206-ff491ea9aec8": {
        "isSystemType": true,
        "bundleAlias": "maps_v2",
        "typeAlias": "google_maps",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 8.5,
        "sizeY": 6,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "793b3a27-c500-48ae-d75c-383cda3397a8",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.048331057306513214
                },
                {
                  "name": "latitude",
                  "type": "attribute",
                  "label": "latitude",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.06371599897041325
                },
                {
                  "name": "longitude",
                  "type": "attribute",
                  "label": "longitude",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.905232943024272
                },
                {
                  "name": "isClose",
                  "type": "timeseries",
                  "label": "isClose",
                  "color": "#9c27b0",
                  "settings": {},
                  "_hash": 0.1850972765841823,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "isInactive",
                  "type": "timeseries",
                  "label": "isInactive",
                  "color": "#8bc34a",
                  "settings": {},
                  "_hash": 0.35414675136747054
                },
                {
                  "name": "isNoSignal",
                  "type": "timeseries",
                  "label": "isNoSignal",
                  "color": "#3f51b5",
                  "settings": {},
                  "_hash": 0.6897741283153709
                },
                {
                  "name": "isNotAssigned",
                  "type": "timeseries",
                  "label": "isNotAssigned",
                  "color": "#e91e63",
                  "settings": {},
                  "_hash": 0.8023792688411111
                },
                {
                  "name": "isOpen",
                  "type": "timeseries",
                  "label": "isOpen",
                  "color": "#03a9f4",
                  "settings": {},
                  "_hash": 0.8859142659457127
                },
                {
                  "name": "isTemporaryDeactivated",
                  "type": "timeseries",
                  "label": "isTemporaryDeactivated",
                  "color": "#ff7d09",
                  "settings": {},
                  "_hash": 0.8290201124950098
                },
                {
                  "name": "modelNumber",
                  "type": "attribute",
                  "label": "modelNumber",
                  "color": "#03a9f4",
                  "settings": {},
                  "_hash": 0.26143924500654414
                },
                {
                  "name": "isLowBattery",
                  "type": "timeseries",
                  "label": "isLowBattery",
                  "color": "#03a9f4",
                  "settings": {},
                  "_hash": 0.9158752961458341
                },
                {
                  "name": "isActive",
                  "type": "timeseries",
                  "label": "isActive",
                  "color": "#ff9800",
                  "settings": {},
                  "_hash": 0.5758462055824634
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "provider": "google-map",
            "gmApiKey": "AIzaSyDE07XHeCdHUJci4OLOcRHGJZyAQc8SYUc",
            "gmDefaultMapType": "roadmap",
            "mapProvider": "OpenStreetMap.Mapnik",
            "useCustomProvider": false,
            "customProviderTileUrl": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
            "mapProviderHere": "HERE.normalDay",
            "credentials": {
              "app_id": "AhM6TzD9ThyK78CT3ptx",
              "app_code": "p6NPiITB3Vv0GMUFnkLOOg"
            },
            "mapImageUrl": "data:image/svg+xml;base64,PHN2ZyBpZD0ic3ZnMiIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTAwIiB3aWR0aD0iMTAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogPGcgaWQ9ImxheWVyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtOTUyLjM2KSI+CiAgPHJlY3QgaWQ9InJlY3Q0Njg0IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBoZWlnaHQ9Ijk5LjAxIiB3aWR0aD0iOTkuMDEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB5PSI5NTIuODYiIHg9Ii40OTUwNSIgc3Ryb2tlLXdpZHRoPSIuOTkwMTAiIGZpbGw9IiNlZWUiLz4KICA8dGV4dCBpZD0idGV4dDQ2ODYiIHN0eWxlPSJ3b3JkLXNwYWNpbmc6MHB4O2xldHRlci1zcGFjaW5nOjBweDt0ZXh0LWFuY2hvcjptaWRkbGU7dGV4dC1hbGlnbjpjZW50ZXIiIGZvbnQtd2VpZ2h0PSJib2xkIiB4bWw6c3BhY2U9InByZXNlcnZlIiBmb250LXNpemU9IjEwcHgiIGxpbmUtaGVpZ2h0PSIxMjUlIiB5PSI5NzAuNzI4MDkiIHg9IjQ5LjM5NjQ3NyIgZm9udC1mYW1pbHk9IlJvYm90byIgZmlsbD0iIzY2NjY2NiI+PHRzcGFuIGlkPSJ0c3BhbjQ2OTAiIHg9IjUwLjY0NjQ3NyIgeT0iOTcwLjcyODA5Ij5JbWFnZSBiYWNrZ3JvdW5kIDwvdHNwYW4+PHRzcGFuIGlkPSJ0c3BhbjQ2OTIiIHg9IjQ5LjM5NjQ3NyIgeT0iOTgzLjIyODA5Ij5pcyBub3QgY29uZmlndXJlZDwvdHNwYW4+PC90ZXh0PgogIDxyZWN0IGlkPSJyZWN0NDY5NCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgaGVpZ2h0PSIxOS4zNiIgd2lkdGg9IjY5LjM2IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgeT0iOTkyLjY4IiB4PSIxNS4zMiIgc3Ryb2tlLXdpZHRoPSIuNjM5ODYiIGZpbGw9Im5vbmUiLz4KIDwvZz4KPC9zdmc+Cg==",
            "tmApiKey": "84d6d83e0e51e481e50454ccbe8986b",
            "tmDefaultMapType": "roadmap",
            "latKeyName": "latitude",
            "lngKeyName": "longitude",
            "xPosKeyName": "xPos",
            "yPosKeyName": "yPos",
            "defaultZoomLevel": 8,
            "defaultCenterPosition": "46.8182,8.2275",
            "disableScrollZooming": false,
            "disableDoubleClickZooming": false,
            "disableZoomControl": false,
            "fitMapBounds": true,
            "useDefaultCenterPosition": false,
            "mapPageSize": 16384,
            "markerOffsetX": 0.5,
            "markerOffsetY": 1,
            "posFunction": "return {x: origXPos, y: origYPos};",
            "draggableMarker": false,
            "showLabel": false,
            "useLabelFunction": false,
            "label": "${entityName}",
            "showTooltip": false,
            "showTooltipAction": "click",
            "autocloseTooltip": true,
            "useTooltipFunction": false,
            "tooltipPattern": "<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}",
            "tooltipOffsetX": 0,
            "tooltipOffsetY": -1,
            "color": "#fe7568",
            "useColorFunction": true,
            "colorFunction": "var type = dsData[dsIndex]['Type'];\nif (type == 'colorpin') {\n\tvar temperature = dsData[dsIndex]['temperature'];\n\tif (typeof temperature !== undefined) {\n\t    var percent = (temperature + 60)/120 * 100;\n\t    return tinycolor.mix('blue', 'red', percent).toHexString();\n\t}\n\treturn 'blue';\n}\n",
            "useMarkerImageFunction": true,
            "markerImageSize": 34,
            "markerImageFunction": "var telemetryKeys = [\n    \"alarmBatteryLow\",\n    \"alarmOpen\",\n    \"alarmNoSignal\",\n    \"alarmClose\",\n    \"isLowBattery\",\n    \"isOpen\",\n    \"isClose\",\n    \"isNoSignal\",\n    \"isInactive\",\n    \"isActive\",\n    \"isTemporaryDeactivated\",\n    \"isNotAssigned\"\n];\n\nconst statusPriorities = {\n    isTemporaryDeactivated: 0,\n    isOpen: 1,\n    isInactive: 2, \n    isLowBattery: 3,\n    isNoSignal: 4,\n    isNotAssigned: 5,\n    isClose: 6,\n    isOnline: 7\n}\n\nfunction isTrue(value) {\n    return value !== undefined && value !== null && (value === 'true' || value === true || value === 1 | value === '1');\n}\n\n\nfunction readTelemetryValue(telemetryName) {\n    if (dsData && dsData[dsIndex] && dsData[dsIndex][telemetryName] !== undefined) {\n        return isTrue(dsData[dsIndex][telemetryName]);\n    } else {\n        return false;\n    }\n}\n\n\nfunction findLatestState(timeseriesOfCurrentEntity, telemetryKeys ) {\n    let latestTelemetry = { telemetryKeyName: \"\",  ts: 0, label: \"\", priority: 100};\n    for (let i = 0; i < telemetryKeys.length; ++i) {\n        let telemetry = telemetryKeys[i];\n        let telemetryKey = telemetryKeys[i];\n        let tsKey = telemetryKey + \"|ts\";\n        const inactiveDescriptor =  { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[tsKey], status: \"isInactive\", priority: statusPriorities.isInactive };\n        const lowBatteryDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[tsKey], status: \"isLowBattery\", priority: statusPriorities.isLowBattery };\n        const temporaryDeactivationDescriptor = { telemetryKeyName: telemetry, ts: timeseriesOfCurrentEntity[tsKey], status: \"isTemporaryDeactivated\", priority: statusPriorities.isTemporaryDeactivated };\n        const noSignalDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[tsKey], status: \"isNoSignal\", priority: statusPriorities.isNoSignal };\n        const notAssignedDescriptor =  { telemetryKeyName: telemetry, ts: timeseriesOfCurrentEntity[tsKey], status: \"isNotAssigned\", priority: statusPriorities.isNotAssigned };\n        const openDescriptor =  { telemetryKeyName: telemetry, ts: timeseriesOfCurrentEntity[tsKey], status: \"isOpen\", priority: statusPriorities.isOpen };\n        const closedDescriptor =  { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[tsKey], status: \"isClose\", priority: statusPriorities.isClose };\n\n        if (timeseriesOfCurrentEntity[tsKey] > latestTelemetry.ts && timeseriesOfCurrentEntity[tsKey] > 0 ) {\n            if(telemetryKey == \"isInactive\" &&  readTelemetryValue(telemetryKey)) {\n                latestTelemetry = inactiveDescriptor;\n            }\n            else if(telemetryKey == \"isLowBattery\" &&  readTelemetryValue(telemetryKey)) {\n                latestTelemetry = lowBatteryDescriptor;\n            }\n            else if(telemetryKey == \"isTemporaryDeactivated\" &&  readTelemetryValue(telemetryKey) ) {\n                latestTelemetry = temporaryDeactivationDescriptor;\n            }\n            else if(telemetryKey == \"isNoSignal\" &&  readTelemetryValue(telemetryKey) ) {\n                latestTelemetry = noSignalDescriptor;\n            }\n            else if(telemetryKey == \"isNotAssigned\" && readTelemetryValue(telemetryKey)) {\n                latestTelemetry = notAssignedDescriptor;\n            }\n            else if(telemetryKey == \"isOpen\" && readTelemetryValue(telemetryKey)) {\n                latestTelemetry = openDescriptor;\n            } else if(telemetryKey == \"isClose\" && readTelemetryValue(telemetryKey)) {\n                latestTelemetry = closedDescriptor;\n            }\n        }\n        else if (timeseriesOfCurrentEntity[tsKey] == latestTelemetry.ts && timeseriesOfCurrentEntity[tsKey] > 0 ) {\n            if(telemetryKey == \"isInactive\" && readTelemetryValue(telemetryKey) && statusPriorities.isInactive < latestTelemetry.priority) {\n                latestTelemetry = inactiveDescriptor;\n            }\n            else if(telemetryKey == \"isLowBattery\" && readTelemetryValue(telemetryKey) && statusPriorities.isLowBattery < latestTelemetry.priority ) {\n                latestTelemetry = lowBatteryDescriptor;\n            }\n            else if(telemetryKey == \"isTemporaryDeactivated\" &&  readTelemetryValue(telemetryKey) && statusPriorities.isTemporaryDeactivated < latestTelemetry.priority ) {\n                latestTelemetry = temporaryDeactivationDescriptor;\n            }\n            else if(telemetryKey == \"isNoSignal\" &&  readTelemetryValue(telemetryKey) && statusPriorities.isNoSignal < latestTelemetry.priority ) {\n                latestTelemetry = noSignalDescriptor;\n            }\n            else if(telemetryKey == \"isNotAssigned\" &&  readTelemetryValue(telemetryKey) && statusPriorities.isNotAssigned < latestTelemetry.priority ) {\n                latestTelemetry = notAssignedDescriptor;\n            }\n            else if(telemetryKey == \"isOpen\" &&  readTelemetryValue(telemetryKey) && statusPriorities.isOpen < latestTelemetry.priority ) {\n                latestTelemetry = openDescriptor;\n            } else if(telemetryKey == \"isClose\" &&  readTelemetryValue(telemetryKey) && statusPriorities.isClose < latestTelemetry.priority) {\n                latestTelemetry = closedDescriptor;\n            }\n        }\n    }\n    return latestTelemetry;\n}\n\nlet latestTelemetry = findLatestState(dsData[dsIndex], telemetryKeys)\n\nvar res;\nswitch(latestTelemetry.status) {\n    case \"isClose\":\n    case \"alarmClosed\":\n        res = {\n    \t    url: images[0],\n    \t    size: 40\n\t    }\n\t    break;\n    case \"alarmBatteryLow\":\n    case \"alarmOpen\":\n    case \"alarmNoSignal\":\n    case \"isOpen\": \n    case \"isLowBattery\":\n        res = {\n    \t    url: images[1],\n    \t    size: 40\n    \t}\n    \tbreak;\n    case \"isNoSignal\":\n        res = {\n    \t    url: images[2],\n    \t    size: 40\n    \t}\n    \tbreak;\n    case \"isTemporaryDeactivated\":\n        res = {\n    \t    url: images[3],\n    \t    size: 40\n    \t}\n    \tbreak;\n    case \"isNotAssigned\":\n        res = {\n    \t    url: images[4],\n    \t    size: 40\n    \t}\n    \tbreak;\n    case \"isInactive\":\n        res = {\n    \t    url: images[5],\n    \t    size: 40\n    \t}\n    \tbreak;\n\tdefault:\n\t    res = {\n    \t    url: images[4],\n    \t    size: 40\n    \t}\n    \tbreak;\n}\n\nreturn res;\n",
            "markerImages": [
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjkyIiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiMyMkM1NUUiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMxNTgwM0QiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2OTIpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2OTIpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjkyIiB4PSI3LjMxMTI4IiB5PSIxLjE2MDc5IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkyIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2OTIiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY5MiIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY5MiIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjkyIiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjY0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiNFRjQ0NDQiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiNCOTFDMUMiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2NjQpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2NjQpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjY0IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2NjQiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY2NCIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY2NCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjY0IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njc0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMC41MjQ2IDI3LjI1MjdMMjAuMjAxNiAyNi4zMDYzTDE5LjkwMzcgMjYuNDA4TDE5LjcxNzggMjYuNjYxOUwyMC41MjQ2IDI3LjI1MjdaTTExLjQ3OTUgMjcuMjU0MUwxMi4yODU5IDI2LjY2MjdMMTIuMDk5OSAyNi40MDkxTDExLjgwMjIgMjYuMzA3NkwxMS40Nzk1IDI3LjI1NDFaTTE1LjA2NDggMzEuNTk5TDE0LjMyODQgMzIuMjc1NUwxNC4zMjkzIDMyLjI3NjVMMTUuMDY0OCAzMS41OTlaTTE2Ljk0NzggMzEuNTk5TDE3LjY4MzMgMzIuMjc2NUwxNy42ODYxIDMyLjI3MzVMMTYuOTQ3OCAzMS41OTlaTTI5IDE0QzI5IDE5LjcwNzkgMjUuMzIwOCAyNC41NTkxIDIwLjIwMTYgMjYuMzA2M0wyMC44NDc2IDI4LjE5OTFDMjYuNzUxNyAyNi4xODM5IDMxIDIwLjU4OTQgMzEgMTRIMjlaTTE2IDFDMjMuMTc5NyAxIDI5IDYuODIwMyAyOSAxNEgzMUMzMSA1LjcxNTczIDI0LjI4NDMgLTEgMTYgLTFWMVpNMyAxNEMzIDYuODIwMyA4LjgyMDMgMSAxNiAxVi0xQzcuNzE1NzMgLTEgMSA1LjcxNTczIDEgMTRIM1pNMTEuODAyMiAyNi4zMDc2QzYuNjgxMDcgMjQuNTYxNSAzIDE5LjcwOTMgMyAxNEgxQzEgMjAuNTkxIDUuMjUwMzcgMjYuMTg2NyAxMS4xNTY4IDI4LjIwMDZMMTEuODAyMiAyNi4zMDc2Wk0xMC42NzMxIDI3Ljg0NTVDMTIuMDQxOCAyOS43MTE5IDEzLjQzNTkgMzEuMzA0IDE0LjMyODQgMzIuMjc1NUwxNS44MDEyIDMwLjkyMjRDMTQuOTM5MSAyOS45ODQgMTMuNTk3IDI4LjQ1MDUgMTIuMjg1OSAyNi42NjI3TDEwLjY3MzEgMjcuODQ1NVpNMTQuMzI5MyAzMi4yNzY1QzE1LjIxNzcgMzMuMjQwOSAxNi43OTUgMzMuMjQwOSAxNy42ODMzIDMyLjI3NjVMMTYuMjEyNCAzMC45MjE0QzE2LjE3NSAzMC45NjE5IDE2LjEwNDcgMzAuOTk5OCAxNi4wMDYzIDMwLjk5OThDMTUuOTA3OSAzMC45OTk4IDE1LjgzNzYgMzAuOTYxOSAxNS44MDAzIDMwLjkyMTRMMTQuMzI5MyAzMi4yNzY1Wk0xNy42ODYxIDMyLjI3MzVDMTguNTczIDMxLjMwMjggMTkuOTY0MyAyOS43MTA0IDIxLjMzMTQgMjcuODQzNkwxOS43MTc4IDI2LjY2MTlDMTguNDA4IDI4LjQ1MDQgMTcuMDY4MSAyOS45ODQ4IDE2LjIwOTYgMzAuOTI0NEwxNy42ODYxIDMyLjI3MzVaIiBmaWxsPSIjNjQ3NDhCIiBtYXNrPSJ1cmwoI3BhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njc0KSIvPgo8cGF0aCBkPSJNMTQuNjE1NSA5LjczMzA2TDEyLjQzODUgNi4wODcyMUMxMi4yMTM3IDUuNzEwNTggMTIuMzI5NiA1LjIyMzM3IDEyLjcgNC45ODgzN0wxNS4xNDUzIDMuNDM2OTVDMTUuNTI0OSAzLjE5NjE0IDE2LjAyNzkgMy4zMTA1NyAxNi4yNjU5IDMuNjkxODZMMTkuMDk5IDguMjI5ODhDMTkuMTc3MyA4LjM1NTE4IDE5LjIxOTcgOC40OTk0OSAxOS4yMjE4IDguNjQ3MThMMTkuMzQ3NiAxNy40OTYyQzE5LjM1NCAxNy45NDc5IDE4Ljk4OTYgMTguMzE3NCAxOC41MzggMTguMzE3NEgxNS41Mzk3QzE1LjA5MjUgMTguMzE3NCAxNC43MyAxNy45NTQ5IDE0LjczIDE3LjUwNzdWMTAuMTQ4MkMxNC43MyAxMC4wMDIgMTQuNjkwNSA5Ljg1ODU2IDE0LjYxNTUgOS43MzMwNloiIGZpbGw9IiMwMDlERTIiLz4KPHBhdGggZD0iTTEzLjA2ODEgNy43NTY2NEwxMi4yODIxIDYuNDY4MDhDMTIuMDQ4NSA2LjA4NTI3IDExLjU0ODMgNS45NjUxNSAxMS4xNjY0IDYuMjAwMTdMMTAuNjk2NyA2LjQ4OTI1QzEwLjMxMzEgNi43MjUzMyAxMC4xOTU5IDcuMjI5MDggMTAuNDM1OCA3LjYxMDI2TDExLjI1IDguOTAzNDJDMTEuNDkyNSA5LjI4ODU0IDEyLjAwNDYgOS4zOTgyNiAxMi4zODM2IDkuMTQ2MjdMMTIuODI1MiA4Ljg1MjU5QzEzLjE4NzQgOC42MTE3OCAxMy4yOTQ2IDguMTI3OTEgMTMuMDY4MSA3Ljc1NjY0WiIgZmlsbD0iIzAwOURFMiIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0iIzAwOURFMiIvPgo8bWFzayBpZD0icGF0aC00LW91dHNpZGUtMl8zNzc5XzE0Njc0IiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIzIiB5PSIxIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGZpbGw9ImJsYWNrIj4KPHJlY3QgZmlsbD0id2hpdGUiIHg9IjMiIHk9IjEiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2IDE0QzI2IDE5LjUyMjggMjEuNTIyOCAyNCAxNiAyNEMxMy41OTg3IDI0IDExLjM5NTEgMjMuMTUzNiA5LjY3MTI3IDIxLjc0MjlMMjMuNzQyOSA3LjY3MTI3QzI1LjE1MzYgOS4zOTUxNCAyNiAxMS41OTg3IDI2IDE0Wk04LjI1NzA1IDIwLjMyODdMMjIuMzI4NyA2LjI1NzA1QzIwLjYwNDkgNC44NDYzNyAxOC40MDEzIDQgMTYgNEMxMC40NzcyIDQgNiA4LjQ3NzE1IDYgMTRDNiAxNi40MDEzIDYuODQ2MzcgMTguNjA0OSA4LjI1NzA1IDIwLjMyODdaTTI4IDE0QzI4IDIwLjYyNzQgMjIuNjI3NCAyNiAxNiAyNkM5LjM3MjU4IDI2IDQgMjAuNjI3NCA0IDE0QzQgNy4zNzI1OCA5LjM3MjU4IDIgMTYgMkMyMi42Mjc0IDIgMjggNy4zNzI1OCAyOCAxNFoiLz4KPC9tYXNrPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2IDE0QzI2IDE5LjUyMjggMjEuNTIyOCAyNCAxNiAyNEMxMy41OTg3IDI0IDExLjM5NTEgMjMuMTUzNiA5LjY3MTI3IDIxLjc0MjlMMjMuNzQyOSA3LjY3MTI3QzI1LjE1MzYgOS4zOTUxNCAyNiAxMS41OTg3IDI2IDE0Wk04LjI1NzA1IDIwLjMyODdMMjIuMzI4NyA2LjI1NzA1QzIwLjYwNDkgNC44NDYzNyAxOC40MDEzIDQgMTYgNEMxMC40NzcyIDQgNiA4LjQ3NzE1IDYgMTRDNiAxNi40MDEzIDYuODQ2MzcgMTguNjA0OSA4LjI1NzA1IDIwLjMyODdaTTI4IDE0QzI4IDIwLjYyNzQgMjIuNjI3NCAyNiAxNiAyNkM5LjM3MjU4IDI2IDQgMjAuNjI3NCA0IDE0QzQgNy4zNzI1OCA5LjM3MjU4IDIgMTYgMkMyMi42Mjc0IDIgMjggNy4zNzI1OCAyOCAxNFoiIGZpbGw9IiNFRjQ0NDQiLz4KPHBhdGggZD0iTTkuNjcxMjcgMjEuNzQyOUw4Ljk2NDE2IDIxLjAzNThMOC4xODI4OSAyMS44MTcxTDkuMDM3OTYgMjIuNTE2OEw5LjY3MTI3IDIxLjc0MjlaTTIzLjc0MjkgNy42NzEyN0wyNC41MTY4IDcuMDM3OTZMMjMuODE3MSA2LjE4Mjg5TDIzLjAzNTggNi45NjQxNkwyMy43NDI5IDcuNjcxMjdaTTguMjU3MDUgMjAuMzI4N0w3LjQ4MzE1IDIwLjk2Mkw4LjE4Mjg5IDIxLjgxNzFMOC45NjQxNiAyMS4wMzU4TDguMjU3MDUgMjAuMzI4N1pNMjIuMzI4NyA2LjI1NzA1TDIzLjAzNTggNi45NjQxNkwyMy44MTcxIDYuMTgyODlMMjIuOTYyIDUuNDgzMTVMMjIuMzI4NyA2LjI1NzA1Wk0xNiAyNUMyMi4wNzUxIDI1IDI3IDIwLjA3NTEgMjcgMTRIMjVDMjUgMTguOTcwNiAyMC45NzA2IDIzIDE2IDIzVjI1Wk05LjAzNzk2IDIyLjUxNjhDMTAuOTMzOSAyNC4wNjg0IDEzLjM1OTUgMjUgMTYgMjVWMjNDMTMuODM3OSAyMyAxMS44NTYzIDIyLjIzODkgMTAuMzA0NiAyMC45NjlMOS4wMzc5NiAyMi41MTY4Wk0yMy4wMzU4IDYuOTY0MTZMOC45NjQxNiAyMS4wMzU4TDEwLjM3ODQgMjIuNDUwMUwyNC40NTAxIDguMzc4MzhMMjMuMDM1OCA2Ljk2NDE2Wk0yNyAxNEMyNyAxMS4zNTk1IDI2LjA2ODQgOC45MzM5NCAyNC41MTY4IDcuMDM3OTZMMjIuOTY5IDguMzA0NTdDMjQuMjM4OSA5Ljg1NjM0IDI1IDExLjgzNzkgMjUgMTRIMjdaTTguOTY0MTYgMjEuMDM1OEwyMy4wMzU4IDYuOTY0MTZMMjEuNjIxNiA1LjU0OTk1TDcuNTQ5OTUgMTkuNjIxNkw4Ljk2NDE2IDIxLjAzNThaTTIyLjk2MiA1LjQ4MzE1QzIxLjA2NjEgMy45MzE2MiAxOC42NDA1IDMgMTYgM1Y1QzE4LjE2MjEgNSAyMC4xNDM3IDUuNzYxMTEgMjEuNjk1NCA3LjAzMDk2TDIyLjk2MiA1LjQ4MzE1Wk0xNiAzQzkuOTI0ODcgMyA1IDcuOTI0ODcgNSAxNEg3QzcgOS4wMjk0NCAxMS4wMjk0IDUgMTYgNVYzWk01IDE0QzUgMTYuNjQwNSA1LjkzMTYyIDE5LjA2NjEgNy40ODMxNSAyMC45NjJMOS4wMzA5NiAxOS42OTU0QzcuNzYxMTEgMTguMTQzNyA3IDE2LjE2MjEgNyAxNEg1Wk0xNiAyN0MyMy4xNzk3IDI3IDI5IDIxLjE3OTcgMjkgMTRIMjdDMjcgMjAuMDc1MSAyMi4wNzUxIDI1IDE2IDI1VjI3Wk0zIDE0QzMgMjEuMTc5NyA4LjgyMDMgMjcgMTYgMjdWMjVDOS45MjQ4NyAyNSA1IDIwLjA3NTEgNSAxNEgzWk0xNiAxQzguODIwMyAxIDMgNi44MjAzIDMgMTRINUM1IDcuOTI0ODcgOS45MjQ4NyAzIDE2IDNWMVpNMjkgMTRDMjkgNi44MjAzIDIzLjE3OTcgMSAxNiAxVjNDMjIuMDc1MSAzIDI3IDcuOTI0ODcgMjcgMTRIMjlaIiBmaWxsPSJ3aGl0ZSIgbWFzaz0idXJsKCNwYXRoLTQtb3V0c2lkZS0yXzM3NzlfMTQ2NzQpIi8+Cjwvc3ZnPgo=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njg3IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiNGOTczMTYiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiNDMjQxMEMiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2ODcpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2ODcpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0Njg3IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2ODciLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY4NyIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY4NyIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0Njg3IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjgyIiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiM2NDc0OEIiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMzMzQxNTUiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2ODIpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2ODIpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjgyIiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2ODIiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY4MiIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY4MiIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjgyIiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjY5IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiMwMDlERTIiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMwMDZEQUIiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2NjkpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2NjkpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjY5IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2NjkiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY2OSIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY2OSIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjY5IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo="
            ],
            "showPolygon": false,
            "polygonKeyName": "perimeter",
            "editablePolygon": false,
            "showPolygonLabel": false,
            "usePolygonLabelFunction": false,
            "polygonLabel": "${entityName}",
            "showPolygonTooltip": false,
            "showPolygonTooltipAction": "click",
            "autoClosePolygonTooltip": true,
            "usePolygonTooltipFunction": false,
            "polygonTooltipPattern": "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
            "polygonColor": "#3388ff",
            "polygonOpacity": 0.2,
            "usePolygonColorFunction": false,
            "polygonStrokeColor": "#3388ff",
            "polygonStrokeOpacity": 1,
            "polygonStrokeWeight": 3,
            "usePolygonStrokeColorFunction": false,
            "showCircle": false,
            "circleKeyName": "perimeter",
            "editableCircle": false,
            "showCircleLabel": false,
            "useCircleLabelFunction": false,
            "circleLabel": "${entityName}",
            "showCircleTooltip": false,
            "showCircleTooltipAction": "click",
            "autoCloseCircleTooltip": true,
            "useCircleTooltipFunction": false,
            "circleTooltipPattern": "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
            "circleFillColor": "#3388ff",
            "circleFillColorOpacity": 0.2,
            "useCircleFillColorFunction": false,
            "circleStrokeColor": "#3388ff",
            "circleStrokeOpacity": 1,
            "circleStrokeWeight": 3,
            "useCircleStrokeColorFunction": false,
            "useClusterMarkers": true,
            "zoomOnClick": true,
            "maxClusterRadius": 80,
            "animate": true,
            "spiderfyOnMaxZoom": false,
            "showCoverageOnHover": true,
            "chunkedLoading": false,
            "removeOutsideVisibleBounds": true,
            "hasCustomMap": true,
            "customMapViewName": "Hawle",
            "customMapViewURL": "https://api.maptiler.com/maps/ch-swisstopo-lbm-grey/style.json"
          },
          "title": "New Google Maps",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "widgetStyle": {
            "borderRadius": "8px"
          },
          "actions": {
            "markerClick": [
              {
                "name": "Hydrant details popup",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<mat-dialog id=\"popup-dialog\">\r\n    <header fxLayout=\"row\" fxLayoutAlign=\"space-between center\" class=\"header\">\r\n      <div fxLayout=\"column\">\r\n        <span id=\"dialog-title\"><b>{{dialogTitle | translate}}</b></span>\r\n        <div id=\"status-badge\" fxLayout=\"row\" fxLayoutAlign=\"start center\" matBadge=\"open\" matBadgeColor=\"primary\" matBadgeOverlap=\"false\" matBadgeSize=\"small\" class=\"custom-badge\">\r\n          <mat-icon class=\"custom-icon\">lens</mat-icon>\r\n          <span class=\"custom-text\">{{statusBadge}}</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <button mat-icon-button (click)=\"cancel()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </header>\r\n    \r\n    <section class=\"entity-info\" fxLayout=\"row\">\r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{hydrantNumber | translate}}</div>\r\n        <div class=\"info-value\">{{currentEntity?.latest?.ENTITY_FIELD?.name?.value}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\"  fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{brand | translate}}</div>\r\n        <div class=\"info-value\">{{hydrantsBrand}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{model | translate}}</div>\r\n        <div class=\"info-value\">{{ modelNumber }}</div>\r\n      </div>\r\n    </section>\r\n    \r\n    <section class=\"outlet-info-table-hydrant\" *ngIf=\"dStorzDataReady\">\r\n        <mat-table mat-table [dataSource]=\"outletDataSource\" class=\"mat-elevation-z0\">\r\n          <ng-container matColumnDef=\"outlet\">\r\n            <th mat-header-cell *matHeaderCellDef>{{outletInformation | translate}}</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ element.outlet }} </td>\r\n          </ng-container>\r\n        \r\n          <ng-container matColumnDef=\"assigned\">\r\n            <th mat-header-cell *matHeaderCellDef>{{assignedDStorz | translate}}</th>\r\n            <td mat-cell *matCellDef=\"let element\"> {{ element.assignedSerialNumber }} </td>\r\n          </ng-container>\r\n        \r\n          <ng-container matColumnDef=\"status\">\r\n            <th mat-header-cell *matHeaderCellDef>{{statusTimestamp | translate}}</th>\r\n            <td mat-cell *matCellDef=\"let element\"  class=\"status-cell\"> {{ element.status }} </td>\r\n          </ng-container>\r\n        \r\n          <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n          <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n        </mat-table>\r\n    </section>\r\n    \r\n    <section class=\"temporary-deactivation-section\"  *ngIf=\"statusId == 'isTemporaryDeactivated' && !!notificationMuteStartDateFormatted && !!notificationMuteEndDateFormatted\">\r\n        <div>\r\n          <div class=\"section-title\">{{temporaryDeactivation | translate}}</div>\r\n          <div fxLayout=\"row\" fxLayoutGap=\"16px\" class=\"content\">\r\n            <div fxLayout=\"column\" fxFlex=\"25%\" class=\"column info-column-temp-deactivation\">\r\n              <div class=\"info-key\">{{reason | translate}}</div>\r\n              <div class=\"info-value\">{{tempDeactivationReason}}</div>\r\n            </div>\r\n        \r\n            <div fxLayout=\"column\" fxFlex=\"25%\" class=\"column info-column-temp-deactivation\">\r\n              <div class=\"info-key\">{{time | translate}}</div>\r\n              <div class=\"info-value\">From: {{notificationMuteStartDateFormatted}}<br>To: {{notificationMuteEndDateFormatted}}\r\n              </div>\r\n            </div>\r\n        \r\n            <div fxLayout=\"column\" fxFlex=\"25%\" class=\"column info-column-temp-deactivation\">\r\n              <div class=\"info-key\">{{createdByLabel | translate}}</div>\r\n              <div class=\"info-value\">{{ createdBy }}</div>\r\n            </div>\r\n            \r\n            <div fxLayout=\"column\" fxFlex=\"25%\" class=\"column info-column-temp-deactivation\">\r\n              <div class=\"info-key\">{{eventTypeLabel | translate}}</div>\r\n              <div class=\"info-value\">{{ eventType }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n    </section>\r\n    \r\n  <!--  <section *ngIf=\"alarmActive && statusId != 'isTemporaryDeactivated'\" fxLayout=\"row\" class=\"unconfirmed-alarms-section\"  fxLayoutAlign=\"space-between center\">\r\n        <div fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n            <div class=\"bell-icon\">\r\n              <mat-icon class=\"material-icons\">notifications</mat-icon>\r\n            </div>\r\n            <span>{{unconfirmedAlarms | translate}}</span>\r\n        </div>\r\n      <div>\r\n        <button mat-button color=\"primary\">\r\n            <span>{{viewAlarms | translate}}</span>\r\n        </button>\r\n      </div>\r\n    </section> -->\r\n    \r\n    \r\n    <section class=\"entity-info\" fxLayout=\"row\">\r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{zoneLabel | translate}}</div>\r\n        <div class=\"info-value\">{{zone}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{locationLabel | translate}}</div>\r\n        <div class=\"info-value\">{{address}}</div>\r\n        <div class=\"info-value\">{{country}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <button class=\"action-button\" mat-button color=\"primary\" (click)=\"navigateToMap()\">\r\n            <span>\r\n                {{routeTo | translate}}\r\n            </span>\r\n        </button>\r\n      </div>\r\n    </section>\r\n   \r\n</mat-dialog>",
                "customCss": ".mat-dialog-container {\r\n    border-radius: 10px;\r\n}\r\n\r\n#popup-dialog {\r\n    display: block;\r\n    height: 90vh;\r\n    width: 50vw;\r\n    padding: 2rem;\r\n}\r\n\r\n@media only screen and (max-width: 1500px) {\r\n#popup-dialog {\r\n      width: 80vw;\r\n      overflow-x: auto;\r\n  }\r\n}\r\n\r\n#dialog-title {\r\n    font-size: 1.5rem;\r\n    font-weight: 700;\r\n    margin-bottom: 0.5rem;\r\n}\r\n\r\n.custom-badge{\r\n    font-size: 12px;\r\n  width: fit-content;\r\n  border-radius: 10px; \r\n  padding: 4px 8px; \r\n}\r\n.custom-icon {\r\n    margin-right: 4px; \r\n    font-size: 10px;\r\n    width: 10px;\r\n    height: 10px;\r\n}\r\n\r\n\r\n.custom-badge.isNoSignal  {\r\n    background-color: #FCE7F3;\r\n} \r\n.custom-badge.isNoSignal .custom-icon {\r\n  color: #F472B6;\r\n}\r\n.custom-badge.isNoSignal .custom-text {\r\n  color: #DB2777; \r\n}\r\n\r\n\r\n.custom-badge.isClose {\r\n    background-color: #D1F5E9;\r\n}\r\n.custom-badge.isClose .custom-text{\r\n    color: #218372;\r\n}\r\n.custom-badge.isClose .custom-icon{\r\n    color: #32CDAC;\r\n}\r\n\r\n\r\n.custom-badge.isOpen,\r\n.custom-badge.isLowBattery {\r\n    background-color: #FEE2E2;\r\n}\r\n.custom-badge.isOpen .custom-text,\r\n.custom-badge.isLowBattery .custom-text{\r\n    color: #DC2626;\r\n}\r\n.custom-badge.isOpen .custom-icon,\r\n.custom-badge.isLowBattery .custom-icon{\r\n    color: #F87171;\r\n}\r\n\r\n\r\n.custom-badge.isInactive {\r\n    background-color: #DDE8FC;\r\n}\r\n.custom-badge.isInactive .custom-text{\r\n    color: #325DDE;\r\n}\r\n.custom-badge.isInactive .custom-icon{\r\n    color: #6A9DF0;\r\n}\r\n\r\n\r\n.custom-badge.isNotAssigned {\r\n    background-color: #F1F4F9;\r\n}\r\n.custom-badge.isNotAssigned .custom-text{\r\n    color: #475569;\r\n}\r\n.custom-badge.isNotAssigned .custom-icon{\r\n    color: #94A3B8;\r\n}\r\n\r\n\r\n.custom-badge.isNotAssigned {\r\n    background-color: #F1F4F9;\r\n}\r\n.custom-badge.isNotAssigned .custom-text{\r\n    color: #475569;\r\n}\r\n.custom-badge.isNotAssigned .custom-icon{\r\n    color: #94A3B8;\r\n}\r\n\r\n\r\n.custom-badge.isTemporaryDeactivated {\r\n    background-color: #FFEDD5;\r\n}\r\n.custom-badge.isTemporaryDeactivated .custom-text{\r\n    color: #EA580C;\r\n}\r\n.custom-badge.isTemporaryDeactivated .custom-icon{\r\n    color: #FB923C;\r\n}\r\n\r\n.entity-info {\r\n    margin: 3rem 0px;\r\n}\r\n\r\n.info-key {\r\n    font-size: 12px;\r\n    font-weight: bold;\r\n    margin-bottom: 4px;\r\n}\r\n\r\n.info-value {\r\n    font-size: 12px;\r\n}\r\n\r\nth.mat-header-cell:first-of-type, td.mat-cell:first-of-type, td.mat-footer-cell:first-of-type{ \r\n    padding-left: 0 !important;\r\n}\r\n\r\n.outlet-info-table-hydrant .mat-header-cell, \r\n.outlet-info-table-hydrant .mat-cell {\r\n    font-size: 12px;\r\n    width: 33% !important;\r\n}\r\n\r\n.outlet-info-table-hydrant .mat-header-cell {\r\n    font-weight: 600;\r\n    color: #000;\r\n}\r\n\r\n.outlet-info-table-hydrant .mat-cell {\r\n    font-weight: 400;\r\n}\r\n\r\n.action-button {\r\n    border-radius: 5px;\r\n    border: 3px #E2E8F0 solid;\r\n    font-family: var(--font-global) !important;\r\n    font-weight: bold;\r\n}\r\n\r\n.temporary-deactivation-section {\r\n    font-size: 12px;\r\n  margin-top: 2rem;\r\n  background-color: #FFF7ED;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.temporary-deactivation-section .section-title {\r\n  font-weight: 700;\r\n  font-size: 15px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.unconfirmed-alarms-section {\r\n    font-size: 12px;\r\n    margin-top: 2rem;\r\n    width: 100%;\r\n    background-color: #F8FAFC;\r\n    padding: 1rem;\r\n    color: #64748B;\r\n}\r\n\r\n.unconfirmed-alarms-section .bell-icon {\r\n  background-color: #CBD4E1;\r\n  color: #F8FAFC;\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-right: 1.5rem;\r\n}\r\n\r\n.unconfirmed-alarms-section button span {\r\n    color: #009FE3;\r\n    font-family: var(--font-global) !important;\r\n    font-weight: bold !important;\r\n}\r\n\r\n.status-cell {\r\n     white-space: pre-wrap;\r\n}\r\n\r\n.info-column-temp-deactivation {\r\n    white-space: pre-wrap;\r\n    word-wrap: break-word\r\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\r\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nlet deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\nlet http = $injector.get(widgetContext.servicesMap.get('http'));\r\n\r\nconst statusLabels = {\r\n    isOpen: getTranslation(\"hawle-dashboard.open\"),\r\n    isClose: getTranslation(\"hawle-dashboard.closed\"),\r\n    isLowBattery: getTranslation(\"hawle-dashboard.low-battery\"),\r\n    isNoSignal: getTranslation(\"hawle-dashboard.no-signal\"),\r\n    isInactive: getTranslation(\"hawle-dashboard.inactive\"),\r\n    isActive: getTranslation(\"hawle-dashboard.active\"),\r\n    isTemporaryDeactivated: getTranslation(\"hawle-dashboard.temporary-deactivated\"),\r\n    isNotAssigned: getTranslation(\"hawle-dashboard.not-assigned\"),\r\n    alarmOpen: getTranslation(\"hawle-dashboard.open\"),\r\n    alarmNoSignal: getTranslation(\"hawle-dashboard.no-signal\"),\r\n    alarmLowBattery: getTranslation(\"hawle-dashboard.low-battery\"),\r\n    alarmClose: getTranslation(\"hawle-dashboard.closed\"),\r\n    online: getTranslation(\"hawle-dashboard.online\")\r\n};\r\n\r\nconst eventTypes = {\r\n    alarmOpen:  getTranslation(\"hawle-dashboard.open\"),\r\n    alarmNoSignal:  getTranslation(\"hawle-dashboard.no-signal\"),\r\n    alarmLowBattery: getTranslation(\"hawle-dashboard.low-battery\"),\r\n    alarmClose: getTranslation(\"hawle-dashboard.closed\"),\r\n}\r\n\r\nconst statusPriorities = {\r\n    isTemporaryDeactivated: 0,\r\n    isOpen: 1,\r\n    isInactive: 2, \r\n    isLowBattery: 3,\r\n    isNoSignal: 4,\r\n    isNotAssigned: 5,\r\n    isClose: 6,\r\n    isOnline: 7\r\n}\r\n\r\nconst entitiesQueryBody = {\r\n  entityFilter: {\r\n    type: \"singleEntity\",\r\n    singleEntity: {\r\n        id: entityId.id,\r\n        entityType: \"ASSET\"\r\n      }\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\",\r\n    },\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"label\",\r\n    },\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"additionalInfo\",\r\n    }\r\n  ],\r\n  latestValues: [\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"modelNumber\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"hydrantsBrand\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"storzCount\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"longitude\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"latitude\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"country\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"state\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"city\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"zip\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"street\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"zone\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isOpen\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isClose\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isNoSignal\",\r\n    },\r\n/*    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isActive\",\r\n    },*/\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isInactive\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isTemporaryDeactivated\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isNotAssigned\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isLowBattery\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmOpen\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmLowBattery\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmNoSignal\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmClose\",\r\n    }\r\n  ],\r\n pageLink: {\r\n    page: 0,\r\n    pageSize: 10,\r\n    sortOrder: {\r\n      key: {\r\n        key: \"name\",\r\n        type: \"ENTITY_FIELD\",\r\n      },\r\n      direction: \"ASC\",\r\n    },\r\n  },\r\n};\r\n\r\nconst relationsQueryStorz = { \r\n    entityFilter: {\r\n      type: \"relationsQuery\",\r\n      rootEntity: {\r\n        entityType: \"ASSET\",\r\n        id: entityId.id\r\n      },\r\n      direction: \"FROM\",\r\n      maxLevel: 1,\r\n      fetchLastLevelOnly: true,\r\n      filters: [\r\n        {\r\n          relationType: \"Contains\",\r\n          entityTypes: [\r\n            \"ASSET\"\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    entityFields: [\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"name\",\r\n        },\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"label\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"storzNumber\",\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"exitDiameter\",\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"exitName\",\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"assignedDStorz\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n          key: {\r\n            key: \"name\",\r\n            type: \"ENTITY_FIELD\",\r\n          },\r\n          direction: \"ASC\",\r\n    }\r\n  }\r\n};\r\n\r\n\r\nconst relationsQueryDStorz = { \r\n    entityFilter: {\r\n      type: \"relationsQuery\",\r\n      rootEntity: {\r\n        entityType: \"ASSET\",\r\n        id: entityId.id\r\n      },\r\n      direction: \"FROM\",\r\n      maxLevel: 2,\r\n      fetchLastLevelOnly: true,\r\n      filters: [\r\n        {\r\n          relationType: \"Contains\",\r\n          entityTypes: [\r\n            \"DEVICE\"\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    entityFields: [\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"serialNumber\",\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"exitDiameter\",\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"exitName\",\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"storzNumber\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isOpen\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isNoSignal\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isInactive\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isTemporaryDeactivated\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isNotAssigned\",\r\n        },\r\n        {\r\n          type: \"TIME_SERIES\",\r\n          key: \"isLowBattery\",\r\n        },\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n          key: {\r\n            key: \"name\",\r\n            type: \"ENTITY_FIELD\",\r\n          },\r\n          direction: \"ASC\",\r\n    }\r\n  }\r\n};\r\n\r\nconst relationsQueryZone = { \r\n    entityFilter: {\r\n      type: \"relationsQuery\",\r\n      rootEntity: {\r\n        entityType: \"ASSET\",\r\n        id: entityId.id\r\n      },\r\n      direction: \"TO\",\r\n      maxLevel: 1,\r\n      fetchLastLevelOnly: true,\r\n      filters: [\r\n        {\r\n          relationType: \"Contains\",\r\n          entityTypes: [\r\n            \"ASSET\"\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    entityFields: [\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"latitude\",\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"longitude\",\r\n        },\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n          key: {\r\n            key: \"name\",\r\n            type: \"ENTITY_FIELD\",\r\n          },\r\n          direction: \"ASC\",\r\n    }\r\n  }\r\n};\r\n\r\n\r\nconst relatedTempDeactivationQuery = { \r\n    entityFilter: {\r\n      type: \"relationsQuery\",\r\n      rootEntity: {\r\n        entityType: \"ASSET\",\r\n        id: entityId.id\r\n      },\r\n      direction: \"TO\",\r\n      maxLevel: 1,\r\n      fetchLastLevelOnly: true,\r\n      filters: [\r\n        {\r\n          relationType: \"Muted\",\r\n          entityTypes: [\r\n            \"ASSET\"\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    entityFields: [\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"name\",\r\n        },\r\n        {\r\n          type: \"ENTITY_FIELD\",\r\n          key: \"type\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"description\"\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"temporaryDeactivation\"\r\n        },\r\n        {\r\n          type: \"ATTRIBUTE\",\r\n          key: \"createdBy\"\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n          key: {\r\n            key: \"name\",\r\n            type: \"ENTITY_FIELD\",\r\n          },\r\n          direction: \"ASC\",\r\n    }\r\n  }\r\n};\r\n\r\nconst relatedDStorzQuery = {\r\n  filters: [\r\n    {\r\n      relationType: \"Contains\",\r\n      entityTypes: [\r\n        \"ASSET\",\r\n        \"DEVICE\"\r\n      ]\r\n    }\r\n  ],\r\n  parameters: {\r\n    rootId: entityId.id,\r\n    rootType: \"ASSET\",\r\n    direction: \"FROM\",\r\n    relationTypeGroup: \"COMMON\",\r\n    maxLevel: 2,\r\n    fetchLastLevelOnly: false\r\n  }\r\n};\r\n\r\n\r\nfunction isTrue(value) {\r\n    return value !== undefined && value !== null && (value === 'true' || value === true || value === 1 | value === '1');\r\n}\r\n\r\n\r\nfunction readTelemetryValue(telemetryName) {\r\n    if (telemetryName && telemetryName.value && telemetryName.value !== undefined) {\r\n        return isTrue(telemetryName.value);\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n\r\nfunction unixToHumanReadable(unixTimestamp) {\r\n  if (isNaN(Number(unixTimestamp))) {\r\n    return 'Invalid Timestamp';\r\n  }\r\n\r\n  // Convert to a number if it's a string\r\n  unixTimestamp = Number(unixTimestamp);\r\n  \r\n  if (String(unixTimestamp).length <= 10) {\r\n    unixTimestamp *= 1000;  // Convert to milliseconds\r\n  }\r\n  // Create a new Date object\r\n  const date = new Date(unixTimestamp);\r\n  \r\n  // Formatting the date and time\r\n  const year = date.getFullYear();\r\n  const month = date.toLocaleString('default', { month: 'short' }); // Get the short name of the month\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  const hours = String(date.getHours()).padStart(2, '0');\r\n  const minutes = String(date.getMinutes()).padStart(2, '0');\r\n\r\n  // Combine into a human-readable string\r\n  const humanReadableDate = ` ${day} ${month} ${year} | ${hours}:${minutes}`;\r\n\r\n  return humanReadableDate;\r\n}\r\n\r\nfunction sortByExitProperty(array) {\r\n  return array.sort((a, b) => {\r\n    const exitA = a.outlet.toUpperCase(); // Convert to uppercase for case-insensitive sorting\r\n    const exitB = b.outlet.toUpperCase();\r\n\r\n    if (exitA < exitB) {\r\n      return -1;\r\n    }\r\n    if (exitA > exitB) {\r\n      return 1;\r\n    }\r\n    return 0;\r\n  });\r\n}\r\n\r\nfunction mapAssetsToDevice(response) {\r\n    const assetDeviceMapping = [];\r\n\r\n    for (const relation of response) {\r\n        if (relation.from.entityType === \"ASSET\" && relation.to.entityType === \"DEVICE\") {\r\n            assetDeviceMapping.push({\r\n                fromId: relation.from.id,\r\n                toId: relation.to.id,\r\n                name: relation.toName\r\n            });\r\n        }\r\n    }\r\n\r\n    return assetDeviceMapping;\r\n}\r\n\r\nfunction matchDStorzMappingWithStorz(mappedDStorzArray, storzArray) {\r\n    return mappedDStorzArray.map(mappedItem => {\r\n        const matchingData = storzArray.find(dataItem => dataItem.entityId.id === mappedItem.fromId);\r\n        \r\n        if (matchingData) {\r\n            return {\r\n                ...mappedItem,\r\n                latest: matchingData.latest\r\n            };\r\n        } else {\r\n            return mappedItem;\r\n        }\r\n    });\r\n}\r\n\r\nfunction matchDStorzMappingWithStorz(mappedDStorz, storzArray) {\r\n    const matchingData = storzArray.find(dataItem => dataItem.entityId.id === mappedDStorz.fromId);\r\n    \r\n    if (matchingData) {\r\n        return {\r\n            ...mappedDStorz,\r\n            latest: matchingData.latest\r\n        };\r\n    } else {\r\n        return mappedDStorz;\r\n    }\r\n}\r\n\r\n\r\nopenSideNavDrawer();\r\n\r\nfunction openSideNavDrawer() {\r\n    customDialog.customDialog(htmlTemplate,\r\n        popupDialogController).subscribe();\r\n        setTimeout(function() {\r\n            document.getElementById(\"popup-dialog\").classList.remove(\"closed\");\r\n        }, 10);\r\n}\r\n\r\n\r\n function getTranslation(translationText, extraParam = null) {\r\n        translateService = $injector.get(widgetContext.servicesMap.get('translate'));\r\n        let translated = \"\";\r\n        try {\r\n            translated = translateService.instant(translationText, extraParam);\r\n    \r\n        } catch (error) {\r\n    \r\n        }\r\n        return translated;\r\n    }\r\n\r\n\r\nfunction extractNumber(str) {\r\n    const match = str.match(/\\d+/);\r\n    return match ? parseInt(match[0]) : 0;\r\n}\r\n\r\nfunction findLatestState(timeseriesOfCurrentEntity, telemetryKeys ) {\r\n    let latestTelemetry = { telemetryKeyName: \"\",  ts: 0, label: \"\", priority: 100};\r\n    for (let j = 0; j < telemetryKeys.length; ++j) {\r\n        let telemetryKey = telemetryKeys[j];\r\n        const inactiveDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isInactive\", priority: statusPriorities.isInactive, label: statusLabels.isInactive };\r\n        const lowBatteryDescriptor = { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isLowBattery\", priority: statusPriorities.isLowBattery, label: statusLabels.isLowBattery };\r\n        const temporaryDeactivationDescriptor = { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isTemporaryDeactivated\", priority: statusPriorities.isTemporaryDeactivated, label: statusLabels.isTemporaryDeactivated };\r\n        const noSignalDescriptor = { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isNoSignal\", priority: statusPriorities.isNoSignal, label: statusLabels.isNoSignal };\r\n        const notAssignedDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isNotAssigned\", priority: statusPriorities.isNotAssigned };\r\n        const openDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isOpen\", priority: statusPriorities.isOpen, label: statusLabels.isOpen };\r\n        const closedDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isClose\", priority: statusPriorities.isClose, label: statusLabels.isClose };\r\n\r\n        if (timeseriesOfCurrentEntity[telemetryKey].ts > latestTelemetry.ts && timeseriesOfCurrentEntity[telemetryKey].ts > 0 ) {\r\n            if(telemetryKey == \"isInactive\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n                latestTelemetry = inactiveDescriptor;\r\n            }\r\n            else if(telemetryKey == \"isLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n                latestTelemetry = lowBatteryDescriptor;\r\n            }\r\n            else if(telemetryKey == \"isTemporaryDeactivated\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n                latestTelemetry = temporaryDeactivationDescriptor;\r\n            }\r\n            else if(telemetryKey == \"isNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n                latestTelemetry = noSignalDescriptor;\r\n            }\r\n            else if(telemetryKey == \"isNotAssigned\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n                latestTelemetry = notAssignedDescriptor;\r\n            }\r\n            else if(telemetryKey == \"isOpen\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n                latestTelemetry = openDescriptor;\r\n            } else if(telemetryKey == \"isClose\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n                latestTelemetry = closedDescriptor;\r\n            }\r\n        }\r\n        else if (timeseriesOfCurrentEntity[telemetryKey].ts == latestTelemetry.ts && timeseriesOfCurrentEntity[telemetryKey].ts > 0 ) {\r\n            if(telemetryKey == \"isInactive\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isInactive < latestTelemetry.priority) {\r\n                latestTelemetry = inactiveDescriptor;\r\n            }\r\n            else if(telemetryKey == \"isLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isLowBattery < latestTelemetry.priority ) {\r\n                latestTelemetry = lowBatteryDescriptor;\r\n            }\r\n            else if(telemetryKey == \"isTemporaryDeactivated\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isTemporaryDeactivated < latestTelemetry.priority ) {\r\n                latestTelemetry = temporaryDeactivationDescriptor;\r\n            }\r\n            else if(telemetryKey == \"isNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isNoSignal < latestTelemetry.priority ) {\r\n                latestTelemetry = noSignalDescriptor;\r\n            }\r\n            else if(telemetryKey == \"isNotAssigned\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isNotAssigned < latestTelemetry.priority ) {\r\n                latestTelemetry = notAssignedDescriptor;\r\n            }\r\n            else if(telemetryKey == \"isOpen\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isOpen < latestTelemetry.priority ) {\r\n                latestTelemetry = openDescriptor;\r\n            } else if(telemetryKey == \"isClose\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isClose < latestTelemetry.priority) {\r\n                latestTelemetry = closedDescriptor;\r\n            }\r\n        }\r\n    }\r\n    return latestTelemetry;\r\n}\r\n\r\nfunction popupDialogController(instance) {\r\n    let vm = instance;\r\n    \r\n    var urlEntitiesQuery = `/api/entitiesQuery/find`;\r\n\r\n    http.post(urlEntitiesQuery, entitiesQueryBody).pipe().subscribe((entity) => {\r\n        vm.currentEntity = entity.data[0];\r\n        const telemetryKeys = entitiesQueryBody.latestValues\r\n                            .filter(item => item.type === \"TIME_SERIES\")\r\n                            .map(item => item.key);\r\n        const statusTelemetryKeys = telemetryKeys.filter(item => item.startsWith(\"is\"));\r\n        \r\n       let timeseriesOfCurrentEntity = vm.currentEntity.latest.TIME_SERIES;\r\n        let latestTelemetry = findLatestState(timeseriesOfCurrentEntity, statusTelemetryKeys);\r\n        vm.statusId = latestTelemetry.status ? latestTelemetry.status : \"isNotAssigned\";\r\n        vm.statusBadge = statusLabels[vm.statusId];\r\n        \r\n        document.getElementById(\"status-badge\").classList.add(vm.statusId);\r\n        \r\n        vm.alarmActive =    vm.currentEntity.latest.TIME_SERIES.alarmOpen || \r\n                            vm.currentEntity.latest.TIME_SERIES.alarmLowBattery || \r\n                            vm.currentEntity.latest.TIME_SERIES.alarmNoSignal   ?  \r\n                                isTrue(vm.currentEntity.latest.TIME_SERIES.alarmOpen?.value) ||\r\n                                isTrue(vm.currentEntity.latest.TIME_SERIES.alarmLowBattery?.value) ||\r\n                                isTrue(vm.currentEntity.latest.TIME_SERIES.alarmNoSignal?.value)\r\n                                : false;                     \r\n        vm.modelNumber = vm.currentEntity.latest.ATTRIBUTE.modelNumber ? vm.currentEntity.latest.ATTRIBUTE.modelNumber.value : \"--\";\r\n        \r\n        const streetValue = vm.currentEntity.latest.ATTRIBUTE.street.value || '';\r\n        const cityValue = vm.currentEntity.latest.ATTRIBUTE.city.value || '';\r\n        const zipValue = vm.currentEntity.latest.ATTRIBUTE.zip.value || '';\r\n        const countryValue = vm.currentEntity.latest.ATTRIBUTE.country.value || '';\r\n        const stateValue = vm.currentEntity.latest.ATTRIBUTE.state.value || '';\r\n\r\n        vm.address = `${streetValue}${streetValue && (cityValue || zipValue) ? ', ' : ''}${cityValue}${cityValue && zipValue ? ' ' : ''}${zipValue}`;\r\n        if(vm.address.length == 0) {\r\n             vm.address = \"--\";\r\n        }\r\n        vm.country = `${countryValue}${countryValue && stateValue ? ', ' : ''}${stateValue}`;\r\n        vm.zone = vm.currentEntity.latest.ATTRIBUTE.zone.value ? vm.currentEntity.latest.ATTRIBUTE.zone.value : \"--\" ;\r\n        vm.hydrantsBrand = vm.currentEntity.latest.ATTRIBUTE.hydrantsBrand ? vm.currentEntity.latest.ATTRIBUTE.hydrantsBrand.value : \"--\";\r\n        \r\n        vm.navigateToMap = function() {\r\n            const longitude = vm.currentEntity.latest.ATTRIBUTE.longitude.value;\r\n            const latitude = vm.currentEntity.latest.ATTRIBUTE.latitude.value;\r\n            const zoomLevel = 10;\r\n            const googleMapUrl = `https://www.google.com/maps/search/?api=1&query=${latitude},${longitude}&zoom=${zoomLevel}`;\r\n    \r\n            window.open(googleMapUrl, '_blank');\r\n        }\r\n        if(vm.statusId  == 'isTemporaryDeactivated') {\r\n            http.post(urlEntitiesQuery, relatedTempDeactivationQuery).pipe().subscribe((tempDeactivationEntity) => {\r\n                if(tempDeactivationEntity.data.length) {\r\n                    let tempDeactivationObject = tempDeactivationEntity.data[0];\r\n                    let tempDeactivationDetails = JSON.parse(tempDeactivationObject.latest.ATTRIBUTE.temporaryDeactivation.value);\r\n                    vm.tempDeactivationReason = tempDeactivationObject.latest.ATTRIBUTE.description.value;\r\n                    let notificationMuteStartDate = tempDeactivationDetails.deactivationState.fromDate;\r\n                    let notificationMuteEndDate = tempDeactivationDetails.deactivationState.toDate;\r\n                    vm.notificationMuteStartDateFormatted = unixToHumanReadable(notificationMuteStartDate);\r\n                    vm.notificationMuteEndDateFormatted = unixToHumanReadable(notificationMuteEndDate);\r\n                    vm.createdBy = tempDeactivationObject.latest.ATTRIBUTE.createdBy.value;\r\n                    \r\n                    let enabledEvents = [];\r\n                    if(tempDeactivationDetails.eventType.alarmLowBattery) {\r\n                        enabledEvents.push(eventTypes.alarmLowBattery);\r\n                    }\r\n                    if(tempDeactivationDetails.eventType.alarmOpen) {\r\n                        enabledEvents.push(eventTypes.alarmOpen);\r\n                    }\r\n                    if(tempDeactivationDetails.eventType.alarmNoSignal) {\r\n                        enabledEvents.push(eventTypes.alarmNoSignal);\r\n                    }\r\n                    if(tempDeactivationDetails.eventType.alarmClose) {\r\n                        enabledEvents.push(eventTypes.alarmClose);\r\n                    }\r\n                    vm.eventType = enabledEvents.join(', ');\r\n                }\r\n            })\r\n        }\r\n        \r\n            vm.displayedColumns = ['outlet', 'assigned', 'status'];\r\n\r\n    http.post(urlEntitiesQuery, relationsQueryStorz).pipe().subscribe((result) => {\r\n        let relatedEntities = result.data;\r\n        vm.outletDataSource = [];\r\n        let emptyRow = { outlet: '--', assigned: '--', status: '--', assignedSerialNumber: '--' }\r\n        if(vm.currentEntity?.latest.ATTRIBUTE.storzCount.value) {\r\n            vm.outletDataSource = Array.from({ length: vm.currentEntity.latest.ATTRIBUTE.storzCount.value }, () => emptyRow);\r\n        } else {\r\n             vm.outletDataSource = Array.from({ length: 3 }, () => emptyRow);\r\n        }\r\n        \r\n        http.post('/api/relations/info', relatedDStorzQuery).pipe().subscribe((dStorzRelationResult) => {\r\n            let queryPromises = [];\r\n            let DStorzIds = dStorzRelationResult\r\n                            .filter(relation => relation.to.entityType == \"DEVICE\")\r\n                            .map(relation => relation.to.id);\r\n            let mappedDStorz = mapAssetsToDevice(dStorzRelationResult);\r\n\r\n            for(let i=0 ; i < DStorzIds.length ; i++) {\r\n                let dStorzId = DStorzIds[i];\r\n                   let currentDStorz = mappedDStorz.find(dStorz => dStorz.toId == dStorzId);\r\n                   let currentRelatedEntity = matchDStorzMappingWithStorz(currentDStorz, relatedEntities);\r\n                   let exitName = currentRelatedEntity.latest.ATTRIBUTE.exitName.value ? currentRelatedEntity.latest.ATTRIBUTE.exitName.value : \"--\";\r\n                   let exitDiameter = currentRelatedEntity.latest.ATTRIBUTE.exitDiameter.value ? currentRelatedEntity.latest.ATTRIBUTE.exitDiameter.value : \"--\";\r\n                   let dStorzName =  currentRelatedEntity.latest.ATTRIBUTE.serialNumber ? currentRelatedEntity.latest.ATTRIBUTE.serialNumber.value : currentRelatedEntity.name;\r\n             //       let dStorzName = currentRelatedEntity.name;\r\n                   vm.outletDataSource[i] = {\r\n                        dStorzId: dStorzId,\r\n                        outlet: `${exitName}, ${exitDiameter} mm` ,\r\n                        assigned: dStorzName,\r\n                        assignedSerialNumber: \"--\",\r\n                        status: \"--\",\r\n                   }\r\n            }\r\n            http.post(urlEntitiesQuery, relationsQueryDStorz).pipe().subscribe((dStorzResult) => {\r\n                let relatedDStorzes = dStorzResult.data;\r\n                for(let i=0 ; i < relatedDStorzes.length ; i++) {\r\n                    const currentDStorzInDataSource = vm.outletDataSource.find(dataItem => relatedDStorzes[i].entityId.id === dataItem.dStorzId);\r\n                    let timeseriesOfCurrentEntity = relatedDStorzes[i].latest.TIME_SERIES;\r\n                    const telemetryKeys = Object.keys(relatedDStorzes[i].latest.TIME_SERIES);\r\n                    let latestTelemetry = findLatestState(timeseriesOfCurrentEntity, telemetryKeys);\r\n                    currentDStorzInDataSource[\"assignedSerialNumber\"] = relatedDStorzes[i].latest.ATTRIBUTE.serialNumber.value ? relatedDStorzes[i].latest.ATTRIBUTE.serialNumber.value : \"--\";\r\n                    if(latestTelemetry.ts == 0) {\r\n                        currentDStorzInDataSource[\"status\"] = \"--\";\r\n                    } else {\r\n                        currentDStorzInDataSource[\"status\"] = `${latestTelemetry.label}\\n${unixToHumanReadable(latestTelemetry.ts)}`;\r\n                    }\r\n                }\r\n                //to show the exit numbers in order\r\n\r\n                const sortedDatasource = [];\r\n                let expectedOutlets = [];\r\n                if(vm.currentEntity.latest.ATTRIBUTE.storzCount.value == 2) {\r\n                    expectedOutlets = ['Exit 1', 'Exit 2'];\r\n                } else {\r\n                    expectedOutlets = ['Exit 1', 'Exit 2', 'Exit 3'];\r\n                }\r\n               \r\n                expectedOutlets.forEach(exit => {\r\n                    const matchingEntry = vm.outletDataSource.find(entry => entry.outlet.includes(exit));\r\n                    if (matchingEntry) {\r\n                        sortedDatasource.push(matchingEntry);\r\n                    } else {\r\n                        sortedDatasource.push({ outlet: '--', assigned: '--', status: '--' , assignedSerialNumber: '--' });\r\n                    }\r\n                });\r\n                vm.outletDataSource = sortedDatasource;\r\n                    \r\n                vm.dStorzDataReady = true;\r\n            })\r\n\r\n        })\r\n    \r\n    })\r\n    \r\n     vm.cancel = function() {\r\n        document.getElementById(\"popup-dialog\").classList.add(\"closed\");\r\n        vm.dialogRef.close(null);\r\n    };\r\n    \r\n    });\r\n    \r\n      \r\n  vm.setAllTranslations = function() {\r\n      vm.dialogTitle = getTranslation(\"hawle-dashboard.hydrant.hydrant-info\");\r\n      vm.hydrantNumber = getTranslation(\"hawle-dashboard.hydrant.hydrant-number\");\r\n      vm.brand = getTranslation(\"hawle-dashboard.hydrant.brand\");\r\n      vm.model = getTranslation(\"hawle-dashboard.hydrant.model\");\r\n      vm.temporaryDeactivation = getTranslation(\"hawle-dashboard.temporary-deactivation\");\r\n      vm.outletInformation = getTranslation(\"hawle-dashboard.hydrant.outlet-information\");\r\n      vm.reason = getTranslation(\"hawle-dashboard.reason\");\r\n      vm.time = getTranslation(\"hawle-dashboard.time\");\r\n      vm.createdByLabel = getTranslation(\"hawle-dashboard.created-by\");\r\n      vm.assignedDStorz = getTranslation(\"hawle-dashboard.hydrant.assigned-dstorz\");\r\n      vm.statusTimestamp = getTranslation(\"hawle-dashboard.hydrant.status-timestamp\");\r\n      vm.routeTo = getTranslation(\"hawle-dashboard.hydrant.route-to\");\r\n      vm.locationLabel = getTranslation(\"hawle-dashboard.location\");\r\n      vm.zoneLabel = getTranslation(\"hawle-dashboard.zone\");\r\n      vm.unconfirmedAlarms = getTranslation(\"hawle-dashboard.hydrant.unconfirmed-alarms\", {alarmCount: 10});\r\n      vm.temporaryDeactivationInfo = getTranslation(\"hawle-dashboard.temporary-deactivation-info\");\r\n      vm.eventTypeLabel = getTranslation(\"hawle-dashboard.event-type\");\r\n      vm.viewAlarms = getTranslation(\"hawle-dashboard.alarm.view-alarms\");\r\n    };\r\n           \r\n    vm.setAllTranslations();\r\n      \r\n\r\n}\r\n",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "9c085eec-2ab8-3d7e-55df-3f0e647f1df0"
              }
            ]
          },
          "showTitleIcon": false,
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "a549e8da-5b5a-eb58-1206-ff491ea9aec8"
      },
      "f80aeac6-e8c5-1a09-9cb0-c5f007706c6a": {
        "isSystemType": true,
        "bundleAlias": "maps_v2",
        "typeAlias": "google_maps",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 8.5,
        "sizeY": 6,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "793b3a27-c500-48ae-d75c-383cda3397a8",
              "filterId": "8ab15e25-053b-a74e-8266-2fa26c703042",
              "dataKeys": [
                {
                  "name": "latitude",
                  "type": "attribute",
                  "label": "latitude",
                  "color": "#ffc107",
                  "settings": {},
                  "_hash": 0.4911517022667551
                },
                {
                  "name": "longitude",
                  "type": "attribute",
                  "label": "longitude",
                  "color": "#607d8b",
                  "settings": {},
                  "_hash": 0.9277459993096029
                },
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#9c27b0",
                  "settings": {},
                  "_hash": 0.8262807446221214
                },
                {
                  "name": "alarmOpen",
                  "type": "timeseries",
                  "label": "alarmOpen",
                  "color": "#607d8b",
                  "settings": {},
                  "_hash": 0.30251815727393083
                },
                {
                  "name": "modelNumber",
                  "type": "attribute",
                  "label": "modelNumber",
                  "color": "#8bc34a",
                  "settings": {},
                  "_hash": 0.19199934594264367
                },
                {
                  "name": "alarmLowBattery",
                  "type": "timeseries",
                  "label": "alarmLowBattery",
                  "color": "#2962ff",
                  "settings": {},
                  "_hash": 0.8498102951587096,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "alarmNoSignal",
                  "type": "timeseries",
                  "label": "alarmNoSignal",
                  "color": "#ff5722",
                  "settings": {},
                  "_hash": 0.5559022959514557,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            },
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "793b3a27-c500-48ae-d75c-383cda3397a8",
              "filterId": "b81fa118-cf4f-587a-98f0-127bfba72cb1",
              "dataKeys": [
                {
                  "name": "alarmLowBattery",
                  "type": "timeseries",
                  "label": "alarmLowBattery",
                  "color": "#ffeb3b",
                  "settings": {},
                  "_hash": 0.23227707699924238
                },
                {
                  "name": "modelNumber",
                  "type": "attribute",
                  "label": "modelNumber",
                  "color": "#ff9800",
                  "settings": {},
                  "_hash": 0.8989430675724119,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "latitude",
                  "type": "attribute",
                  "label": "latitude",
                  "color": "#673ab7",
                  "settings": {},
                  "_hash": 0.017027883421429024,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "longitude",
                  "type": "attribute",
                  "label": "longitude",
                  "color": "#cddc39",
                  "settings": {},
                  "_hash": 0.18842039363325735,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#009688",
                  "settings": {},
                  "_hash": 0.1615424292347416,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "alarmNoSignal",
                  "type": "timeseries",
                  "label": "alarmNoSignal",
                  "color": "#9e9e9e",
                  "settings": {},
                  "_hash": 0.18620982232892347,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "alarmOpen",
                  "type": "timeseries",
                  "label": "alarmOpen",
                  "color": "#00c853",
                  "settings": {},
                  "_hash": 0.5459742347648497,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            },
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "793b3a27-c500-48ae-d75c-383cda3397a8",
              "filterId": "2374dcb2-ca2b-f398-aa6b-67f4ee4c4c21",
              "dataKeys": [
                {
                  "name": "alarmLowBattery",
                  "type": "timeseries",
                  "label": "alarmLowBattery",
                  "color": "#00bcd4",
                  "settings": {},
                  "_hash": 0.22346682122170813,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "alarmNoSignal",
                  "type": "timeseries",
                  "label": "alarmNoSignal",
                  "color": "#9e9e9e",
                  "settings": {},
                  "_hash": 0.35203894582393747
                },
                {
                  "name": "longitude",
                  "type": "attribute",
                  "label": "longitude",
                  "color": "#ff5722",
                  "settings": {},
                  "_hash": 0.8915229106787024,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "latitude",
                  "type": "attribute",
                  "label": "latitude",
                  "color": "#9e9e9e",
                  "settings": {},
                  "_hash": 0.003675425740161886,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2962ff",
                  "settings": {},
                  "_hash": 0.29733868354394244,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "modelNumber",
                  "type": "attribute",
                  "label": "modelNumber",
                  "color": "#2962ff",
                  "settings": {},
                  "_hash": 0.6293600713600505,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "alarmOpen",
                  "type": "timeseries",
                  "label": "alarmOpen",
                  "color": "#2962ff",
                  "settings": {},
                  "_hash": 0.44159970474734545,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                }
              ]
            },
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "793b3a27-c500-48ae-d75c-383cda3397a8",
              "filterId": "7a2d47fb-ad76-ece8-36f2-053945031378",
              "dataKeys": [
                {
                  "name": "longitude",
                  "type": "attribute",
                  "label": "longitude",
                  "color": "#d50000",
                  "settings": {},
                  "_hash": 0.028081457153158906,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "latitude",
                  "type": "attribute",
                  "label": "latitude",
                  "color": "#ffab00",
                  "settings": {},
                  "_hash": 0.9968403302062405,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#455a64",
                  "settings": {},
                  "_hash": 0.2848642696264141,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "modelNumber",
                  "type": "attribute",
                  "label": "modelNumber",
                  "color": "#aa00ff",
                  "settings": {},
                  "_hash": 0.3165862443122538,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "alarmClose",
                  "type": "timeseries",
                  "label": "alarmClose",
                  "color": "#64dd17",
                  "settings": {},
                  "_hash": 0.6523211892228971
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "#fff",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "provider": "google-map",
            "gmApiKey": "AIzaSyDE07XHeCdHUJci4OLOcRHGJZyAQc8SYUc",
            "gmDefaultMapType": "roadmap",
            "mapProvider": "OpenStreetMap.Mapnik",
            "useCustomProvider": false,
            "customProviderTileUrl": "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
            "mapProviderHere": "HERE.normalDay",
            "credentials": {
              "app_id": "AhM6TzD9ThyK78CT3ptx",
              "app_code": "p6NPiITB3Vv0GMUFnkLOOg"
            },
            "mapImageUrl": "data:image/svg+xml;base64,PHN2ZyBpZD0ic3ZnMiIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTAwIiB3aWR0aD0iMTAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogPGcgaWQ9ImxheWVyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtOTUyLjM2KSI+CiAgPHJlY3QgaWQ9InJlY3Q0Njg0IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBoZWlnaHQ9Ijk5LjAxIiB3aWR0aD0iOTkuMDEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB5PSI5NTIuODYiIHg9Ii40OTUwNSIgc3Ryb2tlLXdpZHRoPSIuOTkwMTAiIGZpbGw9IiNlZWUiLz4KICA8dGV4dCBpZD0idGV4dDQ2ODYiIHN0eWxlPSJ3b3JkLXNwYWNpbmc6MHB4O2xldHRlci1zcGFjaW5nOjBweDt0ZXh0LWFuY2hvcjptaWRkbGU7dGV4dC1hbGlnbjpjZW50ZXIiIGZvbnQtd2VpZ2h0PSJib2xkIiB4bWw6c3BhY2U9InByZXNlcnZlIiBmb250LXNpemU9IjEwcHgiIGxpbmUtaGVpZ2h0PSIxMjUlIiB5PSI5NzAuNzI4MDkiIHg9IjQ5LjM5NjQ3NyIgZm9udC1mYW1pbHk9IlJvYm90byIgZmlsbD0iIzY2NjY2NiI+PHRzcGFuIGlkPSJ0c3BhbjQ2OTAiIHg9IjUwLjY0NjQ3NyIgeT0iOTcwLjcyODA5Ij5JbWFnZSBiYWNrZ3JvdW5kIDwvdHNwYW4+PHRzcGFuIGlkPSJ0c3BhbjQ2OTIiIHg9IjQ5LjM5NjQ3NyIgeT0iOTgzLjIyODA5Ij5pcyBub3QgY29uZmlndXJlZDwvdHNwYW4+PC90ZXh0PgogIDxyZWN0IGlkPSJyZWN0NDY5NCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgaGVpZ2h0PSIxOS4zNiIgd2lkdGg9IjY5LjM2IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgeT0iOTkyLjY4IiB4PSIxNS4zMiIgc3Ryb2tlLXdpZHRoPSIuNjM5ODYiIGZpbGw9Im5vbmUiLz4KIDwvZz4KPC9zdmc+Cg==",
            "tmApiKey": "84d6d83e0e51e481e50454ccbe8986b",
            "tmDefaultMapType": "roadmap",
            "latKeyName": "latitude",
            "lngKeyName": "longitude",
            "xPosKeyName": "xPos",
            "yPosKeyName": "yPos",
            "defaultZoomLevel": 8,
            "defaultCenterPosition": "46.8182,8.2275",
            "disableScrollZooming": false,
            "disableDoubleClickZooming": false,
            "disableZoomControl": false,
            "fitMapBounds": true,
            "useDefaultCenterPosition": false,
            "mapPageSize": 16384,
            "markerOffsetX": 0.5,
            "markerOffsetY": 1,
            "posFunction": "return {x: origXPos, y: origYPos};",
            "draggableMarker": false,
            "showLabel": false,
            "useLabelFunction": false,
            "label": "${entityName}",
            "showTooltip": false,
            "showTooltipAction": "click",
            "autocloseTooltip": true,
            "useTooltipFunction": false,
            "tooltipPattern": "<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}",
            "tooltipOffsetX": 0,
            "tooltipOffsetY": -1,
            "color": "#fe7568",
            "useColorFunction": true,
            "colorFunction": "var type = dsData[dsIndex]['Type'];\nif (type == 'colorpin') {\n\tvar temperature = dsData[dsIndex]['temperature'];\n\tif (typeof temperature !== undefined) {\n\t    var percent = (temperature + 60)/120 * 100;\n\t    return tinycolor.mix('blue', 'red', percent).toHexString();\n\t}\n\treturn 'blue';\n}\n",
            "useMarkerImageFunction": true,
            "markerImageSize": 34,
            "markerImageFunction": "var telemetryKeys = [\n    \"alarmLowBattery\",\n    \"alarmOpen\",\n    \"alarmNoSignal\",\n    \"alarmClose\"\n];\n\nconst alarmPriorities = {\n    alarmOpen: 0,\n    alarmLowBattery: 1,\n    alarmNoSignal: 2,\n    alarmClose: 3\n}\n\nfunction isTrue(value) {\n    return value !== undefined && value !== null && (value === 'true' || value === true || value === 1 | value === '1');\n}\n\n\nfunction readTelemetryValue(telemetryName) {\n    if (dsData && dsData[dsIndex] && dsData[dsIndex][telemetryName] !== undefined) {\n        return isTrue(dsData[dsIndex][telemetryName]);\n    } else {\n        return false;\n    }\n}\n\nfunction findLatestAlarmState(timeseriesOfCurrentEntity, alarmTelemetryKeys ) {\n    let latestTelemetry = { name: \"\", ts: 0, status: null, priority: 100 };\n    for (let i = 0; i < alarmTelemetryKeys.length; ++i) {\n      let telemetry = alarmTelemetryKeys[i];\n      let telemetryKey = telemetryKeys[i];\n      let tsKey = telemetryKey + \"|ts\";\n      const alarmOpenDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[tsKey], status: \"alarmOpen\", priority: alarmPriorities.alarmOpen };\n      const alarmLowBatteryDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[tsKey], status: \"alarmLowBattery\", priority: alarmPriorities.alarmLowBattery };\n      const alarmNoSignalDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[tsKey], status: \"alarmNoSignal\", priority: alarmPriorities.alarmNoSignal };\n      const alarmCloseDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[tsKey], status: \"alarmClose\", priority: alarmPriorities.alarmClose };\n\n      if ( timeseriesOfCurrentEntity[tsKey] > latestTelemetry.ts && timeseriesOfCurrentEntity[tsKey] > 0 ) {\n        if(telemetry == \"alarmOpen\" && readTelemetryValue(telemetryKey) && alarmPriorities.alarmOpen < latestTelemetry.priority) {\n            latestTelemetry = alarmOpenDescriptor;\n        }\n        else if(telemetry == \"alarmLowBattery\" && readTelemetryValue(telemetryKey) && alarmPriorities.alarmLowBattery < latestTelemetry.priority ) {\n            latestTelemetry = alarmLowBatteryDescriptor;\n        }\n        else if(telemetry == \"alarmNoSignal\" && readTelemetryValue(telemetryKey) && alarmPriorities.alarmNoSignal < latestTelemetry.priority ) {\n            latestTelemetry = alarmNoSignalDescriptor;\n        }\n        else if(telemetry == \"alarmClose\" && readTelemetryValue(telemetryKey) && alarmPriorities.alarmClose < latestTelemetry.priority ) {\n            latestTelemetry = alarmCloseDescriptor;\n        }\n      }   \n      else if ( timeseriesOfCurrentEntity[tsKey] == latestTelemetry.ts && timeseriesOfCurrentEntity[tsKey] > 0 ) {\n        if(telemetry == \"alarmOpen\" && readTelemetryValue(telemetryKey) && alarmPriorities.alarmOpen < latestTelemetry.priority) {\n            latestTelemetry = alarmOpenDescriptor;\n        }\n        else if(telemetry == \"alarmLowBattery\" && readTelemetryValue(telemetryKey) && alarmPriorities.alarmLowBattery < latestTelemetry.priority ) {\n            latestTelemetry = alarmLowBatteryDescriptor;\n        }\n        else if(telemetry == \"alarmNoSignal\" && readTelemetryValue(telemetryKey) && alarmPriorities.alarmNoSignal < latestTelemetry.priority ) {\n            latestTelemetry = alarmNoSignalDescriptor;\n        }\n        else if(telemetry == \"alarmClose\" && readTelemetryValue(telemetryKey) && alarmPriorities.alarmClose < latestTelemetry.priority ) {\n            latestTelemetry = alarmCloseDescriptor;\n        }\n      } \n    }\n    return latestTelemetry;\n  }\n\n\nlet latestTelemetry = findLatestAlarmState(dsData[dsIndex], telemetryKeys);\nvar res;\nswitch(latestTelemetry.status) {\n    case \"isClosed\":\n    case \"alarmClose\":\n        res = {\n    \t    url: images[0],\n    \t    size: 40\n\t    }\n\t    break;\n    case \"alarmLowBattery\":\n    case \"alarmOpen\":\n    case \"isOpen\": \n    case \"isLowBattery\":\n        res = {\n    \t    url: images[1],\n    \t    size: 40\n    \t}\n    \tbreak;\n    case \"isNoSignal\":\n    case \"alarmNoSignal\":\n        res = {\n    \t    url: images[2],\n    \t    size: 40\n    \t}\n    \tbreak;\n    case \"isTemporaryDeactivated\":\n        res = {\n    \t    url: images[3],\n    \t    size: 40\n    \t}\n    \tbreak;\n    case \"isNotAssigned\":\n        res = {\n    \t    url: images[4],\n    \t    size: 40\n    \t}\n    \tbreak;\n    case \"isInactive\":\n        res = {\n    \t    url: images[5],\n    \t    size: 40\n    \t}\n    \tbreak;\n\tdefault:\n\t    res = {\n    \t    url: images[4],\n    \t    size: 40\n    \t}\n    \tbreak;\n}\n\nreturn res;\n",
            "markerImages": [
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjkyIiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiMyMkM1NUUiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMxNTgwM0QiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2OTIpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2OTIpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjkyIiB4PSI3LjMxMTI4IiB5PSIxLjE2MDc5IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkyIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2OTIiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY5MiIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY5MiIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjkyIiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjY0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiNFRjQ0NDQiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiNCOTFDMUMiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2NjQpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2NjQpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjY0IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2NjQiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY2NCIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY2NCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjY0IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njc0IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMC41MjQ2IDI3LjI1MjdMMjAuMjAxNiAyNi4zMDYzTDE5LjkwMzcgMjYuNDA4TDE5LjcxNzggMjYuNjYxOUwyMC41MjQ2IDI3LjI1MjdaTTExLjQ3OTUgMjcuMjU0MUwxMi4yODU5IDI2LjY2MjdMMTIuMDk5OSAyNi40MDkxTDExLjgwMjIgMjYuMzA3NkwxMS40Nzk1IDI3LjI1NDFaTTE1LjA2NDggMzEuNTk5TDE0LjMyODQgMzIuMjc1NUwxNC4zMjkzIDMyLjI3NjVMMTUuMDY0OCAzMS41OTlaTTE2Ljk0NzggMzEuNTk5TDE3LjY4MzMgMzIuMjc2NUwxNy42ODYxIDMyLjI3MzVMMTYuOTQ3OCAzMS41OTlaTTI5IDE0QzI5IDE5LjcwNzkgMjUuMzIwOCAyNC41NTkxIDIwLjIwMTYgMjYuMzA2M0wyMC44NDc2IDI4LjE5OTFDMjYuNzUxNyAyNi4xODM5IDMxIDIwLjU4OTQgMzEgMTRIMjlaTTE2IDFDMjMuMTc5NyAxIDI5IDYuODIwMyAyOSAxNEgzMUMzMSA1LjcxNTczIDI0LjI4NDMgLTEgMTYgLTFWMVpNMyAxNEMzIDYuODIwMyA4LjgyMDMgMSAxNiAxVi0xQzcuNzE1NzMgLTEgMSA1LjcxNTczIDEgMTRIM1pNMTEuODAyMiAyNi4zMDc2QzYuNjgxMDcgMjQuNTYxNSAzIDE5LjcwOTMgMyAxNEgxQzEgMjAuNTkxIDUuMjUwMzcgMjYuMTg2NyAxMS4xNTY4IDI4LjIwMDZMMTEuODAyMiAyNi4zMDc2Wk0xMC42NzMxIDI3Ljg0NTVDMTIuMDQxOCAyOS43MTE5IDEzLjQzNTkgMzEuMzA0IDE0LjMyODQgMzIuMjc1NUwxNS44MDEyIDMwLjkyMjRDMTQuOTM5MSAyOS45ODQgMTMuNTk3IDI4LjQ1MDUgMTIuMjg1OSAyNi42NjI3TDEwLjY3MzEgMjcuODQ1NVpNMTQuMzI5MyAzMi4yNzY1QzE1LjIxNzcgMzMuMjQwOSAxNi43OTUgMzMuMjQwOSAxNy42ODMzIDMyLjI3NjVMMTYuMjEyNCAzMC45MjE0QzE2LjE3NSAzMC45NjE5IDE2LjEwNDcgMzAuOTk5OCAxNi4wMDYzIDMwLjk5OThDMTUuOTA3OSAzMC45OTk4IDE1LjgzNzYgMzAuOTYxOSAxNS44MDAzIDMwLjkyMTRMMTQuMzI5MyAzMi4yNzY1Wk0xNy42ODYxIDMyLjI3MzVDMTguNTczIDMxLjMwMjggMTkuOTY0MyAyOS43MTA0IDIxLjMzMTQgMjcuODQzNkwxOS43MTc4IDI2LjY2MTlDMTguNDA4IDI4LjQ1MDQgMTcuMDY4MSAyOS45ODQ4IDE2LjIwOTYgMzAuOTI0NEwxNy42ODYxIDMyLjI3MzVaIiBmaWxsPSIjNjQ3NDhCIiBtYXNrPSJ1cmwoI3BhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njc0KSIvPgo8cGF0aCBkPSJNMTQuNjE1NSA5LjczMzA2TDEyLjQzODUgNi4wODcyMUMxMi4yMTM3IDUuNzEwNTggMTIuMzI5NiA1LjIyMzM3IDEyLjcgNC45ODgzN0wxNS4xNDUzIDMuNDM2OTVDMTUuNTI0OSAzLjE5NjE0IDE2LjAyNzkgMy4zMTA1NyAxNi4yNjU5IDMuNjkxODZMMTkuMDk5IDguMjI5ODhDMTkuMTc3MyA4LjM1NTE4IDE5LjIxOTcgOC40OTk0OSAxOS4yMjE4IDguNjQ3MThMMTkuMzQ3NiAxNy40OTYyQzE5LjM1NCAxNy45NDc5IDE4Ljk4OTYgMTguMzE3NCAxOC41MzggMTguMzE3NEgxNS41Mzk3QzE1LjA5MjUgMTguMzE3NCAxNC43MyAxNy45NTQ5IDE0LjczIDE3LjUwNzdWMTAuMTQ4MkMxNC43MyAxMC4wMDIgMTQuNjkwNSA5Ljg1ODU2IDE0LjYxNTUgOS43MzMwNloiIGZpbGw9IiMwMDlERTIiLz4KPHBhdGggZD0iTTEzLjA2ODEgNy43NTY2NEwxMi4yODIxIDYuNDY4MDhDMTIuMDQ4NSA2LjA4NTI3IDExLjU0ODMgNS45NjUxNSAxMS4xNjY0IDYuMjAwMTdMMTAuNjk2NyA2LjQ4OTI1QzEwLjMxMzEgNi43MjUzMyAxMC4xOTU5IDcuMjI5MDggMTAuNDM1OCA3LjYxMDI2TDExLjI1IDguOTAzNDJDMTEuNDkyNSA5LjI4ODU0IDEyLjAwNDYgOS4zOTgyNiAxMi4zODM2IDkuMTQ2MjdMMTIuODI1MiA4Ljg1MjU5QzEzLjE4NzQgOC42MTE3OCAxMy4yOTQ2IDguMTI3OTEgMTMuMDY4MSA3Ljc1NjY0WiIgZmlsbD0iIzAwOURFMiIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0iIzAwOURFMiIvPgo8bWFzayBpZD0icGF0aC00LW91dHNpZGUtMl8zNzc5XzE0Njc0IiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSIzIiB5PSIxIiB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIGZpbGw9ImJsYWNrIj4KPHJlY3QgZmlsbD0id2hpdGUiIHg9IjMiIHk9IjEiIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2IDE0QzI2IDE5LjUyMjggMjEuNTIyOCAyNCAxNiAyNEMxMy41OTg3IDI0IDExLjM5NTEgMjMuMTUzNiA5LjY3MTI3IDIxLjc0MjlMMjMuNzQyOSA3LjY3MTI3QzI1LjE1MzYgOS4zOTUxNCAyNiAxMS41OTg3IDI2IDE0Wk04LjI1NzA1IDIwLjMyODdMMjIuMzI4NyA2LjI1NzA1QzIwLjYwNDkgNC44NDYzNyAxOC40MDEzIDQgMTYgNEMxMC40NzcyIDQgNiA4LjQ3NzE1IDYgMTRDNiAxNi40MDEzIDYuODQ2MzcgMTguNjA0OSA4LjI1NzA1IDIwLjMyODdaTTI4IDE0QzI4IDIwLjYyNzQgMjIuNjI3NCAyNiAxNiAyNkM5LjM3MjU4IDI2IDQgMjAuNjI3NCA0IDE0QzQgNy4zNzI1OCA5LjM3MjU4IDIgMTYgMkMyMi42Mjc0IDIgMjggNy4zNzI1OCAyOCAxNFoiLz4KPC9tYXNrPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2IDE0QzI2IDE5LjUyMjggMjEuNTIyOCAyNCAxNiAyNEMxMy41OTg3IDI0IDExLjM5NTEgMjMuMTUzNiA5LjY3MTI3IDIxLjc0MjlMMjMuNzQyOSA3LjY3MTI3QzI1LjE1MzYgOS4zOTUxNCAyNiAxMS41OTg3IDI2IDE0Wk04LjI1NzA1IDIwLjMyODdMMjIuMzI4NyA2LjI1NzA1QzIwLjYwNDkgNC44NDYzNyAxOC40MDEzIDQgMTYgNEMxMC40NzcyIDQgNiA4LjQ3NzE1IDYgMTRDNiAxNi40MDEzIDYuODQ2MzcgMTguNjA0OSA4LjI1NzA1IDIwLjMyODdaTTI4IDE0QzI4IDIwLjYyNzQgMjIuNjI3NCAyNiAxNiAyNkM5LjM3MjU4IDI2IDQgMjAuNjI3NCA0IDE0QzQgNy4zNzI1OCA5LjM3MjU4IDIgMTYgMkMyMi42Mjc0IDIgMjggNy4zNzI1OCAyOCAxNFoiIGZpbGw9IiNFRjQ0NDQiLz4KPHBhdGggZD0iTTkuNjcxMjcgMjEuNzQyOUw4Ljk2NDE2IDIxLjAzNThMOC4xODI4OSAyMS44MTcxTDkuMDM3OTYgMjIuNTE2OEw5LjY3MTI3IDIxLjc0MjlaTTIzLjc0MjkgNy42NzEyN0wyNC41MTY4IDcuMDM3OTZMMjMuODE3MSA2LjE4Mjg5TDIzLjAzNTggNi45NjQxNkwyMy43NDI5IDcuNjcxMjdaTTguMjU3MDUgMjAuMzI4N0w3LjQ4MzE1IDIwLjk2Mkw4LjE4Mjg5IDIxLjgxNzFMOC45NjQxNiAyMS4wMzU4TDguMjU3MDUgMjAuMzI4N1pNMjIuMzI4NyA2LjI1NzA1TDIzLjAzNTggNi45NjQxNkwyMy44MTcxIDYuMTgyODlMMjIuOTYyIDUuNDgzMTVMMjIuMzI4NyA2LjI1NzA1Wk0xNiAyNUMyMi4wNzUxIDI1IDI3IDIwLjA3NTEgMjcgMTRIMjVDMjUgMTguOTcwNiAyMC45NzA2IDIzIDE2IDIzVjI1Wk05LjAzNzk2IDIyLjUxNjhDMTAuOTMzOSAyNC4wNjg0IDEzLjM1OTUgMjUgMTYgMjVWMjNDMTMuODM3OSAyMyAxMS44NTYzIDIyLjIzODkgMTAuMzA0NiAyMC45NjlMOS4wMzc5NiAyMi41MTY4Wk0yMy4wMzU4IDYuOTY0MTZMOC45NjQxNiAyMS4wMzU4TDEwLjM3ODQgMjIuNDUwMUwyNC40NTAxIDguMzc4MzhMMjMuMDM1OCA2Ljk2NDE2Wk0yNyAxNEMyNyAxMS4zNTk1IDI2LjA2ODQgOC45MzM5NCAyNC41MTY4IDcuMDM3OTZMMjIuOTY5IDguMzA0NTdDMjQuMjM4OSA5Ljg1NjM0IDI1IDExLjgzNzkgMjUgMTRIMjdaTTguOTY0MTYgMjEuMDM1OEwyMy4wMzU4IDYuOTY0MTZMMjEuNjIxNiA1LjU0OTk1TDcuNTQ5OTUgMTkuNjIxNkw4Ljk2NDE2IDIxLjAzNThaTTIyLjk2MiA1LjQ4MzE1QzIxLjA2NjEgMy45MzE2MiAxOC42NDA1IDMgMTYgM1Y1QzE4LjE2MjEgNSAyMC4xNDM3IDUuNzYxMTEgMjEuNjk1NCA3LjAzMDk2TDIyLjk2MiA1LjQ4MzE1Wk0xNiAzQzkuOTI0ODcgMyA1IDcuOTI0ODcgNSAxNEg3QzcgOS4wMjk0NCAxMS4wMjk0IDUgMTYgNVYzWk01IDE0QzUgMTYuNjQwNSA1LjkzMTYyIDE5LjA2NjEgNy40ODMxNSAyMC45NjJMOS4wMzA5NiAxOS42OTU0QzcuNzYxMTEgMTguMTQzNyA3IDE2LjE2MjEgNyAxNEg1Wk0xNiAyN0MyMy4xNzk3IDI3IDI5IDIxLjE3OTcgMjkgMTRIMjdDMjcgMjAuMDc1MSAyMi4wNzUxIDI1IDE2IDI1VjI3Wk0zIDE0QzMgMjEuMTc5NyA4LjgyMDMgMjcgMTYgMjdWMjVDOS45MjQ4NyAyNSA1IDIwLjA3NTEgNSAxNEgzWk0xNiAxQzguODIwMyAxIDMgNi44MjAzIDMgMTRINUM1IDcuOTI0ODcgOS45MjQ4NyAzIDE2IDNWMVpNMjkgMTRDMjkgNi44MjAzIDIzLjE3OTcgMSAxNiAxVjNDMjIuMDc1MSAzIDI3IDcuOTI0ODcgMjcgMTRIMjlaIiBmaWxsPSJ3aGl0ZSIgbWFzaz0idXJsKCNwYXRoLTQtb3V0c2lkZS0yXzM3NzlfMTQ2NzQpIi8+Cjwvc3ZnPgo=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0Njg3IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiNGOTczMTYiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiNDMjQxMEMiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2ODcpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2ODcpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0Njg3IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2ODciLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY4NyIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY4NyIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0Njg3IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjgyIiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiM2NDc0OEIiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMzMzQxNTUiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2ODIpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2ODIpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjgyIiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2ODIiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY4MiIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY4MiIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjgyIiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=",
              "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzE0NjY5IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNTI0NiAyNy4yNTI3QzI2LjAzNjIgMjUuMzcxNSAzMCAyMC4xNDg2IDMwIDE0QzMwIDYuMjY4MDEgMjMuNzMyIDAgMTYgMEM4LjI2ODAxIDAgMiA2LjI2ODAxIDIgMTRDMiAyMC4xNTAyIDUuOTY1NzIgMjUuMzc0MSAxMS40Nzk1IDI3LjI1NDFDMTIuODE5NCAyOS4wODEyIDE0LjE4NzUgMzAuNjQ0IDE1LjA2NDggMzEuNTk5QzE1LjU1NzEgMzIuMTMzNCAxNi40NTU1IDMyLjEzMzQgMTYuOTQ3OCAzMS41OTlDMTcuODIwNSAzMC42NDM4IDE5LjE4NjEgMjkuMDgwNCAyMC41MjQ2IDI3LjI1MjdaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC41MjQ2IDI3LjI1MjdDMjYuMDM2MiAyNS4zNzE1IDMwIDIwLjE0ODYgMzAgMTRDMzAgNi4yNjgwMSAyMy43MzIgMCAxNiAwQzguMjY4MDEgMCAyIDYuMjY4MDEgMiAxNEMyIDIwLjE1MDIgNS45NjU3MiAyNS4zNzQxIDExLjQ3OTUgMjcuMjU0MUMxMi44MTk0IDI5LjA4MTIgMTQuMTg3NSAzMC42NDQgMTUuMDY0OCAzMS41OTlDMTUuNTU3MSAzMi4xMzM0IDE2LjQ1NTUgMzIuMTMzNCAxNi45NDc4IDMxLjU5OUMxNy44MjA1IDMwLjY0MzggMTkuMTg2MSAyOS4wODA0IDIwLjUyNDYgMjcuMjUyN1oiIGZpbGw9IiMwMDlERTIiLz4KPHBhdGggZD0iTTIwLjUyNDYgMjcuMjUyN0wyMC4yMDE2IDI2LjMwNjNMMTkuOTAzNyAyNi40MDhMMTkuNzE3OCAyNi42NjE5TDIwLjUyNDYgMjcuMjUyN1pNMTEuNDc5NSAyNy4yNTQxTDEyLjI4NTkgMjYuNjYyN0wxMi4wOTk5IDI2LjQwOTFMMTEuODAyMiAyNi4zMDc2TDExLjQ3OTUgMjcuMjU0MVpNMTUuMDY0OCAzMS41OTlMMTQuMzI4NCAzMi4yNzU1TDE0LjMyOTMgMzIuMjc2NUwxNS4wNjQ4IDMxLjU5OVpNMTYuOTQ3OCAzMS41OTlMMTcuNjgzMyAzMi4yNzY1TDE3LjY4NjEgMzIuMjczNUwxNi45NDc4IDMxLjU5OVpNMjkgMTRDMjkgMTkuNzA3OSAyNS4zMjA4IDI0LjU1OTEgMjAuMjAxNiAyNi4zMDYzTDIwLjg0NzYgMjguMTk5MUMyNi43NTE3IDI2LjE4MzkgMzEgMjAuNTg5NCAzMSAxNEgyOVpNMTYgMUMyMy4xNzk3IDEgMjkgNi44MjAzIDI5IDE0SDMxQzMxIDUuNzE1NzMgMjQuMjg0MyAtMSAxNiAtMVYxWk0zIDE0QzMgNi44MjAzIDguODIwMyAxIDE2IDFWLTFDNy43MTU3MyAtMSAxIDUuNzE1NzMgMSAxNEgzWk0xMS44MDIyIDI2LjMwNzZDNi42ODEwNyAyNC41NjE1IDMgMTkuNzA5MyAzIDE0SDFDMSAyMC41OTEgNS4yNTAzNyAyNi4xODY3IDExLjE1NjggMjguMjAwNkwxMS44MDIyIDI2LjMwNzZaTTEwLjY3MzEgMjcuODQ1NUMxMi4wNDE4IDI5LjcxMTkgMTMuNDM1OSAzMS4zMDQgMTQuMzI4NCAzMi4yNzU1TDE1LjgwMTIgMzAuOTIyNEMxNC45MzkxIDI5Ljk4NCAxMy41OTcgMjguNDUwNSAxMi4yODU5IDI2LjY2MjdMMTAuNjczMSAyNy44NDU1Wk0xNC4zMjkzIDMyLjI3NjVDMTUuMjE3NyAzMy4yNDA5IDE2Ljc5NSAzMy4yNDA5IDE3LjY4MzMgMzIuMjc2NUwxNi4yMTI0IDMwLjkyMTRDMTYuMTc1IDMwLjk2MTkgMTYuMTA0NyAzMC45OTk4IDE2LjAwNjMgMzAuOTk5OEMxNS45MDc5IDMwLjk5OTggMTUuODM3NiAzMC45NjE5IDE1LjgwMDMgMzAuOTIxNEwxNC4zMjkzIDMyLjI3NjVaTTE3LjY4NjEgMzIuMjczNUMxOC41NzMgMzEuMzAyOCAxOS45NjQzIDI5LjcxMDQgMjEuMzMxNCAyNy44NDM2TDE5LjcxNzggMjYuNjYxOUMxOC40MDggMjguNDUwNCAxNy4wNjgxIDI5Ljk4NDggMTYuMjA5NiAzMC45MjQ0TDE3LjY4NjEgMzIuMjczNVoiIGZpbGw9IiMwMDZEQUIiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzM3NzlfMTQ2NjkpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfMTQ2NjkpIj4KPHBhdGggZD0iTTE0LjYxNTUgOS43MzMwNkwxMi40Mzg1IDYuMDg3MjFDMTIuMjEzNyA1LjcxMDU4IDEyLjMyOTYgNS4yMjMzNyAxMi43IDQuOTg4MzdMMTUuMTQ1MyAzLjQzNjk1QzE1LjUyNDkgMy4xOTYxNCAxNi4wMjc5IDMuMzEwNTcgMTYuMjY1OSAzLjY5MTg2TDE5LjA5OSA4LjIyOTg4QzE5LjE3NzMgOC4zNTUxOCAxOS4yMTk3IDguNDk5NDkgMTkuMjIxOCA4LjY0NzE4TDE5LjM0NzYgMTcuNDk2MkMxOS4zNTQgMTcuOTQ3OSAxOC45ODk2IDE4LjMxNzQgMTguNTM4IDE4LjMxNzRIMTUuNTM5N0MxNS4wOTI1IDE4LjMxNzQgMTQuNzMgMTcuOTU0OSAxNC43MyAxNy41MDc3VjEwLjE0ODJDMTQuNzMgMTAuMDAyIDE0LjY5MDUgOS44NTg1NiAxNC42MTU1IDkuNzMzMDZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTMuMDY4MSA3Ljc1NjY0TDEyLjI4MjEgNi40NjgwOEMxMi4wNDg1IDYuMDg1MjcgMTEuNTQ4MyA1Ljk2NTE1IDExLjE2NjQgNi4yMDAxN0wxMC42OTY3IDYuNDg5MjVDMTAuMzEzMSA2LjcyNTMzIDEwLjE5NTkgNy4yMjkwOCAxMC40MzU4IDcuNjEwMjZMMTEuMjUgOC45MDM0MkMxMS40OTI1IDkuMjg4NTQgMTIuMDA0NiA5LjM5ODI2IDEyLjM4MzYgOS4xNDYyN0wxMi44MjUyIDguODUyNTlDMTMuMTg3NCA4LjYxMTc4IDEzLjI5NDYgOC4xMjc5MSAxMy4wNjgxIDcuNzU2NjRaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTkuMDE4IDE4Ljg2MjhIMTUuMDcxM0MxNC44NTMxIDE4Ljg2MjggMTQuNjQ0MSAxOC45NTA5IDE0LjQ5MTcgMTkuMTA3TDEzLjMxOTUgMjAuMzA4NEMxMy4xNzE5IDIwLjQ1OTcgMTMuMDg5MyAyMC42NjI2IDEzLjA4OTMgMjAuODczOVYyMi4xOTAzQzEzLjA4OTMgMjIuNjM3NSAxMy40NTE4IDIzIDEzLjg5OSAyM0gxNy4wODFIMjAuMTkwM0MyMC42Mzc1IDIzIDIxIDIyLjYzNzUgMjEgMjIuMTkwM1YyMC44NzM5QzIxIDIwLjY2MjYgMjAuOTE3NCAyMC40NTk3IDIwLjc2OTggMjAuMzA4NEwxOS41OTc2IDE5LjEwN0MxOS40NDUyIDE4Ljk1MDkgMTkuMjM2MiAxOC44NjI4IDE5LjAxOCAxOC44NjI4WiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8zNzc5XzE0NjY5IiB4PSI3LjMxMTI4IiB5PSIxLjE2MDg1IiB3aWR0aD0iMTYuNjg4NyIgaGVpZ2h0PSIyNS42ODkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfMTQ2NjkiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMC4yNSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMzc3OV8xNDY2OSIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMzc3OV8xNDY2OSIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzE0NjY5IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo="
            ],
            "showPolygon": false,
            "polygonKeyName": "perimeter",
            "editablePolygon": false,
            "showPolygonLabel": false,
            "usePolygonLabelFunction": false,
            "polygonLabel": "${entityName}",
            "showPolygonTooltip": false,
            "showPolygonTooltipAction": "click",
            "autoClosePolygonTooltip": true,
            "usePolygonTooltipFunction": false,
            "polygonTooltipPattern": "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
            "polygonColor": "#3388ff",
            "polygonOpacity": 0.2,
            "usePolygonColorFunction": false,
            "polygonStrokeColor": "#3388ff",
            "polygonStrokeOpacity": 1,
            "polygonStrokeWeight": 3,
            "usePolygonStrokeColorFunction": false,
            "showCircle": false,
            "circleKeyName": "perimeter",
            "editableCircle": false,
            "showCircleLabel": false,
            "useCircleLabelFunction": false,
            "circleLabel": "${entityName}",
            "showCircleTooltip": false,
            "showCircleTooltipAction": "click",
            "autoCloseCircleTooltip": true,
            "useCircleTooltipFunction": false,
            "circleTooltipPattern": "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
            "circleFillColor": "#3388ff",
            "circleFillColorOpacity": 0.2,
            "useCircleFillColorFunction": false,
            "circleStrokeColor": "#3388ff",
            "circleStrokeOpacity": 1,
            "circleStrokeWeight": 3,
            "useCircleStrokeColorFunction": false,
            "useClusterMarkers": true,
            "zoomOnClick": true,
            "maxClusterRadius": 80,
            "animate": true,
            "spiderfyOnMaxZoom": false,
            "showCoverageOnHover": true,
            "chunkedLoading": false,
            "removeOutsideVisibleBounds": true,
            "hasCustomMap": true,
            "customMapViewName": "Hawle",
            "customMapViewURL": "https://api.maptiler.com/maps/ch-swisstopo-lbm-grey/style.json"
          },
          "title": "New Google Maps",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "useDashboardTimewindow": true,
          "showLegend": false,
          "widgetStyle": {
            "borderRadius": "8px"
          },
          "actions": {
            "markerClick": [
              {
                "name": "Alarm details Popup",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<mat-dialog id=\"popup-dialog\">\r\n    <header fxLayout=\"row\" fxLayoutAlign=\"space-between center\" class=\"header\">\r\n      <div fxLayout=\"column\">\r\n        <span id=\"dialog-title\"><b>{{dialogTitle | translate}}</b></span>\r\n        <div id=\"status-badge\" fxLayout=\"row\" fxLayoutAlign=\"start center\" matBadge=\"open\" matBadgeColor=\"primary\" matBadgeOverlap=\"false\" matBadgeSize=\"small\" class=\"custom-badge\">\r\n          <mat-icon class=\"custom-icon\">lens</mat-icon>\r\n          <span class=\"custom-text\">{{statusBadge}}</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <button mat-icon-button (click)=\"cancel()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </header>\r\n    \r\n    <section class=\"entity-info\" fxLayout=\"row\">\r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{hydrantNumber | translate}}</div>\r\n        <div class=\"info-value\">{{currentEntity?.latest?.ENTITY_FIELD?.name?.value}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\"  fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{brand | translate}}</div>\r\n        <div class=\"info-value\">{{hydrantsBrand}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{model | translate}}</div>\r\n        <div class=\"info-value\">{{ modelNumber }}</div>\r\n      </div>\r\n    </section>\r\n    \r\n<section class=\"outlet-info-table-alarm\" *ngIf=\"dStorzDataReady\">\r\n    <mat-table mat-table [dataSource]=\"outletDataSource\" class=\"mat-elevation-z0\">\r\n      \r\n      <ng-container matColumnDef=\"outlet\">\r\n        <th mat-header-cell *matHeaderCellDef>{{outletInformation | translate}}</th>\r\n        <td mat-cell *matCellDef=\"let element\"> {{ element.outlet }} </td>\r\n      </ng-container>\r\n\r\n      <ng-container matColumnDef=\"assigned\">\r\n        <th mat-header-cell *matHeaderCellDef>{{assignedDStorz | translate}}</th>\r\n        <td mat-cell *matCellDef=\"let element\"> {{ element.assignedSerialNumber }} </td>\r\n      </ng-container>\r\n\r\n      <ng-container matColumnDef=\"status\">\r\n        <th mat-header-cell *matHeaderCellDef>{{statusTimestamp | translate}}</th>\r\n        <td mat-cell *matCellDef=\"let element\" class=\"timestamp-cell\"> {{ element.status }} </td>\r\n      </ng-container>\r\n      \r\n      <ng-container matColumnDef=\"recentUnconfirmedAlarm\">\r\n        <th mat-header-cell *matHeaderCellDef>{{recentUnconfirmedAlarmLabel | translate}}</th>\r\n        <td mat-cell *matCellDef=\"let element\" class=\"timestamp-cell\"> {{ element.recentUnconfirmedAlarm }} </td>\r\n      </ng-container>\r\n\r\n      <ng-container matColumnDef=\"action\">\r\n        <th mat-header-cell *matHeaderCellDef>{{actionLabel | translate}}</th>\r\n        <td mat-cell *matCellDef=\"let element\"> \r\n          <button mat-button class=\"confirm-button\" [disabled]=\"disableConfirmButton(element)\" (click)=\"openConfirmDialog(element)\">{{confirmAlarm | translate}}</button> \r\n        </td>\r\n      </ng-container>\r\n      \r\n      <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n      <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </mat-table>\r\n</section>\r\n    \r\n  <!--  <section fxLayout=\"row\" class=\"unconfirmed-alarms-section\"  fxLayoutAlign=\"space-between center\">\r\n        <div fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n            <div class=\"bell-icon\">\r\n              <mat-icon class=\"material-icons\">notifications</mat-icon>\r\n            </div>\r\n            <span class=\"sample-text\">This hydrant has 20 unconfirmed alarms</span>\r\n        </div>\r\n      <div>\r\n        <button mat-button color=\"primary\">{{viewAlarms | translate}}</button>\r\n      </div>\r\n    </section> -->\r\n    \r\n    \r\n    <section class=\"entity-info\" fxLayout=\"row\">\r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{zoneLabel | translate}}</div>\r\n        <div class=\"info-value\">{{zone}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{locationLabel | translate}}</div>\r\n        <div class=\"info-value\">{{address}}</div>\r\n        <div class=\"info-value\">{{country}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <button class=\"action-button\" mat-button color=\"primary\" (click)=\"navigateToMap()\">\r\n            <span>\r\n                {{routeTo | translate}}\r\n            </span>\r\n        </button>\r\n      </div>\r\n    </section>\r\n   \r\n</mat-dialog>",
                "customCss": ".mat-dialog-container {\r\n    border-radius: 10px;\r\n}\r\n\r\n#popup-dialog {\r\n    display: block;\r\n    height: 90vh;\r\n    width: 50vw;\r\n    padding: 2rem;\r\n}\r\n\r\n\r\n@media only screen and (max-width: 1500px) {\r\n#popup-dialog {\r\n      width: 80vw;\r\n      overflow-x: auto;\r\n  }\r\n}\r\n\r\n\r\n#dialog-title {\r\n    font-size: 1.5rem;\r\n    font-weight: 700;\r\n    margin-bottom: 0.5rem;\r\n}\r\n\r\n.custom-badge{\r\n  font-size: 12px;\r\n  width: fit-content;\r\n  border-radius: 10px; \r\n  padding: 4px 8px; \r\n}\r\n.custom-icon {\r\n    margin-right: 4px; \r\n    font-size: 10px;\r\n    width: 10px;\r\n    height: 10px;\r\n}\r\n\r\n\r\n.custom-badge.isNoSignal,\r\n.custom-badge.alarmNoSignal{\r\n    background-color: #FCE7F3;\r\n} \r\n.custom-badge.isNoSignal .custom-icon,\r\n.custom-badge.alarmNoSignal .custom-icon {\r\n  color: #F472B6;\r\n}\r\n.custom-badge.isNoSignal .custom-text,\r\n.custom-badge.alarmNoSignal .custom-text{\r\n  color: #DB2777; \r\n}\r\n\r\n\r\n.custom-badge.isClosed,\r\n.custom-badge.alarmClose{\r\n    background-color: #D1F5E9;\r\n}\r\n.custom-badge.isClosed .custom-text,\r\n.custom-badge.alarmClose .custom-text{\r\n    color: #218372;\r\n}\r\n.custom-badge.isClosed .custom-icon,\r\n.custom-badge.alarmClose .custom-icon{\r\n    color: #32CDAC;\r\n}\r\n\r\n\r\n.custom-badge.isOpen,\r\n.custom-badge.alarmOpen,\r\n.custom-badge.alarmLowBattery{\r\n    background-color: #FEE2E2;\r\n}\r\n.custom-badge.isOpen .custom-text,\r\n.custom-badge.alarmOpen .custom-text,\r\n.custom-badge.alarmLowBattery .custom-text{\r\n    color: #DC2626;\r\n}\r\n.custom-badge.isOpen .custom-icon,\r\n.custom-badge.alarmOpen .custom-icon,\r\n.custom-badge.alarmLowBattery .custom-icon{\r\n    color: #F87171;\r\n}\r\n\r\n\r\n.custom-badge.isInactive {\r\n    background-color: #DDE8FC;\r\n}\r\n.custom-badge.isInactive .custom-text{\r\n    color: #325DDE;\r\n}\r\n.custom-badge.isInactive .custom-icon{\r\n    color: #6A9DF0;\r\n}\r\n\r\n\r\n.custom-badge.isNotAssigned {\r\n    background-color: #F1F4F9;\r\n}\r\n.custom-badge.isNotAssigned .custom-text{\r\n    color: #475569;\r\n}\r\n.custom-badge.isNotAssigned .custom-icon{\r\n    color: #94A3B8;\r\n}\r\n\r\n\r\n.custom-badge.isNotAssigned {\r\n    background-color: #F1F4F9;\r\n}\r\n.custom-badge.isNotAssigned .custom-text{\r\n    color: #475569;\r\n}\r\n.custom-badge.isNotAssigned .custom-icon{\r\n    color: #94A3B8;\r\n}\r\n\r\n\r\n.custom-badge.isTemporaryInactivated {\r\n    background-color: #FFEDD5;\r\n}\r\n.custom-badge.isTemporaryInactivated .custom-text{\r\n    color: #EA580C;\r\n}\r\n.custom-badge.isTemporaryInactivated .custom-icon{\r\n    color: #FB923C;\r\n}\r\n\r\n.entity-info {\r\n    margin: 3rem 0px;\r\n}\r\n\r\n.info-key {\r\n    font-size: 12px;\r\n    font-weight: bold;\r\n    margin-bottom: 4px;\r\n}\r\n\r\n.info-value {\r\n    font-size: 12px;\r\n}\r\n\r\nth.mat-header-cell:first-of-type, td.mat-cell:first-of-type, td.mat-footer-cell:first-of-type{ \r\n    padding-left: 0 !important;\r\n}\r\n\r\n.outlet-info-table-alarm .mat-header-cell {\r\n    font-weight: 600;\r\n    color: #000;\r\n}\r\n\r\n.outlet-info-table-alarm .mat-cell {\r\n    font-size: 12px;\r\n    font-weight: 400;\r\n}\r\n\r\n.action-button {\r\n    border-radius: 5px;\r\n    border: 3px #E2E8F0 solid;\r\n    font-family: var(--font-global) !important;\r\n    font-weight: bold;\r\n}\r\n\r\n.temporary-deactivation-section {\r\n  margin-top: 2rem;\r\n  background-color: #FFF7ED;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.temporary-deactivation-section .section-title {\r\n  font-size: 15px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.unconfirmed-alarms-section {\r\n    font-size: 12px;\r\n    margin-top: 2rem;\r\n    width: 100%;\r\n    background-color: #F8FAFC;\r\n    padding: 1rem;\r\n    color: #64748B;\r\n}\r\n\r\n.unconfirmed-alarms-section .bell-icon {\r\n  background-color: #CBD4E1;\r\n  color: #F8FAFC;\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-right: 1.5rem;\r\n}\r\n\r\n.unconfirmed-alarms-section button span {\r\n    color: #009FE3;\r\n    font-family: var(--font-global) !important;\r\n    font-weight: bold !important;\r\n}\r\n\r\n.confirm-button {    \r\n  font-family: var(--font-global) !important;\r\n  font-weight: bold;\r\n  background-color: #009FE3;\r\n  color: white;\r\n}\r\n\r\n.confirm-button.mat-button-disabled {    \r\n  font-family: var(--font-global) !important;\r\n  font-weight: bold;\r\n  background-color: #7ebfd8;\r\n  color: white !important;\r\n}\r\n\r\n.timestamp-cell {\r\n    white-space: pre-wrap;\r\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\r\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nlet deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\nlet http = $injector.get(widgetContext.servicesMap.get('http'));\r\n\r\n\r\nconst statusLabels = {\r\n    isOpen: getTranslation(\"hawle-dashboard.open\"),\r\n    isClosed: getTranslation(\"hawle-dashboard.closed\"),\r\n    isLowBattery: getTranslation(\"hawle-dashboard.low-battery\"),\r\n    isNoSignal: getTranslation(\"hawle-dashboard.no-signal\"),\r\n    isInactive: getTranslation(\"hawle-dashboard.inactive\"),\r\n    isTemporaryDeactivated: getTranslation(\"hawle-dashboard.temporary-deactivated\"),\r\n    isNotAssigned: getTranslation(\"hawle-dashboard.not-assigned\"),\r\n    alarmOpen: getTranslation(\"hawle-dashboard.open\"),\r\n    alarmNoSignal: getTranslation(\"hawle-dashboard.no-signal\"),\r\n    alarmLowBattery: getTranslation(\"hawle-dashboard.low-battery\"),\r\n    alarmClose: getTranslation(\"hawle-dashboard.closed\"),\r\n    offline: getTranslation(\"hawle-dashboard.no-signal\"),\r\n    online: getTranslation(\"hawle-dashboard.online\")\r\n};\r\n\r\nconst eventTypes = {\r\n    alarmOpen:  getTranslation(\"hawle-dashboard.open\"),\r\n    alarmNoSignal:  getTranslation(\"hawle-dashboard.no-signal\"),\r\n    alarmLowBattery: getTranslation(\"hawle-dashboard.low-battery\"),\r\n    alarmClose: getTranslation(\"hawle-dashboard.closed\")\r\n}\r\n\r\nconst alarmPriorities = {\r\n    alarmOpen: 0,\r\n    alarmLowBattery: 1,\r\n    alarmNoSignal: 2,\r\n    alarmClose: 3\r\n}\r\n\r\nconst statusPriorities = {\r\n    isTemporaryDeactivated: 0,\r\n    isOpen: 1,\r\n    isInactive: 2, \r\n    isLowBattery: 3,\r\n    isNoSignal: 4,\r\n    isNotAssigned: 5,\r\n    isClosed: 6,\r\n    isOnline: 7\r\n}\r\n\r\nlet recentUnacknoledgedAlarms = [];\r\n\r\nlet relatedDStorz = [];\r\n\r\n\r\nconst entitiesQueryBody = {\r\n  entityFilter: {\r\n    type: \"singleEntity\",\r\n    singleEntity: {\r\n      id: entityId.id,\r\n      entityType: \"ASSET\"\r\n    }\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\",\r\n    },\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"label\",\r\n    },\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"additionalInfo\",\r\n    }\r\n  ],\r\n  latestValues: [\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"modelNumber\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"hydrantsBrand\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"storzCount\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"longitude\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"latitude\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"zone\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"country\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"state\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"city\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"zip\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"street\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmOpen\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmLowBattery\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmNoSignal\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmClose\",\r\n    }\r\n  ],\r\n  pageLink: {\r\n    page: 0,\r\n    pageSize: 10,\r\n    sortOrder: {\r\n      key: {\r\n        key: \"name\",\r\n        type: \"ENTITY_FIELD\",\r\n      },\r\n      direction: \"ASC\",\r\n    },\r\n  },\r\n};\r\n\r\nconst relationsQueryStorz = {\r\n  entityFilter: {\r\n    type: \"relationsQuery\",\r\n    rootEntity: {\r\n      entityType: \"ASSET\",\r\n      id: entityId.id\r\n    },\r\n    direction: \"FROM\",\r\n    maxLevel: 1,\r\n    fetchLastLevelOnly: true,\r\n    filters: [\r\n      {\r\n        relationType: \"Contains\",\r\n        entityTypes: [\r\n          \"ASSET\"\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\",\r\n    },\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"label\",\r\n    }\r\n  ],\r\n  latestValues: [\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"storzNumber\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"exitDiameter\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"exitName\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"assignedDStorz\",\r\n    }\r\n  ],\r\n  pageLink: {\r\n    page: 0,\r\n    pageSize: 10,\r\n    sortOrder: {\r\n      key: {\r\n        key: \"name\",\r\n        type: \"ENTITY_FIELD\",\r\n      },\r\n      direction: \"ASC\",\r\n    }\r\n  }\r\n};\r\n\r\nconst relationsQueryDStorz = {\r\n  entityFilter: {\r\n    type: \"relationsQuery\",\r\n    rootEntity: {\r\n      entityType: \"ASSET\",\r\n      id: entityId.id\r\n    },\r\n    direction: \"FROM\",\r\n    maxLevel: 2,\r\n    fetchLastLevelOnly: true,\r\n    filters: [\r\n      {\r\n        relationType: \"Contains\",\r\n        entityTypes: [\r\n          \"DEVICE\"\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\",\r\n    }\r\n  ],\r\n  latestValues: [\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"exitDiameter\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"exitName\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"storzNumber\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"serialNumber\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isOpen\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isNoSignal\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isInactive\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isTemporaryDeactivated\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isNotAssigned\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isLowBattery\",\r\n    }\r\n  ],\r\n  pageLink: {\r\n    page: 0,\r\n    pageSize: 10,\r\n    sortOrder: {\r\n      key: {\r\n        key: \"name\",\r\n        type: \"ENTITY_FIELD\",\r\n      },\r\n      direction: \"ASC\",\r\n    }\r\n  }\r\n};\r\n\r\nconst relationsQueryZone = {\r\n  entityFilter: {\r\n    type: \"relationsQuery\",\r\n    rootEntity: {\r\n      entityType: \"ASSET\",\r\n      id: entityId.id\r\n    },\r\n    direction: \"TO\",\r\n    maxLevel: 1,\r\n    fetchLastLevelOnly: true,\r\n    filters: [\r\n      {\r\n        relationType: \"Contains\",\r\n        entityTypes: [\r\n          \"ASSET\"\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\",\r\n    }\r\n  ],\r\n  latestValues: [\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"latitude\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"longitude\",\r\n    },\r\n  ],\r\n  pageLink: {\r\n    page: 0,\r\n    pageSize: 10,\r\n    sortOrder: {\r\n      key: {\r\n        key: \"name\",\r\n        type: \"ENTITY_FIELD\",\r\n      },\r\n      direction: \"ASC\",\r\n    }\r\n  }\r\n};\r\n\r\nconst relatedDStorzQuery = {\r\n  filters: [\r\n    {\r\n      relationType: \"Contains\",\r\n      entityTypes: [\r\n        \"ASSET\",\r\n        \"DEVICE\"\r\n      ]\r\n    }\r\n  ],\r\n  parameters: {\r\n    rootId: entityId.id,\r\n    rootType: \"ASSET\",\r\n    direction: \"FROM\",\r\n    relationTypeGroup: \"COMMON\",\r\n    maxLevel: 2,\r\n    fetchLastLevelOnly: false\r\n  }\r\n};\r\n\r\n\r\nfunction getTranslation(translationText) {\r\n  translateService = $injector.get(widgetContext.servicesMap.get('translate'));\r\n  let translated = \"\";\r\n  try {\r\n    translated = translateService.instant(translationText);\r\n\r\n  } catch (error) {\r\n\r\n  }\r\n  return translated;\r\n}\r\n\r\nfunction unixToHumanReadable(unixTimestamp) {\r\n  if (isNaN(Number(unixTimestamp))) {\r\n    return 'Invalid Timestamp';\r\n  }\r\n\r\n  // Convert to a number if it's a string\r\n  unixTimestamp = Number(unixTimestamp);\r\n\r\n  if (String(unixTimestamp).length <= 10) {\r\n    unixTimestamp *= 1000;  // Convert to milliseconds\r\n  }\r\n  // Create a new Date object\r\n  const date = new Date(unixTimestamp);\r\n\r\n  // Formatting the date and time\r\n  const year = date.getFullYear();\r\n  const month = date.toLocaleString('default', { month: 'short' }); // Get the short name of the month\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  const hours = String(date.getHours()).padStart(2, '0');\r\n  const minutes = String(date.getMinutes()).padStart(2, '0');\r\n\r\n  // Combine into a human-readable string\r\n  const humanReadableDate = ` ${day} ${month} ${year} | ${hours}:${minutes}`;\r\n\r\n  return humanReadableDate;\r\n}\r\n\r\n\r\nfunction isTrue(value) {\r\n  return value !== undefined && value !== null && (value === 'true' || value === true || value == '1' || value == 1);\r\n}\r\n\r\n\r\nfunction readTelemetryValue(telemetryName) {\r\n  if (telemetryName && telemetryName.value && telemetryName.value !== undefined) {\r\n    return isTrue(telemetryName.value);\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction mapAssetsToDevice(response) {\r\n  const assetDeviceMapping = [];\r\n\r\n  for (const relation of response) {\r\n    if (relation.from.entityType === \"ASSET\" && relation.to.entityType === \"DEVICE\") {\r\n      assetDeviceMapping.push({\r\n        fromId: relation.from.id,\r\n        toId: relation.to.id,\r\n        name: relation.toName\r\n      });\r\n    }\r\n  }\r\n\r\n  return assetDeviceMapping;\r\n}\r\n\r\nfunction matchDStorzMappingWithStorz(mappedDStorzArray, storzArray) {\r\n  return mappedDStorzArray.map(mappedItem => {\r\n    const matchingData = storzArray.find(dataItem => dataItem.entityId.id === mappedItem.fromId);\r\n\r\n    if (matchingData) {\r\n      return {\r\n        ...mappedItem,\r\n        latest: matchingData.latest\r\n      };\r\n    } else {\r\n      return mappedItem;\r\n    }\r\n  });\r\n}\r\n\r\nfunction matchDStorzMappingWithStorz(mappedDStorz, storzArray) {\r\n  const matchingData = storzArray.find(dataItem => dataItem.entityId.id === mappedDStorz.fromId);\r\n\r\n  if (matchingData) {\r\n    return {\r\n      ...mappedDStorz,\r\n      latest: matchingData.latest\r\n    };\r\n  } else {\r\n    return mappedDStorz;\r\n  }\r\n}\r\n\r\nfunction findLatestAlarmState(timeseriesOfCurrentEntity, alarmTelemetryKeys ) {\r\n  let latestTelemetry = { name: \"\", ts: 0, status: null, priority: 100 };\r\n\r\n  for (let i = 0; i < alarmTelemetryKeys.length; ++i) {\r\n    let telemetry = alarmTelemetryKeys[i];\r\n    const alarmOpenDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[telemetry].ts, status: \"alarmOpen\", priority: alarmPriorities.alarmOpen };\r\n    const alarmLowBatteryDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[telemetry].ts, status: \"alarmLowBattery\", priority: alarmPriorities.alarmLowBattery, label: statusLabels.alarmLowBattery };\r\n    const alarmNoSignalDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[telemetry].ts, status: \"alarmNoSignal\", priority: alarmPriorities.alarmNoSignal, label: statusLabels.alarmNoSignal };\r\n    const alarmCloseDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[telemetry].ts, status: \"alarmClose\", priority: alarmPriorities.alarmClose, label: statusLabels.alarmClose };\r\n\r\n    if ( timeseriesOfCurrentEntity[telemetry].ts > latestTelemetry.ts && timeseriesOfCurrentEntity[telemetry].ts > 0 ) {\r\n      if(telemetry == \"alarmOpen\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmOpen < latestTelemetry.priority) {\r\n          latestTelemetry = alarmOpenDescriptor;\r\n      }\r\n      else if(telemetry == \"alarmLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmLowBattery < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmLowBatteryDescriptor;\r\n      }\r\n      else if(telemetry == \"alarmNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmNoSignal < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmNoSignalDescriptor;\r\n      }\r\n      else if(telemetry == \"alarmClose\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmClose < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmCloseDescriptor;\r\n      }\r\n    }   \r\n    else if ( timeseriesOfCurrentEntity[telemetry].ts == latestTelemetry.ts && timeseriesOfCurrentEntity[telemetry].ts > 0 ) {\r\n      if(telemetry == \"alarmOpen\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmOpen < latestTelemetry.priority) {\r\n          latestTelemetry = alarmOpenDescriptor;\r\n      }\r\n      else if(telemetry == \"alarmLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmLowBattery < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmLowBatteryDescriptor;\r\n      }\r\n      else if(telemetry == \"alarmNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmNoSignal < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmNoSignalDescriptor;\r\n      }\r\n      else if(telemetry == \"alarmClose\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmClose < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmCloseDescriptor;\r\n      }\r\n    } \r\n  }\r\n  return latestTelemetry;\r\n}\r\n\r\nfunction findLatestState(timeseriesOfCurrentEntity, telemetryKeys ) {\r\n  let latestTelemetry = { telemetryKeyName: \"\",  ts: 0, label: \"\", priority: 100};\r\n  for (let j = 0; j < telemetryKeys.length; ++j) {\r\n      let telemetryKey = telemetryKeys[j];\r\n      const inactiveDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isInactive\", priority: statusPriorities.isInactive, label: statusLabels.isInactive };\r\n      const lowBatteryDescriptor = { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isLowBattery\", priority: statusPriorities.isLowBattery, label: statusLabels.isLowBattery };\r\n      const temporaryDeactivationDescriptor = { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isTemporaryDeactivated\", priority: statusPriorities.isTemporaryDeactivated, label: statusLabels.isTemporaryDeactivated };\r\n      const noSignalDescriptor = { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isNoSignal\", priority: statusPriorities.isNoSignal, label: statusLabels.isNoSignal };\r\n      const notAssignedDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isNotAssigned\", priority: statusPriorities.isNotAssigned };\r\n      const openDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isOpen\", priority: statusPriorities.isOpen, label: statusLabels.isOpen };\r\n      const closedDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isClosed\", priority: statusPriorities.isClosed, label: statusLabels.isClosed };\r\n\r\n      if (timeseriesOfCurrentEntity[telemetryKey].ts > latestTelemetry.ts && timeseriesOfCurrentEntity[telemetryKey].ts > 0 ) {\r\n          if(telemetryKey == \"isInactive\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n              latestTelemetry = inactiveDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n              latestTelemetry = lowBatteryDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isTemporaryDeactivated\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n              latestTelemetry = temporaryDeactivationDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n              latestTelemetry = noSignalDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isNotAssigned\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n              latestTelemetry = notAssignedDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isOpen\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n              latestTelemetry = openDescriptor;\r\n          } else if(telemetryKey == \"isOpen\" && !isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n              latestTelemetry = closedDescriptor;\r\n          }\r\n      }\r\n      else if (timeseriesOfCurrentEntity[telemetryKey].ts == latestTelemetry.ts && timeseriesOfCurrentEntity[telemetryKey].ts > 0 ) {\r\n          if(telemetryKey == \"isInactive\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isInactive < latestTelemetry.priority) {\r\n              latestTelemetry = inactiveDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isLowBattery < latestTelemetry.priority ) {\r\n              latestTelemetry = lowBatteryDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isTemporaryDeactivated\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isTemporaryDeactivated < latestTelemetry.priority ) {\r\n              latestTelemetry = temporaryDeactivationDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isNoSignal < latestTelemetry.priority ) {\r\n              latestTelemetry = noSignalDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isNotAssigned\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isNotAssigned < latestTelemetry.priority ) {\r\n              latestTelemetry = notAssignedDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isOpen\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isOpen < latestTelemetry.priority ) {\r\n              latestTelemetry = openDescriptor;\r\n          } else if(telemetryKey == \"isOpen\" && !isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isClosed < latestTelemetry.priority) {\r\n              latestTelemetry = closedDescriptor;\r\n          }\r\n      }\r\n  }\r\n  return latestTelemetry;\r\n}\r\n\r\nfunction clearAlarm(dStorzElement, alarmClearPayload) {\r\n    return http.post(`/api/rule-engine/sendToRuleEngine?entityId=${dStorzElement.dStorzId}&entityType=DEVICE&key=clearAlarm`, alarmClearPayload);\r\n}\r\n\r\nfunction ackAlarm(alarmToClear) {\r\n      return http.post(`/api/alarm/${alarmToClear.alarmId}/ack`);\r\n}\r\n\r\nfunction checkRemainingAlarms(dStorzElement, alarmToClear, vm) {\r\n    recentUnacknoledgedAlarms = recentUnacknoledgedAlarms.filter(element => element.alarmId !== alarmToClear.alarmId);\r\n    http.get(`/api/alarm/DEVICE/${dStorzElement.dStorzId}?pageSize=10&page=0&sortProperty=endTs&sortOrder=DESC`).pipe().subscribe((alarmsResponse) => {\r\n        let i = vm.outletDataSource.findIndex(dataSourceElement => dataSourceElement.assigned == dStorzElement.assigned);\r\n        if (alarmsResponse.data.length) {\r\n        let recentUnacknowledgedAlarm = alarmsResponse.data.filter(alarm => alarm.status !== \"CLEARED_ACK\" && alarm.status !== \"ACTIVE_ACK\")[0];\r\n            if (recentUnacknowledgedAlarm) {\r\n              vm.outletDataSource[i].recentUnconfirmedAlarm = `${eventTypes[recentUnacknowledgedAlarm.name]}\\n${unixToHumanReadable(recentUnacknowledgedAlarm.startTs)}`;\r\n              recentUnacknoledgedAlarms.push({dStorzId: dStorzElement.dStorzId, alarmId: recentUnacknowledgedAlarm.id.id, type: recentUnacknowledgedAlarm.type, status: recentUnacknowledgedAlarm.status});\r\n            } else {\r\n                vm.outletDataSource[i].recentUnconfirmedAlarm = \"--\";\r\n            }\r\n        } else {\r\n            vm.outletDataSource[i].recentUnconfirmedAlarm = \"--\";\r\n        }\r\n    })\r\n}\r\n\r\n\r\nopenSideNavDrawer();\r\n\r\nfunction openSideNavDrawer() {\r\n  customDialog.customDialog(htmlTemplate,\r\n    popupDialogController).subscribe();\r\n  setTimeout(function () {\r\n    document.getElementById(\"popup-dialog\").classList.remove(\"closed\");\r\n  }, 10);\r\n}\r\n\r\n\r\nfunction popupDialogController(instance) {\r\n  let vm = instance;\r\n\r\n  var urlEntitiesQuery = `/api/entitiesQuery/find`;\r\n\r\n  http.post(urlEntitiesQuery, entitiesQueryBody).pipe().subscribe((entity) => {\r\n    vm.currentEntity = entity.data[0];\r\n\r\n    const telemetryKeys = entitiesQueryBody.latestValues\r\n      .filter(item => item.type === \"TIME_SERIES\")\r\n      .map(item => item.key);\r\n    const alarmTelemetryKeys = telemetryKeys.filter(item => item.startsWith(\"alarm\"));\r\n    let timeseriesOfCurrentEntity = vm.currentEntity.latest.TIME_SERIES;\r\n    let latestTelemetry = findLatestAlarmState(timeseriesOfCurrentEntity, alarmTelemetryKeys);\r\n\r\n    vm.statusId = latestTelemetry.status;\r\n    vm.statusBadge = statusLabels[vm.statusId];\r\n\r\n    document.getElementById(\"status-badge\").classList.add(vm.statusId);\r\n\r\n    vm.alarmActive = vm.currentEntity.latest.ATTRIBUTE.alarmActive ? isTrue(vm.currentEntity.latest.ATTRIBUTE.alarmActive.value) : false;\r\n    vm.modelNumber = vm.currentEntity.latest.ATTRIBUTE.modelNumber ? vm.currentEntity.latest.ATTRIBUTE.modelNumber.value : \"--\";\r\n    const streetValue = vm.currentEntity.latest.ATTRIBUTE.street.value || '';\r\n    const cityValue = vm.currentEntity.latest.ATTRIBUTE.city.value || '';\r\n    const zipValue = vm.currentEntity.latest.ATTRIBUTE.zip.value || '';\r\n    const countryValue = vm.currentEntity.latest.ATTRIBUTE.country.value || '';\r\n    const stateValue = vm.currentEntity.latest.ATTRIBUTE.state.value || '';\r\n\r\n    vm.address = `${streetValue}${streetValue && (cityValue || zipValue) ? ', ' : ''}${cityValue}${cityValue && zipValue ? ' ' : ''}${zipValue}`;\r\n        if(vm.address.length == 0) {\r\n         vm.address = \"--\";\r\n    }\r\n    vm.country = `${countryValue}${countryValue && stateValue ? ', ' : ''}${stateValue}`;\r\n    vm.zone = vm.currentEntity.latest.ATTRIBUTE.zone.value ? vm.currentEntity.latest.ATTRIBUTE.zone.value : \"--\" ;\r\n    vm.hydrantsBrand = vm.currentEntity.latest.ATTRIBUTE.hydrantsBrand ? vm.currentEntity.latest.ATTRIBUTE.hydrantsBrand.value : \"--\";\r\n\r\n\r\n    vm.navigateToMap = function () {\r\n      const longitude = vm.currentEntity.latest.ATTRIBUTE.longitude.value;\r\n      const latitude = vm.currentEntity.latest.ATTRIBUTE.latitude.value;\r\n      const zoomLevel = 10;\r\n      const googleMapUrl = `https://www.google.com/maps/search/?api=1&query=${latitude},${longitude}&zoom=${zoomLevel}`;\r\n\r\n      window.open(googleMapUrl, '_blank');\r\n    }\r\n    \r\n      vm.displayedColumns = ['outlet', 'assigned', 'status', 'recentUnconfirmedAlarm', 'action'];\r\n\r\n  http.post(urlEntitiesQuery, relationsQueryStorz).pipe().subscribe((storzResult) => {\r\n    let relatedEntities = storzResult.data;\r\n    vm.outletDataSource = [];\r\n    let emptyRow = { outlet: '--', assigned: '--', status: '--', recentUnconfirmedAlarm: '--', assignedSerialNumber: '--'  };\r\n    if(vm.currentEntity.latest.ATTRIBUTE.storzCount.value) {\r\n        vm.outletDataSource = Array.from({ length: parseInt(vm.currentEntity.latest.ATTRIBUTE.storzCount.value) }, () => emptyRow);\r\n    } else {\r\n        vm.outletDataSource = Array.from({ length: 3 }, () => emptyRow);\r\n    }\r\n\r\n    http.post('/api/relations/info', relatedDStorzQuery).pipe().subscribe((dStorzRelationResult) => {\r\n      let queryPromises = [];\r\n\r\n      let DStorzIds = dStorzRelationResult\r\n        .filter(relation => relation.to.entityType == \"DEVICE\")\r\n        .map(relation => relation.to.id);\r\n      let mappedDStorz = mapAssetsToDevice(dStorzRelationResult);\r\n      \r\n      if(DStorzIds.length == 0) {\r\n         vm.dStorzDataReady = true;\r\n      }\r\n\r\n      for (let i = 0; i < DStorzIds.length; i++) {\r\n        let dStorzId = DStorzIds[i];\r\n        http.get(`/api/alarm/DEVICE/${dStorzId}?pageSize=10&page=0&sortProperty=endTs&sortOrder=DESC`).pipe().subscribe((alarmsResponse) => {\r\n          let currentDStorz = mappedDStorz.find(dStorz => dStorz.toId == dStorzId);\r\n          let currentRelatedEntity = matchDStorzMappingWithStorz(currentDStorz, relatedEntities);\r\n          let exitName = currentRelatedEntity.latest.ATTRIBUTE.exitName.value ? currentRelatedEntity.latest.ATTRIBUTE.exitName.value : \"--\";\r\n          let exitDiameter = currentRelatedEntity.latest.ATTRIBUTE.exitDiameter.value ? currentRelatedEntity.latest.ATTRIBUTE.exitDiameter.value : \"--\";\r\n          vm.outletDataSource[i] = {\r\n            dStorzId: dStorzId,\r\n            outlet: `${exitName}, ${exitDiameter} mm`,\r\n            assigned: currentRelatedEntity.name,\r\n            status: \"--\",\r\n            recentUnconfirmedAlarm: \"--\",\r\n            assignedSerialNumber: \"--\"\r\n          }\r\n\r\n          http.post(urlEntitiesQuery, relationsQueryDStorz).pipe().subscribe((dStorzResult) => {\r\n            let relatedDStorzes = dStorzResult.data;\r\n            for (let k = 0; k < relatedDStorzes.length; k++) {\r\n              const currentDStorzInDataSource = vm.outletDataSource.find(dataItem => relatedDStorzes[k].entityId.id === dataItem.dStorzId);\r\n              let timeseriesOfCurrentEntity = relatedDStorzes[k].latest.TIME_SERIES;\r\n              const telemetryKeys = Object.keys(relatedDStorzes[k].latest.TIME_SERIES);\r\n              let latestTelemetry = findLatestState(timeseriesOfCurrentEntity, telemetryKeys);\r\n              currentDStorzInDataSource[\"assignedSerialNumber\"] = relatedDStorzes[k].latest.ATTRIBUTE.serialNumber.value ? relatedDStorzes[k].latest.ATTRIBUTE.serialNumber.value : \"--\";\r\n              if (latestTelemetry.ts == 0) {\r\n                currentDStorzInDataSource[\"status\"] = \"--\";\r\n              } else {\r\n                currentDStorzInDataSource[\"status\"] = `${latestTelemetry.label}\\n${unixToHumanReadable(latestTelemetry.ts)}`;\r\n              }\r\n            }\r\n            //to show the exit numbers in order\r\n\r\n            const sortedDatasource = [];\r\n            let expectedOutlets = [];\r\n            if(vm.currentEntity.latest.ATTRIBUTE.storzCount.value == 2) {\r\n                expectedOutlets = ['Exit 1', 'Exit 2'];\r\n            } else {\r\n                expectedOutlets = ['Exit 1', 'Exit 2', 'Exit 3'];\r\n            }\r\n           \r\n            expectedOutlets.forEach(exit => {\r\n                const matchingEntry = vm.outletDataSource.find(entry => entry.outlet.includes(exit));\r\n                if (matchingEntry) {\r\n                    sortedDatasource.push(matchingEntry);\r\n                } else {\r\n                    sortedDatasource.push({ outlet: '--', assigned: '--', status: '--', recentUnconfirmedAlarm: '--' , assignedSerialNumber: '--'  });\r\n                }\r\n            });\r\n            \r\n            vm.outletDataSource = sortedDatasource;\r\n            \r\n            vm.dStorzDataReady = true;\r\n          })\r\n\r\n          if (alarmsResponse.data.length) {\r\n            let recentUnacknowledgedAlarm = alarmsResponse.data.filter(alarm => alarm.status !== \"CLEARED_ACK\" && alarm.status !== \"ACTIVE_ACK\")[0];\r\n            if (recentUnacknowledgedAlarm) {\r\n              vm.outletDataSource[i].recentUnconfirmedAlarm = `${eventTypes[recentUnacknowledgedAlarm.name]}\\n${unixToHumanReadable(recentUnacknowledgedAlarm.startTs)}`;\r\n              recentUnacknoledgedAlarms.push({dStorzId: dStorzId, alarmId: recentUnacknowledgedAlarm.id.id, type: recentUnacknowledgedAlarm.type, status: recentUnacknowledgedAlarm.status });\r\n            }\r\n          }\r\n        })\r\n\r\n      }\r\n    })\r\n  })\r\n\r\n  vm.cancel = function () {\r\n    document.getElementById(\"popup-dialog\").classList.add(\"closed\");\r\n    vm.dialogRef.close(null);\r\n  };\r\n  });\r\n\r\n/*\r\n  http.post(urlEntitiesQuery, relationsQueryZone).pipe().subscribe((result) => {\r\n    let relatedZone = result.data.find(relatedEntity => relatedEntity.latest.ATTRIBUTE.latitude.value && relatedEntity.latest.ATTRIBUTE.longitude.value);\r\n\r\n    vm.zone = relatedZone ? relatedZone.latest.ENTITY_FIELD.name.value : '--';\r\n  })\r\n   */       \r\n    vm.openConfirmDialog = function(dStorzElement) {\r\n        let title = 'Confirm';\r\n        let content = 'Are you sure to confirm this alarm?';\r\n         if(!vm.disableConfirmButton(dStorzElement)) {\r\n                 dialogs.confirm(title, content, 'Cancel', 'Confirm').subscribe(\r\n                function(result) {\r\n                    if (result) {\r\n                        vm.ackAlarm(dStorzElement)\r\n                    }\r\n                }\r\n            );\r\n         }\r\n    \r\n    \r\n    }\r\n\r\n  \r\n  vm.ackAlarm = function(dStorzElement) {\r\n    let alarmToClear = recentUnacknoledgedAlarms.find(alarm => alarm.dStorzId == dStorzElement.dStorzId);\r\n     let alarmUpperCase = alarmToClear.type.charAt(0).toUpperCase() + alarmToClear.type.slice(1);\r\n    let alarmClearPayload = {\r\n        msg: null,\r\n        metadata: {\r\n            deviceName: dStorzElement.assigned,\r\n            deviceType: \"d-storz\",\r\n            alarmClearType: `clear${alarmUpperCase}`\r\n        }\r\n    }\r\n    switch(alarmToClear.status) {\r\n        case \"CLEARED_UNACK\":\r\n        case \"ACTIVE_UNACK\":\r\n            ackAlarm(alarmToClear).pipe().subscribe(() => {\r\n                checkRemainingAlarms(dStorzElement,alarmToClear, vm);\r\n            })\r\n            break;\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  vm.disableConfirmButton = function(dStorzElement) {\r\n    let alarmToClear = recentUnacknoledgedAlarms.find(alarm => alarm.dStorzId == dStorzElement.dStorzId);\r\n    if(alarmToClear) {\r\n        return false;\r\n    } else {\r\n        return true;\r\n    }\r\n  }\r\n\r\n  vm.setAllTranslations = function () {\r\n    vm.actionLabel = getTranslation(\"hawle-dashboard.action\");\r\n    vm.dialogTitle = getTranslation(\"hawle-dashboard.alarm.alarm-info\");\r\n    vm.hydrantNumber = getTranslation(\"hawle-dashboard.hydrant.hydrant-number\");\r\n    vm.brand = getTranslation(\"hawle-dashboard.hydrant.brand\");\r\n    vm.model = getTranslation(\"hawle-dashboard.hydrant.model\");\r\n    vm.temporaryDeactivation = getTranslation(\"hawle-dashboard.temporary-deactivation\");\r\n    vm.outletInformation = getTranslation(\"hawle-dashboard.hydrant.outlet-information\");\r\n    vm.reason = getTranslation(\"hawle-dashboard.reason\");\r\n    vm.time = getTranslation(\"hawle-dashboard.time\");\r\n    vm.createdBy = getTranslation(\"hawle-dashboard.created-by\");\r\n    vm.assignedDStorz = getTranslation(\"hawle-dashboard.hydrant.assigned-dstorz\");\r\n    vm.statusTimestamp = getTranslation(\"hawle-dashboard.hydrant.status-timestamp\");\r\n    vm.routeTo = getTranslation(\"hawle-dashboard.hydrant.route-to\");\r\n    vm.locationLabel = getTranslation(\"hawle-dashboard.location\");\r\n    vm.zoneLabel = getTranslation(\"hawle-dashboard.zone\");\r\n    vm.confirmAlarm = getTranslation(\"hawle-dashboard.alarm.confirm\");\r\n    vm.viewAlarms = getTranslation(\"hawle-dashboard.alarm.view-alarms\");\r\n    vm.recentUnconfirmedAlarmLabel =  getTranslation(\"hawle-dashboard.recent-unconfirmed-alarm\");\r\n  };\r\n\r\n  vm.setAllTranslations();\r\n}\r\n",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "61bd603c-72e7-440a-1427-aa6c0eb92ab5"
              }
            ]
          },
          "showTitleIcon": false,
          "titleTooltip": "",
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": ""
        },
        "row": 0,
        "col": 0,
        "id": "f80aeac6-e8c5-1a09-9cb0-c5f007706c6a"
      },
      "50fefbdb-b137-4839-6eb5-7c908ce2036c": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "b1c13d37-1982-e4ab-6bbc-3d274f7ecf6a",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.7480703723615065
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": false,
            "isExternalBtn": false,
            "formName": "Create New User",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Email",
                    "fieldName": "email",
                    "type": "ENTITY_FIELD",
                    "fieldType": "email",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Phone",
                    "fieldName": "phone",
                    "type": "ENTITY_FIELD",
                    "fieldType": "phone",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Salutation",
                    "fieldName": "salutation",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\nlet rxjs = widgetContext.rxjs;\n\nreturn rxjs.of([\n    {\n        name: 'Mr',\n        value: 'mr'\n    },\n    {\n        name: 'Mrs',\n        value: 'mrs'\n    }\n    ])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "First Name",
                    "fieldName": "firstName",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Last Name",
                    "fieldName": "lastName",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Function",
                    "fieldName": "function",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Role",
                    "fieldName": "role",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/entityGroups/USER`;\nconst selfRegistrationRoleName = \"Self Registration Users\";\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response.filter(res => !res.groupAll && !(res.name === selfRegistrationRoleName))\n        .map(\n            data => ({\n                name: data.name,\n                value: JSON.stringify({\n                    id: data.id.id,\n                    name: data.name\n                })\n            })).filter(data => data.name.toLowerCase().includes(searchTerm && searchTerm.trim() ? searchTerm.trim() : ''))\n        ));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Description",
                    "fieldName": "description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Activation Method",
                    "fieldName": "activationMethod",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Display Activation Link\", value: \"showActivationLink\"},\n    {name: \"Send Activation Mail\", value: \"sendActivationLink\"},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              }
            ],
            "genericFormFunction": "let $injector = widgetContext.$scope.$injector;\r\nlet UsersTableConfigResolver = $injector.get(widgetContext.servicesMap.get('UsersTableConfigResolver'));\r\nlet userService = $injector.get(widgetContext.servicesMap.get('userService'));\r\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\r\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nlet currentEntityValue = formData.value;\r\nlet showActivationLink = currentEntityValue.activationMethod === \"showActivationLink\";\r\nlet rxjs = widgetContext.rxjs;\r\n\r\nfunction saveUser(payload, sendActivationEmail, entityGroupId, nextFn) {\r\n    userService.saveUser(payload, sendActivationEmail, entityGroupId).subscribe(\r\n        (user) => {\r\n            showActivationLink = currentEntityValue.activationMethod === \"showActivationLink\";\r\n            nextFn(user)\r\n            //   if (currentEntityValue.activationMethod === \"showActivationLink\") {\r\n            //     nextFn(user)\r\n            //   } else {\r\n            //     widgetContext.updateAliases();\r\n            //     openDashboardState('all_users');\r\n            //   }\r\n        },\r\n        (err) => {\r\n            widgetContext.isGenericLoading$.next(false);\r\n        }\r\n    );\r\n}\r\n\r\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\nwidgetContext.isGenericLoading$.next(true);\r\n\r\nfunction showToaster(message, isErrorType = false) {\r\n    const translatedMessage = translationService.instant(message);\r\n    if (isErrorType) {\r\n        widgetContext.showErrorToast(translatedMessage);\r\n    } else {\r\n        widgetContext.showSuccessToast(translatedMessage);\r\n    }\r\n}\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.isGenericLoading$.next(false);\r\n    showToaster('hawle-dashboard.user-saved-successfully');\r\n    widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.updateState(statedId,\r\n            params);\r\n    }\r\n}\r\nfunction saveEntityRelations(relationsFromToList = [], defaultRelationType = null) {\r\n    const relationPayload = []\r\n    relationsFromToList.forEach((relation) => {\r\n        relationPayload.push({\r\n            \"type\": defaultRelationType || relation.type,\r\n            \"additionalInfo\": relation.additionalInfo || null,\r\n            \"typeGroup\": relation.typeGroup || \"COMMON\",\r\n            \"from\": relation.from,\r\n            \"to\": relation.to\r\n        })\r\n    });\r\n    let url = `/api/relation/bulk`;\r\n    return http.post(url, relationPayload);\r\n}\r\n\r\nfunction saveServerAttributes(serverAttributes, entityType, EntityId) {\r\n    let url = `/api/plugins/telemetry/${entityType}/${EntityId}/SERVER_SCOPE`;\r\n    return http.post(url, serverAttributes);\r\n}\r\n\r\nfunction getServerScopes(entityType, entityId) {\r\n    let url = `/api/plugins/telemetry/${entityType}/${entityId}/values/attributes/SERVER_SCOPE`;\r\n    return http.get(url);\r\n}\r\n\r\nfunction getAlarmDefinationRealtionsFromServerScopes(serverScopes) {\r\n    return serverScopes.filter((serverScope) => {\r\n        if (serverScope.key.includes(\"alarmDefinition\")) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }).map((serverScope) => {\r\n        return serverScope.value;\r\n    });\r\n}\r\n\r\nfunction addRelation(customerUserId, owner) {\r\n    if (owner.entityType === 'TENANT') {\r\n        return widgetContext.rxjs.of(null);\r\n    } else {\r\n        let relation = {\r\n            type: 'Owns',\r\n            typeGroup: 'COMMON',\r\n            to: owner,\r\n            from: customerUserId\r\n        };\r\n        return entityRelationService.saveRelation(relation);\r\n    }\r\n}\r\n\r\n\r\nfunction main() {\r\n    const currentEntityValueRole = JSON.parse(currentEntityValue.role);\r\n    UsersTableConfigResolver.resolve().subscribe((\r\n        tableConfigResponse) => {\r\n        const userAuthority = widgetContext.currentUser.authority;\r\n        getIsSelectedUserGroupHasAllPermission(currentEntityValueRole.id).subscribe((hasAllPermission) => {\r\n            const payload = {\r\n            email: currentEntityValue.email,\r\n            phone: currentEntityValue.phone,\r\n            firstName: currentEntityValue.firstName,\r\n            lastName: currentEntityValue.lastName,\r\n            additionalInfo: {\r\n                description: currentEntityValue.description,\r\n                defaultDashboardId: null,\r\n                defaultDashboardFullscreen: !hasAllPermission,\r\n                homeDashboardId: null,\r\n                homeDashboardHideToolbar: true\r\n            },\r\n            authority: userAuthority\r\n        }\r\n            saveUser(\r\n            payload,\r\n            currentEntityValue.activationMethod !== \"showActivationLink\",\r\n            currentEntityValueRole.id,\r\n            (user) => {\r\n                // making a relation customer user with customer\r\n                const customerUserId = user.id;\r\n                const owner = {\r\n                    id: widgetContext.currentUser.authority === 'TENANT_ADMIN' ? widgetContext.currentUser.tenantId :\r\n                        widgetContext.currentUser.customerId,\r\n                    entityType: widgetContext.currentUser.authority === 'TENANT_ADMIN' ? 'TENANT' : 'CUSTOMER'\r\n                }\r\n                addRelation(customerUserId, owner).pipe().subscribe((addRelationResponse) => {});\r\n\r\n                const serverAttributesPayload = {\r\n                    salutation: currentEntityValue.salutation,\r\n                    function: currentEntityValue.function,\r\n                    role: [currentEntityValueRole],\r\n                    description: currentEntityValue.description\r\n                }\r\n                saveServerAttributes(serverAttributesPayload, \"USER\", user.id.id).subscribe((_) => {\r\n                    getServerScopes('ENTITY_GROUP', currentEntityValueRole.id).subscribe((serverScopes) => {\r\n                        const relationPayload = []\r\n                        getAlarmDefinationRealtionsFromServerScopes(serverScopes).forEach((alarmDefination) => {\r\n                            relationPayload.push({\r\n                                \"type\": \"Owns\",\r\n                                'from': user.id,\r\n                                'to': {\r\n                                    'entityType': 'ASSET',\r\n                                    'id': alarmDefination.id\r\n                                },\r\n                            })\r\n                        });\r\n                        saveEntityRelations(relationPayload).subscribe((relations) => {\r\n                            widgetContext.updateAliases();\r\n                            openDashboardState('all_users');\r\n                            if (showActivationLink) {\r\n                                UsersTableConfigResolver.displayActivationLink(null, user);\r\n                            }\r\n                        });\r\n                    });\r\n                });\r\n\r\n            });\r\n        });\r\n    })\r\n}\r\n\r\nfunction getIsSelectedUserGroupHasAllPermission(entityId) {\r\n    const api = `/api/userGroup/${entityId}/groupPermissions`\r\n    return http.get(api).pipe(rxjs.map((permissions) => \r\n        !!(permissions || []).find((permission) => \r\n            permission.role && permission.role.permissions && permission.role.permissions.ALL && permission.role.permissions.ALL.includes(\"ALL\")\r\n            )\r\n        )\r\n    )\r\n}\r\n\r\nmain()"
          },
          "title": "Create New User",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false,
          "titleTooltip": "",
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          }
        },
        "row": 0,
        "col": 0,
        "id": "50fefbdb-b137-4839-6eb5-7c908ce2036c"
      },
      "573590ac-38af-3398-75c4-dbf010cacb9a": {
        "isSystemType": true,
        "bundleAlias": "alarm_widgets",
        "typeAlias": "alarms_table",
        "type": "alarm",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 10.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "hideInterval": false,
            "hideAggregation": false,
            "hideAggInterval": false,
            "hideTimezone": false,
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 0,
              "timewindowMs": 25920000000,
              "quickInterval": "CURRENT_DAY",
              "interval": 1000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            },
            "displayValue": "Realtime - last 300 days "
          },
          "showTitle": true,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSelection": true,
            "enableSearch": true,
            "displayDetails": false,
            "allowAcknowledgment": false,
            "allowClear": false,
            "displayPagination": true,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "enableSelectColumnDisplay": true,
            "enableStickyAction": false,
            "enableFilter": true,
            "enableStickyHeader": true,
            "reserveSpaceForHiddenAction": "true",
            "useRowStyleFunction": false,
            "enableExportDataDisplay": true
          },
          "title": "Alarms",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 600,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "name": null,
            "entityAliasId": "4c30635a-474a-9dbd-0d25-b9a38527e2cf",
            "filterId": null,
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.021092237451093787
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Alarm",
                "color": "#f44336",
                "settings": {
                  "useCellStyleFunction": false,
                  "useCellContentFunction": true,
                  "columnWidth": "100px",
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "const redMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNSAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8xXzQ5IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0yMy4xMjUgMTAuNUMyMy4xMjUgMTYuMjk5IDE4LjQyNCAyMSAxMi42MjUgMjFDNi44MjYwMSAyMSAyLjEyNSAxNi4yOTkgMi4xMjUgMTAuNUMyLjEyNSA0LjcwMTAxIDYuODI2MDEgMCAxMi42MjUgMEMxOC40MjQgMCAyMy4xMjUgNC43MDEwMSAyMy4xMjUgMTAuNVoiLz4KPC9tYXNrPgo8cGF0aCBkPSJNMjMuMTI1IDEwLjVDMjMuMTI1IDE2LjI5OSAxOC40MjQgMjEgMTIuNjI1IDIxQzYuODI2MDEgMjEgMi4xMjUgMTYuMjk5IDIuMTI1IDEwLjVDMi4xMjUgNC43MDEwMSA2LjgyNjAxIDAgMTIuNjI1IDBDMTguNDI0IDAgMjMuMTI1IDQuNzAxMDEgMjMuMTI1IDEwLjVaIiBmaWxsPSIjRUY0NDQ0Ii8+CjxwYXRoIGQ9Ik0yMi4zNzUgMTAuNUMyMi4zNzUgMTUuODg0OCAxOC4wMDk4IDIwLjI1IDEyLjYyNSAyMC4yNVYyMS43NUMxOC44MzgyIDIxLjc1IDIzLjg3NSAxNi43MTMyIDIzLjg3NSAxMC41SDIyLjM3NVpNMTIuNjI1IDIwLjI1QzcuMjQwMjIgMjAuMjUgMi44NzUgMTUuODg0OCAyLjg3NSAxMC41SDEuMzc1QzEuMzc1IDE2LjcxMzIgNi40MTE4IDIxLjc1IDEyLjYyNSAyMS43NVYyMC4yNVpNMi44NzUgMTAuNUMyLjg3NSA1LjExNTIyIDcuMjQwMjIgMC43NSAxMi42MjUgMC43NVYtMC43NUM2LjQxMTggLTAuNzUgMS4zNzUgNC4yODY4IDEuMzc1IDEwLjVIMi44NzVaTTEyLjYyNSAwLjc1QzE4LjAwOTggMC43NSAyMi4zNzUgNS4xMTUyMiAyMi4zNzUgMTAuNUgyMy44NzVDMjMuODc1IDQuMjg2OCAxOC44MzgyIC0wLjc1IDEyLjYyNSAtMC43NVYwLjc1WiIgZmlsbD0iI0I5MUMxQyIgbWFzaz0idXJsKCNwYXRoLTEtaW5zaWRlLTFfMV80OSkiLz4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZGRfMV80OSkiPgo8cGF0aCBkPSJNMTEuNTg2NiA3LjI5OThMOS45NTM5MSA0LjU2NTQxQzkuNzg1MjUgNC4yODI5NCA5Ljg3MjE4IDMuOTE3NTMgMTAuMTUgMy43NDEyOEwxMS45ODQgMi41Nzc3MUMxMi4yNjg2IDIuMzk3MTEgMTIuNjQ1OSAyLjQ4MjkzIDEyLjgyNDUgMi43Njg4OUwxNC45NDkzIDYuMTcyNDFDMTUuMDA4IDYuMjY2MzggMTUuMDM5OCA2LjM3NDYxIDE1LjA0MTQgNi40ODUzOUwxNS4xMzU3IDEzLjEyMjJDMTUuMTQwNSAxMy40NjA5IDE0Ljg2NzIgMTMuNzM4MSAxNC41Mjg1IDEzLjczODFIMTIuMjc5OEMxMS45NDQ0IDEzLjczODEgMTEuNjcyNSAxMy40NjYyIDExLjY3MjUgMTMuMTMwOFY3LjYxMTE0QzExLjY3MjUgNy41MDE1MSAxMS42NDI4IDcuMzkzOTIgMTEuNTg2NiA3LjI5OThaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTAuNDI2MSA1LjgxNzQ4TDkuODM2NTQgNC44NTEwNkM5LjY2MTM5IDQuNTYzOTUgOS4yODYyNiA0LjQ3Mzg2IDguOTk5ODMgNC42NTAxM0w4LjY0NzUyIDQuODY2OTRDOC4zNTk4MSA1LjA0NCA4LjI3MTkgNS40MjE4MSA4LjQ1MTg5IDUuNzA3N0w5LjA2MjUxIDYuNjc3NTZDOS4yNDQzNiA2Ljk2NjQgOS42Mjg0NiA3LjA0ODY5IDkuOTEyNjggNi44NTk3TDEwLjI0MzkgNi42Mzk0NEMxMC41MTU1IDYuNDU4ODQgMTAuNTk2IDYuMDk1OTMgMTAuNDI2MSA1LjgxNzQ4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE0Ljg4ODUgMTQuMTQ3MUgxMS45Mjg0QzExLjc2NDggMTQuMTQ3MSAxMS42MDgxIDE0LjIxMzEgMTEuNDkzOCAxNC4zMzAzTDEwLjYxNDYgMTUuMjMxM0MxMC41MDM5IDE1LjM0NDcgMTAuNDQyIDE1LjQ5NjkgMTAuNDQyIDE1LjY1NTRWMTYuNjQyN0MxMC40NDIgMTYuOTc4MSAxMC43MTM5IDE3LjI1IDExLjA0OTIgMTcuMjVIMTMuNDM1N0gxNS43Njc3QzE2LjEwMzEgMTcuMjUgMTYuMzc1IDE2Ljk3ODEgMTYuMzc1IDE2LjY0MjdWMTUuNjU1NEMxNi4zNzUgMTUuNDk2OSAxNi4zMTMgMTUuMzQ0NyAxNi4yMDI0IDE1LjIzMTNMMTUuMzIzMiAxNC4zMzAzQzE1LjIwODkgMTQuMjEzMSAxNS4wNTIyIDE0LjE0NzEgMTQuODg4NSAxNC4xNDcxWiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8xXzQ5IiB4PSI2LjEwODQzIiB5PSIwLjg3MDYzMSIgd2lkdGg9IjEyLjUxNjYiIGhlaWdodD0iMTkuMjY2OSIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPgo8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIwLjYzNzUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS4xMjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjE5IDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMV80OSIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIwLjE4NzUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMC4zNzUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMV80OSIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMV80OSIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18xXzQ5IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\nconst crossedMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8yXzYiIGZpbGw9IndoaXRlIj4KPHBhdGggZD0iTTIyLjUgMTAuNUMyMi41IDE2LjI5OSAxNy43OTkgMjEgMTIgMjFDNi4yMDEwMSAyMSAxLjUgMTYuMjk5IDEuNSAxMC41QzEuNSA0LjcwMTAxIDYuMjAxMDEgMCAxMiAwQzE3Ljc5OSAwIDIyLjUgNC43MDEwMSAyMi41IDEwLjVaIi8+CjwvbWFzaz4KPHBhdGggZD0iTTIyLjUgMTAuNUMyMi41IDE2LjI5OSAxNy43OTkgMjEgMTIgMjFDNi4yMDEwMSAyMSAxLjUgMTYuMjk5IDEuNSAxMC41QzEuNSA0LjcwMTAxIDYuMjAxMDEgMCAxMiAwQzE3Ljc5OSAwIDIyLjUgNC43MDEwMSAyMi41IDEwLjVaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjEuNzUgMTAuNUMyMS43NSAxNS44ODQ4IDE3LjM4NDggMjAuMjUgMTIgMjAuMjVWMjEuNzVDMTguMjEzMiAyMS43NSAyMy4yNSAxNi43MTMyIDIzLjI1IDEwLjVIMjEuNzVaTTEyIDIwLjI1QzYuNjE1MjIgMjAuMjUgMi4yNSAxNS44ODQ4IDIuMjUgMTAuNUgwLjc1QzAuNzUgMTYuNzEzMiA1Ljc4NjggMjEuNzUgMTIgMjEuNzVWMjAuMjVaTTIuMjUgMTAuNUMyLjI1IDUuMTE1MjIgNi42MTUyMiAwLjc1IDEyIDAuNzVWLTAuNzVDNS43ODY4IC0wLjc1IDAuNzUgNC4yODY4IDAuNzUgMTAuNUgyLjI1Wk0xMiAwLjc1QzE3LjM4NDggMC43NSAyMS43NSA1LjExNTIyIDIxLjc1IDEwLjVIMjMuMjVDMjMuMjUgNC4yODY4IDE4LjIxMzIgLTAuNzUgMTIgLTAuNzVWMC43NVoiIGZpbGw9IiM2NDc0OEIiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzJfNikiLz4KPHBhdGggZD0iTTEwLjk2MTYgNy4yOTk4TDkuMzI4OTEgNC41NjU0MUM5LjE2MDI1IDQuMjgyOTQgOS4yNDcxOCAzLjkxNzUzIDkuNTI0OTggMy43NDEyOEwxMS4zNTkgMi41Nzc3MUMxMS42NDM2IDIuMzk3MTEgMTIuMDIwOSAyLjQ4MjkzIDEyLjE5OTUgMi43Njg4OUwxNC4zMjQzIDYuMTcyNDFDMTQuMzgzIDYuMjY2MzggMTQuNDE0OCA2LjM3NDYxIDE0LjQxNjQgNi40ODUzOUwxNC41MTA3IDEzLjEyMjJDMTQuNTE1NSAxMy40NjA5IDE0LjI0MjIgMTMuNzM4MSAxMy45MDM1IDEzLjczODFIMTEuNjU0OEMxMS4zMTk0IDEzLjczODEgMTEuMDQ3NSAxMy40NjYyIDExLjA0NzUgMTMuMTMwOFY3LjYxMTE0QzExLjA0NzUgNy41MDE1MSAxMS4wMTc4IDcuMzkzOTIgMTAuOTYxNiA3LjI5OThaIiBmaWxsPSIjMDA5REUyIi8+CjxwYXRoIGQ9Ik05LjgwMTExIDUuODE3NDhMOS4yMTE1NCA0Ljg1MTA2QzkuMDM2MzkgNC41NjM5NSA4LjY2MTI2IDQuNDczODYgOC4zNzQ4MyA0LjY1MDEzTDguMDIyNTIgNC44NjY5NEM3LjczNDgxIDUuMDQ0IDcuNjQ2OSA1LjQyMTgxIDcuODI2ODkgNS43MDc3TDguNDM3NTEgNi42Nzc1NkM4LjYxOTM2IDYuOTY2NCA5LjAwMzQ2IDcuMDQ4NjkgOS4yODc2OCA2Ljg1OTdMOS42MTg5MyA2LjYzOTQ0QzkuODkwNTQgNi40NTg4NCA5Ljk3MDk3IDYuMDk1OTMgOS44MDExMSA1LjgxNzQ4WiIgZmlsbD0iIzAwOURFMiIvPgo8cGF0aCBkPSJNMTQuMjYzNSAxNC4xNDcxSDExLjMwMzRDMTEuMTM5OCAxNC4xNDcxIDEwLjk4MzEgMTQuMjEzMSAxMC44Njg4IDE0LjMzMDNMOS45ODk1OSAxNS4yMzEzQzkuODc4OTEgMTUuMzQ0NyA5LjgxNjk2IDE1LjQ5NjkgOS44MTY5NiAxNS42NTU0VjE2LjY0MjdDOS44MTY5NiAxNi45NzgxIDEwLjA4ODkgMTcuMjUgMTAuNDI0MiAxNy4yNUgxMi44MTA3SDE1LjE0MjdDMTUuNDc4MSAxNy4yNSAxNS43NSAxNi45NzgxIDE1Ljc1IDE2LjY0MjdWMTUuNjU1NEMxNS43NSAxNS40OTY5IDE1LjY4OCAxNS4zNDQ3IDE1LjU3NzQgMTUuMjMxM0wxNC42OTgyIDE0LjMzMDNDMTQuNTgzOSAxNC4yMTMxIDE0LjQyNzIgMTQuMTQ3MSAxNC4yNjM1IDE0LjE0NzFaIiBmaWxsPSIjMDA5REUyIi8+CjxtYXNrIGlkPSJwYXRoLTQtb3V0c2lkZS0yXzJfNiIgbWFza1VuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iMiIgeT0iMC41IiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9ImJsYWNrIj4KPHJlY3QgZmlsbD0id2hpdGUiIHg9IjIiIHk9IjAuNSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTkuNSAxMC41QzE5LjUgMTQuNjQyMSAxNi4xNDIxIDE4IDEyIDE4QzEwLjE5OSAxOCA4LjU0NjM1IDE3LjM2NTIgNy4yNTM0NSAxNi4zMDcyTDE3LjgwNzIgNS43NTM0NUMxOC44NjUyIDcuMDQ2MzUgMTkuNSA4LjY5OTA1IDE5LjUgMTAuNVpNNi4xOTI3OSAxNS4yNDY1TDE2Ljc0NjUgNC42OTI3OUMxNS40NTM2IDMuNjM0NzcgMTMuODAxIDMgMTIgM0M3Ljg1Nzg2IDMgNC41IDYuMzU3ODYgNC41IDEwLjVDNC41IDEyLjMwMSA1LjEzNDc3IDEzLjk1MzYgNi4xOTI3OSAxNS4yNDY1Wk0yMSAxMC41QzIxIDE1LjQ3MDYgMTYuOTcwNiAxOS41IDEyIDE5LjVDNy4wMjk0NCAxOS41IDMgMTUuNDcwNiAzIDEwLjVDMyA1LjUyOTQ0IDcuMDI5NDQgMS41IDEyIDEuNUMxNi45NzA2IDEuNSAyMSA1LjUyOTQ0IDIxIDEwLjVaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xOS41IDEwLjVDMTkuNSAxNC42NDIxIDE2LjE0MjEgMTggMTIgMThDMTAuMTk5IDE4IDguNTQ2MzUgMTcuMzY1MiA3LjI1MzQ1IDE2LjMwNzJMMTcuODA3MiA1Ljc1MzQ1QzE4Ljg2NTIgNy4wNDYzNSAxOS41IDguNjk5MDUgMTkuNSAxMC41Wk02LjE5Mjc5IDE1LjI0NjVMMTYuNzQ2NSA0LjY5Mjc5QzE1LjQ1MzYgMy42MzQ3NyAxMy44MDEgMyAxMiAzQzcuODU3ODYgMyA0LjUgNi4zNTc4NiA0LjUgMTAuNUM0LjUgMTIuMzAxIDUuMTM0NzcgMTMuOTUzNiA2LjE5Mjc5IDE1LjI0NjVaTTIxIDEwLjVDMjEgMTUuNDcwNiAxNi45NzA2IDE5LjUgMTIgMTkuNUM3LjAyOTQ0IDE5LjUgMyAxNS40NzA2IDMgMTAuNUMzIDUuNTI5NDQgNy4wMjk0NCAxLjUgMTIgMS41QzE2Ljk3MDYgMS41IDIxIDUuNTI5NDQgMjEgMTAuNVoiIGZpbGw9IiNFRjQ0NDQiLz4KPHBhdGggZD0iTTcuMjUzNDUgMTYuMzA3Mkw2LjcyMzEyIDE1Ljc3NjlMNi4xMzcxNiAxNi4zNjI4TDYuNzc4NDcgMTYuODg3Nkw3LjI1MzQ1IDE2LjMwNzJaTTE3LjgwNzIgNS43NTM0NUwxOC4zODc2IDUuMjc4NDdMMTcuODYyOCA0LjYzNzE2TDE3LjI3NjkgNS4yMjMxMkwxNy44MDcyIDUuNzUzNDVaTTYuMTkyNzkgMTUuMjQ2NUw1LjYxMjM2IDE1LjcyMTVMNi4xMzcxNiAxNi4zNjI4TDYuNzIzMTIgMTUuNzc2OUw2LjE5Mjc5IDE1LjI0NjVaTTE2Ljc0NjUgNC42OTI3OUwxNy4yNzY5IDUuMjIzMTJMMTcuODYyOCA0LjYzNzE2TDE3LjIyMTUgNC4xMTIzNkwxNi43NDY1IDQuNjkyNzlaTTEyIDE4Ljc1QzE2LjU1NjMgMTguNzUgMjAuMjUgMTUuMDU2MyAyMC4yNSAxMC41SDE4Ljc1QzE4Ljc1IDE0LjIyNzkgMTUuNzI3OSAxNy4yNSAxMiAxNy4yNVYxOC43NVpNNi43Nzg0NyAxNi44ODc2QzguMjAwNDYgMTguMDUxMyAxMC4wMTk2IDE4Ljc1IDEyIDE4Ljc1VjE3LjI1QzEwLjM3ODUgMTcuMjUgOC44OTIyNSAxNi42NzkyIDcuNzI4NDMgMTUuNzI2OEw2Ljc3ODQ3IDE2Ljg4NzZaTTE3LjI3NjkgNS4yMjMxMkw2LjcyMzEyIDE1Ljc3NjlMNy43ODM3OCAxNi44Mzc1TDE4LjMzNzUgNi4yODM3OEwxNy4yNzY5IDUuMjIzMTJaTTIwLjI1IDEwLjVDMjAuMjUgOC41MTk2NCAxOS41NTEzIDYuNzAwNDYgMTguMzg3NiA1LjI3ODQ3TDE3LjIyNjggNi4yMjg0M0MxOC4xNzkyIDcuMzkyMjUgMTguNzUgOC44Nzg0NiAxOC43NSAxMC41SDIwLjI1Wk02LjcyMzEyIDE1Ljc3NjlMMTcuMjc2OSA1LjIyMzEyTDE2LjIxNjIgNC4xNjI0Nkw1LjY2MjQ2IDE0LjcxNjJMNi43MjMxMiAxNS43NzY5Wk0xNy4yMjE1IDQuMTEyMzZDMTUuNzk5NSAyLjk0ODcyIDEzLjk4MDQgMi4yNSAxMiAyLjI1VjMuNzVDMTMuNjIxNSAzLjc1IDE1LjEwNzcgNC4zMjA4MyAxNi4yNzE2IDUuMjczMjJMMTcuMjIxNSA0LjExMjM2Wk0xMiAyLjI1QzcuNDQzNjUgMi4yNSAzLjc1IDUuOTQzNjUgMy43NSAxMC41SDUuMjVDNS4yNSA2Ljc3MjA4IDguMjcyMDggMy43NSAxMiAzLjc1VjIuMjVaTTMuNzUgMTAuNUMzLjc1IDEyLjQ4MDQgNC40NDg3MiAxNC4yOTk1IDUuNjEyMzYgMTUuNzIxNUw2Ljc3MzIyIDE0Ljc3MTZDNS44MjA4MyAxMy42MDc3IDUuMjUgMTIuMTIxNSA1LjI1IDEwLjVIMy43NVpNMTIgMjAuMjVDMTcuMzg0OCAyMC4yNSAyMS43NSAxNS44ODQ4IDIxLjc1IDEwLjVIMjAuMjVDMjAuMjUgMTUuMDU2MyAxNi41NTYzIDE4Ljc1IDEyIDE4Ljc1VjIwLjI1Wk0yLjI1IDEwLjVDMi4yNSAxNS44ODQ4IDYuNjE1MjIgMjAuMjUgMTIgMjAuMjVWMTguNzVDNy40NDM2NSAxOC43NSAzLjc1IDE1LjA1NjMgMy43NSAxMC41SDIuMjVaTTEyIDAuNzVDNi42MTUyMiAwLjc1IDIuMjUgNS4xMTUyMiAyLjI1IDEwLjVIMy43NUMzLjc1IDUuOTQzNjUgNy40NDM2NSAyLjI1IDEyIDIuMjVWMC43NVpNMjEuNzUgMTAuNUMyMS43NSA1LjExNTIyIDE3LjM4NDggMC43NSAxMiAwLjc1VjIuMjVDMTYuNTU2MyAyLjI1IDIwLjI1IDUuOTQzNjUgMjAuMjUgMTAuNUgyMS43NVoiIGZpbGw9IndoaXRlIiBtYXNrPSJ1cmwoI3BhdGgtNC1vdXRzaWRlLTJfMl82KSIvPgo8L3N2Zz4K';\r\n\r\nconst orangeMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNSAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzkwMDIiIGZpbGw9IndoaXRlIj4KPHBhdGggZD0iTTIzLjI1IDEwLjVDMjMuMjUgMTYuMjk5IDE4LjU0OSAyMSAxMi43NSAyMUM2Ljk1MTAxIDIxIDIuMjUgMTYuMjk5IDIuMjUgMTAuNUMyLjI1IDQuNzAxMDEgNi45NTEwMSAwIDEyLjc1IDBDMTguNTQ5IDAgMjMuMjUgNC43MDEwMSAyMy4yNSAxMC41WiIvPgo8L21hc2s+CjxwYXRoIGQ9Ik0yMy4yNSAxMC41QzIzLjI1IDE2LjI5OSAxOC41NDkgMjEgMTIuNzUgMjFDNi45NTEwMSAyMSAyLjI1IDE2LjI5OSAyLjI1IDEwLjVDMi4yNSA0LjcwMTAxIDYuOTUxMDEgMCAxMi43NSAwQzE4LjU0OSAwIDIzLjI1IDQuNzAxMDEgMjMuMjUgMTAuNVoiIGZpbGw9IiNGOTczMTYiLz4KPHBhdGggZD0iTTIyLjUgMTAuNUMyMi41IDE1Ljg4NDggMTguMTM0OCAyMC4yNSAxMi43NSAyMC4yNVYyMS43NUMxOC45NjMyIDIxLjc1IDI0IDE2LjcxMzIgMjQgMTAuNUgyMi41Wk0xMi43NSAyMC4yNUM3LjM2NTIyIDIwLjI1IDMgMTUuODg0OCAzIDEwLjVIMS41QzEuNSAxNi43MTMyIDYuNTM2OCAyMS43NSAxMi43NSAyMS43NVYyMC4yNVpNMyAxMC41QzMgNS4xMTUyMiA3LjM2NTIyIDAuNzUgMTIuNzUgMC43NVYtMC43NUM2LjUzNjggLTAuNzUgMS41IDQuMjg2OCAxLjUgMTAuNUgzWk0xMi43NSAwLjc1QzE4LjEzNDggMC43NSAyMi41IDUuMTE1MjIgMjIuNSAxMC41SDI0QzI0IDQuMjg2OCAxOC45NjMyIC0wLjc1IDEyLjc1IC0wLjc1VjAuNzVaIiBmaWxsPSIjQzI0MTBDIiBtYXNrPSJ1cmwoI3BhdGgtMS1pbnNpZGUtMV8zNzc5XzkwMDIpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfOTAwMikiPgo8cGF0aCBkPSJNMTEuNzExNiA3LjI5OThMMTAuMDc4OSA0LjU2NTQxQzkuOTEwMjUgNC4yODI5NCA5Ljk5NzE4IDMuOTE3NTMgMTAuMjc1IDMuNzQxMjhMMTIuMTA5IDIuNTc3NzFDMTIuMzkzNiAyLjM5NzExIDEyLjc3MDkgMi40ODI5MyAxMi45NDk1IDIuNzY4ODlMMTUuMDc0MyA2LjE3MjQxQzE1LjEzMyA2LjI2NjM4IDE1LjE2NDggNi4zNzQ2MSAxNS4xNjY0IDYuNDg1MzlMMTUuMjYwNyAxMy4xMjIyQzE1LjI2NTUgMTMuNDYwOSAxNC45OTIyIDEzLjczODEgMTQuNjUzNSAxMy43MzgxSDEyLjQwNDhDMTIuMDY5NCAxMy43MzgxIDExLjc5NzUgMTMuNDY2MiAxMS43OTc1IDEzLjEzMDhWNy42MTExNEMxMS43OTc1IDcuNTAxNTEgMTEuNzY3OCA3LjM5MzkyIDExLjcxMTYgNy4yOTk4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTEwLjU1MTEgNS44MTc0OEw5Ljk2MTU0IDQuODUxMDZDOS43ODYzOSA0LjU2Mzk1IDkuNDExMjYgNC40NzM4NiA5LjEyNDgzIDQuNjUwMTNMOC43NzI1MiA0Ljg2Njk0QzguNDg0ODEgNS4wNDQgOC4zOTY5IDUuNDIxODEgOC41NzY4OSA1LjcwNzdMOS4xODc1MSA2LjY3NzU2QzkuMzY5MzYgNi45NjY0IDkuNzUzNDYgNy4wNDg2OSAxMC4wMzc3IDYuODU5N0wxMC4zNjg5IDYuNjM5NDRDMTAuNjQwNSA2LjQ1ODg0IDEwLjcyMSA2LjA5NTkzIDEwLjU1MTEgNS44MTc0OFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNS4wMTM1IDE0LjE0NzFIMTIuMDUzNEMxMS44ODk4IDE0LjE0NzEgMTEuNzMzMSAxNC4yMTMxIDExLjYxODggMTQuMzMwM0wxMC43Mzk2IDE1LjIzMTNDMTAuNjI4OSAxNS4zNDQ3IDEwLjU2NyAxNS40OTY5IDEwLjU2NyAxNS42NTU0VjE2LjY0MjdDMTAuNTY3IDE2Ljk3ODEgMTAuODM4OSAxNy4yNSAxMS4xNzQyIDE3LjI1SDEzLjU2MDdIMTUuODkyN0MxNi4yMjgxIDE3LjI1IDE2LjUgMTYuOTc4MSAxNi41IDE2LjY0MjdWMTUuNjU1NEMxNi41IDE1LjQ5NjkgMTYuNDM4IDE1LjM0NDcgMTYuMzI3NCAxNS4yMzEzTDE1LjQ0ODIgMTQuMzMwM0MxNS4zMzM5IDE0LjIxMzEgMTUuMTc3MiAxNC4xNDcxIDE1LjAxMzUgMTQuMTQ3MVoiIGZpbGw9IndoaXRlIi8+CjwvZz4KPGRlZnM+CjxmaWx0ZXIgaWQ9ImZpbHRlcjBfZGRfMzc3OV85MDAyIiB4PSI1LjQ4MzQiIHk9IjAuMzMzMTU0IiB3aWR0aD0iMTQuMDE2NiIgaGVpZ2h0PSIyMC43NjY4IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfOTAwMiIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIwLjI1Ii8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjAuNSIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjA1ODgyMzUgMCAwIDAgMCAwLjEwMTk2MSAwIDAgMCAwIDAuMTY0NzA2IDAgMCAwIDAuMDM5IDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd18zNzc5XzkwMDIiIHJlc3VsdD0iZWZmZWN0Ml9kcm9wU2hhZG93XzM3NzlfOTAwMiIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzkwMDIiIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjwvZGVmcz4KPC9zdmc+Cg==';\r\nconst greenMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8xMF8xNyIgZmlsbD0id2hpdGUiPgo8cGF0aCBkPSJNMjIuNSAxMC41QzIyLjUgMTYuMjk5IDE3Ljc5OSAyMSAxMiAyMUM2LjIwMTAxIDIxIDEuNSAxNi4yOTkgMS41IDEwLjVDMS41IDQuNzAxMDEgNi4yMDEwMSAwIDEyIDBDMTcuNzk5IDAgMjIuNSA0LjcwMTAxIDIyLjUgMTAuNVoiLz4KPC9tYXNrPgo8cGF0aCBkPSJNMjIuNSAxMC41QzIyLjUgMTYuMjk5IDE3Ljc5OSAyMSAxMiAyMUM2LjIwMTAxIDIxIDEuNSAxNi4yOTkgMS41IDEwLjVDMS41IDQuNzAxMDEgNi4yMDEwMSAwIDEyIDBDMTcuNzk5IDAgMjIuNSA0LjcwMTAxIDIyLjUgMTAuNVoiIGZpbGw9IiMyMkM1NUUiLz4KPHBhdGggZD0iTTIxLjc1IDEwLjVDMjEuNzUgMTUuODg0OCAxNy4zODQ4IDIwLjI1IDEyIDIwLjI1VjIxLjc1QzE4LjIxMzIgMjEuNzUgMjMuMjUgMTYuNzEzMiAyMy4yNSAxMC41SDIxLjc1Wk0xMiAyMC4yNUM2LjYxNTIyIDIwLjI1IDIuMjUgMTUuODg0OCAyLjI1IDEwLjVIMC43NUMwLjc1IDE2LjcxMzIgNS43ODY4IDIxLjc1IDEyIDIxLjc1VjIwLjI1Wk0yLjI1IDEwLjVDMi4yNSA1LjExNTIyIDYuNjE1MjIgMC43NSAxMiAwLjc1Vi0wLjc1QzUuNzg2OCAtMC43NSAwLjc1IDQuMjg2OCAwLjc1IDEwLjVIMi4yNVpNMTIgMC43NUMxNy4zODQ4IDAuNzUgMjEuNzUgNS4xMTUyMiAyMS43NSAxMC41SDIzLjI1QzIzLjI1IDQuMjg2OCAxOC4yMTMyIC0wLjc1IDEyIC0wLjc1VjAuNzVaIiBmaWxsPSIjMTg5MTQ1IiBtYXNrPSJ1cmwoI3BhdGgtMS1pbnNpZGUtMV8xMF8xNykiLz4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZGRfMTBfMTcpIj4KPHBhdGggZD0iTTEwLjk2MTYgNy4yOTk4TDkuMzI4OTEgNC41NjU0MUM5LjE2MDI1IDQuMjgyOTQgOS4yNDcxOCAzLjkxNzUzIDkuNTI0OTggMy43NDEyOEwxMS4zNTkgMi41Nzc3MUMxMS42NDM2IDIuMzk3MTEgMTIuMDIwOSAyLjQ4MjkzIDEyLjE5OTUgMi43Njg4OUwxNC4zMjQzIDYuMTcyNDFDMTQuMzgzIDYuMjY2MzggMTQuNDE0OCA2LjM3NDYxIDE0LjQxNjQgNi40ODUzOUwxNC41MTA3IDEzLjEyMjJDMTQuNTE1NSAxMy40NjA5IDE0LjI0MjIgMTMuNzM4MSAxMy45MDM1IDEzLjczODFIMTEuNjU0OEMxMS4zMTk0IDEzLjczODEgMTEuMDQ3NSAxMy40NjYyIDExLjA0NzUgMTMuMTMwOFY3LjYxMTE0QzExLjA0NzUgNy41MDE1MSAxMS4wMTc4IDcuMzkzOTIgMTAuOTYxNiA3LjI5OThaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOS44MDExMSA1LjgxNzQ4TDkuMjExNTQgNC44NTEwNkM5LjAzNjM5IDQuNTYzOTUgOC42NjEyNiA0LjQ3Mzg2IDguMzc0ODMgNC42NTAxM0w4LjAyMjUyIDQuODY2OTRDNy43MzQ4MSA1LjA0NCA3LjY0NjkgNS40MjE4MSA3LjgyNjg5IDUuNzA3N0w4LjQzNzUxIDYuNjc3NTZDOC42MTkzNiA2Ljk2NjQgOS4wMDM0NiA3LjA0ODY5IDkuMjg3NjggNi44NTk3TDkuNjE4OTMgNi42Mzk0NEM5Ljg5MDU0IDYuNDU4ODQgOS45NzA5NyA2LjA5NTkzIDkuODAxMTEgNS44MTc0OFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNC4yNjM1IDE0LjE0NzFIMTEuMzAzNEMxMS4xMzk4IDE0LjE0NzEgMTAuOTgzMSAxNC4yMTMxIDEwLjg2ODggMTQuMzMwM0w5Ljk4OTU5IDE1LjIzMTNDOS44Nzg5MSAxNS4zNDQ3IDkuODE2OTYgMTUuNDk2OSA5LjgxNjk2IDE1LjY1NTRWMTYuNjQyN0M5LjgxNjk2IDE2Ljk3ODEgMTAuMDg4OSAxNy4yNSAxMC40MjQyIDE3LjI1SDEyLjgxMDdIMTUuMTQyN0MxNS40NzgxIDE3LjI1IDE1Ljc1IDE2Ljk3ODEgMTUuNzUgMTYuNjQyN1YxNS42NTU0QzE1Ljc1IDE1LjQ5NjkgMTUuNjg4IDE1LjM0NDcgMTUuNTc3NCAxNS4yMzEzTDE0LjY5ODIgMTQuMzMwM0MxNC41ODM5IDE0LjIxMzEgMTQuNDI3MiAxNC4xNDcxIDE0LjI2MzUgMTQuMTQ3MVoiIGZpbGw9IndoaXRlIi8+CjwvZz4KPGRlZnM+CjxmaWx0ZXIgaWQ9ImZpbHRlcjBfZGRfMTBfMTciIHg9IjUuNDgzNDMiIHk9IjAuODcwNjMxIiB3aWR0aD0iMTIuNTE2NiIgaGVpZ2h0PSIxOS4yNjY5IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuNjM3NSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxLjEyNSIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjA1ODgyMzUgMCAwIDAgMCAwLjEwMTk2MSAwIDAgMCAwIDAuMTY0NzA2IDAgMCAwIDAuMTkgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvd18xMF8xNyIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIwLjE4NzUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMC4zNzUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMTBfMTciIHJlc3VsdD0iZWZmZWN0Ml9kcm9wU2hhZG93XzEwXzE3Ii8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0Ml9kcm9wU2hhZG93XzEwXzE3IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\nconst isTemporaryDeactivated = alarm.isTemporaryDeactivated == \"true\";\r\n\r\nconst getTranslation = function(translationText, extraParam = null) {\r\n    translateService = ctx.$injector.get(ctx.servicesMap.get('translate'));\r\n    let translated = \"\";\r\n    try {\r\n        translated = translateService.instant(translationText, extraParam);\r\n\r\n    } catch (error) {\r\n\r\n    }\r\n    return translated;\r\n}\r\n\r\nconst eventTypes = {\r\n    alarmOpen:  getTranslation(\"hawle-dashboard.open\"),\r\n    alarmNoSignal:  getTranslation(\"hawle-dashboard.no-signal\"),\r\n    alarmLowBattery: getTranslation(\"hawle-dashboard.low-battery\"),\r\n    alarmClose: getTranslation(\"hawle-dashboard.closed\"),\r\n}\r\n\r\nif(isTemporaryDeactivated) {\r\n    return `<div class=\"content-container\"><img src=\"${orangeMarker}\"> <span>${eventTypes[value]}</span></div>`;\r\n}\r\nelse {\r\n    switch(value){\r\n    case \"alarmOpen\":\r\n       return `<div class=\"content-container\"><img src=\"${redMarker}\"> <span>${eventTypes[value]}</span></div>`;\r\n        break;\r\n    case \"alarmLowBattery\":\r\n       return `<div class=\"content-container\"><img src=\"${redMarker}\"> <span>${eventTypes[value]}</span></div>`;\r\n        break;\r\n    case \"alarmNoSignal\":\r\n         return `<div class=\"content-container\"><img src=\"${crossedMarker}\"> <span>${eventTypes[value]}</span></div>`;\r\n        break;\r\n    case \"alarmClose\":\r\n         return `<div class=\"content-container\"><img src=\"${greenMarker}\"> <span>${eventTypes[value]}</span></div>`;\r\n        break;\r\n    default:\r\n        return value;\r\n}\r\n\r\n}\r\n"
                },
                "_hash": 0.7323586880398418,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "serialNumber",
                "type": "attribute",
                "label": "D-storz Number",
                "color": "#cddc39",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": "",
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled"
                },
                "_hash": 0.0811814837332574,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "LPN ID",
                "color": "#4caf50",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "columnWidth": "0px",
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "let $injector = ctx.$scope.$injector;\nlet http = $injector.get(ctx.servicesMap.get('http'));\n\nconst entitiesQueryBody = {\n  entityFilter: {\n    type: \"singleEntity\",\n    singleEntity: {\n        id: alarm.originator.id,\n        entityType: \"DEVICE\"\n      }\n  },\n  entityFields: [    \n    {\n      type: \"ENTITY_FIELD\",\n      key: \"name\",\n    }\n    ],\n  latestValues: [\n    {\n      type: \"ATTRIBUTE\",\n      key: \"serialNumber\",\n    }\n  ],\n pageLink: {\n    page: 0,\n    pageSize: 10,\n    sortOrder: {\n      key: {\n        key: \"serialNumber\",\n        type: \"ATTRIBUTE\",\n      },\n      direction: \"ASC\",\n    },\n  },\n};\n\nvar urlEntitiesQuery = `/api/entitiesQuery/find`;\n\n\nhttp.post(urlEntitiesQuery, entitiesQueryBody).pipe().subscribe((entityResponse) => {\n    let entity = entityResponse.data[0];\n       console.debug(entity);\n      let dStorzName =  entity.latest.ATTRIBUTE.serialNumber ? entity.latest.ATTRIBUTE.serialNumber.value : entity.latest.ENTITY_FIELD.name.value;\n      return dStorzName;\n});\n"
                },
                "_hash": 0.2780007688856758,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "hydrantNumber",
                "type": "attribute",
                "label": "Hydrant",
                "color": "#03a9f4",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.2099574273634044,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "hydrantsBrand",
                "type": "attribute",
                "label": "Brand",
                "color": "#8bc34a",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.7993815089002516,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "country",
                "type": "attribute",
                "label": "Country",
                "color": "#e91e63",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.3416202560360537,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "zip",
                "type": "attribute",
                "label": "Zip",
                "color": "#ffeb3b",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.28607927830636304,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "city",
                "type": "attribute",
                "label": "City",
                "color": "#3f51b5",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.9471672743558583,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "street",
                "type": "attribute",
                "label": "Street",
                "color": "#03a9f4",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.3789393302471691,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "status",
                "type": "alarm",
                "label": "Status",
                "color": "#607d8b",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "columnWidth": "0px",
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.6588418951443418,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "status",
                "type": "alarm",
                "label": "Action",
                "color": "#03a9f4",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "let $injector = ctx.$scope.$injector;\r\nlet http = $injector.get(ctx.servicesMap.get('http'));\r\nlet dialogs = $injector.get(ctx.servicesMap.get('dialogs'));\r\n\r\nlet translateService = $injector.get(ctx.servicesMap.get('translate'));\r\nlet translatedConfirmLabel = translateService.instant(\"hawle-dashboard.alarm.confirm\");\r\n\r\nclearAndAckAlarm = function (alarmToClear) {\r\n    let alarmUpperCase = alarmToClear.type.charAt(0).toUpperCase() + alarmToClear.type.slice(1);\r\n    let alarmClearPayload = {\r\n        msg: null,\r\n        metadata: {\r\n            deviceName: alarmToClear.originatorName,\r\n            deviceType: \"d-storz\",\r\n            alarmClearType: `clear${alarmUpperCase}`\r\n        }\r\n    }\r\n\r\n\r\n    switch (alarmToClear.status) {\r\n        case \"ACTIVE_UNACK\":\r\n        case \"CLEARED_UNACK\":\r\n            http.post(`/api/alarm/${alarmToClear.id.id}/ack`).pipe().subscribe((ackResult) => {});\r\n            break;\r\n    }\r\n}\r\n\r\n\r\nopenConfirmDialog = function (alarmId) {\r\n    let title = 'Confirm';\r\n    let content = 'Are you sure to confirm this alarm?';\r\n    const currentAlarms = ctx.$scope.alarmsTableWidget.alarmsDatasource.alarmsSubject._value;\r\n    let clickedAlarm = currentAlarms.find(alarm => alarm.id.id == alarmId);\r\n    if (clickedAlarm && !disableConfirmButton(clickedAlarm)) {\r\n        dialogs.confirm(title, content, 'Cancel', 'Confirm').subscribe(\r\n            function (result) {\r\n                if (result) {\r\n                    clearAndAckAlarm(clickedAlarm)\r\n                }\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\ndisableConfirmButton = function (clickedAlarm) {\r\n    if (clickedAlarm.status == \"CLEARED_ACK\" || clickedAlarm.status == \"ACTIVE_ACK\"  ) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nsetTimeout(function () {\r\n    const confirmButton = $(\"#confirm-alarm-\" + alarm.id.id);\r\n    if (!confirmButton.data(\"clickListenerRegistered\")) {\r\n        confirmButton.click(function (event) {\r\n            event.stopPropagation();\r\n            const id = event.target.id;\r\n            const prefix = \"confirm-alarm-\";\r\n\r\n            if (id.startsWith(prefix)) {\r\n                const alarmId = id.slice(prefix.length);\r\n                openConfirmDialog(alarmId);\r\n            }\r\n        });\r\n        confirmButton.data('clickListenerRegistered', true);\r\n    }\r\n}, 500);\r\n\r\n\r\nconst isButtonDisabled = disableConfirmButton(alarm);\r\nconst disabledAttribute = isButtonDisabled ? 'disabled' : '';\r\nconst backgroundColorStyle = isButtonDisabled ? '#7ebfd8' : '#009FE3';\r\nconst cursorStyle = isButtonDisabled ? 'initial' : 'pointer';\r\n\r\nreturn `<mat-button id='confirm-alarm-${alarm.id.id}' class='mat-button' style='background: ${backgroundColorStyle}; color: #fff; font-weight: bold; font-family: var(--font-global) !important; cursor: ${cursorStyle}' ${disabledAttribute}>${translatedConfirmLabel}</mat-button>`;"
                },
                "_hash": 0.9683793159448628,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "hydrantId",
                "type": "attribute",
                "label": "hydrantId",
                "color": "#ff9800",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": "",
                  "defaultColumnVisibility": "hidden",
                  "columnSelectionToDisplay": "disabled"
                },
                "_hash": 0.39979941036037947,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "isTemporaryDeactivated",
                "type": "timeseries",
                "label": "isTemporaryDeactivated",
                "color": "#673ab7",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": "",
                  "defaultColumnVisibility": "hidden",
                  "columnSelectionToDisplay": "disabled"
                },
                "_hash": 0.32732497832330876,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              }
            ]
          },
          "alarmSearchStatus": "ANY",
          "alarmsPollingInterval": 5,
          "showTitleIcon": false,
          "titleIcon": "more_horiz",
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "widgetStyle": {},
          "displayTimewindow": true,
          "actions": {
            "headerButton": [
              {
                "name": "Confirm All",
                "icon": "done_all",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "custom",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\r\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\r\nlet http = $injector.get(widgetContext.servicesMap.get('http'));\r\n\r\nconst relatedHydrantsQuery = {\r\n  filters: [\r\n    {\r\n      relationType: \"Contains\",\r\n      entityTypes: [\r\n        \"ASSET\"\r\n      ]\r\n    }\r\n  ],\r\n  parameters: {\r\n    rootId: entityId.id,\r\n    rootType: \"ASSET\",\r\n    direction: \"FROM\",\r\n    relationTypeGroup: \"COMMON\",\r\n    maxLevel: 1,\r\n    fetchLastLevelOnly: true\r\n  }\r\n};\r\n\r\nopenConfirmDialog();\r\n\r\nfunction confirmAll() {\r\n  const payload = {\r\n    \"entityFields\": [],\r\n    \"alarmFields\": [],\r\n    \"latestValues\": [],\r\n    \"entityFilter\": {\r\n        \"type\": \"relationsQuery\",\r\n        \"rootEntity\": null,\r\n        \"direction\": \"FROM\",\r\n        \"maxLevel\": 3,\r\n        \"fetchLastLevelOnly\": false,\r\n        \"filters\": [\r\n            {\r\n                \"relationType\": \"Contains\",\r\n                \"entityTypes\": [\r\n                    \"DEVICE\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    \"pageLink\": {\r\n        \"page\": 0,\r\n        \"pageSize\": 100000000,\r\n        \"textSearch\": null,\r\n        \"searchPropagatedAlarms\": false,\r\n        \"statusList\": [\r\n            \"UNACK\"\r\n        ],\r\n        \"sortOrder\": {\r\n            \"key\": {\r\n                \"key\": \"createdTime\",\r\n                \"type\": \"ALARM_FIELD\"\r\n            },\r\n            \"direction\": \"DESC\"\r\n        }\r\n    }\r\n}\r\n  return http.post(\"/api/alarmsQuery/confirmAll?assetType=zone&confirmList=ACK\", payload)\r\n}\r\n\r\nfunction sendToRuleEngine(alarmClearType) {\r\n  const payload = {\r\n    \"query\": {\r\n        \"entityFields\": [\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"name\"\r\n            },\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"type\"\r\n            }\r\n        ],\r\n        \"alarmFields\": [],\r\n        \"latestValues\": [],\r\n        \"entityFilter\": {\r\n            \"type\": \"relationsQuery\",\r\n            \"rootEntity\": null,\r\n            \"direction\": \"FROM\",\r\n            \"maxLevel\": 3,\r\n            \"fetchLastLevelOnly\": true,\r\n            \"filters\": [\r\n                {\r\n                    \"relationType\": \"Contains\",\r\n                    \"entityTypes\": [\r\n                        \"DEVICE\"\r\n                    ]\r\n                }\r\n            ]\r\n        },\r\n        \"pageLink\": {\r\n            \"page\": 0,\r\n            \"pageSize\": 100000000,\r\n            \"textSearch\": null,\r\n            \"sortOrder\": {\r\n                \"key\": {\r\n                    \"key\": \"name\",\r\n                    \"type\": \"ENTITY_FIELD\"\r\n                },\r\n                \"direction\": \"DESC\"\r\n            }\r\n        }\r\n    },\r\n    \"ruleChainData\": {\r\n        \"msg\": null,\r\n        \"metadata\": {\r\n            \"alarmClearType\": alarmClearType\r\n        }\r\n    }\r\n  }\r\n  return http.post(\"/api/rule-engine/sendToRuleEngine/bulk?assetType=zone&key=clearAlarm\", payload)\r\n}\r\n\r\nfunction openConfirmDialog() {\r\n    let title = 'Confirm';\r\n    let content = 'Do You Want To Confirm All Alarms?';\r\n    dialogs.confirm(title, content, 'Cancel', 'Ok').subscribe(\r\n        function(result) {\r\n            if (result) {\r\n                confirmAll().subscribe(\r\n                    function(result) {\r\n                        widgetContext.updateAliases();\r\n                    }\r\n                );\r\n\r\n                widgetContext.showToast('success', 'All the Alarms Confirmed Successfully', 2000, 'top', 'left');\r\n            }\r\n        }\r\n    );\r\n\r\n}\r\n",
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "65ee7469-49ee-7655-0cdb-1d9ce10f4f62"
              }
            ],
            "rowClick": [
              {
                "name": "Show alarm details",
                "icon": "more_horiz",
                "useShowWidgetActionFunction": null,
                "showWidgetActionFunction": "return true;",
                "type": "customPretty",
                "customHtml": "<mat-dialog id=\"popup-dialog\">\r\n    <header fxLayout=\"row\" fxLayoutAlign=\"space-between center\" class=\"header\">\r\n      <div fxLayout=\"column\">\r\n        <span id=\"dialog-title\"><b>{{dialogTitle | translate}}</b></span>\r\n        <div id=\"status-badge\" fxLayout=\"row\" fxLayoutAlign=\"start center\" matBadge=\"open\" matBadgeColor=\"primary\" matBadgeOverlap=\"false\" matBadgeSize=\"small\" class=\"custom-badge\">\r\n          <mat-icon class=\"custom-icon\">lens</mat-icon>\r\n          <span class=\"custom-text\">{{statusBadge}}</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <button mat-icon-button (click)=\"cancel()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </header>\r\n    \r\n    <section class=\"entity-info\" fxLayout=\"row\">\r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{hydrantNumber | translate}}</div>\r\n        <div class=\"info-value\">{{currentEntity?.latest?.ENTITY_FIELD?.name?.value}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\"  fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{brand | translate}}</div>\r\n        <div class=\"info-value\">{{hydrantsBrand}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{model | translate}}</div>\r\n        <div class=\"info-value\">{{ modelNumber }}</div>\r\n      </div>\r\n    </section>\r\n    \r\n<section class=\"outlet-info-table-alarm\" *ngIf=\"dStorzDataReady\">\r\n    <mat-table mat-table [dataSource]=\"outletDataSource\" class=\"mat-elevation-z0\">\r\n      \r\n      <ng-container matColumnDef=\"outlet\">\r\n        <th mat-header-cell *matHeaderCellDef>{{outletInformation | translate}}</th>\r\n        <td mat-cell *matCellDef=\"let element\"> {{ element.outlet }} </td>\r\n      </ng-container>\r\n\r\n      <ng-container matColumnDef=\"assigned\">\r\n        <th mat-header-cell *matHeaderCellDef>{{assignedDStorz | translate}}</th>\r\n        <td mat-cell *matCellDef=\"let element\"> {{ element.assignedSerialNumber }} </td>\r\n      </ng-container>\r\n\r\n      <ng-container matColumnDef=\"status\">\r\n        <th mat-header-cell *matHeaderCellDef>{{statusTimestamp | translate}}</th>\r\n        <td mat-cell *matCellDef=\"let element\" class=\"timestamp-cell\"> {{ element.status }} </td>\r\n      </ng-container>\r\n      \r\n      <ng-container matColumnDef=\"recentUnconfirmedAlarm\">\r\n        <th mat-header-cell *matHeaderCellDef>{{recentUnconfirmedAlarmLabel | translate}}</th>\r\n        <td mat-cell *matCellDef=\"let element\" class=\"timestamp-cell\"> {{ element.recentUnconfirmedAlarm }} </td>\r\n      </ng-container>\r\n\r\n      <ng-container matColumnDef=\"action\">\r\n        <th mat-header-cell *matHeaderCellDef>{{actionLabel | translate}}</th>\r\n        <td mat-cell *matCellDef=\"let element\"> \r\n          <button mat-button class=\"confirm-button\" [disabled]=\"disableConfirmButton(element)\" (click)=\"openConfirmDialog(element)\">{{confirmAlarm | translate}}</button> \r\n        </td>\r\n      </ng-container>\r\n      \r\n      <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n      <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n    </mat-table>\r\n</section>\r\n    \r\n  <!--  <section fxLayout=\"row\" class=\"unconfirmed-alarms-section\"  fxLayoutAlign=\"space-between center\">\r\n        <div fxLayout=\"row\" fxLayoutAlign=\"start center\">\r\n            <div class=\"bell-icon\">\r\n              <mat-icon class=\"material-icons\">notifications</mat-icon>\r\n            </div>\r\n            <span class=\"sample-text\">This hydrant has 20 unconfirmed alarms</span>\r\n        </div>\r\n      <div>\r\n        <button mat-button color=\"primary\">{{viewAlarms | translate}}</button>\r\n      </div>\r\n    </section> -->\r\n    \r\n    \r\n    <section class=\"entity-info\" fxLayout=\"row\">\r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{zoneLabel | translate}}</div>\r\n        <div class=\"info-value\">{{zone}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <div class=\"info-key\">{{locationLabel | translate}}</div>\r\n        <div class=\"info-value\">{{address}}</div>\r\n        <div class=\"info-value\">{{country}}</div>\r\n      </div>\r\n    \r\n      <div class=\"info-column\" fxLayout=\"column\" fxFlex=\"33%\">\r\n        <button class=\"action-button\" mat-button color=\"primary\" (click)=\"navigateToMap()\">\r\n            <span>\r\n                {{routeTo | translate}}\r\n            </span>\r\n        </button>\r\n      </div>\r\n    </section>\r\n   \r\n</mat-dialog>",
                "customCss": ".mat-dialog-container {\r\n    border-radius: 10px;\r\n}\r\n\r\n#popup-dialog {\r\n    display: block;\r\n    height: 90vh;\r\n    width: 50vw;\r\n    padding: 2rem;\r\n}\r\n\r\n@media only screen and (max-width: 1500px) {\r\n#popup-dialog {\r\n      width: 80vw;\r\n      overflow-x: auto;\r\n  }\r\n}\r\n\r\n#dialog-title {\r\n    font-size: 1.5rem;\r\n    font-weight: 700;\r\n    margin-bottom: 0.5rem;\r\n}\r\n\r\n.custom-badge{\r\n  font-size: 12px;\r\n  width: fit-content;\r\n  border-radius: 10px; \r\n  padding: 4px 8px; \r\n}\r\n.custom-icon {\r\n    margin-right: 4px; \r\n    font-size: 10px;\r\n    width: 10px;\r\n    height: 10px;\r\n}\r\n\r\n\r\n.custom-badge.isNoSignal,\r\n.custom-badge.alarmNoSignal{\r\n    background-color: #FCE7F3;\r\n} \r\n.custom-badge.isNoSignal .custom-icon,\r\n.custom-badge.alarmNoSignal .custom-icon {\r\n  color: #F472B6;\r\n}\r\n.custom-badge.isNoSignal .custom-text,\r\n.custom-badge.alarmNoSignal .custom-text{\r\n  color: #DB2777; \r\n}\r\n\r\n\r\n.custom-badge.isClosed,\r\n.custom-badge.alarmClose,\r\n.custom-badge.alarmCleared {\r\n    background-color: #D1F5E9;\r\n}\r\n.custom-badge.isClosed .custom-text,\r\n.custom-badge.alarmClose .custom-text,\r\n.custom-badge.alarmCleared .custom-text{\r\n    color: #218372;\r\n}\r\n.custom-badge.isClosed .custom-icon,\r\n.custom-badge.alarmClose .custom-icon,\r\n.custom-badge.alarmCleared .custom-icon{\r\n    color: #32CDAC;\r\n}\r\n\r\n\r\n.custom-badge.isOpen,\r\n.custom-badge.alarmOpen,\r\n.custom-badge.alarmLowBattery{\r\n    background-color: #FEE2E2;\r\n}\r\n.custom-badge.isOpen .custom-text,\r\n.custom-badge.alarmOpen .custom-text,\r\n.custom-badge.alarmLowBattery .custom-text{\r\n    color: #DC2626;\r\n}\r\n.custom-badge.isOpen .custom-icon,\r\n.custom-badge.alarmOpen .custom-icon,\r\n.custom-badge.alarmLowBattery .custom-icon{\r\n    color: #F87171;\r\n}\r\n\r\n\r\n.custom-badge.isInactive {\r\n    background-color: #DDE8FC;\r\n}\r\n.custom-badge.isInactive .custom-text{\r\n    color: #325DDE;\r\n}\r\n.custom-badge.isInactive .custom-icon{\r\n    color: #6A9DF0;\r\n}\r\n\r\n\r\n.custom-badge.isNotAssigned {\r\n    background-color: #F1F4F9;\r\n}\r\n.custom-badge.isNotAssigned .custom-text{\r\n    color: #475569;\r\n}\r\n.custom-badge.isNotAssigned .custom-icon{\r\n    color: #94A3B8;\r\n}\r\n\r\n\r\n.custom-badge.isNotAssigned {\r\n    background-color: #F1F4F9;\r\n}\r\n.custom-badge.isNotAssigned .custom-text{\r\n    color: #475569;\r\n}\r\n.custom-badge.isNotAssigned .custom-icon{\r\n    color: #94A3B8;\r\n}\r\n\r\n\r\n.custom-badge.isTemporaryInactivated {\r\n    background-color: #FFEDD5;\r\n}\r\n.custom-badge.isTemporaryInactivated .custom-text{\r\n    color: #EA580C;\r\n}\r\n.custom-badge.isTemporaryInactivated .custom-icon{\r\n    color: #FB923C;\r\n}\r\n\r\n.entity-info {\r\n    margin: 3rem 0px;\r\n}\r\n\r\n.info-key {\r\n    font-size: 12px;\r\n    font-weight: bold;\r\n    margin-bottom: 4px;\r\n}\r\n\r\n.info-value {\r\n    font-size: 12px;\r\n}\r\n\r\nth.mat-header-cell:first-of-type, td.mat-cell:first-of-type, td.mat-footer-cell:first-of-type{ \r\n    padding-left: 0 !important;\r\n}\r\n\r\n.outlet-info-table-alarm .mat-header-cell {\r\n    font-weight: 600;\r\n    color: #000;\r\n}\r\n\r\n.outlet-info-table-alarm .mat-cell {\r\n    font-size: 12px;\r\n    font-weight: 400;\r\n}\r\n\r\n.action-button {\r\n    border-radius: 5px;\r\n    border: 3px #E2E8F0 solid;\r\n    font-family: var(--font-global) !important;\r\n    font-weight: bold;\r\n}\r\n\r\n.temporary-deactivation-section {\r\n  margin-top: 2rem;\r\n  background-color: #FFF7ED;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.temporary-deactivation-section .section-title {\r\n  font-size: 15px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.unconfirmed-alarms-section {\r\n    font-size: 12px;\r\n    margin-top: 2rem;\r\n    width: 100%;\r\n    background-color: #F8FAFC;\r\n    padding: 1rem;\r\n    color: #64748B;\r\n}\r\n\r\n.unconfirmed-alarms-section .bell-icon {\r\n  background-color: #CBD4E1;\r\n  color: #F8FAFC;\r\n  border-radius: 50%;\r\n  width: 30px;\r\n  height: 30px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-right: 1.5rem;\r\n}\r\n\r\n.unconfirmed-alarms-section button span {\r\n    color: #009FE3;\r\n    font-family: var(--font-global) !important;\r\n    font-weight: bold !important;\r\n}\r\n\r\n.confirm-button {    \r\n  font-family: var(--font-global) !important;\r\n  font-weight: bold;\r\n  background-color: #009FE3;\r\n  color: white;\r\n}\r\n\r\n.confirm-button.mat-button-disabled {    \r\n  font-family: var(--font-global) !important;\r\n  font-weight: bold;\r\n  background-color: #7ebfd8;\r\n  color: white !important;\r\n}\r\n\r\n.timestamp-cell {\r\n    white-space: pre-wrap;\r\n}",
                "customFunction": "let $injector = widgetContext.$scope.$injector;\r\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nlet deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\nlet http = $injector.get(widgetContext.servicesMap.get('http'));\r\n\r\n\r\nconst currentAlarmData = widgetContext.$scope.alarmsTableWidget.alarmsDatasource.alarmsSubject._value\r\n            .find(alarmData => alarmData.originator.id == entityId.id);\r\nconst hydrantId = currentAlarmData.hydrantId;\r\nif(!hydrantId) {\r\n    widgetContext.showToast('warn',\r\n        \"D-Storz is missing related hydrantId\", 2000,\r\n        'top', 'right', widgetContext.toastTargetId);\r\n    return;\r\n}\r\n\r\nconst statusLabels = {\r\n    isOpen: getTranslation(\"hawle-dashboard.open\"),\r\n    isClosed: getTranslation(\"hawle-dashboard.closed\"),\r\n    isLowBattery: getTranslation(\"hawle-dashboard.low-battery\"),\r\n    isNoSignal: getTranslation(\"hawle-dashboard.no-signal\"),\r\n    isInactive: getTranslation(\"hawle-dashboard.inactive\"),\r\n    isTemporaryDeactivated: getTranslation(\"hawle-dashboard.temporary-deactivated\"),\r\n    isNotAssigned: getTranslation(\"hawle-dashboard.not-assigned\"),\r\n    alarmOpen: getTranslation(\"hawle-dashboard.open\"),\r\n    alarmNoSignal: getTranslation(\"hawle-dashboard.no-signal\"),\r\n    alarmLowBattery: getTranslation(\"hawle-dashboard.low-battery\"),\r\n    alarmCleared: getTranslation(\"hawle-dashboard.cleared\"),\r\n    alarmClose: getTranslation(\"hawle-dashboard.closed\"),\r\n    offline: getTranslation(\"hawle-dashboard.no-signal\"),\r\n    online: getTranslation(\"hawle-dashboard.online\")\r\n};\r\n\r\nconst eventTypes = {\r\n    alarmOpen:  getTranslation(\"hawle-dashboard.open\"),\r\n    alarmNoSignal:  getTranslation(\"hawle-dashboard.no-signal\"),\r\n    alarmLowBattery: getTranslation(\"hawle-dashboard.low-battery\"),\r\n    alarmClose: getTranslation(\"hawle-dashboard.closed\"),\r\n    alarmCleared: getTranslation(\"hawle-dashboard.cleared\"),\r\n}\r\n\r\nconst alarmPriorities = {\r\n    alarmOpen: 0,\r\n    alarmLowBattery: 1,\r\n    alarmNoSignal: 2,\r\n    alarmClose: 3,\r\n    alarmCleared: 100\r\n}\r\n\r\nconst statusPriorities = {\r\n    isTemporaryDeactivated: 0,\r\n    isOpen: 1,\r\n    isInactive: 2, \r\n    isLowBattery: 3,\r\n    isNoSignal: 4,\r\n    isNotAssigned: 5,\r\n    isClosed: 6,\r\n    isOnline: 7\r\n}\r\n\r\nlet recentUnacknoledgedAlarms = [];\r\n\r\nlet relatedDStorz = [];\r\n\r\n\r\nconst entitiesQueryBody = {\r\n  entityFilter: {\r\n    type: \"singleEntity\",\r\n    singleEntity: {\r\n    //  id: entityId.id,\r\n      id:hydrantId,\r\n      entityType: \"ASSET\"\r\n    }\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\",\r\n    },\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"label\",\r\n    },\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"additionalInfo\",\r\n    }\r\n  ],\r\n  latestValues: [\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"modelNumber\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"hydrantsBrand\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"storzCount\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"longitude\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"latitude\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"zone\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"country\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"state\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"city\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"zip\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"street\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmOpen\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmLowBattery\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmNoSignal\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"alarmClose\",\r\n    }\r\n  ],\r\n  pageLink: {\r\n    page: 0,\r\n    pageSize: 10,\r\n    sortOrder: {\r\n      key: {\r\n        key: \"name\",\r\n        type: \"ENTITY_FIELD\",\r\n      },\r\n      direction: \"ASC\",\r\n    },\r\n  },\r\n};\r\n\r\nconst relationsQueryStorz = {\r\n  entityFilter: {\r\n    type: \"relationsQuery\",\r\n    rootEntity: {\r\n      entityType: \"ASSET\",\r\n    //  id: entityId.id\r\n      id:hydrantId\r\n    },\r\n    direction: \"FROM\",\r\n    maxLevel: 1,\r\n    fetchLastLevelOnly: true,\r\n    filters: [\r\n      {\r\n        relationType: \"Contains\",\r\n        entityTypes: [\r\n          \"ASSET\"\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\",\r\n    },\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"label\",\r\n    }\r\n  ],\r\n  latestValues: [\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"storzNumber\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"exitDiameter\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"exitName\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"assignedDStorz\",\r\n    }\r\n  ],\r\n  pageLink: {\r\n    page: 0,\r\n    pageSize: 10,\r\n    sortOrder: {\r\n      key: {\r\n        key: \"name\",\r\n        type: \"ENTITY_FIELD\",\r\n      },\r\n      direction: \"ASC\",\r\n    }\r\n  }\r\n};\r\n\r\nconst relationsQueryDStorz = {\r\n  entityFilter: {\r\n    type: \"relationsQuery\",\r\n    rootEntity: {\r\n      entityType: \"ASSET\",\r\n    //  id: entityId.id\r\n     id:hydrantId,\r\n    },\r\n    direction: \"FROM\",\r\n    maxLevel: 2,\r\n    fetchLastLevelOnly: true,\r\n    filters: [\r\n      {\r\n        relationType: \"Contains\",\r\n        entityTypes: [\r\n          \"DEVICE\"\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\",\r\n    }\r\n  ],\r\n  latestValues: [\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"serialNumber\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"exitDiameter\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"exitName\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"storzNumber\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isOpen\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isNoSignal\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isInactive\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isTemporaryDeactivated\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isNotAssigned\",\r\n    },\r\n    {\r\n      type: \"TIME_SERIES\",\r\n      key: \"isLowBattery\",\r\n    }\r\n  ],\r\n  pageLink: {\r\n    page: 0,\r\n    pageSize: 10,\r\n    sortOrder: {\r\n      key: {\r\n        key: \"name\",\r\n        type: \"ENTITY_FIELD\",\r\n      },\r\n      direction: \"ASC\",\r\n    }\r\n  }\r\n};\r\n\r\nconst relationsQueryZone = {\r\n  entityFilter: {\r\n    type: \"relationsQuery\",\r\n    rootEntity: {\r\n      entityType: \"ASSET\",\r\n    //  id: entityId.id\r\n       id:hydrantId,\r\n    },\r\n    direction: \"TO\",\r\n    maxLevel: 1,\r\n    fetchLastLevelOnly: true,\r\n    filters: [\r\n      {\r\n        relationType: \"Contains\",\r\n        entityTypes: [\r\n          \"ASSET\"\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n  entityFields: [\r\n    {\r\n      type: \"ENTITY_FIELD\",\r\n      key: \"name\",\r\n    }\r\n  ],\r\n  latestValues: [\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"latitude\",\r\n    },\r\n    {\r\n      type: \"ATTRIBUTE\",\r\n      key: \"longitude\",\r\n    },\r\n  ],\r\n  pageLink: {\r\n    page: 0,\r\n    pageSize: 10,\r\n    sortOrder: {\r\n      key: {\r\n        key: \"name\",\r\n        type: \"ENTITY_FIELD\",\r\n      },\r\n      direction: \"ASC\",\r\n    }\r\n  }\r\n};\r\n\r\nconst relatedDStorzQuery = {\r\n  filters: [\r\n    {\r\n      relationType: \"Contains\",\r\n      entityTypes: [\r\n        \"ASSET\",\r\n        \"DEVICE\"\r\n      ]\r\n    }\r\n  ],\r\n  parameters: {\r\n  //  rootId: entityId.id,\r\n    rootId:hydrantId,\r\n    rootType: \"ASSET\",\r\n    direction: \"FROM\",\r\n    relationTypeGroup: \"COMMON\",\r\n    maxLevel: 2,\r\n    fetchLastLevelOnly: false\r\n  }\r\n};\r\n\r\n\r\nfunction getTranslation(translationText) {\r\n  translateService = $injector.get(widgetContext.servicesMap.get('translate'));\r\n  let translated = \"\";\r\n  try {\r\n    translated = translateService.instant(translationText);\r\n\r\n  } catch (error) {\r\n\r\n  }\r\n  return translated;\r\n}\r\n\r\nfunction unixToHumanReadable(unixTimestamp) {\r\n  if (isNaN(Number(unixTimestamp))) {\r\n    return 'Invalid Timestamp';\r\n  }\r\n\r\n  // Convert to a number if it's a string\r\n  unixTimestamp = Number(unixTimestamp);\r\n\r\n  if (String(unixTimestamp).length <= 10) {\r\n    unixTimestamp *= 1000;  // Convert to milliseconds\r\n  }\r\n  // Create a new Date object\r\n  const date = new Date(unixTimestamp);\r\n\r\n  // Formatting the date and time\r\n  const year = date.getFullYear();\r\n  const month = date.toLocaleString('default', { month: 'short' }); // Get the short name of the month\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  const hours = String(date.getHours()).padStart(2, '0');\r\n  const minutes = String(date.getMinutes()).padStart(2, '0');\r\n\r\n  // Combine into a human-readable string\r\n  const humanReadableDate = ` ${day} ${month} ${year} | ${hours}:${minutes}`;\r\n\r\n  return humanReadableDate;\r\n}\r\n\r\n\r\nfunction isTrue(value) {\r\n  return value !== undefined && value !== null && (value === 'true' || value === true || value == '1' || value == 1);\r\n}\r\n\r\n\r\nfunction readTelemetryValue(telemetryName) {\r\n  if (telemetryName && telemetryName.value && telemetryName.value !== undefined) {\r\n    return isTrue(telemetryName.value);\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction mapAssetsToDevice(response) {\r\n  const assetDeviceMapping = [];\r\n\r\n  for (const relation of response) {\r\n    if (relation.from.entityType === \"ASSET\" && relation.to.entityType === \"DEVICE\") {\r\n      assetDeviceMapping.push({\r\n        fromId: relation.from.id,\r\n        toId: relation.to.id,\r\n        name: relation.toName\r\n      });\r\n    }\r\n  }\r\n\r\n  return assetDeviceMapping;\r\n}\r\n\r\nfunction matchDStorzMappingWithStorz(mappedDStorzArray, storzArray) {\r\n  return mappedDStorzArray.map(mappedItem => {\r\n    const matchingData = storzArray.find(dataItem => dataItem.entityId.id === mappedItem.fromId);\r\n\r\n    if (matchingData) {\r\n      return {\r\n        ...mappedItem,\r\n        latest: matchingData.latest\r\n      };\r\n    } else {\r\n      return mappedItem;\r\n    }\r\n  });\r\n}\r\n\r\nfunction matchDStorzMappingWithStorz(mappedDStorz, storzArray) {\r\n  const matchingData = storzArray.find(dataItem => dataItem.entityId.id === mappedDStorz.fromId);\r\n\r\n  if (matchingData) {\r\n    return {\r\n      ...mappedDStorz,\r\n      latest: matchingData.latest\r\n    };\r\n  } else {\r\n    return mappedDStorz;\r\n  }\r\n}\r\n\r\nfunction findLatestAlarmState(timeseriesOfCurrentEntity, alarmTelemetryKeys ) {\r\n  let latestTelemetry = { telemetryKeyName: \"\", ts: 0, status: \"alarmCleared\", priority: alarmPriorities.alarmCleared };\r\n\r\n  for (let i = 0; i < alarmTelemetryKeys.length; ++i) {\r\n    let telemetry = alarmTelemetryKeys[i];\r\n    const alarmOpenDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[telemetry].ts, status: \"alarmOpen\", priority: alarmPriorities.alarmOpen };\r\n    const alarmLowBatteryDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[telemetry].ts, status: \"alarmLowBattery\", priority: alarmPriorities.alarmLowBattery, label: statusLabels.alarmLowBattery };\r\n    const alarmNoSignalDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[telemetry].ts, status: \"alarmNoSignal\", priority: alarmPriorities.alarmNoSignal, label: statusLabels.alarmNoSignal };\r\n    const alarmCloseDescriptor = { telemetryKeyName: telemetry, ts:  timeseriesOfCurrentEntity[telemetry].ts, status: \"alarmClose\", priority: alarmPriorities.alarmClose, label: statusLabels.alarmClose };\r\n    \r\n    if ( timeseriesOfCurrentEntity[telemetry].ts > latestTelemetry.ts && timeseriesOfCurrentEntity[telemetry].ts > 0 ) {\r\n      if(telemetry == \"alarmOpen\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmOpen < latestTelemetry.priority) {\r\n          latestTelemetry = alarmOpenDescriptor;\r\n      }\r\n      else if(telemetry == \"alarmLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmLowBattery < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmLowBatteryDescriptor;\r\n      }\r\n      else if(telemetry == \"alarmNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmNoSignal < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmNoSignalDescriptor;\r\n      }\r\n      else if(telemetry == \"alarmClose\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmClose < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmCloseDescriptor;\r\n      }\r\n    }   \r\n    else if ( timeseriesOfCurrentEntity[telemetry].ts == latestTelemetry.ts && timeseriesOfCurrentEntity[telemetry].ts > 0 ) {\r\n      if(telemetry == \"alarmOpen\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmOpen < latestTelemetry.priority) {\r\n          latestTelemetry = alarmOpenDescriptor;\r\n      }\r\n      else if(telemetry == \"alarmLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmLowBattery < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmLowBatteryDescriptor;\r\n      }\r\n      else if(telemetry == \"alarmNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmNoSignal < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmNoSignalDescriptor;\r\n      }\r\n       else if(telemetry == \"alarmClose\" && isTrue(timeseriesOfCurrentEntity[telemetry].value) && alarmPriorities.alarmClose < latestTelemetry.priority ) {\r\n          latestTelemetry = alarmCloseDescriptor;\r\n      }\r\n    } \r\n  }\r\n  return latestTelemetry;\r\n}\r\n\r\nfunction findLatestState(timeseriesOfCurrentEntity, telemetryKeys ) {\r\n  let latestTelemetry = { telemetryKeyName: \"\",  ts: 0, label: \"\", status: null, priority: 100};\r\n  for (let j = 0; j < telemetryKeys.length; ++j) {\r\n      let telemetryKey = telemetryKeys[j];\r\n      const inactiveDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isInactive\", priority: statusPriorities.isInactive, label: statusLabels.isInactive };\r\n      const lowBatteryDescriptor = { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isLowBattery\", priority: statusPriorities.isLowBattery, label: statusLabels.isLowBattery };\r\n      const temporaryDeactivationDescriptor = { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isTemporaryDeactivated\", priority: statusPriorities.isTemporaryDeactivated, label: statusLabels.isTemporaryDeactivated };\r\n      const noSignalDescriptor = { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isNoSignal\", priority: statusPriorities.isNoSignal, label: statusLabels.isNoSignal };\r\n      const notAssignedDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isNotAssigned\", priority: statusPriorities.isNotAssigned };\r\n      const openDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isOpen\", priority: statusPriorities.isOpen, label: statusLabels.isOpen };\r\n      const closedDescriptor =  { telemetryKeyName: telemetryKey, ts:  timeseriesOfCurrentEntity[telemetryKey].ts, status: \"isClosed\", priority: statusPriorities.isClosed, label: statusLabels.isClosed };\r\n\r\n      if (timeseriesOfCurrentEntity[telemetryKey].ts > latestTelemetry.ts && timeseriesOfCurrentEntity[telemetryKey].ts > 0 ) {\r\n          if(telemetryKey == \"isInactive\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n              latestTelemetry = inactiveDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n              latestTelemetry = lowBatteryDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isTemporaryDeactivated\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n              latestTelemetry = temporaryDeactivationDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n              latestTelemetry = noSignalDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isNotAssigned\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n              latestTelemetry = notAssignedDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isOpen\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) ) {\r\n              latestTelemetry = openDescriptor;\r\n          } else if(telemetryKey == \"isOpen\" && !isTrue(timeseriesOfCurrentEntity[telemetryKey].value)) {\r\n              latestTelemetry = closedDescriptor;\r\n          }\r\n      }\r\n      else if (timeseriesOfCurrentEntity[telemetryKey].ts == latestTelemetry.ts && timeseriesOfCurrentEntity[telemetryKey].ts > 0 ) {\r\n          if(telemetryKey == \"isInactive\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isInactive < latestTelemetry.priority) {\r\n              latestTelemetry = inactiveDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isLowBattery\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isLowBattery < latestTelemetry.priority ) {\r\n              latestTelemetry = lowBatteryDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isTemporaryDeactivated\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isTemporaryDeactivated < latestTelemetry.priority ) {\r\n              latestTelemetry = temporaryDeactivationDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isNoSignal\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isNoSignal < latestTelemetry.priority ) {\r\n              latestTelemetry = noSignalDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isNotAssigned\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isNotAssigned < latestTelemetry.priority ) {\r\n              latestTelemetry = notAssignedDescriptor;\r\n          }\r\n          else if(telemetryKey == \"isOpen\" && isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isOpen < latestTelemetry.priority ) {\r\n              latestTelemetry = openDescriptor;\r\n          } else if(telemetryKey == \"isOpen\" && !isTrue(timeseriesOfCurrentEntity[telemetryKey].value) && statusPriorities.isClosed < latestTelemetry.priority) {\r\n              latestTelemetry = closedDescriptor;\r\n          }\r\n      }\r\n  }\r\n  return latestTelemetry;\r\n}\r\n\r\n\r\nfunction clearAlarm(dStorzElement, alarmClearPayload) {\r\n    return http.post(`/api/rule-engine/sendToRuleEngine?entityId=${dStorzElement.dStorzId}&entityType=DEVICE&key=clearAlarm`, alarmClearPayload);\r\n}\r\n\r\nfunction ackAlarm(alarmToClear) {\r\n      return http.post(`/api/alarm/${alarmToClear.alarmId}/ack`);\r\n}\r\n\r\nfunction checkRemainingAlarms(dStorzElement, alarmToClear, vm) {\r\n    recentUnacknoledgedAlarms = recentUnacknoledgedAlarms.filter(element => element.alarmId !== alarmToClear.alarmId);\r\n    http.get(`/api/alarm/DEVICE/${dStorzElement.dStorzId}?pageSize=10&page=0&sortProperty=endTs&sortOrder=DESC`).pipe().subscribe((alarmsResponse) => {\r\n        let i = vm.outletDataSource.findIndex(dataSourceElement => dataSourceElement.assigned == dStorzElement.assigned);\r\n        if (alarmsResponse.data.length) {\r\n        let recentUnacknowledgedAlarm = alarmsResponse.data.filter(alarm => alarm.status !== \"ACTIVE_ACK\" && alarm.status !== \"CLEARED_ACK\")[0];\r\n            if (recentUnacknowledgedAlarm) {\r\n              vm.outletDataSource[i].recentUnconfirmedAlarm = `${eventTypes[recentUnacknowledgedAlarm.name]}\\n${unixToHumanReadable(recentUnacknowledgedAlarm.startTs)}`;\r\n              recentUnacknoledgedAlarms.push({dStorzId: dStorzElement.dStorzId, alarmId: recentUnacknowledgedAlarm.id.id, type: recentUnacknowledgedAlarm.type, status: recentUnacknowledgedAlarm.status});\r\n            } else {\r\n                vm.outletDataSource[i].recentUnconfirmedAlarm = \"--\";\r\n            }\r\n        } else {\r\n            vm.outletDataSource[i].recentUnconfirmedAlarm = \"--\";\r\n        }\r\n    })\r\n}\r\n\r\n\r\nopenSideNavDrawer();\r\n\r\nfunction openSideNavDrawer() {\r\n  customDialog.customDialog(htmlTemplate,\r\n    popupDialogController).subscribe();\r\n  setTimeout(function () {\r\n    document.getElementById(\"popup-dialog\").classList.remove(\"closed\");\r\n  }, 10);\r\n}\r\n\r\n\r\nfunction popupDialogController(instance) {\r\n  let vm = instance;\r\n\r\n  var urlEntitiesQuery = `/api/entitiesQuery/find`;\r\n\r\n  http.post(urlEntitiesQuery, entitiesQueryBody).pipe().subscribe((entity) => {\r\n    vm.currentEntity = entity.data[0];\r\n\r\n    const telemetryKeys = entitiesQueryBody.latestValues\r\n      .filter(item => item.type === \"TIME_SERIES\")\r\n      .map(item => item.key);\r\n    const alarmTelemetryKeys = telemetryKeys.filter(item => item.startsWith(\"alarm\"));\r\n    let timeseriesOfCurrentEntity = vm.currentEntity.latest.TIME_SERIES;\r\n    let latestTelemetry = findLatestAlarmState(timeseriesOfCurrentEntity, alarmTelemetryKeys);\r\n\r\n    vm.statusId = latestTelemetry.status;\r\n    vm.statusBadge = statusLabels[vm.statusId];\r\n\r\n    document.getElementById(\"status-badge\").classList.add(vm.statusId);\r\n\r\n    vm.alarmActive = vm.currentEntity.latest.ATTRIBUTE.alarmActive ? isTrue(vm.currentEntity.latest.ATTRIBUTE.alarmActive.value) : false;\r\n    vm.modelNumber = vm.currentEntity.latest.ATTRIBUTE.modelNumber ? vm.currentEntity.latest.ATTRIBUTE.modelNumber.value : \"--\";\r\n    vm.zone = vm.currentEntity.latest.ATTRIBUTE.zone.value ? vm.currentEntity.latest.ATTRIBUTE.zone.value : \"--\" ;\r\n    \r\n    const streetValue = vm.currentEntity.latest.ATTRIBUTE.street.value || '';\r\n    const cityValue = vm.currentEntity.latest.ATTRIBUTE.city.value || '';\r\n    const zipValue = vm.currentEntity.latest.ATTRIBUTE.zip.value || '';\r\n    const countryValue = vm.currentEntity.latest.ATTRIBUTE.country.value || '';\r\n    const stateValue = vm.currentEntity.latest.ATTRIBUTE.state.value || '';\r\n\r\n    vm.address = `${streetValue}${streetValue && (cityValue || zipValue) ? ', ' : ''}${cityValue}${cityValue && zipValue ? ' ' : ''}${zipValue}`;\r\n    if(vm.address.length == 0) {\r\n         vm.address = \"--\";\r\n    }\r\n    vm.country = `${countryValue}${countryValue && stateValue ? ', ' : ''}${stateValue}`;\r\n    vm.hydrantsBrand = vm.currentEntity.latest.ATTRIBUTE.hydrantsBrand ? vm.currentEntity.latest.ATTRIBUTE.hydrantsBrand.value : \"--\";\r\n\r\n\r\n    vm.navigateToMap = function () {\r\n      const longitude = vm.currentEntity.latest.ATTRIBUTE.longitude.value;\r\n      const latitude = vm.currentEntity.latest.ATTRIBUTE.latitude.value;\r\n      const zoomLevel = 10;\r\n      const googleMapUrl = `https://www.google.com/maps/search/?api=1&query=${latitude},${longitude}&zoom=${zoomLevel}`;\r\n\r\n      window.open(googleMapUrl, '_blank');\r\n    }\r\n    \r\n  vm.displayedColumns = ['outlet', 'assigned', 'status', 'recentUnconfirmedAlarm', 'action'];\r\n\r\n  http.post(urlEntitiesQuery, relationsQueryStorz).pipe().subscribe((storzResult) => {\r\n    let relatedEntities = storzResult.data;\r\n    \r\n    vm.outletDataSource = [];\r\n    let emptyRow = { outlet: '--', assigned: '--', status: '--', recentUnconfirmedAlarm: '--', assignedSerialNumber: '--'  };\r\n    if(vm.currentEntity.latest.ATTRIBUTE.storzCount.value) {\r\n        vm.outletDataSource = Array.from({ length: parseInt(vm.currentEntity.latest.ATTRIBUTE.storzCount.value) }, () => emptyRow);\r\n    } else {\r\n        vm.outletDataSource = Array.from({ length: 3 }, () => emptyRow);\r\n    }\r\n\r\n    http.post('/api/relations/info', relatedDStorzQuery).pipe().subscribe((dStorzRelationResult) => {\r\n      let queryPromises = [];\r\n\r\n      let DStorzIds = dStorzRelationResult\r\n        .filter(relation => relation.to.entityType == \"DEVICE\")\r\n        .map(relation => relation.to.id);\r\n      let mappedDStorz = mapAssetsToDevice(dStorzRelationResult);\r\n      \r\n      if(DStorzIds.length == 0) {\r\n         vm.dStorzDataReady = true;\r\n      }\r\n\r\n      for (let i = 0; i < DStorzIds.length; i++) {\r\n        let dStorzId = DStorzIds[i];\r\n        http.get(`/api/alarm/DEVICE/${dStorzId}?status=ACTIVE_UNACK&pageSize=10&page=0&sortProperty=endTs&sortOrder=DESC`).pipe().subscribe((alarmsResponse) => {\r\n          let currentDStorz = mappedDStorz.find(dStorz => dStorz.toId == dStorzId);\r\n          let currentRelatedEntity = matchDStorzMappingWithStorz(currentDStorz, relatedEntities);\r\n          let exitName = currentRelatedEntity.latest.ATTRIBUTE.exitName.value ? currentRelatedEntity.latest.ATTRIBUTE.exitName.value : \"--\";\r\n          let exitDiameter = currentRelatedEntity.latest.ATTRIBUTE.exitDiameter.value ? currentRelatedEntity.latest.ATTRIBUTE.exitDiameter.value : \"--\";\r\n          vm.outletDataSource[i] = {\r\n            dStorzId: dStorzId,\r\n            outlet: `${exitName}, ${exitDiameter} mm`,\r\n            assigned: currentRelatedEntity.name,\r\n            status: \"--\",\r\n            recentUnconfirmedAlarm: \"--\",\r\n            assignedSerialNumber: '--' \r\n          }\r\n\r\n          http.post(urlEntitiesQuery, relationsQueryDStorz).pipe().subscribe((dStorzResult) => {\r\n            let relatedDStorzes = dStorzResult.data;\r\n            for (let k = 0; k < relatedDStorzes.length; k++) {\r\n              const currentDStorzInDataSource = vm.outletDataSource.find(dataItem => relatedDStorzes[k].entityId.id === dataItem.dStorzId) ?? {} ;\r\n              let timeseriesOfCurrentEntity = relatedDStorzes[k].latest.TIME_SERIES;\r\n              const telemetryKeys = Object.keys(relatedDStorzes[k].latest.TIME_SERIES);\r\n              let latestTelemetry = findLatestState(timeseriesOfCurrentEntity, telemetryKeys);\r\n              currentDStorzInDataSource[\"assignedSerialNumber\"] = relatedDStorzes[k].latest.ATTRIBUTE.serialNumber.value ? relatedDStorzes[k].latest.ATTRIBUTE.serialNumber.value : \"--\";\r\n              if (latestTelemetry.ts == 0) {\r\n                currentDStorzInDataSource[\"status\"] = \"--\";\r\n              } else {\r\n                currentDStorzInDataSource[\"status\"] = `${latestTelemetry.label}\\n${unixToHumanReadable(latestTelemetry.ts)}`;\r\n              }\r\n            }\r\n            //to show the exit numbers in order\r\n\r\n            const sortedDatasource = [];\r\n            let expectedOutlets = [];\r\n            if(vm.currentEntity.latest.ATTRIBUTE.storzCount.value == 2) {\r\n                expectedOutlets = ['Exit 1', 'Exit 2'];\r\n            } else {\r\n                expectedOutlets = ['Exit 1', 'Exit 2', 'Exit 3'];\r\n            }\r\n           \r\n            expectedOutlets.forEach(exit => {\r\n                const matchingEntry = vm.outletDataSource.find(entry => entry.outlet.includes(exit));\r\n                if (matchingEntry) {\r\n                    sortedDatasource.push(matchingEntry);\r\n                } else {\r\n                    sortedDatasource.push({ outlet: '--', assigned: '--', status: '--', recentUnconfirmedAlarm: '--' , assignedSerialNumber: '--'  });\r\n                }\r\n            });\r\n            \r\n            vm.outletDataSource = sortedDatasource;\r\n            \r\n            vm.dStorzDataReady = true;\r\n          })\r\n\r\n          if (alarmsResponse.data.length) {\r\n             let recentUnacknowledgedAlarm = alarmsResponse.data.filter(alarm => alarm.status !== \"ACTIVE_ACK\" && alarm.status !== \"CLEARED_ACK\")[0];\r\n\r\n            if (recentUnacknowledgedAlarm) {\r\n              vm.outletDataSource[i].recentUnconfirmedAlarm = `${eventTypes[recentUnacknowledgedAlarm.name]}\\n${unixToHumanReadable(recentUnacknowledgedAlarm.startTs)}`;\r\n              recentUnacknoledgedAlarms.push({dStorzId: dStorzId, alarmId: recentUnacknowledgedAlarm.id.id, type: recentUnacknowledgedAlarm.type, status: recentUnacknowledgedAlarm.status});\r\n            }\r\n          }\r\n        })\r\n\r\n      }\r\n    })\r\n  })\r\n\r\n  vm.cancel = function () {\r\n    document.getElementById(\"popup-dialog\").classList.add(\"closed\");\r\n    vm.dialogRef.close(null);\r\n  };\r\n\r\n  });\r\n\r\n/*\r\n  http.post(urlEntitiesQuery, relationsQueryZone).pipe().subscribe((result) => {\r\n    let relatedZone = result.data.find(relatedEntity => relatedEntity.latest.ATTRIBUTE.latitude.value && relatedEntity.latest.ATTRIBUTE.longitude.value);\r\n\r\n    vm.zone = relatedZone ? relatedZone.latest.ENTITY_FIELD.name.value : '--';\r\n  })\r\n   */       \r\n    vm.openConfirmDialog = function(dStorzElement) {\r\n        let title = 'Confirm';\r\n        let content = 'Are you sure to confirm this alarm?';\r\n         if(!vm.disableConfirmButton(dStorzElement)) {\r\n                 dialogs.confirm(title, content, 'Cancel', 'Confirm').subscribe(\r\n                function(result) {\r\n                    if (result) {\r\n                        vm.ackAlarm(dStorzElement)\r\n                    }\r\n                }\r\n            );\r\n         }\r\n    \r\n    \r\n    }\r\n\r\n  \r\n  vm.ackAlarm = function(dStorzElement) {\r\n    let alarmToClear = recentUnacknoledgedAlarms.find(alarm => alarm.dStorzId == dStorzElement.dStorzId);\r\n     let alarmUpperCase = alarmToClear.type.charAt(0).toUpperCase() + alarmToClear.type.slice(1);\r\n    let alarmClearPayload = {\r\n        msg: null,\r\n        metadata: {\r\n            deviceName: dStorzElement.assigned,\r\n            deviceType: \"d-storz\",\r\n            alarmClearType: `clear${alarmUpperCase}`\r\n        }\r\n    }\r\n    switch(alarmToClear.status) {\r\n        case \"CLEARED_UNACK\":\r\n        case \"ACTIVE_UNACK\":\r\n            ackAlarm(alarmToClear).pipe().subscribe(() => {\r\n                checkRemainingAlarms(dStorzElement,alarmToClear, vm);\r\n            })\r\n            break;\r\n    }\r\n  }\r\n  \r\n    vm.disableConfirmButton = function(dStorzElement) {\r\n    let alarmToClear = recentUnacknoledgedAlarms.find(alarm => alarm.dStorzId == dStorzElement.dStorzId);\r\n    if(alarmToClear) {\r\n        return false;\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n  }\r\n\r\n  vm.setAllTranslations = function () {\r\n    vm.dialogTitle = getTranslation(\"hawle-dashboard.alarm.alarm-info\");\r\n    vm.hydrantNumber = getTranslation(\"hawle-dashboard.hydrant.hydrant-number\");\r\n    vm.brand = getTranslation(\"hawle-dashboard.hydrant.brand\");\r\n    vm.model = getTranslation(\"hawle-dashboard.hydrant.model\");\r\n    vm.temporaryDeactivation = getTranslation(\"hawle-dashboard.temporary-deactivation\");\r\n    vm.outletInformation = getTranslation(\"hawle-dashboard.hydrant.outlet-information\");\r\n    vm.reason = getTranslation(\"hawle-dashboard.reason\");\r\n    vm.time = getTranslation(\"hawle-dashboard.time\");\r\n    vm.createdBy = getTranslation(\"hawle-dashboard.created-by\");\r\n    vm.assignedDStorz = getTranslation(\"hawle-dashboard.hydrant.assigned-dstorz\");\r\n    vm.statusTimestamp = getTranslation(\"hawle-dashboard.hydrant.status-timestamp\");\r\n    vm.routeTo = getTranslation(\"hawle-dashboard.hydrant.route-to\");\r\n    vm.locationLabel = getTranslation(\"hawle-dashboard.location\");\r\n    vm.zoneLabel = getTranslation(\"hawle-dashboard.zone\");\r\n    vm.confirmAlarm = getTranslation(\"hawle-dashboard.alarm.confirm\");\r\n    vm.viewAlarms = getTranslation(\"hawle-dashboard.alarm.view-alarms\");\r\n    vm.actionLabel = getTranslation(\"hawle-dashboard.action\");\r\n    vm.recentUnconfirmedAlarmLabel =  getTranslation(\"hawle-dashboard.recent-unconfirmed-alarm\");\r\n  };\r\n\r\n  vm.setAllTranslations();\r\n}\r\n",
                "customResources": [],
                "openInSeparateDialog": false,
                "openInPopover": false,
                "id": "cbd07d18-df5b-3fe7-5489-c006f84a276e"
              }
            ]
          },
          "alarmStatusList": [
            "ACTIVE_UNACK"
          ],
          "alarmSeverityList": [],
          "alarmTypeList": [],
          "searchPropagatedAlarms": false,
          "datasources": [],
          "widgetCss": ".mat-cell .content-container {\r\n  display: block; \r\n  vertical-align: middle;\r\n\r\n}\r\n\r\n.mat-cell img,\r\n.mat-cell span {\r\n  display: inline-block; \r\n  vertical-align: middle; \r\n}",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "useCustomQueryService": true,
          "customQuery": "{\n  \"translateColumnName\": true,\n  \"alarmStatusList\": [\"ACTIVE_UNACK\"]\n}",
          "useColumnMapping": true,
          "columnMapping": "[\n  {\n    \"type\": \"ALARM_FIELD\",\n    \"key\": \"createdTime\",\n    \"columnName\": \"hawle-dashboard.created-time\",\n    \"defaultColumnName\": \"Created time\",\n    \"humanReadableTs\": true,\n    \"tsPattern\": \"dd MMMM YYYY, HH:mm z\"\n\n  },\n  {\n    \"type\": \"ALARM_FIELD\",\n    \"key\": \"type\",\n    \"columnName\": \"hawle-dashboard.alarm.alarm\",\n    \"defaultColumnName\": \"Alarm\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"serialNumber\",\n    \"columnName\": \"hawle-dashboard.d-storz-number\",\n    \"defaultColumnName\": \"D-storz Number\"\n  },\n  {\n    \"type\": \"ALARM_FIELD\",\n    \"key\": \"originator\",\n    \"columnName\": \"hawle-dashboard.lpn-id\",\n    \"defaultColumnName\": \"LPN ID\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"hydrantNumber\",\n    \"columnName\": \"hawle-dashboard.hydrant.hydrant-number\",\n    \"defaultColumnName\": \"D-storz Number\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"brand\",\n    \"columnName\": \"hawle-dashboard.brand\",\n    \"defaultColumnName\": \"Brand\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"country\",\n    \"columnName\": \"hawle-dashboard.country\",\n    \"defaultColumnName\": \"Country\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"state\",\n    \"columnName\": \"hawle-dashboard.state\",\n    \"defaultColumnName\": \"State\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"zip\",\n    \"columnName\": \"hawle-dashboard.zip\",\n    \"defaultColumnName\": \"Zip\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"city\",\n    \"columnName\": \"hawle-dashboard.city\",\n    \"defaultColumnName\": \"City\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"street\",\n    \"columnName\": \"hawle-dashboard.street\",\n    \"defaultColumnName\": \"Street\"\n  },\n  {    \n    \"type\": \"ALARM_FIELD\",\n    \"key\": \"status\",\n    \"columnName\": \"hawle-dashboard.status\",\n    \"defaultColumnName\": \"Status\"\n  }\n]"
        },
        "row": 0,
        "col": 0,
        "id": "573590ac-38af-3398-75c4-dbf010cacb9a"
      },
      "0e8df222-8684-c564-7698-04eb2515a6d0": {
        "isSystemType": true,
        "bundleAlias": "alarm_widgets",
        "typeAlias": "alarms_table",
        "type": "alarm",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 10.5,
        "sizeY": 6.5,
        "config": {
          "timewindow": {
            "hideInterval": false,
            "hideAggregation": false,
            "hideAggInterval": false,
            "hideTimezone": false,
            "selectedTab": 0,
            "realtime": {
              "realtimeType": 0,
              "timewindowMs": 25920000000,
              "quickInterval": "CURRENT_DAY",
              "interval": 1000
            },
            "aggregation": {
              "type": "NONE",
              "limit": 200
            },
            "displayValue": "Realtime - last 300 days "
          },
          "showTitle": false,
          "backgroundColor": "rgb(255, 255, 255)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "4px",
          "settings": {
            "enableSelection": true,
            "enableSearch": true,
            "displayDetails": false,
            "allowAcknowledgment": false,
            "allowClear": false,
            "displayPagination": true,
            "defaultPageSize": 10,
            "defaultSortOrder": "-createdTime",
            "enableSelectColumnDisplay": true,
            "enableStickyAction": false,
            "enableFilter": true,
            "enableStickyHeader": true,
            "reserveSpaceForHiddenAction": "true",
            "useRowStyleFunction": false,
            "enableExportDataDisplay": true
          },
          "title": "All Alarms",
          "dropShadow": false,
          "enableFullscreen": true,
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400,
            "padding": "5px 10px 5px 10px"
          },
          "useDashboardTimewindow": false,
          "showLegend": false,
          "alarmSource": {
            "type": "entity",
            "name": null,
            "entityAliasId": "4c30635a-474a-9dbd-0d25-b9a38527e2cf",
            "filterId": null,
            "dataKeys": [
              {
                "name": "createdTime",
                "type": "alarm",
                "label": "Created time",
                "color": "#2196f3",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": ""
                },
                "_hash": 0.021092237451093787
              },
              {
                "name": "type",
                "type": "alarm",
                "label": "Alarm",
                "color": "#f44336",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "columnWidth": "100px",
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "const redMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNSAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8xXzQ5IiBmaWxsPSJ3aGl0ZSI+CjxwYXRoIGQ9Ik0yMy4xMjUgMTAuNUMyMy4xMjUgMTYuMjk5IDE4LjQyNCAyMSAxMi42MjUgMjFDNi44MjYwMSAyMSAyLjEyNSAxNi4yOTkgMi4xMjUgMTAuNUMyLjEyNSA0LjcwMTAxIDYuODI2MDEgMCAxMi42MjUgMEMxOC40MjQgMCAyMy4xMjUgNC43MDEwMSAyMy4xMjUgMTAuNVoiLz4KPC9tYXNrPgo8cGF0aCBkPSJNMjMuMTI1IDEwLjVDMjMuMTI1IDE2LjI5OSAxOC40MjQgMjEgMTIuNjI1IDIxQzYuODI2MDEgMjEgMi4xMjUgMTYuMjk5IDIuMTI1IDEwLjVDMi4xMjUgNC43MDEwMSA2LjgyNjAxIDAgMTIuNjI1IDBDMTguNDI0IDAgMjMuMTI1IDQuNzAxMDEgMjMuMTI1IDEwLjVaIiBmaWxsPSIjRUY0NDQ0Ii8+CjxwYXRoIGQ9Ik0yMi4zNzUgMTAuNUMyMi4zNzUgMTUuODg0OCAxOC4wMDk4IDIwLjI1IDEyLjYyNSAyMC4yNVYyMS43NUMxOC44MzgyIDIxLjc1IDIzLjg3NSAxNi43MTMyIDIzLjg3NSAxMC41SDIyLjM3NVpNMTIuNjI1IDIwLjI1QzcuMjQwMjIgMjAuMjUgMi44NzUgMTUuODg0OCAyLjg3NSAxMC41SDEuMzc1QzEuMzc1IDE2LjcxMzIgNi40MTE4IDIxLjc1IDEyLjYyNSAyMS43NVYyMC4yNVpNMi44NzUgMTAuNUMyLjg3NSA1LjExNTIyIDcuMjQwMjIgMC43NSAxMi42MjUgMC43NVYtMC43NUM2LjQxMTggLTAuNzUgMS4zNzUgNC4yODY4IDEuMzc1IDEwLjVIMi44NzVaTTEyLjYyNSAwLjc1QzE4LjAwOTggMC43NSAyMi4zNzUgNS4xMTUyMiAyMi4zNzUgMTAuNUgyMy44NzVDMjMuODc1IDQuMjg2OCAxOC44MzgyIC0wLjc1IDEyLjYyNSAtMC43NVYwLjc1WiIgZmlsbD0iI0I5MUMxQyIgbWFzaz0idXJsKCNwYXRoLTEtaW5zaWRlLTFfMV80OSkiLz4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZGRfMV80OSkiPgo8cGF0aCBkPSJNMTEuNTg2NiA3LjI5OThMOS45NTM5MSA0LjU2NTQxQzkuNzg1MjUgNC4yODI5NCA5Ljg3MjE4IDMuOTE3NTMgMTAuMTUgMy43NDEyOEwxMS45ODQgMi41Nzc3MUMxMi4yNjg2IDIuMzk3MTEgMTIuNjQ1OSAyLjQ4MjkzIDEyLjgyNDUgMi43Njg4OUwxNC45NDkzIDYuMTcyNDFDMTUuMDA4IDYuMjY2MzggMTUuMDM5OCA2LjM3NDYxIDE1LjA0MTQgNi40ODUzOUwxNS4xMzU3IDEzLjEyMjJDMTUuMTQwNSAxMy40NjA5IDE0Ljg2NzIgMTMuNzM4MSAxNC41Mjg1IDEzLjczODFIMTIuMjc5OEMxMS45NDQ0IDEzLjczODEgMTEuNjcyNSAxMy40NjYyIDExLjY3MjUgMTMuMTMwOFY3LjYxMTE0QzExLjY3MjUgNy41MDE1MSAxMS42NDI4IDcuMzkzOTIgMTEuNTg2NiA3LjI5OThaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTAuNDI2MSA1LjgxNzQ4TDkuODM2NTQgNC44NTEwNkM5LjY2MTM5IDQuNTYzOTUgOS4yODYyNiA0LjQ3Mzg2IDguOTk5ODMgNC42NTAxM0w4LjY0NzUyIDQuODY2OTRDOC4zNTk4MSA1LjA0NCA4LjI3MTkgNS40MjE4MSA4LjQ1MTg5IDUuNzA3N0w5LjA2MjUxIDYuNjc3NTZDOS4yNDQzNiA2Ljk2NjQgOS42Mjg0NiA3LjA0ODY5IDkuOTEyNjggNi44NTk3TDEwLjI0MzkgNi42Mzk0NEMxMC41MTU1IDYuNDU4ODQgMTAuNTk2IDYuMDk1OTMgMTAuNDI2MSA1LjgxNzQ4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTE0Ljg4ODUgMTQuMTQ3MUgxMS45Mjg0QzExLjc2NDggMTQuMTQ3MSAxMS42MDgxIDE0LjIxMzEgMTEuNDkzOCAxNC4zMzAzTDEwLjYxNDYgMTUuMjMxM0MxMC41MDM5IDE1LjM0NDcgMTAuNDQyIDE1LjQ5NjkgMTAuNDQyIDE1LjY1NTRWMTYuNjQyN0MxMC40NDIgMTYuOTc4MSAxMC43MTM5IDE3LjI1IDExLjA0OTIgMTcuMjVIMTMuNDM1N0gxNS43Njc3QzE2LjEwMzEgMTcuMjUgMTYuMzc1IDE2Ljk3ODEgMTYuMzc1IDE2LjY0MjdWMTUuNjU1NEMxNi4zNzUgMTUuNDk2OSAxNi4zMTMgMTUuMzQ0NyAxNi4yMDI0IDE1LjIzMTNMMTUuMzIzMiAxNC4zMzAzQzE1LjIwODkgMTQuMjEzMSAxNS4wNTIyIDE0LjE0NzEgMTQuODg4NSAxNC4xNDcxWiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kZF8xXzQ5IiB4PSI2LjEwODQzIiB5PSIwLjg3MDYzMSIgd2lkdGg9IjEyLjUxNjYiIGhlaWdodD0iMTkuMjY2OSIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPgo8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIwLjYzNzUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS4xMjUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjE5IDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMV80OSIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIwLjE4NzUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMC4zNzUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMV80OSIgcmVzdWx0PSJlZmZlY3QyX2Ryb3BTaGFkb3dfMV80OSIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18xXzQ5IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\nconst crossedMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8yXzYiIGZpbGw9IndoaXRlIj4KPHBhdGggZD0iTTIyLjUgMTAuNUMyMi41IDE2LjI5OSAxNy43OTkgMjEgMTIgMjFDNi4yMDEwMSAyMSAxLjUgMTYuMjk5IDEuNSAxMC41QzEuNSA0LjcwMTAxIDYuMjAxMDEgMCAxMiAwQzE3Ljc5OSAwIDIyLjUgNC43MDEwMSAyMi41IDEwLjVaIi8+CjwvbWFzaz4KPHBhdGggZD0iTTIyLjUgMTAuNUMyMi41IDE2LjI5OSAxNy43OTkgMjEgMTIgMjFDNi4yMDEwMSAyMSAxLjUgMTYuMjk5IDEuNSAxMC41QzEuNSA0LjcwMTAxIDYuMjAxMDEgMCAxMiAwQzE3Ljc5OSAwIDIyLjUgNC43MDEwMSAyMi41IDEwLjVaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMjEuNzUgMTAuNUMyMS43NSAxNS44ODQ4IDE3LjM4NDggMjAuMjUgMTIgMjAuMjVWMjEuNzVDMTguMjEzMiAyMS43NSAyMy4yNSAxNi43MTMyIDIzLjI1IDEwLjVIMjEuNzVaTTEyIDIwLjI1QzYuNjE1MjIgMjAuMjUgMi4yNSAxNS44ODQ4IDIuMjUgMTAuNUgwLjc1QzAuNzUgMTYuNzEzMiA1Ljc4NjggMjEuNzUgMTIgMjEuNzVWMjAuMjVaTTIuMjUgMTAuNUMyLjI1IDUuMTE1MjIgNi42MTUyMiAwLjc1IDEyIDAuNzVWLTAuNzVDNS43ODY4IC0wLjc1IDAuNzUgNC4yODY4IDAuNzUgMTAuNUgyLjI1Wk0xMiAwLjc1QzE3LjM4NDggMC43NSAyMS43NSA1LjExNTIyIDIxLjc1IDEwLjVIMjMuMjVDMjMuMjUgNC4yODY4IDE4LjIxMzIgLTAuNzUgMTIgLTAuNzVWMC43NVoiIGZpbGw9IiM2NDc0OEIiIG1hc2s9InVybCgjcGF0aC0xLWluc2lkZS0xXzJfNikiLz4KPHBhdGggZD0iTTEwLjk2MTYgNy4yOTk4TDkuMzI4OTEgNC41NjU0MUM5LjE2MDI1IDQuMjgyOTQgOS4yNDcxOCAzLjkxNzUzIDkuNTI0OTggMy43NDEyOEwxMS4zNTkgMi41Nzc3MUMxMS42NDM2IDIuMzk3MTEgMTIuMDIwOSAyLjQ4MjkzIDEyLjE5OTUgMi43Njg4OUwxNC4zMjQzIDYuMTcyNDFDMTQuMzgzIDYuMjY2MzggMTQuNDE0OCA2LjM3NDYxIDE0LjQxNjQgNi40ODUzOUwxNC41MTA3IDEzLjEyMjJDMTQuNTE1NSAxMy40NjA5IDE0LjI0MjIgMTMuNzM4MSAxMy45MDM1IDEzLjczODFIMTEuNjU0OEMxMS4zMTk0IDEzLjczODEgMTEuMDQ3NSAxMy40NjYyIDExLjA0NzUgMTMuMTMwOFY3LjYxMTE0QzExLjA0NzUgNy41MDE1MSAxMS4wMTc4IDcuMzkzOTIgMTAuOTYxNiA3LjI5OThaIiBmaWxsPSIjMDA5REUyIi8+CjxwYXRoIGQ9Ik05LjgwMTExIDUuODE3NDhMOS4yMTE1NCA0Ljg1MTA2QzkuMDM2MzkgNC41NjM5NSA4LjY2MTI2IDQuNDczODYgOC4zNzQ4MyA0LjY1MDEzTDguMDIyNTIgNC44NjY5NEM3LjczNDgxIDUuMDQ0IDcuNjQ2OSA1LjQyMTgxIDcuODI2ODkgNS43MDc3TDguNDM3NTEgNi42Nzc1NkM4LjYxOTM2IDYuOTY2NCA5LjAwMzQ2IDcuMDQ4NjkgOS4yODc2OCA2Ljg1OTdMOS42MTg5MyA2LjYzOTQ0QzkuODkwNTQgNi40NTg4NCA5Ljk3MDk3IDYuMDk1OTMgOS44MDExMSA1LjgxNzQ4WiIgZmlsbD0iIzAwOURFMiIvPgo8cGF0aCBkPSJNMTQuMjYzNSAxNC4xNDcxSDExLjMwMzRDMTEuMTM5OCAxNC4xNDcxIDEwLjk4MzEgMTQuMjEzMSAxMC44Njg4IDE0LjMzMDNMOS45ODk1OSAxNS4yMzEzQzkuODc4OTEgMTUuMzQ0NyA5LjgxNjk2IDE1LjQ5NjkgOS44MTY5NiAxNS42NTU0VjE2LjY0MjdDOS44MTY5NiAxNi45NzgxIDEwLjA4ODkgMTcuMjUgMTAuNDI0MiAxNy4yNUgxMi44MTA3SDE1LjE0MjdDMTUuNDc4MSAxNy4yNSAxNS43NSAxNi45NzgxIDE1Ljc1IDE2LjY0MjdWMTUuNjU1NEMxNS43NSAxNS40OTY5IDE1LjY4OCAxNS4zNDQ3IDE1LjU3NzQgMTUuMjMxM0wxNC42OTgyIDE0LjMzMDNDMTQuNTgzOSAxNC4yMTMxIDE0LjQyNzIgMTQuMTQ3MSAxNC4yNjM1IDE0LjE0NzFaIiBmaWxsPSIjMDA5REUyIi8+CjxtYXNrIGlkPSJwYXRoLTQtb3V0c2lkZS0yXzJfNiIgbWFza1VuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iMiIgeT0iMC41IiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9ImJsYWNrIj4KPHJlY3QgZmlsbD0id2hpdGUiIHg9IjIiIHk9IjAuNSIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTkuNSAxMC41QzE5LjUgMTQuNjQyMSAxNi4xNDIxIDE4IDEyIDE4QzEwLjE5OSAxOCA4LjU0NjM1IDE3LjM2NTIgNy4yNTM0NSAxNi4zMDcyTDE3LjgwNzIgNS43NTM0NUMxOC44NjUyIDcuMDQ2MzUgMTkuNSA4LjY5OTA1IDE5LjUgMTAuNVpNNi4xOTI3OSAxNS4yNDY1TDE2Ljc0NjUgNC42OTI3OUMxNS40NTM2IDMuNjM0NzcgMTMuODAxIDMgMTIgM0M3Ljg1Nzg2IDMgNC41IDYuMzU3ODYgNC41IDEwLjVDNC41IDEyLjMwMSA1LjEzNDc3IDEzLjk1MzYgNi4xOTI3OSAxNS4yNDY1Wk0yMSAxMC41QzIxIDE1LjQ3MDYgMTYuOTcwNiAxOS41IDEyIDE5LjVDNy4wMjk0NCAxOS41IDMgMTUuNDcwNiAzIDEwLjVDMyA1LjUyOTQ0IDcuMDI5NDQgMS41IDEyIDEuNUMxNi45NzA2IDEuNSAyMSA1LjUyOTQ0IDIxIDEwLjVaIi8+CjwvbWFzaz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xOS41IDEwLjVDMTkuNSAxNC42NDIxIDE2LjE0MjEgMTggMTIgMThDMTAuMTk5IDE4IDguNTQ2MzUgMTcuMzY1MiA3LjI1MzQ1IDE2LjMwNzJMMTcuODA3MiA1Ljc1MzQ1QzE4Ljg2NTIgNy4wNDYzNSAxOS41IDguNjk5MDUgMTkuNSAxMC41Wk02LjE5Mjc5IDE1LjI0NjVMMTYuNzQ2NSA0LjY5Mjc5QzE1LjQ1MzYgMy42MzQ3NyAxMy44MDEgMyAxMiAzQzcuODU3ODYgMyA0LjUgNi4zNTc4NiA0LjUgMTAuNUM0LjUgMTIuMzAxIDUuMTM0NzcgMTMuOTUzNiA2LjE5Mjc5IDE1LjI0NjVaTTIxIDEwLjVDMjEgMTUuNDcwNiAxNi45NzA2IDE5LjUgMTIgMTkuNUM3LjAyOTQ0IDE5LjUgMyAxNS40NzA2IDMgMTAuNUMzIDUuNTI5NDQgNy4wMjk0NCAxLjUgMTIgMS41QzE2Ljk3MDYgMS41IDIxIDUuNTI5NDQgMjEgMTAuNVoiIGZpbGw9IiNFRjQ0NDQiLz4KPHBhdGggZD0iTTcuMjUzNDUgMTYuMzA3Mkw2LjcyMzEyIDE1Ljc3NjlMNi4xMzcxNiAxNi4zNjI4TDYuNzc4NDcgMTYuODg3Nkw3LjI1MzQ1IDE2LjMwNzJaTTE3LjgwNzIgNS43NTM0NUwxOC4zODc2IDUuMjc4NDdMMTcuODYyOCA0LjYzNzE2TDE3LjI3NjkgNS4yMjMxMkwxNy44MDcyIDUuNzUzNDVaTTYuMTkyNzkgMTUuMjQ2NUw1LjYxMjM2IDE1LjcyMTVMNi4xMzcxNiAxNi4zNjI4TDYuNzIzMTIgMTUuNzc2OUw2LjE5Mjc5IDE1LjI0NjVaTTE2Ljc0NjUgNC42OTI3OUwxNy4yNzY5IDUuMjIzMTJMMTcuODYyOCA0LjYzNzE2TDE3LjIyMTUgNC4xMTIzNkwxNi43NDY1IDQuNjkyNzlaTTEyIDE4Ljc1QzE2LjU1NjMgMTguNzUgMjAuMjUgMTUuMDU2MyAyMC4yNSAxMC41SDE4Ljc1QzE4Ljc1IDE0LjIyNzkgMTUuNzI3OSAxNy4yNSAxMiAxNy4yNVYxOC43NVpNNi43Nzg0NyAxNi44ODc2QzguMjAwNDYgMTguMDUxMyAxMC4wMTk2IDE4Ljc1IDEyIDE4Ljc1VjE3LjI1QzEwLjM3ODUgMTcuMjUgOC44OTIyNSAxNi42NzkyIDcuNzI4NDMgMTUuNzI2OEw2Ljc3ODQ3IDE2Ljg4NzZaTTE3LjI3NjkgNS4yMjMxMkw2LjcyMzEyIDE1Ljc3NjlMNy43ODM3OCAxNi44Mzc1TDE4LjMzNzUgNi4yODM3OEwxNy4yNzY5IDUuMjIzMTJaTTIwLjI1IDEwLjVDMjAuMjUgOC41MTk2NCAxOS41NTEzIDYuNzAwNDYgMTguMzg3NiA1LjI3ODQ3TDE3LjIyNjggNi4yMjg0M0MxOC4xNzkyIDcuMzkyMjUgMTguNzUgOC44Nzg0NiAxOC43NSAxMC41SDIwLjI1Wk02LjcyMzEyIDE1Ljc3NjlMMTcuMjc2OSA1LjIyMzEyTDE2LjIxNjIgNC4xNjI0Nkw1LjY2MjQ2IDE0LjcxNjJMNi43MjMxMiAxNS43NzY5Wk0xNy4yMjE1IDQuMTEyMzZDMTUuNzk5NSAyLjk0ODcyIDEzLjk4MDQgMi4yNSAxMiAyLjI1VjMuNzVDMTMuNjIxNSAzLjc1IDE1LjEwNzcgNC4zMjA4MyAxNi4yNzE2IDUuMjczMjJMMTcuMjIxNSA0LjExMjM2Wk0xMiAyLjI1QzcuNDQzNjUgMi4yNSAzLjc1IDUuOTQzNjUgMy43NSAxMC41SDUuMjVDNS4yNSA2Ljc3MjA4IDguMjcyMDggMy43NSAxMiAzLjc1VjIuMjVaTTMuNzUgMTAuNUMzLjc1IDEyLjQ4MDQgNC40NDg3MiAxNC4yOTk1IDUuNjEyMzYgMTUuNzIxNUw2Ljc3MzIyIDE0Ljc3MTZDNS44MjA4MyAxMy42MDc3IDUuMjUgMTIuMTIxNSA1LjI1IDEwLjVIMy43NVpNMTIgMjAuMjVDMTcuMzg0OCAyMC4yNSAyMS43NSAxNS44ODQ4IDIxLjc1IDEwLjVIMjAuMjVDMjAuMjUgMTUuMDU2MyAxNi41NTYzIDE4Ljc1IDEyIDE4Ljc1VjIwLjI1Wk0yLjI1IDEwLjVDMi4yNSAxNS44ODQ4IDYuNjE1MjIgMjAuMjUgMTIgMjAuMjVWMTguNzVDNy40NDM2NSAxOC43NSAzLjc1IDE1LjA1NjMgMy43NSAxMC41SDIuMjVaTTEyIDAuNzVDNi42MTUyMiAwLjc1IDIuMjUgNS4xMTUyMiAyLjI1IDEwLjVIMy43NUMzLjc1IDUuOTQzNjUgNy40NDM2NSAyLjI1IDEyIDIuMjVWMC43NVpNMjEuNzUgMTAuNUMyMS43NSA1LjExNTIyIDE3LjM4NDggMC43NSAxMiAwLjc1VjIuMjVDMTYuNTU2MyAyLjI1IDIwLjI1IDUuOTQzNjUgMjAuMjUgMTAuNUgyMS43NVoiIGZpbGw9IndoaXRlIiBtYXNrPSJ1cmwoI3BhdGgtNC1vdXRzaWRlLTJfMl82KSIvPgo8L3N2Zz4K';\r\n\r\nconst orangeMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNSAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8zNzc5XzkwMDIiIGZpbGw9IndoaXRlIj4KPHBhdGggZD0iTTIzLjI1IDEwLjVDMjMuMjUgMTYuMjk5IDE4LjU0OSAyMSAxMi43NSAyMUM2Ljk1MTAxIDIxIDIuMjUgMTYuMjk5IDIuMjUgMTAuNUMyLjI1IDQuNzAxMDEgNi45NTEwMSAwIDEyLjc1IDBDMTguNTQ5IDAgMjMuMjUgNC43MDEwMSAyMy4yNSAxMC41WiIvPgo8L21hc2s+CjxwYXRoIGQ9Ik0yMy4yNSAxMC41QzIzLjI1IDE2LjI5OSAxOC41NDkgMjEgMTIuNzUgMjFDNi45NTEwMSAyMSAyLjI1IDE2LjI5OSAyLjI1IDEwLjVDMi4yNSA0LjcwMTAxIDYuOTUxMDEgMCAxMi43NSAwQzE4LjU0OSAwIDIzLjI1IDQuNzAxMDEgMjMuMjUgMTAuNVoiIGZpbGw9IiNGOTczMTYiLz4KPHBhdGggZD0iTTIyLjUgMTAuNUMyMi41IDE1Ljg4NDggMTguMTM0OCAyMC4yNSAxMi43NSAyMC4yNVYyMS43NUMxOC45NjMyIDIxLjc1IDI0IDE2LjcxMzIgMjQgMTAuNUgyMi41Wk0xMi43NSAyMC4yNUM3LjM2NTIyIDIwLjI1IDMgMTUuODg0OCAzIDEwLjVIMS41QzEuNSAxNi43MTMyIDYuNTM2OCAyMS43NSAxMi43NSAyMS43NVYyMC4yNVpNMyAxMC41QzMgNS4xMTUyMiA3LjM2NTIyIDAuNzUgMTIuNzUgMC43NVYtMC43NUM2LjUzNjggLTAuNzUgMS41IDQuMjg2OCAxLjUgMTAuNUgzWk0xMi43NSAwLjc1QzE4LjEzNDggMC43NSAyMi41IDUuMTE1MjIgMjIuNSAxMC41SDI0QzI0IDQuMjg2OCAxOC45NjMyIC0wLjc1IDEyLjc1IC0wLjc1VjAuNzVaIiBmaWxsPSIjQzI0MTBDIiBtYXNrPSJ1cmwoI3BhdGgtMS1pbnNpZGUtMV8zNzc5XzkwMDIpIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2RkXzM3NzlfOTAwMikiPgo8cGF0aCBkPSJNMTEuNzExNiA3LjI5OThMMTAuMDc4OSA0LjU2NTQxQzkuOTEwMjUgNC4yODI5NCA5Ljk5NzE4IDMuOTE3NTMgMTAuMjc1IDMuNzQxMjhMMTIuMTA5IDIuNTc3NzFDMTIuMzkzNiAyLjM5NzExIDEyLjc3MDkgMi40ODI5MyAxMi45NDk1IDIuNzY4ODlMMTUuMDc0MyA2LjE3MjQxQzE1LjEzMyA2LjI2NjM4IDE1LjE2NDggNi4zNzQ2MSAxNS4xNjY0IDYuNDg1MzlMMTUuMjYwNyAxMy4xMjIyQzE1LjI2NTUgMTMuNDYwOSAxNC45OTIyIDEzLjczODEgMTQuNjUzNSAxMy43MzgxSDEyLjQwNDhDMTIuMDY5NCAxMy43MzgxIDExLjc5NzUgMTMuNDY2MiAxMS43OTc1IDEzLjEzMDhWNy42MTExNEMxMS43OTc1IDcuNTAxNTEgMTEuNzY3OCA3LjM5MzkyIDExLjcxMTYgNy4yOTk4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTEwLjU1MTEgNS44MTc0OEw5Ljk2MTU0IDQuODUxMDZDOS43ODYzOSA0LjU2Mzk1IDkuNDExMjYgNC40NzM4NiA5LjEyNDgzIDQuNjUwMTNMOC43NzI1MiA0Ljg2Njk0QzguNDg0ODEgNS4wNDQgOC4zOTY5IDUuNDIxODEgOC41NzY4OSA1LjcwNzdMOS4xODc1MSA2LjY3NzU2QzkuMzY5MzYgNi45NjY0IDkuNzUzNDYgNy4wNDg2OSAxMC4wMzc3IDYuODU5N0wxMC4zNjg5IDYuNjM5NDRDMTAuNjQwNSA2LjQ1ODg0IDEwLjcyMSA2LjA5NTkzIDEwLjU1MTEgNS44MTc0OFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNS4wMTM1IDE0LjE0NzFIMTIuMDUzNEMxMS44ODk4IDE0LjE0NzEgMTEuNzMzMSAxNC4yMTMxIDExLjYxODggMTQuMzMwM0wxMC43Mzk2IDE1LjIzMTNDMTAuNjI4OSAxNS4zNDQ3IDEwLjU2NyAxNS40OTY5IDEwLjU2NyAxNS42NTU0VjE2LjY0MjdDMTAuNTY3IDE2Ljk3ODEgMTAuODM4OSAxNy4yNSAxMS4xNzQyIDE3LjI1SDEzLjU2MDdIMTUuODkyN0MxNi4yMjgxIDE3LjI1IDE2LjUgMTYuOTc4MSAxNi41IDE2LjY0MjdWMTUuNjU1NEMxNi41IDE1LjQ5NjkgMTYuNDM4IDE1LjM0NDcgMTYuMzI3NCAxNS4yMzEzTDE1LjQ0ODIgMTQuMzMwM0MxNS4zMzM5IDE0LjIxMzEgMTUuMTc3MiAxNC4xNDcxIDE1LjAxMzUgMTQuMTQ3MVoiIGZpbGw9IndoaXRlIi8+CjwvZz4KPGRlZnM+CjxmaWx0ZXIgaWQ9ImZpbHRlcjBfZGRfMzc3OV85MDAyIiB4PSI1LjQ4MzQiIHk9IjAuMzMzMTU0IiB3aWR0aD0iMTQuMDE2NiIgaGVpZ2h0PSIyMC43NjY4IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuODUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMS41Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuMDU4ODIzNSAwIDAgMCAwIDAuMTAxOTYxIDAgMCAwIDAgMC4xNjQ3MDYgMCAwIDAgMC4xOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzM3NzlfOTAwMiIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIwLjI1Ii8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjAuNSIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjA1ODgyMzUgMCAwIDAgMCAwLjEwMTk2MSAwIDAgMCAwIDAuMTY0NzA2IDAgMCAwIDAuMDM5IDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd18zNzc5XzkwMDIiIHJlc3VsdD0iZWZmZWN0Ml9kcm9wU2hhZG93XzM3NzlfOTAwMiIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDJfZHJvcFNoYWRvd18zNzc5XzkwMDIiIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjwvZGVmcz4KPC9zdmc+Cg==';\r\nconst greenMarker = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9InBhdGgtMS1pbnNpZGUtMV8xMF8xNyIgZmlsbD0id2hpdGUiPgo8cGF0aCBkPSJNMjIuNSAxMC41QzIyLjUgMTYuMjk5IDE3Ljc5OSAyMSAxMiAyMUM2LjIwMTAxIDIxIDEuNSAxNi4yOTkgMS41IDEwLjVDMS41IDQuNzAxMDEgNi4yMDEwMSAwIDEyIDBDMTcuNzk5IDAgMjIuNSA0LjcwMTAxIDIyLjUgMTAuNVoiLz4KPC9tYXNrPgo8cGF0aCBkPSJNMjIuNSAxMC41QzIyLjUgMTYuMjk5IDE3Ljc5OSAyMSAxMiAyMUM2LjIwMTAxIDIxIDEuNSAxNi4yOTkgMS41IDEwLjVDMS41IDQuNzAxMDEgNi4yMDEwMSAwIDEyIDBDMTcuNzk5IDAgMjIuNSA0LjcwMTAxIDIyLjUgMTAuNVoiIGZpbGw9IiMyMkM1NUUiLz4KPHBhdGggZD0iTTIxLjc1IDEwLjVDMjEuNzUgMTUuODg0OCAxNy4zODQ4IDIwLjI1IDEyIDIwLjI1VjIxLjc1QzE4LjIxMzIgMjEuNzUgMjMuMjUgMTYuNzEzMiAyMy4yNSAxMC41SDIxLjc1Wk0xMiAyMC4yNUM2LjYxNTIyIDIwLjI1IDIuMjUgMTUuODg0OCAyLjI1IDEwLjVIMC43NUMwLjc1IDE2LjcxMzIgNS43ODY4IDIxLjc1IDEyIDIxLjc1VjIwLjI1Wk0yLjI1IDEwLjVDMi4yNSA1LjExNTIyIDYuNjE1MjIgMC43NSAxMiAwLjc1Vi0wLjc1QzUuNzg2OCAtMC43NSAwLjc1IDQuMjg2OCAwLjc1IDEwLjVIMi4yNVpNMTIgMC43NUMxNy4zODQ4IDAuNzUgMjEuNzUgNS4xMTUyMiAyMS43NSAxMC41SDIzLjI1QzIzLjI1IDQuMjg2OCAxOC4yMTMyIC0wLjc1IDEyIC0wLjc1VjAuNzVaIiBmaWxsPSIjMTg5MTQ1IiBtYXNrPSJ1cmwoI3BhdGgtMS1pbnNpZGUtMV8xMF8xNykiLz4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZGRfMTBfMTcpIj4KPHBhdGggZD0iTTEwLjk2MTYgNy4yOTk4TDkuMzI4OTEgNC41NjU0MUM5LjE2MDI1IDQuMjgyOTQgOS4yNDcxOCAzLjkxNzUzIDkuNTI0OTggMy43NDEyOEwxMS4zNTkgMi41Nzc3MUMxMS42NDM2IDIuMzk3MTEgMTIuMDIwOSAyLjQ4MjkzIDEyLjE5OTUgMi43Njg4OUwxNC4zMjQzIDYuMTcyNDFDMTQuMzgzIDYuMjY2MzggMTQuNDE0OCA2LjM3NDYxIDE0LjQxNjQgNi40ODUzOUwxNC41MTA3IDEzLjEyMjJDMTQuNTE1NSAxMy40NjA5IDE0LjI0MjIgMTMuNzM4MSAxMy45MDM1IDEzLjczODFIMTEuNjU0OEMxMS4zMTk0IDEzLjczODEgMTEuMDQ3NSAxMy40NjYyIDExLjA0NzUgMTMuMTMwOFY3LjYxMTE0QzExLjA0NzUgNy41MDE1MSAxMS4wMTc4IDcuMzkzOTIgMTAuOTYxNiA3LjI5OThaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOS44MDExMSA1LjgxNzQ4TDkuMjExNTQgNC44NTEwNkM5LjAzNjM5IDQuNTYzOTUgOC42NjEyNiA0LjQ3Mzg2IDguMzc0ODMgNC42NTAxM0w4LjAyMjUyIDQuODY2OTRDNy43MzQ4MSA1LjA0NCA3LjY0NjkgNS40MjE4MSA3LjgyNjg5IDUuNzA3N0w4LjQzNzUxIDYuNjc3NTZDOC42MTkzNiA2Ljk2NjQgOS4wMDM0NiA3LjA0ODY5IDkuMjg3NjggNi44NTk3TDkuNjE4OTMgNi42Mzk0NEM5Ljg5MDU0IDYuNDU4ODQgOS45NzA5NyA2LjA5NTkzIDkuODAxMTEgNS44MTc0OFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNC4yNjM1IDE0LjE0NzFIMTEuMzAzNEMxMS4xMzk4IDE0LjE0NzEgMTAuOTgzMSAxNC4yMTMxIDEwLjg2ODggMTQuMzMwM0w5Ljk4OTU5IDE1LjIzMTNDOS44Nzg5MSAxNS4zNDQ3IDkuODE2OTYgMTUuNDk2OSA5LjgxNjk2IDE1LjY1NTRWMTYuNjQyN0M5LjgxNjk2IDE2Ljk3ODEgMTAuMDg4OSAxNy4yNSAxMC40MjQyIDE3LjI1SDEyLjgxMDdIMTUuMTQyN0MxNS40NzgxIDE3LjI1IDE1Ljc1IDE2Ljk3ODEgMTUuNzUgMTYuNjQyN1YxNS42NTU0QzE1Ljc1IDE1LjQ5NjkgMTUuNjg4IDE1LjM0NDcgMTUuNTc3NCAxNS4yMzEzTDE0LjY5ODIgMTQuMzMwM0MxNC41ODM5IDE0LjIxMzEgMTQuNDI3MiAxNC4xNDcxIDE0LjI2MzUgMTQuMTQ3MVoiIGZpbGw9IndoaXRlIi8+CjwvZz4KPGRlZnM+CjxmaWx0ZXIgaWQ9ImZpbHRlcjBfZGRfMTBfMTciIHg9IjUuNDgzNDMiIHk9IjAuODcwNjMxIiB3aWR0aD0iMTIuNTE2NiIgaGVpZ2h0PSIxOS4yNjY5IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjAuNjM3NSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxLjEyNSIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjA1ODgyMzUgMCAwIDAgMCAwLjEwMTk2MSAwIDAgMCAwIDAuMTY0NzA2IDAgMCAwIDAuMTkgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvd18xMF8xNyIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIwLjE4NzUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMC4zNzUiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC4wNTg4MjM1IDAgMCAwIDAgMC4xMDE5NjEgMCAwIDAgMCAwLjE2NDcwNiAwIDAgMCAwLjAzOSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMTBfMTciIHJlc3VsdD0iZWZmZWN0Ml9kcm9wU2hhZG93XzEwXzE3Ii8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0Ml9kcm9wU2hhZG93XzEwXzE3IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=';\r\n\r\nconst isTemporaryDeactivated = alarm.isTemporaryDeactivated == \"true\";\r\n\r\nconst getTranslation = function(translationText, extraParam = null) {\r\n    translateService = ctx.$injector.get(ctx.servicesMap.get('translate'));\r\n    let translated = \"\";\r\n    try {\r\n        translated = translateService.instant(translationText, extraParam);\r\n\r\n    } catch (error) {\r\n\r\n    }\r\n    return translated;\r\n}\r\n\r\nconst eventTypes = {\r\n    alarmOpen:  getTranslation(\"hawle-dashboard.open\"),\r\n    alarmNoSignal:  getTranslation(\"hawle-dashboard.no-signal\"),\r\n    alarmLowBattery: getTranslation(\"hawle-dashboard.low-battery\"),\r\n    alarmClose: getTranslation(\"hawle-dashboard.closed\"),\r\n}\r\n\r\nif(isTemporaryDeactivated) {\r\n    return `<div class=\"content-container\"><img src=\"${orangeMarker}\"> <span>${eventTypes[value]}</span></div>`;\r\n}\r\nelse {\r\n    switch(value){\r\n    case \"alarmOpen\":\r\n       return `<div class=\"content-container\"><img src=\"${redMarker}\"> <span>${eventTypes[value]}</span></div>`;\r\n        break;\r\n    case \"alarmLowBattery\":\r\n       return `<div class=\"content-container\"><img src=\"${redMarker}\"> <span>${eventTypes[value]}</span></div>`;\r\n        break;\r\n    case \"alarmNoSignal\":\r\n         return `<div class=\"content-container\"><img src=\"${crossedMarker}\"> <span>${eventTypes[value]}</span></div>`;\r\n        break;\r\n    case \"alarmClose\":\r\n         return `<div class=\"content-container\"><img src=\"${greenMarker}\"> <span>${eventTypes[value]}</span></div>`;\r\n        break;\r\n    default:\r\n        return value;\r\n}\r\n\r\n}\r\n"
                },
                "_hash": 0.7323586880398418,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "serialNumber",
                "type": "attribute",
                "label": "D-storz Number",
                "color": "#673ab7",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": "",
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled"
                },
                "_hash": 0.7057659754313654,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "originator",
                "type": "alarm",
                "label": "LPN ID",
                "color": "#4caf50",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": "",
                  "columnWidth": "0px",
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled"
                },
                "_hash": 0.2780007688856758,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "hydrantNumber",
                "type": "attribute",
                "label": "Hydrant",
                "color": "#607d8b",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.3449102369377077,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "hydrantsBrand",
                "type": "attribute",
                "label": "Brand",
                "color": "#03a9f4",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.6479646817697233,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "country",
                "type": "attribute",
                "label": "Country",
                "color": "#3f51b5",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.9721519375398555,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "zip",
                "type": "attribute",
                "label": "Zip",
                "color": "#8bc34a",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.6638831087765982,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "city",
                "type": "attribute",
                "label": "City",
                "color": "#e91e63",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.41956677765551476,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "street",
                "type": "attribute",
                "label": "Street",
                "color": "#ffeb3b",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "if(value) {\n    return value;\n} else {\n    return \"--\"\n}"
                },
                "_hash": 0.8020449939446537,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "status",
                "type": "alarm",
                "label": "Status",
                "color": "#607d8b",
                "settings": {
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": "",
                  "columnWidth": "0px",
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled"
                },
                "_hash": 0.6588418951443418,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "name",
                "type": "entityField",
                "label": "Action",
                "color": "#9c27b0",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": true,
                  "defaultColumnVisibility": "visible",
                  "columnSelectionToDisplay": "enabled",
                  "cellContentFunction": "let $injector = ctx.$scope.$injector;\r\nlet http = $injector.get(ctx.servicesMap.get('http'));\r\nlet dialogs = $injector.get(ctx.servicesMap.get('dialogs'));\r\n\r\nlet translateService = $injector.get(ctx.servicesMap.get('translate'));\r\nlet translatedConfirmLabel = translateService.instant(\"hawle-dashboard.alarm.confirm\");\r\n\r\nclearAndAckAlarm = function (alarmToClear) {\r\n    let alarmUpperCase = alarmToClear.type.charAt(0).toUpperCase() + alarmToClear.type.slice(1);\r\n    let alarmClearPayload = {\r\n        msg: null,\r\n        metadata: {\r\n            deviceName: alarmToClear.originatorName,\r\n            deviceType: \"d-storz\",\r\n            alarmClearType: `clear${alarmUpperCase}`\r\n        }\r\n    }\r\n\r\n\r\n    switch (alarmToClear.status) {\r\n        case \"ACTIVE_UNACK\":\r\n        case \"CLEARED_UNACK\":\r\n            http.post(`/api/alarm/${alarmToClear.id.id}/ack`).pipe().subscribe((ackResult) => {});\r\n            break;\r\n    }\r\n}\r\n\r\n\r\nopenConfirmDialog = function (alarmId) {\r\n    let title = 'Confirm';\r\n    let content = 'Are you sure to confirm this alarm?';\r\n    const currentAlarms = ctx.$scope.alarmsTableWidget.alarmsDatasource.alarmsSubject._value;\r\n    let clickedAlarm = currentAlarms.find(alarm => alarm.id.id == alarmId);\r\n    if (clickedAlarm && !disableConfirmButton(clickedAlarm)) {\r\n        dialogs.confirm(title, content, 'Cancel', 'Confirm').subscribe(\r\n            function (result) {\r\n                if (result) {\r\n                    clearAndAckAlarm(clickedAlarm)\r\n                }\r\n            }\r\n        );\r\n    }\r\n}\r\n\r\ndisableConfirmButton = function (clickedAlarm) {\r\n    if (clickedAlarm.status == \"CLEARED_ACK\" || clickedAlarm.status == \"ACTIVE_ACK\"  ) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nsetTimeout(function () {\r\n    const confirmButton = $(\"#confirm-alarm-\" + alarm.id.id);\r\n    if (!confirmButton.data(\"clickListenerRegistered\")) {\r\n        confirmButton.click(function (event) {\r\n            event.stopPropagation();\r\n            const id = event.target.id;\r\n            const prefix = \"confirm-alarm-\";\r\n\r\n            if (id.startsWith(prefix)) {\r\n                const alarmId = id.slice(prefix.length);\r\n                openConfirmDialog(alarmId);\r\n            }\r\n        });\r\n        confirmButton.data('clickListenerRegistered', true);\r\n    }\r\n}, 500);\r\n\r\n\r\nconst isButtonDisabled = disableConfirmButton(alarm);\r\nconst disabledAttribute = isButtonDisabled ? 'disabled' : '';\r\nconst backgroundColorStyle = isButtonDisabled ? '#7ebfd8' : '#009FE3';\r\nconst cursorStyle = isButtonDisabled ? 'initial' : 'pointer';\r\n\r\nreturn `<mat-button id='confirm-alarm-${alarm.id.id}' class='mat-button' style='background: ${backgroundColorStyle}; color: #fff; font-weight: bold; font-family: var(--font-global) !important; cursor: ${cursorStyle}' ${disabledAttribute}>${translatedConfirmLabel}</mat-button>`;"
                },
                "_hash": 0.6638516199063444,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              },
              {
                "name": "isTemporaryDeactivated",
                "type": "timeseries",
                "label": "isTemporaryDeactivated",
                "color": "#ff9800",
                "settings": {
                  "columnWidth": "0px",
                  "useCellStyleFunction": false,
                  "cellStyleFunction": "",
                  "useCellContentFunction": false,
                  "cellContentFunction": "",
                  "defaultColumnVisibility": "hidden",
                  "columnSelectionToDisplay": "disabled"
                },
                "_hash": 0.9184843826891373,
                "units": null,
                "decimals": null,
                "funcBody": null,
                "usePostProcessing": null,
                "postFuncBody": null
              }
            ]
          },
          "alarmSearchStatus": "ANY",
          "alarmsPollingInterval": 5,
          "showTitleIcon": false,
          "titleIcon": "more_horiz",
          "iconColor": "rgba(0, 0, 0, 0.87)",
          "iconSize": "24px",
          "titleTooltip": "",
          "widgetStyle": {},
          "displayTimewindow": true,
          "actions": {
            "actionCellButton": []
          },
          "alarmStatusList": [],
          "alarmSeverityList": [],
          "alarmTypeList": [],
          "searchPropagatedAlarms": false,
          "datasources": [],
          "widgetCss": ".mat-cell .content-container {\r\n  display: block; \r\n  vertical-align: middle;\r\n\r\n}\r\n\r\n.mat-cell img,\r\n.mat-cell span {\r\n  display: inline-block; \r\n  vertical-align: middle; \r\n}",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "useCustomQueryService": true,
          "customQuery": "{\n  \"translateColumnName\": true,\n  \"alarmStatusList\": [\"ANY\"]\n}",
          "useColumnMapping": true,
          "columnMapping": "[\n  {\n    \"type\": \"ALARM_FIELD\",\n    \"key\": \"createdTime\",\n    \"columnName\": \"hawle-dashboard.created-time\",\n    \"defaultColumnName\": \"Created time\",\n    \"humanReadableTs\": true,\n    \"tsPattern\": \"dd MMMM YYYY, HH:mm z\"\n\n  },\n  {\n    \"type\": \"ALARM_FIELD\",\n    \"key\": \"type\",\n    \"columnName\": \"hawle-dashboard.alarm.alarm\",\n    \"defaultColumnName\": \"Alarm\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"serialNumber\",\n    \"columnName\": \"hawle-dashboard.d-storz-number\",\n    \"defaultColumnName\": \"D-storz Number\"\n  },\n  {\n    \"type\": \"ALARM_FIELD\",\n    \"key\": \"originator\",\n    \"columnName\": \"hawle-dashboard.lpn-id\",\n    \"defaultColumnName\": \"LPN ID\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"hydrantNumber\",\n    \"columnName\": \"hawle-dashboard.hydrant.hydrant-number\",\n    \"defaultColumnName\": \"D-storz Number\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"brand\",\n    \"columnName\": \"hawle-dashboard.brand\",\n    \"defaultColumnName\": \"Brand\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"country\",\n    \"columnName\": \"hawle-dashboard.country\",\n    \"defaultColumnName\": \"Country\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"state\",\n    \"columnName\": \"hawle-dashboard.state\",\n    \"defaultColumnName\": \"State\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"zip\",\n    \"columnName\": \"hawle-dashboard.zip\",\n    \"defaultColumnName\": \"Zip\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"city\",\n    \"columnName\": \"hawle-dashboard.city\",\n    \"defaultColumnName\": \"City\"\n  },\n  {\n    \"type\": \"ATTRIBUTE\",\n    \"key\": \"street\",\n    \"columnName\": \"hawle-dashboard.street\",\n    \"defaultColumnName\": \"Street\"\n  },\n  {    \n    \"type\": \"ALARM_FIELD\",\n    \"key\": \"status\",\n    \"columnName\": \"hawle-dashboard.status\",\n    \"defaultColumnName\": \"Status\"\n  }\n]"
        },
        "row": 0,
        "col": 0,
        "id": "0e8df222-8684-c564-7698-04eb2515a6d0"
      },
      "7f42ebb4-f81c-298f-aae8-d868a60d338c": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.4291951067313693
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": true,
            "patchFormFunction": "let $injector = widgetContext.$scope.$injector;\n\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\nlet rxjs = widgetContext.rxjs;\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\nlet currentEntityId = {id: widgetContext.datasources[0].entityId, entityType: widgetContext.datasources[0].entityType};\n// let entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\n\nfunction getEntityServerAttributes(entityId = {entityType:null, id: null}) {\n    return attributeService.getEntityAttributes({ entityType: entityId.entityType, id: entityId.id }, \"SERVER_SCOPE\").pipe(rxjs.map((response) => {\n      const result = {};\n      if (response.length === 0) {\n        return result;\n      }\n      response.forEach((entity) => {\n        result[entity.key] = entity.value;\n      });\n      return result;\n    }));\n  }\n\n  function getEntityRelations(entityId , direction, relationType, attributeInitTyps = ['USER', 'zone', 'hydrant'], maxLevel=1, entityFields = [], attributeFields = [], filterFn = (entity) => true, nameKey = null, valueKey = null ) {\n    const resultValue = attributeInitTyps.reduce((mainResponse, currentValue, currentIndex, arr) => {\n\n        mainResponse[`${currentValue.toLowerCase()}List`] = [];\n        return mainResponse;\n    }, {});\n    return getEntityRelationsByFind(entityId, direction, relationType, maxLevel, entityFields, attributeFields, filterFn).pipe(rxjs.map((response) => {\n      const result = [];\n      if (response.length === 0) {\n        return result;\n      }\n      response.forEach((entity) => {\n        const resultEntity = {\n            name: entity.name,\n            value: entity.id.id,\n            type: entity.type,\n            id: entity.id\n        }\n        if (nameKey) {\n            resultEntity.name = entity[nameKey];\n        }\n        if (valueKey) {\n            if (valueKey === 'id') {\n                resultEntity.value = entity.id.id;\n            } else {\n                resultEntity.value = entity[valueKey];\n            }\n        }\n        result.push(resultEntity);\n      });\n      let output =  result.reduce((mainResponse, currentValue, currentIndex, arr) => {\n        if (attributeInitTyps.includes(currentValue.id.entityType)) {\n            mainResponse[`${currentValue.id.entityType.toLowerCase()}List`].push({\n                name: currentValue.name,\n                value: currentValue.value\n            });\n        } else if (attributeInitTyps.includes(currentValue.type)) {\n          mainResponse[`${currentValue.type.toLowerCase()}List`].push({\n            name: currentValue.name,\n            value: currentValue.value\n        });\n        }\n        return mainResponse;\n      }, resultValue);\n        return output;\n    }));\n  }\n\n  function getEntityRelationsByFind(entityId, direction, relationType, maxLevel=1, entityFields = [], attributeFields = [], filterFn = (entity) => true ) {\n    const payload = {\n      \"entityFields\": [\n        {\n          \"type\": \"ENTITY_FIELD\",\n          \"key\": \"name\"\n        },\n        {\n          \"type\": \"ENTITY_FIELD\",\n          \"key\": \"type\"\n        },\n        {\n          \"type\": \"ENTITY_FIELD\",\n          \"key\": \"createdTime\"\n        }\n      ],\n      \"latestValues\": [\n      ],\n      \"entityFilter\": {\n        \"type\": \"relationsQuery\",\n        \"rootEntity\": entityId,\n        \"direction\": direction,\n        \"maxLevel\": maxLevel,\n        \"fetchLastLevelOnly\": false,\n        \"filters\": [\n          {\n            \"relationType\": relationType,\n            \"entityTypes\": [\n                \"ASSET\",\n                \"DEVICE\",\n                \"USER\"\n            ]\n          }\n        ]\n      },\n      \"pageLink\": {\n        \"dynamic\": false,\n        \"pageSize\": 1000,\n        \"page\": 0,\n        \"textSearch\": null,\n        \"sortOrder\": {\n          \"key\": {\n            \"type\": \"ENTITY_FIELD\",\n            \"key\": \"createdTime\"\n          },\n          \"direction\": \"DESC\"\n        }\n      }\n    };\n    entityFields.forEach((field) => { payload.entityFields.push({\"type\": \"ENTITY_FIELD\", \"key\": field }) });\n    attributeFields.forEach((field) => { payload.latestValues.push({ \"type\": \"ATTRIBUTE\", \"key\": field }) });\n    if (entityId.entityType && entityId.id) {\n  \n      return http.post(\"/api/entitiesQuery/find\", payload).pipe(rxjs.map((response) => {\n        const result = [];\n        if (response.totalElements === 0) {\n          return result;\n        }\n        response.data.forEach((entity) => {\n            const res = {};\n            if (!!entity.latest.ATTRIBUTE) {\n                Object.keys(entity.latest.ATTRIBUTE).forEach((key) => {\n                    res[key] = entity.latest.ATTRIBUTE[key].value;\n                });\n            }\n            if (entity.latest.ENTITY_FIELD) {\n                Object.keys(entity.latest.ENTITY_FIELD).forEach((key) => {\n                    res[key] = entity.latest.ENTITY_FIELD[key].value;\n                });\n            }\n            res.id = entity.entityId;\n            result.push(res);\n        });\n        return result.filter(entityValue => {\n            return filterFn(entityValue)\n        });\n      }));\n    }\n  }\n  function getTimeFromDate(date) {\n      const hours = date.getHours().toString().padStart(2,'0');\n      const minutes = date.getMinutes().toString().padStart(2,'0');\n      return `${hours}:${minutes}`;\n  }\n  function getInitData() {\n    const result = {};\n    return getEntityServerAttributes(currentEntityId).pipe(rxjs.mergeMap((serverAttributes) => { \n        const dateFrom = new Date(serverAttributes.fromDate);\n        const dateTo = serverAttributes.toDate && serverAttributes.toDate > 0 ? new Date(serverAttributes.toDate) : null;\n        result.dateFrom = dateFrom;\n        result.dateTo = dateTo;\n        result.timeFrom = dateFrom;\n        result.timeTo = dateTo;\n        // result.timeFrom = getTimeFromDate(dateFrom);\n        // result.timeTo = getTimeFromDate(dateTo)\n        result.isAlarmActive = serverAttributes.isActive;\n        result.eventList = [];\n        if (!Array.isArray(serverAttributes.userGroups)) {\n            serverAttributes.userGroups = [];\n        }\n        if (serverAttributes.alarmDefinition.eventType.alarmOpen) {\n            result.eventList.push({name: \"Open\", value: \"open\"});\n        }\n        if (serverAttributes.alarmDefinition.eventType.alarmLowBattery) {\n            result.eventList.push({name: \"Low battery\", value: \"lowBattery\"});\n        }\n        if (serverAttributes.alarmDefinition.eventType.alarmNoSignal) {\n            result.eventList.push({name: \"No Signal\", value: \"noSignal\"});\n        }\n        if (serverAttributes.alarmDefinition.eventType.alarmClose) {\n            result.eventList.push({name: \"Close\", value: \"close\"});\n        }\n        result.roleList = serverAttributes.userGroups.map((role) => ({name: role.name, value: JSON.stringify(role)}));\n        result.userList = (serverAttributes.users || []).map((user) => ({name: user.name, value: JSON.stringify(user)}));\n        result.notificationType = [];\n        if (serverAttributes.alarmDefinition.notification.email) {\n            result.notificationType.push({name: \"Email\", value: \"email\"});\n        }\n        if (serverAttributes.alarmDefinition.notification.sms) {\n            result.notificationType.push({name: \"SMS\", value: \"sms\"});\n        }\n        // let notificationDelay = serverAttributes.alarmDefinition.notification.delay / 60000;\n        result.notificationDelay = serverAttributes.alarmDefinition.notification.delay / 60000;\n        // let reNotificationDelay = serverAttributes.alarmDefinition.notification.reNotificationOnMissingAck / 60000;\n        result.reNotificationDelay = serverAttributes.alarmDefinition.notification.reNotificationOnMissingAck / 60000;\n        return rxjs.forkJoin([\n            // getEntityRelations(currentEntityId, \"TO\", \"Owns\", ['USER'], 1, ['email'], ['role'],\n            //  (entity) => entity.role ? entity.role.id && serverAttributes.userGroups && !serverAttributes.userGroups.find(groupEntity => groupEntity.id === entity.role.id.id) : true, 'email'),\n            getEntityRelations(currentEntityId, \"FROM\", \"ManagesAlarms\", ['zone', 'hydrant'])\n          ]).pipe(rxjs.map((response) => {\n            // result.userList = response[0].userList;\n            result.hydrantList = Array.isArray(response[0].hydrantList) ? response[0].hydrantList : [];\n            result.zoneList = Array.isArray(response[0].zoneList) ? response[0].zoneList : [];\n            return result;\n          }));\n        }));\n  }\n\n \nreturn getInitData().pipe( rxjs.finalize(() => {\n    formData.markAllAsTouched()\n    formData.updateValueAndValidity();\n    console.log(widgetContext);\n    // widgetContext.$scope.$apply();\n}));",
            "isExternalBtn": false,
            "formName": "Edit Alarm Definitions",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Name",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Assign Zone",
                    "fieldName": "zoneList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=zone&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Select Hydrant",
                    "fieldName": "hydrantList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=hydrant&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Event Type *",
                    "fieldName": "eventList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Open\", value: \"open\"},\n    {name: \"Low Battery\", value: \"lowBattery\"},\n    {name: \"No Signal\", value: \"noSignal\"},\n    {name: \"Close\", value: \"close\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Assign User Roles",
                    "fieldName": "roleList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/entityGroups/USER`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response.filter(res => !res.groupAll)\n        .map(\n            data => ({\n                name: data.name,\n                value: JSON.stringify({\n                    id: data.id.id,\n                    name: data.name\n                })\n            })).filter(data => data.name.toLowerCase().includes(searchTerm && searchTerm.trim() ? searchTerm.trim() : ''))\n            ));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Assign Users",
                    "fieldName": "userList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nfunction getGroupAllUserList() {\n    const payload = {\n        \"entityFields\": [\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"createdTime\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"firstName\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"lastName\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"email\"\n            }\n        ],\n        \"latestValues\": [],\n        \"entityFilter\": {\n            \"resolveMultiple\":true,\n            \"entityType\": \"USER\",\n            \"type\": \"entityType\"\n        },\n        \"pageLink\": {\n            \"dynamic\": false,\n            \"pageSize\": 10,\n            \"page\": 0,\n            \"textSearch\": null,\n            \"sortOrder\": {\n                \"key\": {\n                    \"type\": \"ENTITY_FIELD\",\n                    \"key\": \"createdTime\"\n                },\n                \"direction\": \"DESC\"\n            }\n        }\n    };\n    if (searchTerm) {\n        payload.pageLink.textSearch = searchTerm;\n    }\n    return http.post(\"/api/entitiesQuery/find\", payload).pipe(\n        rxjs.debounceTime(150),\n        rxjs.distinctUntilChanged(),\n        rxjs.map((response) => {\n        const result = [];\n        if (response.totalElements === 0) {\n          return result;\n        }\n        response.data.forEach((entity) => {\n          if (entity.entityId.entityType === \"USER\") {\n            result.push({\n              name: entity.latest.ENTITY_FIELD.email.value,\n              value: JSON.stringify({\n                    id: entity.entityId.id,\n                    name: entity.latest.ENTITY_FIELD.email.value\n                })\n            })\n          }\n        });\n        return result;\n      }))\n}\nreturn getGroupAllUserList();",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 7",
                    "fieldName": "step0field7",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone and at least 1 user or user role has to be assigned\n</div>\n",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone and at least 1 user or user role has to be assigned\n</div>\n"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              },
              {
                "stepName": "Notification",
                "formFields": [
                  {
                    "label": "Notification Type *",
                    "fieldName": "notificationType",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Email\", value: \"email\"},\n    {name: \"SMS\", value: \"sms\"},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Delay",
                    "fieldName": "notificationDelay",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"None\", value: 0},\n    {name: \"15 min\", value: 15},\n    {name: \"30 min\", value: 30},\n    {name: \"60 min\", value: 60},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Re-notification on missing acknowledgement",
                    "fieldName": "reNotificationDelay",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"None\", value: 0},\n    {name: \"15 min\", value: 15},\n    {name: \"60 min\", value: 60},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              },
              {
                "stepName": "Date",
                "formFields": [
                  {
                    "label": "Alarm State",
                    "fieldName": "alarmState",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div></div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div></div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Alarm State",
                    "fieldName": "isAlarmActive",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Active\", value: true},\n    {name: \"Inactive\", value: false}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "From",
                    "fieldName": "from",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div class=\"mt-24 mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">From</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div class=\"mt-24 mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">From</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 97
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "To",
                    "fieldName": "to",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div class=\"mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">To</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div class=\"mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">To</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              }
            ],
            "genericFormFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get(\"customDialog\"));\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\nlet rxjs = widgetContext.rxjs;\nconst assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\nconst entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\nconsole.log(widgetContext.datasources[0])\nlet currentEntityId = widgetContext.datasources[0].entity.id;\nformData.markAllAsTouched();\nlet currentEntityValue = formData.value;\n\n\nfunction saveEntity(paylload, entityType) {\n    let url = `/api/${entityType}`;\n    return http.post(url, paylload);\n}\n\n\nfunction saveEntityRelations(relationsFromToList=[], defaultRelationType=null) {\n    const relationPayload = []\n    relationsFromToList.forEach((relation) => {\n        relationPayload.push({\n            \"type\": defaultRelationType || relation.type,\n            \"additionalInfo\": relation.additionalInfo || null,\n            \"typeGroup\": relation.typeGroup || \"COMMON\",\n            \"from\": relation.from,\n            \"to\": relation.to\n        })\n    });\n    let url = `/api/relation/bulk`;\n    return http.post(url, relationPayload);\n}\n\nfunction saveServerAttributes(serverAttributes, entityType, EntityId) {\n    let url = `/api/plugins/telemetry/${entityType}/${EntityId}/SERVER_SCOPE`;\n    return http.post(url, serverAttributes);\n}\n\nfunction getMsTimeAfterAddTimeInDate(date, time) {\n    let newDate = new Date(date);\n    let newTime = new Date(time);\n    let hours = newTime.getHours();\n    let minutes = newTime.getMinutes();\n    newDate.setHours(hours);\n    newDate.setMinutes(minutes);\n    return newDate.getTime();\n}\n\nfunction main() {\n    if( (!currentEntityValue.roleList || !currentEntityValue.roleList.length) &&\n        (!currentEntityValue.userList || !currentEntityValue.userList.length) &&\n        (!currentEntityValue.zoneList || !currentEntityValue.zoneList.length) &&\n        (!currentEntityValue.hydrantList || !currentEntityValue.hydrantList.length)) {\n        widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.assign-user-role-zone-hydrant-mandatory'), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    }\n    if((!currentEntityValue.roleList || !currentEntityValue.roleList.length) &&\n        (!currentEntityValue.userList || !currentEntityValue.userList.length) ) {\n        widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.assign-user-role-mandatory'), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    }\n\n    if((!currentEntityValue.zoneList || !currentEntityValue.zoneList.length) &&\n        (!currentEntityValue.hydrantList || !currentEntityValue.hydrantList.length)) {\n        widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.assign-zone-hydrant-mandatory'), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    }\n    \n    if(!currentEntityValue.eventList || \n        (currentEntityValue.eventList && !currentEntityValue.eventList.length)) {\n        widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.assign-event-mandatory'), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    }\n    \n    if(!currentEntityValue.notificationType || \n        (currentEntityValue.notificationType && !currentEntityValue.notificationType.length)) {\n        widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.assign-notification-type-mandatory'), 2000,\n        'top', 'left', widgetContext.toastTargetId);\n        return;\n    }\n    \n    const fromDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateFrom, currentEntityValue.timeFrom);\n    const toDate = currentEntityValue.dateTo ? getMsTimeAfterAddTimeInDate(currentEntityValue.dateTo, currentEntityValue.timeTo) : 0;\n    const nowDate = new Date().getTime();\n    if(   toDate > 0 && \n        ((toDate < fromDate) || (toDate < nowDate))\n    ) {\n        widgetContext.showToast('error',\n            translationService.instant('hawle-dashboard.invalid-date-selection'), 2000,\n            'top', 'left');\n        return;\n    }\n    \n    let currentEntityValueRoleList = currentEntityValue.roleList ? currentEntityValue.roleList.map((role) => JSON.parse(role)) : [];\n    let currentEntityValueUserList = currentEntityValue.userList ? currentEntityValue.userList.map((user) => JSON.parse(user)) : [];\n    entityService.getEntity(currentEntityId.entityType, currentEntityId.id).pipe().subscribe((entityInfo) => {\n        if (entityInfo) {\n            entityInfo.name = currentEntityValue.name;\n            assetService.saveAsset(entityInfo).pipe().subscribe((entity) => {\n                removePreviousEntityGroupServerAttributesAndAllRelations().subscribe(() => {\n                    console.log(currentEntityValue)\n             /*       const fromDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateFrom, currentEntityValue.timeFrom);\n                    const toDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateTo, currentEntityValue.timeTo);*/\n                    const notificationType = currentEntityValue.notificationType ? currentEntityValue.notificationType : [];\n                    const serverAttributesPayload = {\n                        fromDate: fromDate,\n                        toDate: toDate,\n                        isActive: currentEntityValue.isAlarmActive,\n                        userGroups: currentEntityValueRoleList,\n                        users: currentEntityValueUserList,\n                        alarmDefinition: {\n                            alarmState: {\n                                isActive: currentEntityValue.isAlarmActive,\n                                fromDate: fromDate,\n                                toDate: toDate\n                            },\n                            eventType: {\n                                alarmOpen: currentEntityValue.eventList.includes(\"open\"),\n                                alarmLowBattery: currentEntityValue.eventList.includes(\"lowBattery\"),\n                                alarmNoSignal: currentEntityValue.eventList.includes(\"noSignal\"),\n                                alarmClose: currentEntityValue.eventList.includes(\"close\")\n                            },\n                            notification: {\n                                email: notificationType.includes(\"email\"),\n                                sms: notificationType.includes(\"sms\"),\n                                delay: currentEntityValue.notificationDelay * 60000,\n                                reNotificationOnMissingAck: currentEntityValue.reNotificationDelay * 60000 || null\n                            }\n                        }\n                    }\n                    saveServerAttributes(serverAttributesPayload, \"ASSET\", entity.id.id).subscribe((serverAttributes) => {\n                        const relationPayload = []\n                        if(currentEntityValue.hydrantList) {\n                            currentEntityValue.hydrantList.forEach((hydrantId) => {\n                                relationPayload.push({\n                                    \"type\": \"ManagesAlarms\",\n                                    'from':  entity.id,\n                                    'to': {\n                                        'entityType': 'ASSET',\n                                        'id': hydrantId\n                                    },\n                                })\n                            });\n                        }\n                        if(currentEntityValue.zoneList) {\n                            currentEntityValue.zoneList.forEach((zoneId) => {\n                                relationPayload.push({\n                                    \"type\": \"ManagesAlarms\",\n                                    'from':  entity.id,\n                                    'to': {\n                                        'entityType': 'ASSET',\n                                        'id': zoneId\n                                    },\n                                })\n                            });\n                        }\n                        if(currentEntityValueUserList) {\n                           currentEntityValueUserList.forEach((user) => {\n                                relationPayload.push({\n                                    \"type\": \"Owns\",\n                                    'to':  entity.id,\n                                    'from': {\n                                        'entityType': 'USER',\n                                        'id': user.id\n                                    },\n                                })\n                            })\n                        }\n                        if(currentEntityValueRoleList) {\n                            currentEntityValueRoleList.forEach((role) => {\n                                relationPayload.push({\n                                    \"type\": \"Owns\",\n                                    'to':  entity.id,\n                                    'from': {\n                                        'entityType': 'ENTITY_GROUP',\n                                        'id': role.id\n                                    },\n                                })\n                            })\n                        }\n                        saveEntityRelations(relationPayload).subscribe((relations) => {\n                            rxjs.forkJoin([\n                                ...(Array.isArray(currentEntityValueRoleList) ? currentEntityValueRoleList : []).map(role => {\n                                    const userServerAttributesPayload = {}\n                                    userServerAttributesPayload[`alarmDefinition_${entity.id.id}`] = {\n                                        name: currentEntityValue.name,\n                                        id: entity.id.id\n                                    }\n                                    return saveServerAttributes(userServerAttributesPayload, \"ENTITY_GROUP\", role.id)\n                                }),\n                                ...(Array.isArray(currentEntityValueUserList) ? currentEntityValueUserList : []).map(user => {\n                                    const userServerAttributesPayload = {}\n                                    userServerAttributesPayload[`alarmDefinition_${entity.id.id}`] = {\n                                        name: currentEntityValue.name,\n                                        id: entity.id.id\n                                    }\n                                    return saveServerAttributes(userServerAttributesPayload, \"USER\", user.id)\n                                })\n                            ]).subscribe((response) => {\n                                openDashboardState('all_alarm_definitions');\n                                widgetContext.updateAliases();\n                            });\n                            //   widgetContext.updateAliases();\n                            //     openDashboardState('all_alarm_definitions');\n                            // saveServerAttributes(serverAttributesPayload, \"ASSET\", entity.id.id).subscribe((serverAttributes) => {\n                            // customDialog.showAlert(translationService.instant('asset.saved'), true).subscribe(() => {\n                            //     widgetContext.close();\n                            // });\n                        });\n                    });\n                });\n            });\n        }\n    });\n}\n\nfunction openDashboardState(statedId) {\n    widgetContext.stateController.resetState();\n    widgetContext.showToast('success',\n        translationService.instant('hawle-dashboard.alarm-definition-saved-successfully'), 2000,\n        'top', 'left');\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params);\n    }\n}\n\nfunction getEntityServerAttributes(entityId = {entityType:null, id: null}) {\n    return attributeService.getEntityAttributes({ entityType: entityId.entityType, id: entityId.id }, \"SERVER_SCOPE\").pipe(rxjs.map((response) => {\n      const result = {};\n      if (response.length === 0) {\n        return result;\n      }\n      response.forEach((entity) => {\n        result[entity.key] = entity.value;\n      });\n      return result;\n    }));\n  }\n  function deleteBulkEntityRelations(relationPayload=[]) {\n    let url = `/api/relationsByType`;\n    return http.post(url, relationPayload);\n}\n\n  function removePreviousEntityGroupServerAttributesAndAllRelations() {\n    return getEntityServerAttributes(currentEntityId).pipe(rxjs.mergeMap((serverAttributes) => {\n        const calls = [];\n        if (Array.isArray(serverAttributes.userGroups)) {\n            serverAttributes.userGroups.forEach((userGroup) => {\n                calls.push(attributeService.deleteEntityAttributes({ entityType: 'ENTITY_GROUP', id: userGroup.id }, 'SERVER_SCOPE', [{\n                    key: `alarmDefinition_${currentEntityId.id}`,\n                    value: {}\n                }]));\n            });\n        }\n        if (Array.isArray(serverAttributes.users)) {\n            serverAttributes.users.forEach((user) => {\n                calls.push(attributeService.deleteEntityAttributes({ entityType: 'USER', id: user.id }, 'SERVER_SCOPE', [{\n                    key: `alarmDefinition_${currentEntityId.id}`,\n                    value: {}\n                }]));\n            });\n        }\n        const deleteBulkEntityRelationsPayload = [\n            {\n                fromId: currentEntityId.id,\n                fromType: \"ASSET\",\n                relationType: \"ManagesAlarms\"\n            },\n            {\n                toId: currentEntityId.id,\n                toType: \"ASSET\",\n                relationType: \"Owns\"\n            }\n        ]\n        calls.push(deleteBulkEntityRelations(deleteBulkEntityRelationsPayload));\n        return rxjs.forkJoin(calls);\n    }));\n  }\n\nmain()"
          },
          "title": "New Generic Form Builder v1.0",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "7f42ebb4-f81c-298f-aae8-d868a60d338c"
      },
      "ed5f1dcc-d356-fdad-8b31-662b65da78cd": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.4291951067313693
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": true,
            "patchFormFunction": "let $injector = widgetContext.$scope.$injector;\r\n\r\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nlet rxjs = widgetContext.rxjs;\r\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\r\nlet currentEntityId = { id: widgetContext.datasources[0].entityId, entityType: widgetContext.datasources[0].entityType };\r\n// let entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\n\r\nfunction getEntityServerAttributes(entityId = { entityType: null, id: null }) {\r\n  return attributeService.getEntityAttributes({ entityType: entityId.entityType, id: entityId.id }, \"SERVER_SCOPE\").pipe(rxjs.map((response) => {\r\n    const result = {};\r\n    if (response.length === 0) {\r\n      return result;\r\n    }\r\n    response.forEach((entity) => {\r\n      result[entity.key] = entity.value;\r\n    });\r\n    return result;\r\n  }));\r\n}\r\n\r\nfunction getEntityRelations(entityId, direction, relationType, attributeInitTyps = ['USER', 'zone', 'hydrant'], maxLevel = 1, entityFields = [], attributeFields = [], filterFn = (entity) => true, nameKey = null, valueKey = null) {\r\n  const resultValue = attributeInitTyps.reduce((mainResponse, currentValue, currentIndex, arr) => {\r\n\r\n    mainResponse[`${currentValue.toLowerCase()}List`] = [];\r\n    return mainResponse;\r\n  }, {});\r\n  return getEntityRelationsByFind(entityId, direction, relationType, maxLevel, entityFields, attributeFields, filterFn).pipe(rxjs.map((response) => {\r\n    const result = [];\r\n    if (response.length === 0) {\r\n      return result;\r\n    }\r\n    response.forEach((entity) => {\r\n      const resultEntity = {\r\n        name: entity.name,\r\n        value: entity.id.id,\r\n        type: entity.type,\r\n        id: entity.id\r\n      }\r\n      if (nameKey) {\r\n        resultEntity.name = entity[nameKey];\r\n      }\r\n      if (valueKey) {\r\n        if (valueKey === 'id') {\r\n          resultEntity.value = entity.id.id;\r\n        } else {\r\n          resultEntity.value = entity[valueKey];\r\n        }\r\n      }\r\n      result.push(resultEntity);\r\n    });\r\n    let output = result.reduce((mainResponse, currentValue, currentIndex, arr) => {\r\n      if (attributeInitTyps.includes(currentValue.id.entityType)) {\r\n        mainResponse[`${currentValue.id.entityType.toLowerCase()}List`].push({\r\n          name: currentValue.name,\r\n          value: currentValue.value\r\n        });\r\n      } else if (attributeInitTyps.includes(currentValue.type)) {\r\n        mainResponse[`${currentValue.type.toLowerCase()}List`].push({\r\n          name: currentValue.name,\r\n          value: currentValue.value\r\n        });\r\n      }\r\n      return mainResponse;\r\n    }, resultValue);\r\n    return output;\r\n  }));\r\n}\r\n\r\nfunction getEntityRelationsByFind(entityId, direction, relationType, maxLevel = 1, entityFields = [], attributeFields = [], filterFn = (entity) => true) {\r\n  const payload = {\r\n    \"entityFields\": [\r\n      {\r\n        \"type\": \"ENTITY_FIELD\",\r\n        \"key\": \"name\"\r\n      },\r\n      {\r\n        \"type\": \"ENTITY_FIELD\",\r\n        \"key\": \"type\"\r\n      },\r\n      {\r\n        \"type\": \"ENTITY_FIELD\",\r\n        \"key\": \"createdTime\"\r\n      }\r\n    ],\r\n    \"latestValues\": [\r\n    ],\r\n    \"entityFilter\": {\r\n      \"type\": \"relationsQuery\",\r\n      \"rootEntity\": entityId,\r\n      \"direction\": direction,\r\n      \"maxLevel\": maxLevel,\r\n      \"fetchLastLevelOnly\": false,\r\n      \"filters\": [\r\n        {\r\n          \"relationType\": relationType,\r\n          \"entityTypes\": [\r\n            \"ASSET\",\r\n            \"DEVICE\",\r\n            \"USER\"\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    \"pageLink\": {\r\n      \"dynamic\": false,\r\n      \"pageSize\": 1000,\r\n      \"page\": 0,\r\n      \"textSearch\": null,\r\n      \"sortOrder\": {\r\n        \"key\": {\r\n          \"type\": \"ENTITY_FIELD\",\r\n          \"key\": \"createdTime\"\r\n        },\r\n        \"direction\": \"DESC\"\r\n      }\r\n    }\r\n  };\r\n  entityFields.forEach((field) => { payload.entityFields.push({ \"type\": \"ENTITY_FIELD\", \"key\": field }) });\r\n  attributeFields.forEach((field) => { payload.latestValues.push({ \"type\": \"ATTRIBUTE\", \"key\": field }) });\r\n  if (entityId.entityType && entityId.id) {\r\n\r\n    return http.post(\"/api/entitiesQuery/find\", payload).pipe(rxjs.map((response) => {\r\n      const result = [];\r\n      if (response.totalElements === 0) {\r\n        return result;\r\n      }\r\n      response.data.forEach((entity) => {\r\n        const res = {};\r\n        if (!!entity.latest.ATTRIBUTE) {\r\n          Object.keys(entity.latest.ATTRIBUTE).forEach((key) => {\r\n            res[key] = entity.latest.ATTRIBUTE[key].value;\r\n          });\r\n        }\r\n        if (entity.latest.ENTITY_FIELD) {\r\n          Object.keys(entity.latest.ENTITY_FIELD).forEach((key) => {\r\n            res[key] = entity.latest.ENTITY_FIELD[key].value;\r\n          });\r\n        }\r\n        res.id = entity.entityId;\r\n        result.push(res);\r\n      });\r\n      return result.filter(entityValue => {\r\n        return filterFn(entityValue)\r\n      });\r\n    }));\r\n  }\r\n}\r\nfunction getTimeFromDate(date) {\r\n  const hours = date.getHours().toString().padStart(2,'0');\r\n  const minutes = date.getMinutes().toString().padStart(2,'0');\r\n  return `${hours}:${minutes}`;\r\n}\r\nfunction getInitData() {\r\n  const result = {};\r\n  return getEntityServerAttributes(currentEntityId).pipe(rxjs.mergeMap((serverAttributes) => {\r\n    const dateFrom = new Date(serverAttributes.fromDate);\r\n    const dateTo = new Date(serverAttributes.toDate);\r\n    result.dateFrom = dateFrom;\r\n    result.dateTo = dateTo;\r\n    result.timeFrom = dateFrom;\r\n    result.timeTo = dateTo;\r\n    result.createdBy = serverAttributes.createdBy;\r\n    result.description = serverAttributes.description;\r\n    result.eventList = [];\r\n    if (serverAttributes.temporaryDeactivation.eventType.alarmOpen) {\r\n      result.eventList.push({ name: \"Open\", value: \"open\" });\r\n    }\r\n    if (serverAttributes.temporaryDeactivation.eventType.alarmLowBattery) {\r\n      result.eventList.push({ name: \"Low battery\", value: \"lowBattery\" });\r\n    }\r\n    if (serverAttributes.temporaryDeactivation.eventType.alarmNoSignal) {\r\n      result.eventList.push({ name: \"No Signal\", value: \"noSignal\" });\r\n    }\r\n    if (serverAttributes.temporaryDeactivation.eventType.alarmClose) {\r\n      result.eventList.push({ name: \"Close\", value: \"close\" });\r\n    }\r\n    return rxjs.forkJoin([\r\n      getEntityRelations(currentEntityId, \"FROM\", \"Muted\", ['zone', 'hydrant'])\r\n    ]).pipe(rxjs.map((response) => {\r\n        result.hydrantList = Array.isArray(response[0].hydrantList) ? response[0].hydrantList : [];\r\n        result.zoneList = Array.isArray(response[0].zoneList) ? response[0].zoneList : [];\r\n      return result;\r\n    }));\r\n  }));\r\n\r\n}\r\n\r\n\r\nreturn getInitData().pipe(rxjs.finalize(() => {\r\n  formData.markAllAsTouched()\r\n  formData.updateValueAndValidity();\r\n  // widgetContext.$scope.$apply();\r\n}));",
            "isExternalBtn": false,
            "formName": "Edit Temporary Deactivation",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Name",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Assign Zone",
                    "fieldName": "zoneList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=zone&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Select Hydrant",
                    "fieldName": "hydrantList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=hydrant&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Event Type *",
                    "fieldName": "eventList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Open\", value: \"open\"},\n    {name: \"Low Battery\", value: \"lowBattery\"},\n    {name: \"No Signal\", value: \"noSignal\"},\n    {name: \"Close\", value: \"close\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Deactivation Reason",
                    "fieldName": "description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 6",
                    "fieldName": "step0field6",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone has to be assigned\n</div>\n",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone has to be assigned\n</div>\n"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              },
              {
                "stepName": "Date",
                "formFields": [
                  {
                    "label": "Temporary Pause Period From",
                    "fieldName": "pausePeriodFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period From</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period From</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Temporary Pause Period To",
                    "fieldName": "pausePeriodTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period To</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period To</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              }
            ],
            "genericFormFunction": "let $injector = widgetContext.$scope.$injector;\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get(\"customDialog\"));\r\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\nlet rxjs = widgetContext.rxjs;\r\nconst assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nconst entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\r\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\r\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\nlet currentEntityId = widgetContext.datasources[0].entity.id;\r\n\r\nlet currentEntityValue = formData.value;\r\n\r\nif(!currentEntityValue.eventList || (currentEntityValue.eventList && !currentEntityValue.eventList.length) ) {\r\n    widgetContext.showToast('error',\r\n        translationService.instant('hawle-dashboard.assign-event-type-mandatory'), 2000,\r\n        'top', 'left');\r\n    return;\r\n}\r\n\r\nif((!currentEntityValue.zoneList || !currentEntityValue.zoneList.length) &&\r\n    (!currentEntityValue.hydrantList || !currentEntityValue.hydrantList.length)) {\r\n    widgetContext.showToast('error',\r\n    translationService.instant('hawle-dashboard.assign-zone-hydrant-mandatory'), 2000,\r\n    'top', 'left', widgetContext.toastTargetId);\r\n    return;\r\n}\r\n\r\nif(!currentEntityValue.eventList || \r\n    (currentEntityValue.eventList && !currentEntityValue.eventList.length)) {\r\n    widgetContext.showToast('error',\r\n    translationService.instant('hawle-dashboard.assign-event-mandatory'), 2000,\r\n    'top', 'left', widgetContext.toastTargetId);\r\n    return;\r\n}\r\n\r\nconst fromDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateFrom, currentEntityValue.timeFrom);\r\nconst toDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateTo, currentEntityValue.timeTo);\r\nif(toDate < fromDate) {\r\n    widgetContext.showToast('error',\r\n        translationService.instant('hawle-dashboard.invalid-date-selection'), 2000,\r\n        'top', 'left');\r\n    return;\r\n}\r\n\r\nfunction saveEntity(payload, entityType) {\r\n    let url = `/api/${entityType}`;\r\n    return http.post(url, payload);\r\n}\r\n\r\n\r\nfunction saveEntityRelations(RelationType, relationsFromToList=[]) {\r\n    const relationPayload = []\r\n    relationsFromToList.forEach((relation) => {\r\n        relationPayload.push({\r\n            \"type\": RelationType,\r\n            \"additionalInfo\": null,\r\n            \"typeGroup\": \"COMMON\",\r\n            \"from\": relation.from,\r\n            \"to\": relation.to\r\n        })\r\n    });\r\n    let url = `/api/relation/bulk`;\r\n    return http.post(url, relationPayload);\r\n}\r\n\r\nfunction saveServerAttributes(serverAttributes, entityType, EntityId) {\r\n    let url = `/api/plugins/telemetry/${entityType}/${EntityId}/SERVER_SCOPE`;\r\n    return http.post(url, serverAttributes);\r\n}\r\n\r\nfunction getMsTimeAfterAddTimeInDate(date, time) {\r\n    let newDate = new Date(date);\r\n    let newTime = new Date(time);\r\n    let hours = newTime.getHours();\r\n    let minutes = newTime.getMinutes();\r\n    newDate.setHours(hours);\r\n    newDate.setMinutes(minutes);\r\n    return newDate.getTime();\r\n}\r\nfunction main() {\r\n    entityService.getEntity(currentEntityId.entityType, currentEntityId.id).pipe().subscribe((entityInfo) => {\r\n        if (entityInfo) {\r\n            entityInfo.name = currentEntityValue.name;\r\n            if(entityInfo['additionalInfo']) {\r\n                entityInfo['additionalInfo'].description = currentEntityValue.description;\r\n            } else {\r\n                 entityInfo.additionalInfo = { description: currentEntityValue.description };\r\n            }\r\n            \r\n            assetService.saveAsset(entityInfo).pipe().subscribe((entity) => {\r\n                removePreviousEntityGroupServerAttributesAndAllRelations().subscribe(() => {\r\n                    const serverAttributesPayload = {\r\n                        description: currentEntityValue.description,\r\n                        fromDate: fromDate,\r\n                        toDate: toDate,\r\n                        temporaryDeactivation: {\r\n                            deactivationState: {\r\n                                fromDate: fromDate,\r\n                                toDate: toDate\r\n                            },\r\n                            eventType: {\r\n                                alarmOpen: currentEntityValue.eventList.includes(\"open\"),\r\n                                alarmLowBattery: currentEntityValue.eventList.includes(\"lowBattery\"),\r\n                                alarmNoSignal: currentEntityValue.eventList.includes(\"noSignal\"),\r\n                                alarmClose: currentEntityValue.eventList.includes(\"close\")\r\n                            }\r\n                        }\r\n                    }\r\n                    saveServerAttributes(serverAttributesPayload, \"ASSET\", entity.id.id).subscribe((serverAttributes) => {\r\n                        const relationPayload = [];\r\n                        if(currentEntityValue.hydrantList) {\r\n                            currentEntityValue.hydrantList.forEach((hydrantId) => {\r\n                                relationPayload.push({\r\n                                    \"type\": \"Muted\",\r\n                                    'from':  entity.id,\r\n                                    'to': {\r\n                                        'entityType': 'ASSET',\r\n                                        'id': hydrantId\r\n                                    },\r\n                                })\r\n                            });\r\n                        }\r\n                        if(currentEntityValue.zoneList) {\r\n                            currentEntityValue.zoneList.forEach((zoneId) => {\r\n                                relationPayload.push({\r\n                                    \"type\": \"Muted\",\r\n                                    'from':  entity.id,\r\n                                    'to': {\r\n                                        'entityType': 'ASSET',\r\n                                        'id': zoneId\r\n                                    },\r\n                                })\r\n                            });\r\n                        }\r\n                        saveEntityRelations(\"Muted\", relationPayload).subscribe((relations) => {\r\n                            openDashboardState('all_temporary_deactivation');\r\n                            widgetContext.showToast('success',\r\n                                translationService.instant('hawle-dashboard.temporary-deactivation-saved-successfully'), 2000,\r\n                                'top', 'left');\r\n                            widgetContext.updateAliases();\r\n                        });\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nwidgetContext.isGenericLoading$.next(true);\r\n\r\nfunction showToaster(message, isErrorType=false) {\r\n    const translatedMessage =  translationService.instant(message);\r\n    if(isErrorType) {\r\n        widgetContext.showErrorToast(translatedMessage);\r\n    } else {\r\n        widgetContext.showSuccessToast(translatedMessage);\r\n    }\r\n}\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.stateController.resetState();\r\n    widgetContext.isGenericLoading$.next(false);\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.updateState(statedId,\r\n            params);\r\n    }\r\n}\r\n\r\nfunction getEntityServerAttributes(entityId = {entityType:null, id: null}) {\r\n    return attributeService.getEntityAttributes({ entityType: entityId.entityType, id: entityId.id }, \"SERVER_SCOPE\").pipe(rxjs.map((response) => {\r\n      const result = {};\r\n      if (response.length === 0) {\r\n        return result;\r\n      }\r\n      response.forEach((entity) => {\r\n        result[entity.key] = entity.value;\r\n      });\r\n      return result;\r\n    }));\r\n  }\r\n\r\n  function removePreviousEntityGroupServerAttributesAndAllRelations() {\r\n    return getEntityServerAttributes(currentEntityId).pipe(rxjs.mergeMap((serverAttributes) => {\r\n        const calls = [];\r\n        calls.push(entityRelationService.deleteRelations(currentEntityId));\r\n        return rxjs.forkJoin(calls);\r\n    }));\r\n  }\r\n\r\nmain()"
          },
          "title": "New Generic Form Builder v1.0",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "ed5f1dcc-d356-fdad-8b31-662b65da78cd"
      },
      "ed5f1dcc-d356-fdad-8b31-662b65da78ce": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.4291951067313693
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": true,
            "patchFormFunction": "let $injector = widgetContext.$scope.$injector;\r\n\r\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nlet rxjs = widgetContext.rxjs;\r\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\r\nlet currentEntityId = { id: widgetContext.datasources[0].entityId, entityType: widgetContext.datasources[0].entityType };\r\n// let entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\n\r\nfunction getEntityServerAttributes(entityId = { entityType: null, id: null }) {\r\n  return attributeService.getEntityAttributes({ entityType: entityId.entityType, id: entityId.id }, \"SERVER_SCOPE\").pipe(rxjs.map((response) => {\r\n    const result = {};\r\n    if (response.length === 0) {\r\n      return result;\r\n    }\r\n    response.forEach((entity) => {\r\n      result[entity.key] = entity.value;\r\n    });\r\n    return result;\r\n  }));\r\n}\r\n\r\nfunction getEntityRelations(entityId, direction, relationType, attributeInitTyps = ['USER', 'zone', 'hydrant'], maxLevel = 1, entityFields = [], attributeFields = [], filterFn = (entity) => true, nameKey = null, valueKey = null) {\r\n  const resultValue = attributeInitTyps.reduce((mainResponse, currentValue, currentIndex, arr) => {\r\n\r\n    mainResponse[`${currentValue.toLowerCase()}List`] = [];\r\n    return mainResponse;\r\n  }, {});\r\n  return getEntityRelationsByFind(entityId, direction, relationType, maxLevel, entityFields, attributeFields, filterFn).pipe(rxjs.map((response) => {\r\n    const result = [];\r\n    if (response.length === 0) {\r\n      return result;\r\n    }\r\n    response.forEach((entity) => {\r\n      const resultEntity = {\r\n        name: entity.name,\r\n        value: entity.id.id,\r\n        type: entity.type,\r\n        id: entity.id\r\n      }\r\n      if (nameKey) {\r\n        resultEntity.name = entity[nameKey];\r\n      }\r\n      if (valueKey) {\r\n        if (valueKey === 'id') {\r\n          resultEntity.value = entity.id.id;\r\n        } else {\r\n          resultEntity.value = entity[valueKey];\r\n        }\r\n      }\r\n      result.push(resultEntity);\r\n    });\r\n    let output = result.reduce((mainResponse, currentValue, currentIndex, arr) => {\r\n      if (attributeInitTyps.includes(currentValue.id.entityType)) {\r\n        mainResponse[`${currentValue.id.entityType.toLowerCase()}List`].push({\r\n          name: currentValue.name,\r\n          value: currentValue.value\r\n        });\r\n      } else if (attributeInitTyps.includes(currentValue.type)) {\r\n        mainResponse[`${currentValue.type.toLowerCase()}List`].push({\r\n          name: currentValue.name,\r\n          value: currentValue.value\r\n        });\r\n      }\r\n      return mainResponse;\r\n    }, resultValue);\r\n    return output;\r\n  }));\r\n}\r\n\r\nfunction getEntityRelationsByFind(entityId, direction, relationType, maxLevel = 1, entityFields = [], attributeFields = [], filterFn = (entity) => true) {\r\n  const payload = {\r\n    \"entityFields\": [\r\n      {\r\n        \"type\": \"ENTITY_FIELD\",\r\n        \"key\": \"name\"\r\n      },\r\n      {\r\n        \"type\": \"ENTITY_FIELD\",\r\n        \"key\": \"type\"\r\n      },\r\n      {\r\n        \"type\": \"ENTITY_FIELD\",\r\n        \"key\": \"createdTime\"\r\n      }\r\n    ],\r\n    \"latestValues\": [\r\n    ],\r\n    \"entityFilter\": {\r\n      \"type\": \"relationsQuery\",\r\n      \"rootEntity\": entityId,\r\n      \"direction\": direction,\r\n      \"maxLevel\": maxLevel,\r\n      \"fetchLastLevelOnly\": false,\r\n      \"filters\": [\r\n        {\r\n          \"relationType\": relationType,\r\n          \"entityTypes\": [\r\n            \"ASSET\",\r\n            \"DEVICE\",\r\n            \"USER\"\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    \"pageLink\": {\r\n      \"dynamic\": false,\r\n      \"pageSize\": 1000,\r\n      \"page\": 0,\r\n      \"textSearch\": null,\r\n      \"sortOrder\": {\r\n        \"key\": {\r\n          \"type\": \"ENTITY_FIELD\",\r\n          \"key\": \"createdTime\"\r\n        },\r\n        \"direction\": \"DESC\"\r\n      }\r\n    }\r\n  };\r\n  entityFields.forEach((field) => { payload.entityFields.push({ \"type\": \"ENTITY_FIELD\", \"key\": field }) });\r\n  attributeFields.forEach((field) => { payload.latestValues.push({ \"type\": \"ATTRIBUTE\", \"key\": field }) });\r\n  if (entityId.entityType && entityId.id) {\r\n\r\n    return http.post(\"/api/entitiesQuery/find\", payload).pipe(rxjs.map((response) => {\r\n      const result = [];\r\n      if (response.totalElements === 0) {\r\n        return result;\r\n      }\r\n      response.data.forEach((entity) => {\r\n        const res = {};\r\n        if (!!entity.latest.ATTRIBUTE) {\r\n          Object.keys(entity.latest.ATTRIBUTE).forEach((key) => {\r\n            res[key] = entity.latest.ATTRIBUTE[key].value;\r\n          });\r\n        }\r\n        if (entity.latest.ENTITY_FIELD) {\r\n          Object.keys(entity.latest.ENTITY_FIELD).forEach((key) => {\r\n            res[key] = entity.latest.ENTITY_FIELD[key].value;\r\n          });\r\n        }\r\n        res.id = entity.entityId;\r\n        result.push(res);\r\n      });\r\n      return result.filter(entityValue => {\r\n        return filterFn(entityValue)\r\n      });\r\n    }));\r\n  }\r\n}\r\nfunction getTimeFromDate(date) {\r\n  const hours = date.getHours().toString().padStart(2,'0');\r\n  const minutes = date.getMinutes().toString().padStart(2,'0');\r\n  return `${hours}:${minutes}`;\r\n}\r\nfunction getInitData() {\r\n  const result = {};\r\n  return getEntityServerAttributes(currentEntityId).pipe(rxjs.mergeMap((serverAttributes) => {\r\n    const dateFrom = new Date(serverAttributes.fromDate);\r\n    const dateTo = new Date(serverAttributes.toDate);\r\n    result.dateFrom = dateFrom;\r\n    result.dateTo = dateTo;\r\n    result.timeFrom = dateFrom;\r\n    result.timeTo = dateTo;\r\n    result.createdBy = serverAttributes.createdBy;\r\n    result.description = serverAttributes.description;\r\n    result.eventList = [];\r\n    if (serverAttributes.temporaryDeactivation.eventType.alarmOpen) {\r\n      result.eventList.push({ name: \"Open\", value: \"open\" });\r\n    }\r\n    if (serverAttributes.temporaryDeactivation.eventType.alarmLowBattery) {\r\n      result.eventList.push({ name: \"Low battery\", value: \"lowBattery\" });\r\n    }\r\n    if (serverAttributes.temporaryDeactivation.eventType.alarmNoSignal) {\r\n      result.eventList.push({ name: \"No Signal\", value: \"noSignal\" });\r\n    }\r\n    if (serverAttributes.temporaryDeactivation.eventType.alarmClose) {\r\n      result.eventList.push({ name: \"Close\", value: \"close\" });\r\n    }\r\n    return rxjs.forkJoin([\r\n      getEntityRelations(currentEntityId, \"FROM\", \"Muted\", ['zone', 'hydrant'])\r\n    ]).pipe(rxjs.map((response) => {\r\n      result.name = '';\r\n        result.hydrantList = Array.isArray(response[0].hydrantList) ? response[0].hydrantList : [];\r\n        result.zoneList = Array.isArray(response[0].zoneList) ? response[0].zoneList : [];\r\n      return result;\r\n    }));\r\n  }));\r\n\r\n}\r\n\r\n\r\nreturn getInitData().pipe(rxjs.finalize(() => {\r\n  formData.markAllAsTouched()\r\n  formData.updateValueAndValidity();\r\n  // widgetContext.$scope.$apply();\r\n}));",
            "isExternalBtn": false,
            "formName": "Duplicate Temporary Deactivation",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Name",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Assign Zone",
                    "fieldName": "zoneList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=zone&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Select Hydrant",
                    "fieldName": "hydrantList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=hydrant&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Event Type",
                    "fieldName": "eventList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Open\", value: \"open\"},\n    {name: \"Low Battery\", value: \"lowBattery\"},\n    {name: \"No Signal\", value: \"noSignal\"},\n    {name: \"Close\", value: \"close\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Deactivation Reason",
                    "fieldName": "description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 6",
                    "fieldName": "step0field6",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone has to be assigned\n</div>\n",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone has to be assigned\n</div>\n"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              },
              {
                "stepName": "Date",
                "formFields": [
                  {
                    "label": "Temporary Pause Period From",
                    "fieldName": "pausePeriodFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period From</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period From</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Temporary Pause Period To",
                    "fieldName": "pausePeriodTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period To</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">Temporary Pause Period To</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              }
            ],
            "genericFormFunction": "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get(\"customDialog\"));\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\nlet rxjs = widgetContext.rxjs;\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\nlet currentEntityId = {id: widgetContext.datasources[0].entityId, entityType: widgetContext.datasources[0].entityType};\n\nlet currentEntityValue = formData.value;\nif(!currentEntityValue.eventList || (currentEntityValue.eventList && !currentEntityValue.eventList.length) ) {\n    widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.assign-event-type-mandatory'), 2000,\n        'top', 'left');\n    return;\n}\n\nif((!currentEntityValue.zoneList || !currentEntityValue.zoneList.length) &&\n    (!currentEntityValue.hydrantList || !currentEntityValue.hydrantList.length)) {\n    widgetContext.showToast('error',\n    translationService.instant('hawle-dashboard.assign-zone-hydrant-mandatory'), 2000,\n    'top', 'left', widgetContext.toastTargetId);\n    return;\n}\n\nif(!currentEntityValue.eventList || \n    (currentEntityValue.eventList && !currentEntityValue.eventList.length)) {\n    widgetContext.showToast('error',\n    translationService.instant('hawle-dashboard.assign-event-mandatory'), 2000,\n    'top', 'left', widgetContext.toastTargetId);\n    return;\n}\n\nconst fromDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateFrom, currentEntityValue.timeFrom);\nconst toDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateTo, currentEntityValue.timeTo);\nconst nowDate = new Date().getTime();\nif((toDate < fromDate) || (toDate < nowDate)) {\n    widgetContext.showToast('error',\n        translationService.instant('hawle-dashboard.invalid-date-selection'), 2000,\n        'top', 'left');\n    return;\n}\n\nfunction saveEntity(payload, entityType) {\n    let url = `/api/${entityType}`;\n    return http.post(url, payload);\n}\n\n\nfunction saveEntityRelations(RelationType, relationsFromToList=[]) {\n    const relationPayload = []\n    relationsFromToList.forEach((relation) => {\n        relationPayload.push({\n            \"type\": RelationType,\n            \"additionalInfo\": null,\n            \"typeGroup\": \"COMMON\",\n            \"from\": relation.from,\n            \"to\": relation.to\n        })\n    });\n    let url = `/api/relation/bulk`;\n    return http.post(url, relationPayload);\n}\n\nfunction saveServerAttributes(serverAttributes, entityType, EntityId) {\n    let url = `/api/plugins/telemetry/${entityType}/${EntityId}/SERVER_SCOPE`;\n    return http.post(url, serverAttributes);\n}\n\nfunction getMsTimeAfterAddTimeInDate(date, time) {\n    let newDate = new Date(date);\n    let newTime = new Date(time);\n    let hours = newTime.getHours();\n    let minutes = newTime.getMinutes();\n    newDate.setHours(hours);\n    newDate.setMinutes(minutes);\n    return newDate.getTime();\n}\nfunction main() {\n    let payload = {\n        \"name\": currentEntityValue.name,\n        \"type\": \"temporaryDeactivation\",\n        \"additionalInfo\": {\n            \"description\": currentEntityValue.description\n        }\n    }\n    saveEntity(payload, \"asset\").subscribe((entity) => {\n        const fromDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateFrom, currentEntityValue.timeFrom);\n        const toDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateTo, currentEntityValue.timeTo);\n        const serverAttributesPayload = {\n            description: currentEntityValue.description,\n            fromDate: fromDate,\n            toDate: toDate,\n            temporaryDeactivation: {\n                deactivationState: {\n                    fromDate: fromDate,\n                    toDate: toDate\n                },\n                eventType: {\n                    alarmOpen: currentEntityValue.eventList.includes(\"open\"),\n                    alarmLowBattery: currentEntityValue.eventList.includes(\"lowBattery\"),\n                    alarmNoSignal: currentEntityValue.eventList.includes(\"noSignal\"),\n                    alarmClose: currentEntityValue.eventList.includes(\"close\")\n                }\n            },\n            createdBy: widgetContext.currentUser.sub\n        }\n        saveServerAttributes(serverAttributesPayload, \"ASSET\", entity.id.id).subscribe((serverAttributes) => {\n            const relationPayload = [];\n            if(currentEntityValue.hydrantList) {\n                currentEntityValue.hydrantList.forEach((hydrantId) => {\n                    relationPayload.push({\n                        \"type\": \"Muted\",\n                        'from':  entity.id,\n                        'to': {\n                            'entityType': 'ASSET',\n                            'id': hydrantId\n                        },\n                    })\n                });\n            }\n            if(currentEntityValue.zoneList) {\n                currentEntityValue.zoneList.forEach((zoneId) => {\n                    relationPayload.push({\n                        \"type\": \"Muted\",\n                        'from':  entity.id,\n                        'to': {\n                            'entityType': 'ASSET',\n                            'id': zoneId\n                        },\n                    })\n                });\n            }\n            saveEntityRelations(\"Muted\", relationPayload).subscribe((relations) => {\n                openDashboardState('all_temporary_deactivation');\n                widgetContext.showToast('success',\n                    translationService.instant('hawle-dashboard.temporary-deactivation-saved-successfully'), 2000,\n                    'top', 'left');\n                widgetContext.updateAliases();\n            });\n        });\n    });\n}\n\nfunction openDashboardState(statedId) {\n    widgetContext.stateController.resetState();\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId, params);\n    }\n}\n\nfunction getEntityServerAttributes(entityId = {entityType:null, id: null}) {\n    return attributeService.getEntityAttributes({ entityType: entityId.entityType, id: entityId.id }, \"SERVER_SCOPE\").pipe(rxjs.map((response) => {\n      const result = {};\n      if (response.length === 0) {\n        return result;\n      }\n      response.forEach((entity) => {\n        result[entity.key] = entity.value;\n      });\n      return result;\n    }));\n  }\n\n  function removePreviousEntityGroupServerAttributesAndAllRelations() {\n    return getEntityServerAttributes(currentEntityId).pipe(rxjs.mergeMap((serverAttributes) => {\n        const calls = [];\n        calls.push(entityRelationService.deleteRelations(currentEntityId));\n        return rxjs.forkJoin(calls);\n    }));\n  }\n\nmain()"
          },
          "title": "New Generic Form Builder v1.0",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "ed5f1dcc-d356-fdad-8b31-662b65da78ce"
      },
      "7f42ebb4-f81c-298f-aae8-d868a60d338d": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.4291951067313693
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": true,
            "patchFormFunction": "let $injector = widgetContext.$scope.$injector;\r\n\r\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nlet rxjs = widgetContext.rxjs;\r\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\r\nlet currentEntityId = {id: widgetContext.datasources[0].entityId, entityType: widgetContext.datasources[0].entityType};\r\n// let entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\n\r\nfunction getEntityServerAttributes(entityId = {entityType:null, id: null}) {\r\n    return attributeService.getEntityAttributes({ entityType: entityId.entityType, id: entityId.id }, \"SERVER_SCOPE\").pipe(rxjs.map((response) => {\r\n      const result = {};\r\n      if (response.length === 0) {\r\n        return result;\r\n      }\r\n      response.forEach((entity) => {\r\n        result[entity.key] = entity.value;\r\n      });\r\n      return result;\r\n    }));\r\n  }\r\n\r\n  function getEntityRelations(entityId , direction, relationType, attributeInitTyps = ['USER', 'zone', 'hydrant'], maxLevel=1, entityFields = [], attributeFields = [], filterFn = (entity) => true, nameKey = null, valueKey = null ) {\r\n    const resultValue = attributeInitTyps.reduce((mainResponse, currentValue, currentIndex, arr) => {\r\n\r\n        mainResponse[`${currentValue.toLowerCase()}List`] = [];\r\n        return mainResponse;\r\n    }, {});\r\n    return getEntityRelationsByFind(entityId, direction, relationType, maxLevel, entityFields, attributeFields, filterFn).pipe(rxjs.map((response) => {\r\n      const result = [];\r\n      if (response.length === 0) {\r\n        return result;\r\n      }\r\n      response.forEach((entity) => {\r\n        const resultEntity = {\r\n            name: entity.name,\r\n            value: entity.id.id,\r\n            type: entity.type,\r\n            id: entity.id\r\n        }\r\n        if (nameKey) {\r\n            resultEntity.name = entity[nameKey];\r\n        }\r\n        if (valueKey) {\r\n            if (valueKey === 'id') {\r\n                resultEntity.value = entity.id.id;\r\n            } else {\r\n                resultEntity.value = entity[valueKey];\r\n            }\r\n        }\r\n        result.push(resultEntity);\r\n      });\r\n      let output =  result.reduce((mainResponse, currentValue, currentIndex, arr) => {\r\n        if (attributeInitTyps.includes(currentValue.id.entityType)) {\r\n            mainResponse[`${currentValue.id.entityType.toLowerCase()}List`].push({\r\n                name: currentValue.name,\r\n                value: currentValue.value\r\n            });\r\n        } else if (attributeInitTyps.includes(currentValue.type)) {\r\n          mainResponse[`${currentValue.type.toLowerCase()}List`].push({\r\n            name: currentValue.name,\r\n            value: currentValue.value\r\n        });\r\n        }\r\n        return mainResponse;\r\n      }, resultValue);\r\n        return output;\r\n    }));\r\n  }\r\n\r\n  function getEntityRelationsByFind(entityId, direction, relationType, maxLevel=1, entityFields = [], attributeFields = [], filterFn = (entity) => true ) {\r\n    const payload = {\r\n      \"entityFields\": [\r\n        {\r\n          \"type\": \"ENTITY_FIELD\",\r\n          \"key\": \"name\"\r\n        },\r\n        {\r\n          \"type\": \"ENTITY_FIELD\",\r\n          \"key\": \"type\"\r\n        },\r\n        {\r\n          \"type\": \"ENTITY_FIELD\",\r\n          \"key\": \"createdTime\"\r\n        }\r\n      ],\r\n      \"latestValues\": [\r\n      ],\r\n      \"entityFilter\": {\r\n        \"type\": \"relationsQuery\",\r\n        \"rootEntity\": entityId,\r\n        \"direction\": direction,\r\n        \"maxLevel\": maxLevel,\r\n        \"fetchLastLevelOnly\": false,\r\n        \"filters\": [\r\n          {\r\n            \"relationType\": relationType,\r\n            \"entityTypes\": [\r\n                \"ASSET\",\r\n                \"DEVICE\",\r\n                \"USER\"\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      \"pageLink\": {\r\n        \"dynamic\": false,\r\n        \"pageSize\": 1000,\r\n        \"page\": 0,\r\n        \"textSearch\": null,\r\n        \"sortOrder\": {\r\n          \"key\": {\r\n            \"type\": \"ENTITY_FIELD\",\r\n            \"key\": \"createdTime\"\r\n          },\r\n          \"direction\": \"DESC\"\r\n        }\r\n      }\r\n    };\r\n    entityFields.forEach((field) => { payload.entityFields.push({\"type\": \"ENTITY_FIELD\", \"key\": field }) });\r\n    attributeFields.forEach((field) => { payload.latestValues.push({ \"type\": \"ATTRIBUTE\", \"key\": field }) });\r\n    if (entityId.entityType && entityId.id) {\r\n  \r\n      return http.post(\"/api/entitiesQuery/find\", payload).pipe(rxjs.map((response) => {\r\n        const result = [];\r\n        if (response.totalElements === 0) {\r\n          return result;\r\n        }\r\n        response.data.forEach((entity) => {\r\n            const res = {};\r\n            if (!!entity.latest.ATTRIBUTE) {\r\n                Object.keys(entity.latest.ATTRIBUTE).forEach((key) => {\r\n                    res[key] = entity.latest.ATTRIBUTE[key].value;\r\n                });\r\n            }\r\n            if (entity.latest.ENTITY_FIELD) {\r\n                Object.keys(entity.latest.ENTITY_FIELD).forEach((key) => {\r\n                    res[key] = entity.latest.ENTITY_FIELD[key].value;\r\n                });\r\n            }\r\n            res.id = entity.entityId;\r\n            result.push(res);\r\n        });\r\n        return result.filter(entityValue => {\r\n            return filterFn(entityValue)\r\n        });\r\n      }));\r\n    }\r\n  }\r\n  function getTimeFromDate(date) {\r\n      const hours = date.getHours().toString().padStart(2,'0');\r\n      const minutes = date.getMinutes().toString().padStart(2,'0');\r\n      return `${hours}:${minutes}`;\r\n  }\r\n  function getInitData() {\r\n    const result = {};\r\n    return getEntityServerAttributes(currentEntityId).pipe(rxjs.mergeMap((serverAttributes) => { \r\n        const dateFrom = new Date(serverAttributes.fromDate);\r\n        const dateTo = serverAttributes.toDate && serverAttributes.toDate > 0 ? new Date(serverAttributes.toDate) : null;\r\n        result.dateFrom = dateFrom;\r\n        result.dateTo = dateTo;\r\n        result.timeFrom = dateFrom;\r\n        result.timeTo = dateTo;\r\n        // result.timeFrom = getTimeFromDate(dateFrom);\r\n        // result.timeTo = getTimeFromDate(dateTo)\r\n        result.isAlarmActive = serverAttributes.isActive;\r\n        result.eventList = [];\r\n        if (!Array.isArray(serverAttributes.userGroups)) {\r\n            serverAttributes.userGroups = [];\r\n        }\r\n        if (serverAttributes.alarmDefinition.eventType.alarmOpen) {\r\n            result.eventList.push({name: \"Open\", value: \"open\"});\r\n        }\r\n        if (serverAttributes.alarmDefinition.eventType.alarmLowBattery) {\r\n            result.eventList.push({name: \"Low battery\", value: \"lowBattery\"});\r\n        }\r\n        if (serverAttributes.alarmDefinition.eventType.alarmNoSignal) {\r\n            result.eventList.push({name: \"No Signal\", value: \"noSignal\"});\r\n        }\r\n        if (serverAttributes.alarmDefinition.eventType.alarmClose) {\r\n            result.eventList.push({name: \"Close\", value: \"close\"});\r\n        }\r\n        result.roleList = serverAttributes.userGroups.map((role) => ({name: role.name, value: JSON.stringify(role)}));\r\n        result.userList = (serverAttributes.users || []).map((user) => ({name: user.name, value: JSON.stringify(user)}));\r\n        result.notificationType = [];\r\n        if (serverAttributes.alarmDefinition.notification.email) {\r\n            result.notificationType.push({name: \"Email\", value: \"email\"});\r\n        }\r\n        if (serverAttributes.alarmDefinition.notification.sms) {\r\n            result.notificationType.push({name: \"SMS\", value: \"sms\"});\r\n        }\r\n        // let notificationDelay = serverAttributes.alarmDefinition.notification.delay / 60000;\r\n        result.notificationDelay = serverAttributes.alarmDefinition.notification.delay / 60000;\r\n        // let reNotificationDelay = serverAttributes.alarmDefinition.notification.reNotificationOnMissingAck / 60000;\r\n        result.reNotificationDelay = serverAttributes.alarmDefinition.notification.reNotificationOnMissingAck / 60000;\r\n        return rxjs.forkJoin([\r\n            // getEntityRelations(currentEntityId, \"TO\", \"Owns\", ['USER'], 1, ['email'], ['role'],\r\n            //  (entity) => entity.role ? entity.role.id && serverAttributes.userGroups && !serverAttributes.userGroups.find(groupEntity => groupEntity.id === entity.role.id.id) : true, 'email'),\r\n            getEntityRelations(currentEntityId, \"FROM\", \"ManagesAlarms\", ['zone', 'hydrant'])\r\n          ]).pipe(rxjs.map((response) => {\r\n            // result.userList = response[0].userList;\r\n            result.name = \"\";\r\n            result.hydrantList = Array.isArray(response[0].hydrantList) ? response[0].hydrantList : [];\r\n            result.zoneList = Array.isArray(response[0].zoneList) ? response[0].zoneList : [];\r\n            return result;\r\n          }));\r\n        }));\r\n  }\r\n\r\n \r\nreturn getInitData().pipe( rxjs.finalize(() => {\r\n    formData.markAllAsTouched()\r\n    formData.updateValueAndValidity();\r\n    console.log(widgetContext);\r\n    // widgetContext.$scope.$apply();\r\n}));",
            "isExternalBtn": false,
            "formName": "Duplicate Alarm Definition",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Name",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Assign Zone",
                    "fieldName": "zoneList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=zone&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Select Hydrant",
                    "fieldName": "hydrantList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=hydrant&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: data.id.id\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Event Type",
                    "fieldName": "eventList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Open\", value: \"open\"},\n    {name: \"Low Battery\", value: \"lowBattery\"},\n    {name: \"No Signal\", value: \"noSignal\"},\n    {name: \"Close\", value: \"close\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Assign User Roles",
                    "fieldName": "roleList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/entityGroups/USER`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response.filter(res => !res.groupAll)\n        .map(\n            data => ({\n                name: data.name,\n                value: JSON.stringify({\n                    id: data.id.id,\n                    name: data.name\n                })\n            })).filter(data => data.name.toLowerCase().includes(searchTerm && searchTerm.trim() ? searchTerm.trim() : ''))\n            ));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Assign Users",
                    "fieldName": "userList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nfunction getGroupAllUserList() {\n    const payload = {\n        \"entityFields\": [\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"createdTime\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"firstName\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"lastName\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"email\"\n            }\n        ],\n        \"latestValues\": [],\n        \"entityFilter\": {\n            \"resolveMultiple\":true,\n            \"entityType\": \"USER\",\n            \"type\": \"entityType\"\n        },\n        \"pageLink\": {\n            \"dynamic\": false,\n            \"pageSize\": 10,\n            \"page\": 0,\n            \"textSearch\": null,\n            \"sortOrder\": {\n                \"key\": {\n                    \"type\": \"ENTITY_FIELD\",\n                    \"key\": \"createdTime\"\n                },\n                \"direction\": \"DESC\"\n            }\n        }\n    };\n    if (searchTerm) {\n        payload.pageLink.textSearch = searchTerm;\n    }\n    return http.post(\"/api/entitiesQuery/find\", payload).pipe(\n        rxjs.debounceTime(150),\n        rxjs.distinctUntilChanged(),\n        rxjs.map((response) => {\n        const result = [];\n        if (response.totalElements === 0) {\n          return result;\n        }\n        response.data.forEach((entity) => {\n          if (entity.entityId.entityType === \"USER\") {\n            result.push({\n              name: entity.latest.ENTITY_FIELD.email.value,\n              value: entity.entityId.id\n            })\n          }\n        });\n        return result;\n      }))\n}\nreturn getGroupAllUserList();",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 7",
                    "fieldName": "step0field7",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone and at least 1 user or user role has to be assigned\n</div>\n",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 hydrant or zone and at least 1 user or user role has to be assigned\n</div>\n"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              },
              {
                "stepName": "Notification",
                "formFields": [
                  {
                    "label": "Notification Type *",
                    "fieldName": "notificationType",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Email\", value: \"email\"},\n    {name: \"SMS\", value: \"sms\"},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Delay",
                    "fieldName": "notificationDelay",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"None\", value: 0},\n    {name: \"15 min\", value: 15},\n    {name: \"30 min\", value: 30},\n    {name: \"60 min\", value: 60},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Re-notification on missing acknowledgement",
                    "fieldName": "reNotificationDelay",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"None\", value: 0},\n    {name: \"15 min\", value: 15},\n    {name: \"60 min\", value: 60},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              },
              {
                "stepName": "Date",
                "formFields": [
                  {
                    "label": "Alarm State",
                    "fieldName": "alarmState",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div></div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div></div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Alarm State",
                    "fieldName": "isAlarmActive",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Active\", value: true},\n    {name: \"Inactive\", value: false}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "From",
                    "fieldName": "from",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div class=\"mt-24 mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">From</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div class=\"mt-24 mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">From</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "To",
                    "fieldName": "to",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div class=\"mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">To</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div class=\"mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">To</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              }
            ],
            "genericFormFunction": "let $injector = widgetContext.$scope.$injector;\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get(\"customDialog\"));\r\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\nlet rxjs = widgetContext.rxjs;\r\nconst assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nconst entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\r\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\r\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\nlet currentEntityId = widgetContext.datasources[0].entity.id;\r\nformData.markAllAsTouched();\r\nlet currentEntityValue = formData.value;\r\n\r\n\r\nfunction saveEntity(paylload, entityType) {\r\n    let url = `/api/${entityType}`;\r\n    return http.post(url, paylload);\r\n}\r\n\r\n\r\nfunction saveEntityRelations(relationsFromToList=[], defaultRelationType=null) {\r\n    const relationPayload = []\r\n    relationsFromToList.forEach((relation) => {\r\n        relationPayload.push({\r\n            \"type\": defaultRelationType || relation.type,\r\n            \"additionalInfo\": relation.additionalInfo || null,\r\n            \"typeGroup\": relation.typeGroup || \"COMMON\",\r\n            \"from\": relation.from,\r\n            \"to\": relation.to\r\n        })\r\n    });\r\n    let url = `/api/relation/bulk`;\r\n    return http.post(url, relationPayload);\r\n}\r\n\r\nfunction saveServerAttributes(serverAttributes, entityType, EntityId) {\r\n    let url = `/api/plugins/telemetry/${entityType}/${EntityId}/SERVER_SCOPE`;\r\n    return http.post(url, serverAttributes);\r\n}\r\n\r\nfunction getMsTimeAfterAddTimeInDate(date, time) {\r\n    let newDate = new Date(date);\r\n    let newTime = new Date(time);\r\n    let hours = newTime.getHours();\r\n    let minutes = newTime.getMinutes();\r\n    newDate.setHours(hours);\r\n    newDate.setMinutes(minutes);\r\n    return newDate.getTime();\r\n}\r\n\r\nfunction main() {\r\n    if( (!currentEntityValue.roleList || !currentEntityValue.roleList.length) &&\r\n        (!currentEntityValue.userList || !currentEntityValue.userList.length) &&\r\n        (!currentEntityValue.zoneList || !currentEntityValue.zoneList.length) &&\r\n        (!currentEntityValue.hydrantList || !currentEntityValue.hydrantList.length)) {\r\n        widgetContext.showToast('error',\r\n        translationService.instant('hawle-dashboard.assign-user-role-zone-hydrant-mandatory'), 2000,\r\n        'top', 'left', widgetContext.toastTargetId);\r\n        return;\r\n    }\r\n    if((!currentEntityValue.roleList || !currentEntityValue.roleList.length) &&\r\n        (!currentEntityValue.userList || !currentEntityValue.userList.length) ) {\r\n        widgetContext.showToast('error',\r\n        translationService.instant('hawle-dashboard.assign-user-role-mandatory'), 2000,\r\n        'top', 'left', widgetContext.toastTargetId);\r\n        return;\r\n    }\r\n\r\n    if((!currentEntityValue.zoneList || !currentEntityValue.zoneList.length) &&\r\n        (!currentEntityValue.hydrantList || !currentEntityValue.hydrantList.length)) {\r\n        widgetContext.showToast('error',\r\n        translationService.instant('hawle-dashboard.assign-zone-hydrant-mandatory'), 2000,\r\n        'top', 'left', widgetContext.toastTargetId);\r\n        return;\r\n    }\r\n    if(!currentEntityValue.eventList || \r\n        (currentEntityValue.eventList && !currentEntityValue.eventList.length)) {\r\n        widgetContext.showToast('error',\r\n        translationService.instant('hawle-dashboard.assign-event-mandatory'), 2000,\r\n        'top', 'left', widgetContext.toastTargetId);\r\n        return;\r\n    }\r\n    if(!currentEntityValue.notificationType || \r\n        (currentEntityValue.notificationType && !currentEntityValue.notificationType.length)) {\r\n        widgetContext.showToast('error',\r\n        translationService.instant('hawle-dashboard.assign-notification-type-mandatory'), 2000,\r\n        'top', 'left', widgetContext.toastTargetId);\r\n        return;\r\n    }\r\n    \r\n    const fromDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateFrom, currentEntityValue.timeFrom);\r\n    const toDate = currentEntityValue.dateTo ? getMsTimeAfterAddTimeInDate(currentEntityValue.dateTo, currentEntityValue.timeTo) : 0;\r\n    const nowDate = new Date().getTime();\r\n    if(   toDate > 0 && \r\n        ((toDate < fromDate) || (toDate < nowDate))\r\n    ) {\r\n        widgetContext.showToast('error',\r\n            translationService.instant('hawle-dashboard.invalid-date-selection'), 2000,\r\n            'top', 'left');\r\n        return;\r\n    }\r\n    \r\n    let currentEntityValueRoleList = currentEntityValue.roleList ? currentEntityValue.roleList.map((role) => JSON.parse(role)) : [];\r\n    let currentEntityValueUserList = currentEntityValue.userList ? currentEntityValue.userList.map((user) => JSON.parse(user)) : [];\r\n    entityService.getEntity(currentEntityId.entityType, currentEntityId.id).pipe().subscribe((entityInfo) => {\r\n        if (entityInfo) {\r\n            entityInfo.name = currentEntityValue.name;\r\n            entityInfo.id = null;\r\n            assetService.saveAsset(entityInfo).pipe().subscribe((entity) => {\r\n\r\n                const notificationType = currentEntityValue.notificationType ? currentEntityValue.notificationType : [];\r\n                const serverAttributesPayload = {\r\n                    fromDate: fromDate,\r\n                    toDate: toDate,\r\n                    isActive: currentEntityValue.isAlarmActive,\r\n                    userGroups: currentEntityValueRoleList,\r\n                    users: currentEntityValueUserList,\r\n                    alarmDefinition: {\r\n                        alarmState: {\r\n                            isActive: currentEntityValue.isAlarmActive,\r\n                            fromDate: fromDate,\r\n                            toDate: toDate\r\n                        },\r\n                        eventType: {\r\n                            alarmOpen: currentEntityValue.eventList.includes(\"open\"),\r\n                            alarmLowBattery: currentEntityValue.eventList.includes(\"lowBattery\"),\r\n                            alarmNoSignal: currentEntityValue.eventList.includes(\"noSignal\"),\r\n                            alarmClose: currentEntityValue.eventList.includes(\"close\")\r\n                        },\r\n                        notification: {\r\n                            email: notificationType.includes(\"email\"),\r\n                            sms: notificationType.includes(\"sms\"),\r\n                            delay: currentEntityValue.notificationDelay * 60000,\r\n                            reNotificationOnMissingAck: currentEntityValue.reNotificationDelay * 60000 || null\r\n                        }\r\n                    }\r\n                }\r\n                saveServerAttributes(serverAttributesPayload, \"ASSET\", entity.id.id).subscribe((serverAttributes) => {\r\n                    const relationPayload = []\r\n                    if(currentEntityValue.hydrantList) {\r\n                        currentEntityValue.hydrantList.forEach((hydrantId) => {\r\n                            relationPayload.push({\r\n                                \"type\": \"ManagesAlarms\",\r\n                                'from':  entity.id,\r\n                                'to': {\r\n                                    'entityType': 'ASSET',\r\n                                    'id': hydrantId\r\n                                },\r\n                            })\r\n                        });\r\n                    }\r\n                    if(currentEntityValue.zoneList) {\r\n                        currentEntityValue.zoneList.forEach((zoneId) => {\r\n                            relationPayload.push({\r\n                                \"type\": \"ManagesAlarms\",\r\n                                'from':  entity.id,\r\n                                'to': {\r\n                                    'entityType': 'ASSET',\r\n                                    'id': zoneId\r\n                                },\r\n                            })\r\n                        });\r\n                    }\r\n                    if(currentEntityValueUserList) {\r\n                        currentEntityValueUserList.forEach((user) => {\r\n                            relationPayload.push({\r\n                                \"type\": \"Owns\",\r\n                                'to':  entity.id,\r\n                                'from': {\r\n                                    'entityType': 'USER',\r\n                                    'id': user.id\r\n                                },\r\n                            })\r\n                        })\r\n                    }\r\n                    if(currentEntityValueRoleList) {\r\n                        currentEntityValueRoleList.forEach((role) => {\r\n                            relationPayload.push({\r\n                                \"type\": \"Owns\",\r\n                                'to':  entity.id,\r\n                                'from': {\r\n                                    'entityType': 'ENTITY_GROUP',\r\n                                    'id': role.id\r\n                                },\r\n                            })\r\n                        })\r\n                    }\r\n                    saveEntityRelations(relationPayload).subscribe((relations) => {\r\n                        rxjs.forkJoin([\r\n                            ...(Array.isArray(currentEntityValueRoleList) ? currentEntityValueRoleList : []).map(role => {\r\n                                const userServerAttributesPayload = {}\r\n                                userServerAttributesPayload[`alarmDefinition_${entity.id.id}`] = {\r\n                                    name: currentEntityValue.name,\r\n                                    id: entity.id.id\r\n                                }\r\n                                return saveServerAttributes(userServerAttributesPayload, \"ENTITY_GROUP\", role.id)\r\n                            }),\r\n                            ...(Array.isArray(currentEntityValueUserList) ? currentEntityValueUserList : []).map(user => {\r\n                                const userServerAttributesPayload = {}\r\n                                userServerAttributesPayload[`alarmDefinition_${entity.id.id}`] = {\r\n                                    name: currentEntityValue.name,\r\n                                    id: entity.id.id\r\n                                }\r\n                                return saveServerAttributes(userServerAttributesPayload, \"USER\", user.id)\r\n                            })\r\n                        ]).subscribe((response) => {\r\n                            widgetContext.showToast('success',\r\n                                translationService.instant('hawle-dashboard.alarm-definition-saved-successfully'), 2000,\r\n                                'top', 'left');\r\n                            openDashboardState('all_alarm_definitions');\r\n                            widgetContext.updateAliases();\r\n                        });\r\n                        //   widgetContext.updateAliases();\r\n                        //     openDashboardState('all_alarm_definitions');\r\n                        // saveServerAttributes(serverAttributesPayload, \"ASSET\", entity.id.id).subscribe((serverAttributes) => {\r\n                        // customDialog.showAlert(translationService.instant('asset.saved'), true).subscribe(() => {\r\n                        //     widgetContext.close();\r\n                        // });\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.updateState(statedId, params);\r\n    }\r\n}\r\nfunction getEntityServerAttributes(entityId = {entityType:null, id: null}) {\r\n    return attributeService.getEntityAttributes({ entityType: entityId.entityType, id: entityId.id }, \"SERVER_SCOPE\").pipe(rxjs.map((response) => {\r\n      const result = {};\r\n      if (response.length === 0) {\r\n        return result;\r\n      }\r\n      response.forEach((entity) => {\r\n        result[entity.key] = entity.value;\r\n      });\r\n      return result;\r\n    }));\r\n  }\r\n  function deleteBulkEntityRelations(relationPayload=[]) {\r\n    let url = `/api/relationsByType`;\r\n    return http.post(url, relationPayload);\r\n}\r\n\r\n  function removePreviousEntityGroupServerAttributesAndAllRelations() {\r\n    return getEntityServerAttributes(currentEntityId).pipe(rxjs.mergeMap((serverAttributes) => {\r\n        const calls = [];\r\n        if (Array.isArray(serverAttributes.userGroups)) {\r\n            serverAttributes.userGroups.forEach((userGroup) => {\r\n                calls.push(attributeService.deleteEntityAttributes({ entityType: 'ENTITY_GROUP', id: userGroup.id }, 'SERVER_SCOPE', [{\r\n                    key: `alarmDefinition_${currentEntityId.id}`,\r\n                    value: {}\r\n                }]));\r\n            });\r\n        }\r\n        if (Array.isArray(serverAttributes.users)) {\r\n            serverAttributes.users.forEach((user) => {\r\n                calls.push(attributeService.deleteEntityAttributes({ entityType: 'USER', id: user.id }, 'SERVER_SCOPE', [{\r\n                    key: `alarmDefinition_${currentEntityId.id}`,\r\n                    value: {}\r\n                }]));\r\n            });\r\n        }\r\n        const deleteBulkEntityRelationsPayload = [\r\n            {\r\n                fromId: currentEntityId.id,\r\n                fromType: \"ASSET\",\r\n                relationType: \"ManagesAlarms\"\r\n            },\r\n            {\r\n                toId: currentEntityId.id,\r\n                toType: \"ASSET\",\r\n                relationType: \"Owns\"\r\n            }\r\n        ]\r\n        calls.push(deleteBulkEntityRelations(deleteBulkEntityRelationsPayload));\r\n        return rxjs.forkJoin(calls);\r\n    }));\r\n  }\r\n\r\nmain()"
          },
          "title": "New Generic Form Builder v1.0",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "7f42ebb4-f81c-298f-aae8-d868a60d338d"
      },
      "80412516-56d5-3928-469f-d16fe4d7b1c2": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.7930822331292313
                },
                {
                  "name": "hydrantsBrand",
                  "type": "attribute",
                  "label": "hydrantsBrand",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.1944432846855082
                },
                {
                  "name": "hydrantId",
                  "type": "attribute",
                  "label": "hydrantId",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.05678378930344352
                },
                {
                  "name": "hydrantNumber",
                  "type": "attribute",
                  "label": "hydrantNumber",
                  "color": "#ffc107",
                  "settings": {},
                  "_hash": 0.899029475361637
                },
                {
                  "name": "country",
                  "type": "attribute",
                  "label": "country",
                  "color": "#607d8b",
                  "settings": {},
                  "_hash": 0.979913481722648
                },
                {
                  "name": "zip",
                  "type": "attribute",
                  "label": "zip",
                  "color": "#9c27b0",
                  "settings": {},
                  "_hash": 0.47077374368741043
                },
                {
                  "name": "city",
                  "type": "attribute",
                  "label": "city",
                  "color": "#8bc34a",
                  "settings": {},
                  "_hash": 0.31548533710310145
                },
                {
                  "name": "state",
                  "type": "attribute",
                  "label": "state",
                  "color": "#3f51b5",
                  "settings": {},
                  "_hash": 0.13421357148902247
                },
                {
                  "name": "street",
                  "type": "attribute",
                  "label": "street",
                  "color": "#e91e63",
                  "settings": {},
                  "_hash": 0.016835387256123324
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": true,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": false,
            "isExternalBtn": true,
            "externalBtnName": "Save & Add Alarm Definition",
            "externalBtnFunction": "console.log(formData);\r\nconsole.log(widgetContext);\r\nconsole.log(stepsSettings);\r\n\r\nconst hydrantId = widgetContext.datasources[0].entity.id;\r\nconst $injector = widgetContext.$scope.$injector;\r\nconst rxjs = widgetContext.rxjs;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    'http'));\r\nconst attributeService = $injector.get(widgetContext\r\n    .servicesMap.get('attributeService'));\r\nconst entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\nconst url = '/api/entityGroups/ASSET';\r\nconst urlEntitiesQuery = `/api/entitiesQuery/find`;\r\nconst hydrantRelatedData = widgetContext.data.reduce((result, entry) => {\r\n    result[entry.dataKey.name] = entry.data[0][1];\r\n    return result;\r\n}, {});\r\nlet dstorzCountForHydrant = 0;\r\n\r\n\r\nlet selectedFormValue = {\r\n    exit1Option: formData.value['exit1Option'] || null,\r\n    exit1DStorz: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).value : null,\r\n    exit1DStorzSerialNumber: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).name : null,\r\n    exit1DStorzName: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).originalName : null,\r\n    exit1line1: formData.value['exit1line1'] || null,\r\n    exit1line2: formData.value['exit1line2'] || null,\r\n    exit2Option: formData.value['exit2Option'] || null,\r\n    exit2DStorz: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).value : null,\r\n    exit2DStorzSerialNumber: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).name : null,\r\n    exit2DStorzName: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).originalName : null,\r\n    exit2line1: formData.value['exit2line1'] || null,\r\n    exit2line2: formData.value['exit2line2'] || null,\r\n    exit3Option: formData.value['exit3Option'] || null,\r\n    exit3DStorz: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).value : null,\r\n    exit3DStorzSerialNumber: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).name : null,\r\n    exit3DStorzName: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).originalName : null,\r\n    exit3line1: formData.value['exit3line1'] || null,\r\n    exit3line2: formData.value['exit3line2'] || null\r\n}\r\n\r\nlet errorList = [];\r\n\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        type: \"relationsQuery\",\r\n        rootEntity: {\r\n            entityType: \"ASSET\",\r\n            id: hydrantId.id\r\n        },\r\n        direction: \"FROM\",\r\n        maxLevel: 1,\r\n        fetchLastLevelOnly: true,\r\n        filters: [\r\n            {\r\n                relationType: \"Contains\",\r\n                entityTypes: [\r\n                    \"ASSET\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"description\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitDiameter\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitDiameterUnit\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitName\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nconst hydrantRelatedAttributesPayload = [{\r\n    key: 'hydrantNumber',\r\n    value: hydrantRelatedData.hydrantNumber\r\n},\r\n{\r\n    key: 'hydrantId',\r\n    value: hydrantRelatedData.hydrantId\r\n},\r\n{\r\n    key: 'hydrantsBrand',\r\n    value: hydrantRelatedData.hydrantsBrand\r\n},\r\n{\r\n    key: 'country',\r\n    value: hydrantRelatedData.country\r\n},\r\n{\r\n    key: 'zip',\r\n    value: hydrantRelatedData.zip\r\n},\r\n{\r\n    key: 'city',\r\n    value: hydrantRelatedData.city\r\n},\r\n{\r\n    key: 'street',\r\n    value: hydrantRelatedData.street\r\n}\r\n]\r\n\r\n\r\nif (!selectedFormValue.exit1Option && !selectedFormValue.exit2Option && !selectedFormValue.exit3Option) {\r\n    widgetContext.showToast('warn',\r\n        \"DStorz Option not selected yet\",\r\n        2000,\r\n        'top', 'left');\r\n} else {\r\n    if ((selectedFormValue.exit1Option === 'fromExisting' && !selectedFormValue.exit1DStorz) || (selectedFormValue.exit2Option === 'fromExisting' && !selectedFormValue.exit2DStorz) || (selectedFormValue.exit3Option === 'fromExisting' && !selectedFormValue.exit3DStorz)) {\r\n        widgetContext.showToast('warn',\r\n            \"Please select DStorz Correctly\",\r\n            2000,\r\n            'top', 'left');\r\n    } else if (hasDuplicates([selectedFormValue.exit1DStorz, selectedFormValue.exit2DStorz, selectedFormValue.exit3DStorz])) {\r\n        widgetContext.showToast('warn',\r\n            \"You can't choose same D-Storz for multiple Storz\",\r\n            2000,\r\n            'top', 'left');\r\n    } else {\r\n        const storzList$ = http.post(urlEntitiesQuery, relatedStorzQuery).pipe();\r\n        storzList$.subscribe((storzList) => {\r\n            if (storzList && storzList.data && storzList.data.length) {\r\n                const storzIdList = [];\r\n                storzIdList[0] = storzList && storzList.data && storzList.data.length > 0 ? storzList.data[0].entityId.id : \"\";\r\n                storzIdList[1] = storzList && storzList.data && storzList.data.length > 1 ? storzList.data[1].entityId.id : \"\";\r\n                storzIdList[2] = storzList && storzList.data && storzList.data.length > 2 ? storzList.data[2].entityId.id : \"\";\r\n                widgetContext.isGenericLoading$.next(true);\r\n\r\n                if (storzIdList && storzIdList.length) {\r\n                    var storzProcessed = new Promise((resolve, reject) => {\r\n                        storzIdList.forEach((storzId, index, array) => {\r\n                            const optionName = `exit${index + 1}Option`;\r\n                            if (selectedFormValue[optionName] === 'fromExisting') {\r\n                                const name = `exit${index + 1}DStorz`;\r\n                                checkDStorzRelationWithHydrant(selectedFormValue[name]).subscribe((isValid) => {\r\n                                    if (!storzId) {\r\n                                        errorList.push(`Exit ${index}: This exit does not exist on hydrant`)\r\n                                    } else if (isValid && selectedFormValue[name] && storzId) {\r\n                                        const line1 = `exit${index}line1`;\r\n                                        const line2 = `exit${index}line2`\r\n                                        let currentStorz = storzList.data.find(storzEntity => storzEntity.entityId.id == storzId)\r\n                                        hydrantRelatedAttributesPayload.push(\r\n                                            {\r\n                                                key: 'exitNode',\r\n                                                value: currentStorz.latest.SERVER_ATTRIBUTE.exitDiameter.value + (currentStorz.latest.SERVER_ATTRIBUTE.exitDiameterUnit.value || 'mm') + ', ' + currentStorz.latest.SERVER_ATTRIBUTE.exitName.value\r\n                                            }\r\n                                        )\r\n                                        saveEntityAttributes(selectedFormValue[name], hydrantRelatedAttributesPayload, 'DEVICE').subscribe(() => { });\r\n\r\n                         saveEntityAttributes(storzId, [\r\n                                            {   \r\n                                                key: \"assignedDStorz\", \r\n                                                value: selectedFormValue[`${name}Name`] \r\n                                            },\r\n                                            {   \r\n                                                key: \"assignedDStorzSerialNumber\", \r\n                                                value: selectedFormValue[`${name}SerialNumber`]\r\n                                            }\r\n                                            ] ).subscribe(() => { });\r\n\r\n                                        saveRelationWithDStorz(storzId, selectedFormValue[name]).subscribe(() => { dstorzCountForHydrant++; });\r\n                                    } else {\r\n                                        errorList.push(`Exit ${index}: This device is already connected with hydrant`)\r\n                                    }\r\n                                })\r\n                            } else if (selectedFormValue[optionName] === 'new') {\r\n                                if (checkPermission()) {\r\n                                    const line1 = `exit${index + 1}line1`;\r\n                                    const line2 = `exit${index + 1}line2`\r\n                                    if(selectedFormValue[line1] && selectedFormValue[line1].length < 6) {\r\n                                        widgetContext.showToast('warn',\r\n                                        translationService.instant(\"hawle-dashboard.line-one-value-should-be-six-character-long\"), 2000,\r\n                                        'top', 'left', widgetContext.toastTargetId);\r\n                                        return;\r\n                                    } else if(selectedFormValue[line2] && selectedFormValue[line2].length < 6) {\r\n                                        widgetContext.showToast('warn',\r\n                                        translationService.instant(\"hawle-dashboard.line-two-value-should-be-six-character-long\"), 2000,\r\n                                        'top', 'left', widgetContext.toastTargetId);\r\n                                        return;\r\n                                    } else {\r\n                                        executeClaim(selectedFormValue[line1], selectedFormValue[line2], index + 1, storzList, storzId);\r\n                                    }\r\n                                } else {\r\n                                    errorList.push(`Exit ${index}: You don't need to claim your own device.`)\r\n                                }\r\n                            }\r\n                            if (index === array.length - 1) resolve();\r\n                        });\r\n                    });\r\n\r\n                    storzProcessed.then(() => {\r\n                        setTimeout(() => {\r\n                            widgetContext.isGenericLoading$.next(false)\r\n                            if (errorList && errorList.length) {\r\n                                const content = errorList.join('\\n\\n');\r\n                                const title = 'Unable to assigning all d-storz';\r\n                                showAlertDialog(title, content)\r\n                            } else {\r\n                                widgetContext.showToast('success',\r\n                                    \"All Device assigned successfully \",\r\n                                    2000,\r\n                                    'top', 'left');\r\n                            }\r\n                            saveActiveTelemetry('ASSET', hydrantId.id).subscribe();\r\n                            saveEntityAttributes(hydrantId.id, [{\r\n                                key: \"dstorzCount\",\r\n                                value: dstorzCountForHydrant\r\n                            }]).subscribe();\r\n                            openDashboardState(widgetContext.datasources[0].entity, 'alarm_definition_from_hydrant');\r\n                        }, 2000)\r\n                    })\r\n\r\n                }\r\n            } else {\r\n                widgetContext.showToast('warn',\r\n                    \"You need storz to attach d-storz\",\r\n                    2000,\r\n                    'top', 'left');\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction executeClaim(line1, line2, index, storzList, storzId) {\r\n    const serialNumber =\r\n        `${line1}${line2}`;\r\n    validateSerialNumber(serialNumber).subscribe((\r\n        validationResponse) => {\r\n        if (validationResponse && validationResponse\r\n            .device && validationResponse\r\n                .deviceCredentials) {\r\n            const deviceToken = validationResponse\r\n                .deviceCredentials.credentialsId;\r\n            const deviceName = validationResponse\r\n                .device.name;\r\n            const deviceId = validationResponse\r\n                .device.id.id;\r\n            saveSecretKeyInDevice(deviceToken, \"\")\r\n                .subscribe((\r\n                    saveDeviceInfoResponse) => {\r\n                    claimDeviceToCustomer(\r\n                        deviceName, \"\")\r\n                        .subscribe((\r\n                            claimResponse\r\n                        ) => {\r\n                            \r\n                            sendToRuleEngine(deviceId, deviceName).subscribe(() => {});\r\n                            \r\n                            let currentStorz = storzList.data.find(storzEntity => storzEntity.entityId.id == storzId);\r\n                            const line1 = `exit${index}line1`;\r\n                            const line2 = `exit${index}line2`;\r\n                            hydrantRelatedAttributesPayload.push(\r\n                                {\r\n                                    key: 'exitNode',\r\n                                    value: currentStorz.latest.SERVER_ATTRIBUTE.exitDiameter.value + (currentStorz.latest.SERVER_ATTRIBUTE.exitDiameterUnit.value || 'mm') + ', ' + currentStorz.latest.SERVER_ATTRIBUTE.exitName.value\r\n                                }\r\n                            )\r\n                            saveEntityAttributes(deviceId, hydrantRelatedAttributesPayload, 'DEVICE').subscribe(() => { });\r\n\r\n                            saveEntityAttributes(storzId, [\r\n                            {   \r\n                                key: \"assignedDStorz\", \r\n                                value: selectedFormValue[`${name}Name`] \r\n                            },\r\n                            {   \r\n                                key: \"assignedDStorzSerialNumber\", \r\n                                value: `${selectedFormValue[line1]}${selectedFormValue[line2]}`\r\n                            }\r\n                            ] ).subscribe(() => { });\r\n                            \r\n                            saveRelationWithDStorz(storzId, deviceId).subscribe(() => { \r\n                                dstorzCountForHydrant++;\r\n                                \r\n                                // assign dstorz;\r\n                                const sendToRuleEngineKey = \"resetAlarm\";\r\n                                const sendToRuleEngineURL = `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=${sendToRuleEngineKey}`;\r\n                                const sendToRuleEngineBody = {\r\n                                    \"msg\": null,\r\n                                    \"metadata\": {\r\n                                        \"deviceName\": deviceName,\r\n                                        \"deviceType\": \"d-storz\",\r\n                                        \"operationType\": \"ASSIGN\"\r\n                                    }\r\n                                }\r\n                                http.post(sendToRuleEngineURL, sendToRuleEngineBody).pipe().subscribe(() => { })\r\n                            });\r\n                        })\r\n                })\r\n        } else {\r\n            errorList.push(`Exit ${index}: Could not found any device with this serial number`)\r\n        }\r\n    })\r\n}\r\n\r\nfunction validateSerialNumber(serialNumber) {\r\n    const apiURL =\r\n        `/api/device/deviceInfo/serverAttribute?serverAttributeKey=serialNumber&serverAttributeValue=${serialNumber}`;\r\n    return http.get(apiURL).pipe();\r\n}\r\n\r\nfunction saveSecretKeyInDevice(deviceToken, secretKey) {\r\n    const payload = {\r\n        \"secretKey\": secretKey\r\n    }\r\n    const apiURL = `/api/v1/${deviceToken}/claim`;\r\n    return http.post(apiURL, payload).pipe();\r\n}\r\n\r\nfunction claimDeviceToCustomer(deviceName, secretKey) {\r\n    const payload = {\r\n        \"secretKey\": secretKey\r\n    }\r\n    const apiURL =\r\n        `/api/customer/device/${deviceName}/claim`;\r\n    return http.post(apiURL, payload).pipe();\r\n}\r\n\r\nfunction checkPermission() {\r\n    const authority = widgetContext.currentUser.authority;\r\n    if (authority === \"CUSTOMER_USER\") return true\r\n    return false;\r\n}\r\n\r\nfunction openDashboardState(element, statedId) {\r\n    // widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n\r\n    var params = {\r\n        entityLabel: element.name,\r\n        entityName: element.name,\r\n        entityId: {\r\n            id: element.id.id,\r\n            entityType: element.id.entityType\r\n        }\r\n    };\r\n\r\n    if (currentState !== statedId) {\r\n        widgetContext.stateController.updateState(statedId, params);\r\n    }\r\n}\r\n\r\nfunction saveRelationWithDStorz(storzId, dstorzId) {\r\n    return entityRelationService.saveRelation({\r\n        from: {\r\n            entityType: \"ASSET\",\r\n            id: storzId\r\n        },\r\n        to: {\r\n            entityType: \"DEVICE\",\r\n            id: dstorzId\r\n        },\r\n        type: \"Contains\",\r\n        typeGroup: \"COMMON\"\r\n    });\r\n}\r\n\r\nfunction saveActiveTelemetry(entityType, entityId) {\r\n    var timeSeriesUrl =\r\n        `/api/plugins/telemetry/${entityType}/${entityId}/timeseries/ANY`;\r\n    return http.post(timeSeriesUrl, {\r\n        isNoSignal: true,\r\n        isInactive: true,\r\n        isNotAssigned: false\r\n    });\r\n}\r\n\r\nfunction checkDStorzRelationWithHydrant(dStorzId) {\r\n    const relationQuery = {\r\n        \"entityFields\": [\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"name\"\r\n            },\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"type\"\r\n            }\r\n        ],\r\n        \"latestValues\": [],\r\n        \"entityFilter\": {\r\n            \"type\": \"relationsQuery\",\r\n            \"rootEntity\": {\r\n                \"entityType\": \"DEVICE\",\r\n                \"id\": dStorzId\r\n            },\r\n            \"direction\": \"TO\",\r\n            \"maxLevel\": 2,\r\n            \"fetchLastLevelOnly\": false,\r\n            \"filters\": [\r\n                {\r\n                    \"relationType\": \"Contains\",\r\n                    \"entityTypes\": [\r\n                        \"ASSET\"\r\n                    ],\r\n                }\r\n            ]\r\n        },\r\n        \"pageLink\": {\r\n            \"dynamic\": false,\r\n            \"pageSize\": 10,\r\n            \"page\": 0,\r\n            \"textSearch\": null,\r\n            \"sortOrder\": {\r\n                \"key\": {\r\n                    \"type\": \"ENTITY_FIELD\",\r\n                    \"key\": \"createdTime\"\r\n                },\r\n                \"direction\": \"DESC\"\r\n            }\r\n        }\r\n    }\r\n    return http.post(urlEntitiesQuery, relationQuery).pipe(rxjs.map((dStrozRelationResponse) => {\r\n        return (dStrozRelationResponse && dStrozRelationResponse.data && dStrozRelationResponse.data.length) ? false : true;\r\n    }));\r\n}\r\n\r\nfunction showAlertDialog(title, content) {\r\n    setTimeout(() => {\r\n        const className = [];\r\n        widgetContext.dialogs.customAlert(title, content, null, className).subscribe((alertResponse) => {\r\n\r\n        });\r\n    }, 100);\r\n}\r\n\r\nfunction saveEntityAttributes(entityId, attributes, entityType = \"ASSET\") {\r\n    return attributeService.saveEntityAttributes({ entityType: entityType, id: entityId }, \"SERVER_SCOPE\", attributes);\r\n}\r\n\r\nfunction hasDuplicates(arr) {\r\n  const nonNullArray = arr.filter(item => item !== null);\r\n  const uniqueSet = new Set(nonNullArray);\r\n  return nonNullArray.length !== uniqueSet.size;\r\n}\r\n\r\nfunction sendToRuleEngine(deviceId, deviceName) {\r\n    const apiURL =\r\n        `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=swisscom`;\r\n    const payload = {\r\n        \"msg\": null,\r\n        \"metadata\": {\r\n            \"deviceName\": deviceName,\r\n            \"deviceType\": \"d-storz\",\r\n            \"operationType\": \"CREATE\"\r\n        }\r\n    }\r\n    return http.post(apiURL, payload).pipe();\r\n}",
            "formName": "Add D-Storz for Hydrant",
            "steps": [
              {
                "stepName": "D-Storz",
                "formFields": [
                  {
                    "label": "Field 1",
                    "fieldName": "step0field1",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Exit 1</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Exit 1</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Choose a option",
                    "fieldName": "exit1Option",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"From Existing List\", value: \"fromExisting\", dependencyFor: ['exit1DStorz'] },\n    {name: \"Add new\", value: \"new\", dependencyFor: ['exit1line1', 'exit1line2'] }\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Select from the list",
                    "fieldName": "exit1DStorz",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "autoComplete",
                    "fieldAction": "const $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    \"http\"));\r\nconst rxjs = widgetContext.rxjs;\r\n\r\nconst urlEntitiesURL = `/api/entitiesQuery/find`;\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        deviceNameFilter: \"\",\r\n        deviceType: \"d-storz\",\r\n        resolveMultiple: true,\r\n        type: \"deviceType\"\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"serialNumber\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 20,\r\n        textSearch: searchTerm && searchTerm.trim() ? searchTerm.trim() : '',\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nreturn http.post(urlEntitiesURL, relatedStorzQuery).pipe(rxjs.debounceTime(150),\r\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\r\n        response\r\n            .data.map(\r\n                data => ({\r\n                    name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                    value: JSON.stringify({\r\n                        originalName: data.latest.ENTITY_FIELD.name.value,\r\n                        name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                        value: data.entityId.id\r\n                    })\r\n                }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Line 1",
                    "fieldName": "exit1line1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Line 2",
                    "fieldName": "exit1line2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 6",
                    "fieldName": "step0field6",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Exit 2</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Exit 2</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Choose a option",
                    "fieldName": "exit2Option",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"From Existing List\", value: \"fromExisting\", dependencyFor: ['exit2DStorz']},\n    {name: \"Add new\", value: \"new\", dependencyFor: ['exit2line1', 'exit2line2']}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Select from the list",
                    "fieldName": "exit2DStorz",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "autoComplete",
                    "fieldAction": "const $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    \"http\"));\r\nconst rxjs = widgetContext.rxjs;\r\n\r\nconst urlEntitiesURL = `/api/entitiesQuery/find`;\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        deviceNameFilter: \"\",\r\n        deviceType: \"d-storz\",\r\n        resolveMultiple: true,\r\n        type: \"deviceType\"\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"serialNumber\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 20,\r\n        textSearch: searchTerm && searchTerm.trim() ? searchTerm.trim() : '',\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nreturn http.post(urlEntitiesURL, relatedStorzQuery).pipe(rxjs.debounceTime(150),\r\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\r\n        response\r\n            .data.map(\r\n                data => ({\r\n                    name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                    value: JSON.stringify({\r\n                        originalName: data.latest.ENTITY_FIELD.name.value,\r\n                        name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                        value: data.entityId.id\r\n                    })\r\n                }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Line 1",
                    "fieldName": "exit2line1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Line 2",
                    "fieldName": "exit2line2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 11",
                    "fieldName": "step0field11",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Exit 3</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Exit 3</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Choose a option",
                    "fieldName": "exit3Option",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"From Existing List\", value: \"fromExisting\", dependencyFor: ['exit3DStorz']},\n    {name: \"Add new\", value: \"new\", dependencyFor: ['exit3line1', 'exit3line2']}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Select from the list",
                    "fieldName": "exit3DStorz",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "autoComplete",
                    "fieldAction": "const $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    \"http\"));\r\nconst rxjs = widgetContext.rxjs;\r\n\r\nconst urlEntitiesURL = `/api/entitiesQuery/find`;\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        deviceNameFilter: \"\",\r\n        deviceType: \"d-storz\",\r\n        resolveMultiple: true,\r\n        type: \"deviceType\"\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"serialNumber\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 20,\r\n        textSearch: searchTerm && searchTerm.trim() ? searchTerm.trim() : '',\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nreturn http.post(urlEntitiesURL, relatedStorzQuery).pipe(rxjs.debounceTime(150),\r\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\r\n        response\r\n            .data.map(\r\n                data => ({\r\n                    name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                    value: JSON.stringify({\r\n                        originalName: data.latest.ENTITY_FIELD.name.value,\r\n                        name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                        value: data.entityId.id\r\n                    })\r\n                }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Line 1",
                    "fieldName": "exit3line1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Line 2",
                    "fieldName": "exit3line2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 16",
                    "fieldName": "step0field16",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div style=\"width:100%;height:100%; display: flex; justify-content: center; align-items: bottom;\">\n    <div style=\"height: 200px; width: 200px;\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&amp;st=2023-11-02T15:08:18Z&amp;se=2035-11-02T23:08:18Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n    \n    <div style=\"height: 250px; width: 200px\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_qr.png?sp=r&amp;st=2023-11-02T15:08:45Z&amp;se=2035-11-02T23:08:45Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=lWjN20%2FcXQugQxx9QuU9HbBmbNwkiFQPmjRZT%2BdZ0O4%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n</div>\n<div style=\"text-align: center; margin-bottom: 30px;\">\n    <div>\n       <b style=\"margin: 0 auto;\">Where to find Line 1 & Line 2 ?</b> \n    </div>\n    <div style=\"margin: 0 auto;\">\n         They are under the QR code of your D-Storz\n    </div>\n</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div style=\"width:100%;height:100%; display: flex; justify-content: center; align-items: bottom;\">\n    <div style=\"height: 200px; width: 200px;\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&amp;st=2023-11-02T15:08:18Z&amp;se=2035-11-02T23:08:18Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n    \n    <div style=\"height: 250px; width: 200px\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_qr.png?sp=r&amp;st=2023-11-02T15:08:45Z&amp;se=2035-11-02T23:08:45Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=lWjN20%2FcXQugQxx9QuU9HbBmbNwkiFQPmjRZT%2BdZ0O4%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n</div>\n<div style=\"text-align: center; margin-bottom: 30px;\">\n    <div>\n       <b style=\"margin: 0 auto;\">Where to find Line 1 & Line 2 ?</b> \n    </div>\n    <div style=\"margin: 0 auto;\">\n         They are under the QR code of your D-Storz\n    </div>\n</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              }
            ],
            "genericFormFunction": "console.log(formData);\r\nconsole.log(widgetContext);\r\nconsole.log(stepsSettings);\r\n\r\nconst hydrantId = widgetContext.datasources[0].entity.id;\r\nconst $injector = widgetContext.$scope.$injector;\r\nconst rxjs = widgetContext.rxjs;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    'http'));\r\nconst attributeService = $injector.get(widgetContext\r\n    .servicesMap.get('attributeService'));\r\nconst entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\nconst url = '/api/entityGroups/ASSET';\r\nconst urlEntitiesQuery = `/api/entitiesQuery/find`;\r\nconst hydrantRelatedData = widgetContext.data.reduce((result, entry) => {\r\n    result[entry.dataKey.name] = entry.data[0][1];\r\n    return result;\r\n}, {});\r\nlet dstorzCountForHydrant = 0;\r\n\r\nlet selectedFormValue = {\r\n    exit1Option: formData.value['exit1Option'] || null,\r\n    exit1DStorz: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).value : null,\r\n    exit1DStorzSerialNumber: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).name : null,\r\n    exit1DStorzName: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).originalName : null,\r\n    exit1line1: formData.value['exit1line1'] || null,\r\n    exit1line2: formData.value['exit1line2'] || null,\r\n    exit2Option: formData.value['exit2Option'] || null,\r\n    exit2DStorz: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).value : null,\r\n    exit2DStorzSerialNumber: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).name : null,\r\n    exit2DStorzName: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).originalName : null,\r\n    exit2line1: formData.value['exit2line1'] || null,\r\n    exit2line2: formData.value['exit2line2'] || null,\r\n    exit3Option: formData.value['exit3Option'] || null,\r\n    exit3DStorz: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).value : null,\r\n    exit3DStorzSerialNumber: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).name : null,\r\n    exit3DStorzName: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).originalName : null,\r\n    exit3line1: formData.value['exit3line1'] || null,\r\n    exit3line2: formData.value['exit3line2'] || null\r\n}\r\n\r\nlet errorList = [];\r\n\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        type: \"relationsQuery\",\r\n        rootEntity: {\r\n            entityType: \"ASSET\",\r\n            id: hydrantId.id\r\n        },\r\n        direction: \"FROM\",\r\n        maxLevel: 1,\r\n        fetchLastLevelOnly: true,\r\n        filters: [\r\n            {\r\n                relationType: \"Contains\",\r\n                entityTypes: [\r\n                    \"ASSET\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"description\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitDiameter\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitDiameterUnit\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitName\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nconst hydrantRelatedAttributesPayload = [{\r\n    key: 'hydrantNumber',\r\n    value: hydrantRelatedData.hydrantNumber\r\n},\r\n{\r\n    key: 'hydrantId',\r\n    value: hydrantRelatedData.hydrantId\r\n},\r\n{\r\n    key: 'hydrantsBrand',\r\n    value: hydrantRelatedData.hydrantsBrand\r\n},\r\n{\r\n    key: 'country',\r\n    value: hydrantRelatedData.country\r\n},\r\n{\r\n    key: 'zip',\r\n    value: hydrantRelatedData.zip\r\n},\r\n{\r\n    key: 'city',\r\n    value: hydrantRelatedData.city\r\n},\r\n{\r\n    key: 'street',\r\n    value: hydrantRelatedData.street\r\n}\r\n]\r\n\r\n\r\nif (!selectedFormValue.exit1Option && !selectedFormValue.exit2Option && !selectedFormValue.exit3Option) {\r\n    widgetContext.showToast('warn',\r\n        \"DStorz Option not selected yet\",\r\n        2000,\r\n        'top', 'left');\r\n} else {\r\n    if ((selectedFormValue.exit1Option === 'fromExisting' && !selectedFormValue.exit1DStorz) || (selectedFormValue.exit2Option === 'fromExisting' && !selectedFormValue.exit2DStorz) || (selectedFormValue.exit3Option === 'fromExisting' && !selectedFormValue.exit3DStorz)) {\r\n        widgetContext.showToast('warn',\r\n            \"Please select DStorz Correctly\",\r\n            2000,\r\n            'top', 'left');\r\n    } else if (hasDuplicates([selectedFormValue.exit1DStorz, selectedFormValue.exit2DStorz, selectedFormValue.exit3DStorz])) {\r\n        widgetContext.showToast('warn',\r\n            \"You can't choose same D-Storz for multiple Storz\",\r\n            2000,\r\n            'top', 'left');\r\n    } else {\r\n        const storzList$ = http.post(urlEntitiesQuery, relatedStorzQuery).pipe();\r\n        storzList$.subscribe((storzList) => {\r\n            if (storzList && storzList.data && storzList.data.length) {\r\n                const storzIdList = [];\r\n                storzIdList[0] = storzList && storzList.data && storzList.data.length > 0 ? storzList.data[0].entityId.id : \"\";\r\n                storzIdList[1] = storzList && storzList.data && storzList.data.length > 1 ? storzList.data[1].entityId.id : \"\";\r\n                storzIdList[2] = storzList && storzList.data && storzList.data.length > 2 ? storzList.data[2].entityId.id : \"\";\r\n                widgetContext.isGenericLoading$.next(true);\r\n\r\n                if (storzIdList && storzIdList.length) {\r\n                    var storzProcessed = new Promise((resolve, reject) => {\r\n                        storzIdList.forEach((storzId, index, array) => {\r\n                            const optionName = `exit${index + 1}Option`;\r\n                            if (selectedFormValue[optionName] === 'fromExisting') {\r\n                                const name = `exit${index + 1}DStorz`;\r\n                                checkDStorzRelationWithHydrant(selectedFormValue[name]).subscribe((isValid) => {\r\n                                    if (!storzId) {\r\n                                        errorList.push(`Exit ${index}: This exit does not exist on hydrant`)\r\n                                    } else if (isValid && selectedFormValue[name] && storzId) {\r\n                                        const line1 = `exit${index}line1`;\r\n                                        const line2 = `exit${index}line2`;\r\n                                        console.debug(selectedFormValue);\r\n                                        console.debug(line1 + \" \" + line2);\r\n                                        let currentStorz = storzList.data.find(storzEntity => storzEntity.entityId.id == storzId)\r\n                                        hydrantRelatedAttributesPayload.push(\r\n                                            {\r\n                                                key: 'exitNode',\r\n                                                value: currentStorz.latest.SERVER_ATTRIBUTE.exitDiameter.value + (currentStorz.latest.SERVER_ATTRIBUTE.exitDiameterUnit.value || 'mm') + ', ' + currentStorz.latest.SERVER_ATTRIBUTE.exitName.value\r\n                                            }\r\n                                        )\r\n                                        saveEntityAttributes(selectedFormValue[name], hydrantRelatedAttributesPayload, 'DEVICE').subscribe(() => { });\r\n\r\n                                        saveEntityAttributes(storzId, [\r\n                                            {   \r\n                                                key: \"assignedDStorz\", \r\n                                                value: selectedFormValue[`${name}Name`] \r\n                                            },\r\n                                            {   \r\n                                                key: \"assignedDStorzSerialNumber\", \r\n                                                value: selectedFormValue[`${name}SerialNumber`]\r\n                                            }\r\n                                            ] ).subscribe(() => { });\r\n\r\n                                        saveRelationWithDStorz(storzId, selectedFormValue[name]).subscribe(() => { dstorzCountForHydrant++; });\r\n                                    } else {\r\n                                        errorList.push(`Exit ${index}: This device is already connected with hydrant`)\r\n                                    }\r\n                                })\r\n                            } else if (selectedFormValue[optionName] === 'new') {\r\n                                if (checkPermission()) {\r\n                                    const line1 = `exit${index + 1}line1`;\r\n                                    const line2 = `exit${index + 1}line2`\r\n                                    if(selectedFormValue[line1] && selectedFormValue[line1].length < 6) {\r\n                                        widgetContext.showToast('warn',\r\n                                        translationService.instant(\"hawle-dashboard.line-one-value-should-be-six-character-long\"), 2000,\r\n                                        'top', 'left', widgetContext.toastTargetId);\r\n                                        return;\r\n                                    } else if(selectedFormValue[line2] && selectedFormValue[line2].length < 6) {\r\n                                        widgetContext.showToast('warn',\r\n                                        translationService.instant(\"hawle-dashboard.line-two-value-should-be-six-character-long\"), 2000,\r\n                                        'top', 'left', widgetContext.toastTargetId);\r\n                                        return;\r\n                                    } else {\r\n                                        executeClaim(selectedFormValue[line1], selectedFormValue[line2], index + 1, storzList, storzId);\r\n                                    }\r\n                                } else {\r\n                                    errorList.push(`Exit ${index}: You don't need to claim your own device.`)\r\n                                }\r\n                            }\r\n                            if (index === array.length - 1) resolve();\r\n                        });\r\n                    });\r\n\r\n                    storzProcessed.then(() => {\r\n                        setTimeout(() => {\r\n                            widgetContext.isGenericLoading$.next(false)\r\n                            if (errorList && errorList.length) {\r\n                                const content = errorList.join('\\n\\n');\r\n                                const title = 'Unable to assigning all d-storz';\r\n                                showAlertDialog(title, content)\r\n                            } else {\r\n                                widgetContext.showToast('success',\r\n                                    \"All Device assigned successfully \",\r\n                                    2000,\r\n                                    'top', 'left');\r\n                            }\r\n                            saveActiveTelemetry('ASSET', hydrantId.id).subscribe();\r\n                            saveEntityAttributes(hydrantId.id, [{\r\n                                key: \"dstorzCount\",\r\n                                value: dstorzCountForHydrant\r\n                            }]).subscribe();\r\n                            openDashboardState(\"all_hydrants\");\r\n                        }, 2000)\r\n                    })\r\n\r\n                }\r\n            } else {\r\n                widgetContext.showToast('warn',\r\n                    \"You need storz to attach d-storz\",\r\n                    2000,\r\n                    'top', 'left');\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction executeClaim(line1, line2, index, storzList, storzId) {\r\n    const serialNumber =\r\n        `${line1}${line2}`;\r\n    validateSerialNumber(serialNumber).subscribe((\r\n        validationResponse) => {\r\n        if (validationResponse && validationResponse\r\n            .device && validationResponse\r\n                .deviceCredentials) {\r\n            const deviceToken = validationResponse\r\n                .deviceCredentials.credentialsId;\r\n            const deviceName = validationResponse\r\n                .device.name;\r\n            const deviceId = validationResponse\r\n                .device.id.id;\r\n            saveSecretKeyInDevice(deviceToken, \"\")\r\n                .subscribe((\r\n                    saveDeviceInfoResponse) => {\r\n                    claimDeviceToCustomer(\r\n                        deviceName, \"\")\r\n                        .subscribe((\r\n                            claimResponse\r\n                        ) => {\r\n                            \r\n                            sendToRuleEngine(deviceId, deviceName).subscribe(() => {});\r\n                            \r\n                            let currentStorz = storzList.data.find(storzEntity => storzEntity.entityId.id == storzId);\r\n                            const line1 = `exit${index}line1`;\r\n                            const line2 = `exit${index}line2`;\r\n                            console.debug(selectedFormValue);\r\n                            console.debug(line1 + \" \" + line2);\r\n                            hydrantRelatedAttributesPayload.push(\r\n                                {\r\n                                    key: 'exitNode',\r\n                                    value: currentStorz.latest.SERVER_ATTRIBUTE.exitDiameter.value + (currentStorz.latest.SERVER_ATTRIBUTE.exitDiameterUnit.value || 'mm') + ', ' + currentStorz.latest.SERVER_ATTRIBUTE.exitName.value\r\n                                }\r\n                            )\r\n                            saveEntityAttributes(deviceId, hydrantRelatedAttributesPayload, 'DEVICE').subscribe(() => { });\r\n\r\n                            saveEntityAttributes(storzId, [\r\n                                {\r\n                                    key: \"assignedDStorz\", \r\n                                    value: deviceName \r\n                                },\r\n                                {   \r\n                                    key: \"assignedDStorzSerialNumber\", \r\n                                    value: `${selectedFormValue[line1]}${selectedFormValue[line2]}`\r\n                                }\r\n                            ] ).subscribe(() => { });\r\n                            \r\n                            saveRelationWithDStorz(storzId, deviceId).subscribe(() => {  \r\n                                dstorzCountForHydrant++; \r\n                                \r\n                                // assign dstorz;\r\n                                const sendToRuleEngineKey = \"resetAlarm\";\r\n                                const sendToRuleEngineURL = `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=${sendToRuleEngineKey}`;\r\n                                const sendToRuleEngineBody = {\r\n                                    \"msg\": null,\r\n                                    \"metadata\": {\r\n                                        \"deviceName\": deviceName,\r\n                                        \"deviceType\": \"d-storz\",\r\n                                        \"operationType\": \"ASSIGN\"\r\n                                    }\r\n                                }\r\n                                http.post(sendToRuleEngineURL, sendToRuleEngineBody).pipe().subscribe(() => { })\r\n                                \r\n                            });\r\n                        })\r\n                })\r\n        } else {\r\n            errorList.push(`Exit ${index}: Could not found any device with this serial number`)\r\n        }\r\n    })\r\n}\r\n\r\nfunction validateSerialNumber(serialNumber) {\r\n    const apiURL =\r\n        `/api/device/deviceInfo/serverAttribute?serverAttributeKey=serialNumber&serverAttributeValue=${serialNumber}`;\r\n    return http.get(apiURL).pipe();\r\n}\r\n\r\nfunction saveSecretKeyInDevice(deviceToken, secretKey) {\r\n    const payload = {\r\n        \"secretKey\": secretKey\r\n    }\r\n    const apiURL = `/api/v1/${deviceToken}/claim`;\r\n    return http.post(apiURL, payload).pipe();\r\n}\r\n\r\nfunction claimDeviceToCustomer(deviceName, secretKey) {\r\n    const payload = {\r\n        \"secretKey\": secretKey\r\n    }\r\n    const apiURL =\r\n        `/api/customer/device/${deviceName}/claim`;\r\n    return http.post(apiURL, payload).pipe();\r\n}\r\n\r\nfunction checkPermission() {\r\n    const authority = widgetContext.currentUser.authority;\r\n    if (authority === \"CUSTOMER_USER\") return true\r\n    return false;\r\n}\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.updateState(statedId,\r\n            params);\r\n    }\r\n}\r\n\r\nfunction saveRelationWithDStorz(storzId, dstorzId) {\r\n    return entityRelationService.saveRelation({\r\n        from: {\r\n            entityType: \"ASSET\",\r\n            id: storzId\r\n        },\r\n        to: {\r\n            entityType: \"DEVICE\",\r\n            id: dstorzId\r\n        },\r\n        type: \"Contains\",\r\n        typeGroup: \"COMMON\"\r\n    });\r\n}\r\n\r\nfunction saveActiveTelemetry(entityType, entityId) {\r\n    var timeSeriesUrl =\r\n        `/api/plugins/telemetry/${entityType}/${entityId}/timeseries/ANY`;\r\n    return http.post(timeSeriesUrl, {\r\n        isNoSignal: true,\r\n        isInactive: true,\r\n        isNotAssigned: false\r\n    });\r\n}\r\n\r\nfunction checkDStorzRelationWithHydrant(dStorzId) {\r\n    const relationQuery = {\r\n        \"entityFields\": [\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"name\"\r\n            },\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"type\"\r\n            }\r\n        ],\r\n        \"latestValues\": [],\r\n        \"entityFilter\": {\r\n            \"type\": \"relationsQuery\",\r\n            \"rootEntity\": {\r\n                \"entityType\": \"DEVICE\",\r\n                \"id\": dStorzId\r\n            },\r\n            \"direction\": \"TO\",\r\n            \"maxLevel\": 2,\r\n            \"fetchLastLevelOnly\": false,\r\n            \"filters\": [\r\n                {\r\n                    \"relationType\": \"Contains\",\r\n                    \"entityTypes\": [\r\n                        \"ASSET\"\r\n                    ],\r\n                }\r\n            ]\r\n        },\r\n        \"pageLink\": {\r\n            \"dynamic\": false,\r\n            \"pageSize\": 10,\r\n            \"page\": 0,\r\n            \"textSearch\": null,\r\n            \"sortOrder\": {\r\n                \"key\": {\r\n                    \"type\": \"ENTITY_FIELD\",\r\n                    \"key\": \"createdTime\"\r\n                },\r\n                \"direction\": \"DESC\"\r\n            }\r\n        }\r\n    }\r\n    return http.post(urlEntitiesQuery, relationQuery).pipe(rxjs.map((dStrozRelationResponse) => {\r\n        return (dStrozRelationResponse && dStrozRelationResponse.data && dStrozRelationResponse.data.length) ? false : true;\r\n    }));\r\n}\r\n\r\nfunction showAlertDialog(title, content) {\r\n    setTimeout(() => {\r\n        const className = [];\r\n        widgetContext.dialogs.customAlert(title, content, null, className).subscribe((alertResponse) => {\r\n\r\n        });\r\n    }, 100);\r\n}\r\n\r\nfunction saveEntityAttributes(entityId, attributes, entityType = \"ASSET\") {\r\n    return attributeService.saveEntityAttributes({ entityType: entityType, id: entityId }, \"SERVER_SCOPE\", attributes);\r\n}\r\n\r\nfunction hasDuplicates(arr) {\r\n  const nonNullArray = arr.filter(item => item !== null);\r\n  const uniqueSet = new Set(nonNullArray);\r\n  return nonNullArray.length !== uniqueSet.size;\r\n}\r\n\r\nfunction sendToRuleEngine(deviceId, deviceName) {\r\n    const apiURL =\r\n        `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=swisscom`;\r\n    const payload = {\r\n        \"msg\": null,\r\n        \"metadata\": {\r\n            \"deviceName\": deviceName,\r\n            \"deviceType\": \"d-storz\",\r\n            \"operationType\": \"CREATE\"\r\n        }\r\n    }\r\n    return http.post(apiURL, payload).pipe();\r\n}"
          },
          "title": "",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false,
          "titleTooltip": "",
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          }
        },
        "row": 0,
        "col": 0,
        "id": "80412516-56d5-3928-469f-d16fe4d7b1c2"
      },
      "664daa22-a7b0-a663-f474-588360b88b01": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.5348495931781463
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": false,
            "isExternalBtn": false,
            "formName": "Alarm Definition",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Name",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Event Type *",
                    "fieldName": "eventList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Open\", value: \"open\"},\n    {name: \"Low Battery\", value: \"lowBattery\"},\n    {name: \"No Signal\", value: \"noSignal\"},\n    {name: \"Close\", value: \"close\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Assign User Roles",
                    "fieldName": "roleList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/entityGroups/USER`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response.filter(res => !res.groupAll)\n        .map(\n            data => ({\n                name: data.name,\n                value: JSON.stringify({\n                    id: data.id.id,\n                    name: data.name\n                })\n            })).filter(data => data.name.toLowerCase().includes(searchTerm && searchTerm.trim() ? searchTerm.trim() : ''))\n            ));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Assign Users",
                    "fieldName": "userList",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nfunction getGroupAllUserList() {\n    const payload = {\n        \"entityFields\": [\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"createdTime\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"firstName\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"lastName\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"email\"\n            }\n        ],\n        \"latestValues\": [],\n        \"entityFilter\": {\n            \"resolveMultiple\":true,\n            \"entityType\": \"USER\",\n            \"type\": \"entityType\"\n        },\n        \"pageLink\": {\n            \"dynamic\": false,\n            \"pageSize\": 10,\n            \"page\": 0,\n            \"textSearch\": null,\n            \"sortOrder\": {\n                \"key\": {\n                    \"type\": \"ENTITY_FIELD\",\n                    \"key\": \"createdTime\"\n                },\n                \"direction\": \"DESC\"\n            }\n        }\n    };\n    if (searchTerm) {\n        payload.pageLink.textSearch = searchTerm;\n    }\n    return http.post(\"/api/entitiesQuery/find\", payload).pipe(\n        rxjs.debounceTime(150),\n        rxjs.distinctUntilChanged(),\n        rxjs.map((response) => {\n        const result = [];\n        if (response.totalElements === 0) {\n          return result;\n        }\n        response.data.forEach((entity) => {\n          if (entity.entityId.entityType === \"USER\") {\n            result.push({\n              name: entity.latest.ENTITY_FIELD.email.value,\n              value: JSON.stringify({\n                    id: entity.entityId.id,\n                    name: entity.latest.ENTITY_FIELD.email.value\n                })\n            })\n          }\n        });\n        return result;\n      }))\n}\nreturn getGroupAllUserList();",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Field 5",
                    "fieldName": "step0field5",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 user or user role has to be assigned\n</div>\n",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n<div>\n    <span class=\"material-symbols-outlined\" style=\"font-size: 16px;\">\n    info\n    </span>\n    At least 1 user or user role has to be assigned\n</div>\n"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              },
              {
                "stepName": "Notification",
                "formFields": [
                  {
                    "label": "Notification Type *",
                    "fieldName": "notificationType",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "multiSelectChip",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Email\", value: \"email\"},\n    {name: \"SMS\", value: \"sms\"},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Delay",
                    "fieldName": "notificationDelay",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"None\", value: 0},\n    {name: \"15 min\", value: 15},\n    {name: \"30 min\", value: 30},\n    {name: \"60 min\", value: 60},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Re-notification on missing acknowledgement",
                    "fieldName": "reNotificationDelay",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"None\", value: 0},\n    {name: \"15 min\", value: 15},\n    {name: \"60 min\", value: 60},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  }
                ]
              },
              {
                "stepName": "Date",
                "formFields": [
                  {
                    "label": "Field 1",
                    "fieldName": "step2field1",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div></div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div></div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Alarm State",
                    "fieldName": "isAlarmActive",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Active\", value: true},\n    {name: \"Inactive\", value: false}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 3",
                    "fieldName": "step2field3",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div class=\"mt-24 mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">From</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div class=\"mt-24 mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">From</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 6",
                    "fieldName": "step2field6",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div class=\"mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">To</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div class=\"mb-16\" style=\"font-size: 16px;font-style: normal;font-weight: 700;line-height: 120%;color: #475569;\">To</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "dateTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "timeTo",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              }
            ],
            "genericFormFunction": "let $injector = widgetContext.$scope.$injector;\r\nlet customDialog = $injector.get(widgetContext.servicesMap.get(\"customDialog\"));\r\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\nlet rxjs = widgetContext.rxjs;\r\nlet attributeService = $injector.get(widgetContext.servicesMap.get(\"attributeService\"));\r\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\n\r\nlet currentEntityValue = formData.value;\r\nconst hydrantId = widgetContext.datasources[0].entity.id.id;\r\n\r\nfunction saveEntity(paylload, entityType) {\r\n    let url = `/api/${entityType}`;\r\n    return http.post(url, paylload);\r\n}\r\n\r\n\r\nfunction saveEntityRelations(relationsFromToList=[], defaultRelationType=null) {\r\n    const relationPayload = []\r\n    relationsFromToList.forEach((relation) => {\r\n        relationPayload.push({\r\n            \"type\": defaultRelationType || relation.type,\r\n            \"additionalInfo\": relation.additionalInfo || null,\r\n            \"typeGroup\": relation.typeGroup || \"COMMON\",\r\n            \"from\": relation.from,\r\n            \"to\": relation.to\r\n        })\r\n    });\r\n    let url = `/api/relation/bulk`;\r\n    return http.post(url, relationPayload);\r\n}\r\n\r\nfunction saveServerAttributes(serverAttributes, entityType, EntityId) {\r\n    let url = `/api/plugins/telemetry/${entityType}/${EntityId}/SERVER_SCOPE`;\r\n    return http.post(url, serverAttributes);\r\n}\r\n\r\nfunction getMsTimeAfterAddTimeInDate(date, time) {\r\n    let newDate = new Date(date);\r\n    let newTime = new Date(time);\r\n    let hours = newTime.getHours();\r\n    let minutes = newTime.getMinutes();\r\n    newDate.setHours(hours);\r\n    newDate.setMinutes(minutes);\r\n    return newDate.getTime();\r\n}\r\n\r\nfunction main() {\r\n    if(!currentEntityValue.roleList && !currentEntityValue.userList) {\r\n        widgetContext.showToast('error',\r\n        translationService.instant('hawle-dashboard.assign-user-role-mandatory'), 2000,\r\n        'top', 'left', widgetContext.toastTargetId);\r\n        return;\r\n    }\r\n    if(!currentEntityValue.eventList || \r\n        (currentEntityValue.eventList && !currentEntityValue.eventList.length)) {\r\n        widgetContext.showToast('error',\r\n        translationService.instant('hawle-dashboard.assign-event-mandatory'), 2000,\r\n        'top', 'left', widgetContext.toastTargetId);\r\n        return;\r\n    }\r\n    \r\n    if(!currentEntityValue.notificationType || \r\n        (currentEntityValue.notificationType && !currentEntityValue.notificationType.length)) {\r\n        widgetContext.showToast('error',\r\n        translationService.instant('hawle-dashboard.assign-notification-type-mandatory'), 2000,\r\n        'top', 'left', widgetContext.toastTargetId);\r\n        return;\r\n    }\r\n    \r\n    const fromDate = getMsTimeAfterAddTimeInDate(currentEntityValue.dateFrom, currentEntityValue.timeFrom);\r\n    const toDate = currentEntityValue.dateTo ? getMsTimeAfterAddTimeInDate(currentEntityValue.dateTo, currentEntityValue.timeTo) : 0;\r\n    const nowDate = new Date().getTime();\r\n    if(   toDate > 0 && \r\n        ((toDate < fromDate) || (toDate < nowDate))\r\n    ) {\r\n        widgetContext.showToast('error',\r\n            translationService.instant('hawle-dashboard.invalid-date-selection'), 2000,\r\n            'top', 'left');\r\n        return;\r\n    }\r\n\r\n    let currentEntityValueRoleList = currentEntityValue.roleList ? currentEntityValue.roleList.map((role) => JSON.parse(role)) : [];\r\n    let currentEntityValueUserList = currentEntityValue.userList ? currentEntityValue.userList.map((user) => JSON.parse(user)) : [];\r\n    let paylload = {\r\n        \"name\": currentEntityValue.name,\r\n        \"type\": \"alarmDefinition\"\r\n    }\r\n\r\n    saveEntity(paylload, \"asset\").subscribe((entity) => { \r\n        const notificationType = currentEntityValue.notificationType ? currentEntityValue.notificationType : [];\r\n        const serverAttributesPayload = {\r\n            fromDate: fromDate,\r\n            toDate: toDate,\r\n            isActive: currentEntityValue.isAlarmActive,\r\n            userGroups: currentEntityValueRoleList,\r\n            users: currentEntityValueUserList,\r\n            alarmDefinition: {\r\n                alarmState: {\r\n                  isActive: currentEntityValue.isAlarmActive,\r\n                  fromDate: fromDate,\r\n                  toDate: toDate\r\n                },\r\n                eventType: {\r\n                  alarmOpen: currentEntityValue.eventList.includes(\"open\"),\r\n                  alarmLowBattery: currentEntityValue.eventList.includes(\"lowBattery\"),\r\n                  alarmNoSignal: currentEntityValue.eventList.includes(\"noSignal\"),\r\n                  alarmClose: currentEntityValue.eventList.includes(\"close\")\r\n                },\r\n                notification: {\r\n                  email: notificationType.includes(\"email\"),\r\n                  sms: notificationType.includes(\"sms\"),\r\n                  delay: currentEntityValue.notificationDelay * 60000,\r\n                  reNotificationOnMissingAck: currentEntityValue.reNotificationDelay * 60000 || null\r\n                }\r\n              }\r\n        }\r\n        saveServerAttributes(serverAttributesPayload, \"ASSET\", entity.id.id).subscribe((serverAttributes) => {\r\n            const relationPayload = []\r\n            relationPayload.push({\r\n                \"type\": \"ManagesAlarms\",\r\n                'from':  entity.id,\r\n                'to': {\r\n                    'entityType': 'ASSET',\r\n                    'id': hydrantId\r\n                }\r\n            })\r\n            if(currentEntityValueUserList) {\r\n                currentEntityValueUserList.forEach((user) => {\r\n                    relationPayload.push({\r\n                        \"type\": \"Owns\",\r\n                        'to':  entity.id,\r\n                        'from': {\r\n                            'entityType': 'USER',\r\n                            'id': user.id\r\n                        },\r\n                    })\r\n                })\r\n            }\r\n            if(currentEntityValueRoleList) {\r\n                currentEntityValueRoleList.forEach((role) => {\r\n                    relationPayload.push({\r\n                        \"type\": \"Owns\",\r\n                        'to':  entity.id,\r\n                        'from': {\r\n                            'entityType': 'ENTITY_GROUP',\r\n                            'id': role.id\r\n                        },\r\n                    })\r\n                })\r\n            }\r\n            saveEntityRelations(relationPayload).subscribe((relations) => {\r\n\r\n                rxjs.forkJoin(\r\n                    [...(Array.isArray(currentEntityValueRoleList) ? currentEntityValueRoleList : []).map(role => {\r\n                        const userServerAttributesPayload = {}\r\n                        userServerAttributesPayload[`alarmDefinition_${entity.id.id}`] = {\r\n                            name: currentEntityValue.name,\r\n                            id: entity.id.id\r\n                          }\r\n                        return saveServerAttributes(userServerAttributesPayload, \"ENTITY_GROUP\", role.id)\r\n                    }),\r\n                    ...(Array.isArray(currentEntityValueUserList) ? currentEntityValueUserList : []).map(user => {\r\n                        const userServerAttributesPayload = {}\r\n                        userServerAttributesPayload[`alarmDefinition_${entity.id.id}`] = {\r\n                            name: currentEntityValue.name,\r\n                            id: entity.id.id\r\n                          }\r\n                        return saveServerAttributes(userServerAttributesPayload, \"USER\", user.id)\r\n                    })\r\n                ]\r\n                ).subscribe((response) => {\r\n                    widgetContext.showToast('success',\r\n                        translationService.instant('hawle-dashboard.alarm-definition-saved-successfully'), 2000,\r\n                        'top', 'left');\r\n                    openDashboardState('all_hydrants');\r\n                    widgetContext.updateAliases();\r\n                  });\r\n                //   widgetContext.updateAliases();\r\n                //     openDashboardState('all_alarm_definitions');\r\n                // saveServerAttributes(serverAttributesPayload, \"ASSET\", entity.id.id).subscribe((serverAttributes) => {\r\n                // customDialog.showAlert(translationService.instant('asset.saved'), true).subscribe(() => {\r\n                //     widgetContext.close();\r\n                // });\r\n            });\r\n        });\r\n    });\r\n}\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.openState(statedId,\r\n            params);\r\n    }\r\n}\r\nmain()"
          },
          "title": "New Generic Form Builder v1.0",
          "showTitleIcon": false,
          "titleTooltip": "",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          },
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "664daa22-a7b0-a663-f474-588360b88b01"
      },
      "dfa8d0a4-fc67-9b70-3292-611742910188": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.7480703723615065
                },
                {
                  "name": "phone",
                  "type": "entityField",
                  "label": "Phone",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.014286930175704038
                },
                {
                  "name": "email",
                  "type": "entityField",
                  "label": "Email",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.34367048477388895
                },
                {
                  "name": "firstName",
                  "type": "entityField",
                  "label": "First name",
                  "color": "#ffc107",
                  "settings": {},
                  "_hash": 0.9883602849187489
                },
                {
                  "name": "lastName",
                  "type": "entityField",
                  "label": "Last name",
                  "color": "#607d8b",
                  "settings": {},
                  "_hash": 0.31540556016054677
                },
                {
                  "name": "salutation",
                  "type": "attribute",
                  "label": "salutation",
                  "color": "#9c27b0",
                  "settings": {},
                  "_hash": 0.7746212985194121
                },
                {
                  "name": "function",
                  "type": "attribute",
                  "label": "function",
                  "color": "#8bc34a",
                  "settings": {},
                  "_hash": 0.987822820465684
                },
                {
                  "name": "role",
                  "type": "attribute",
                  "label": "role",
                  "color": "#3f51b5",
                  "settings": {},
                  "_hash": 0.8113802620698642,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "console.log(isJsonString(value))\nfunction isJsonString(str) {\n    try {\n        JSON.parse(str);\n    } catch (e) {\n        return false;\n    }\n    return true;\n}\n\nif (isJsonString(value)) {\n    let result = JSON.parse(value)[0]\n    result = JSON.stringify(result)\n    console.log(value.replace('[', '').replace(']', ''))\n    return value.replace('[', '').replace(']', '');   \n}"
                },
                {
                  "name": "description",
                  "type": "attribute",
                  "label": "description",
                  "color": "#e91e63",
                  "settings": {},
                  "_hash": 0.970163628134836
                },
                {
                  "name": "absenceFrom",
                  "type": "attribute",
                  "label": "absenceFrom",
                  "color": "#ffeb3b",
                  "settings": {},
                  "_hash": 0.5831279821353277,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "if (!!value) {\n    return new Date(value)\n} else {\n    return value;\n}"
                },
                {
                  "name": "absenceFromTime",
                  "type": "attribute",
                  "label": "absenceFromTime",
                  "color": "#03a9f4",
                  "settings": {},
                  "_hash": 0.9119828503866507,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "if (!!value) {\n    return new Date(value)\n} else {\n    return value;\n}"
                },
                {
                  "name": "absenceUntil",
                  "type": "attribute",
                  "label": "absenceUntil",
                  "color": "#ff9800",
                  "settings": {},
                  "_hash": 0.5542997143633994,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "if (!!value) {\n    return new Date(value)\n} else {\n    return value;\n}"
                },
                {
                  "name": "absenceUntilTime",
                  "type": "attribute",
                  "label": "absenceUntilTime",
                  "color": "#673ab7",
                  "settings": {},
                  "_hash": 0.2401463273358817,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "if (!!value) {\n    return new Date(value)\n} else {\n    return value;\n}"
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": true,
            "isExternalBtn": false,
            "formName": "Edit User",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Email",
                    "fieldName": "email",
                    "type": "ENTITY_FIELD",
                    "fieldType": "email",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Phone",
                    "fieldName": "phone",
                    "type": "ENTITY_FIELD",
                    "fieldType": "phone",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Salutation",
                    "fieldName": "salutation",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\nlet rxjs = widgetContext.rxjs;\n\nreturn rxjs.of([\n    {\n        name: 'Mr',\n        value: 'mr'\n    },\n    {\n        name: 'Mrs',\n        value: 'mrs'\n    }\n    ])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "First Name",
                    "fieldName": "firstName",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Last Name",
                    "fieldName": "lastName",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Function",
                    "fieldName": "function",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Role",
                    "fieldName": "role",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/entityGroups/USER`;\nconst selfRegistrationRoleName = \"Self Registration Users\";\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response.filter(res => !res.groupAll && !(res.name === selfRegistrationRoleName))\n        .map(\n            data => ({\n                name: data.name,\n                value: JSON.stringify({\n                    id: data.id.id,\n                    name: data.name\n                })\n            })).filter(data => data.name.toLowerCase().includes(searchTerm && searchTerm.trim() ? searchTerm.trim() : ''))\n        ));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Description",
                    "fieldName": "description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 9",
                    "fieldName": "step0field9",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div style=\"font-size: 18px;color: #475569;padding: 0.5rem 0.25rem;font-weight: 600;\">Add absence period for the user</div>\n<div style=\"font-size: 14px;padding: 0.25rem\">If the alarm is assigned to only one user, it will not be reassigned to other users during absence.</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div style=\"font-size: 18px;color: #475569;padding: 0.5rem 0.25rem;font-weight: 600;\">Add absence period for the user</div>\n<div style=\"font-size: 14px;padding: 0.25rem\">If the alarm is assigned to only one user, it will not be reassigned to other users during absence.</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date From",
                    "fieldName": "absenceFrom",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time From",
                    "fieldName": "absenceFromTime",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Date Until",
                    "fieldName": "absenceUntil",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time Until",
                    "fieldName": "absenceUntilTime",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              }
            ],
            "genericFormFunction": "console.log(widgetContext)\r\nlet $injector = widgetContext.$scope.$injector;\r\nlet UsersTableConfigResolver = $injector.get(widgetContext.servicesMap.get('UsersTableConfigResolver'));\r\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\r\nlet userService = $injector.get(widgetContext.servicesMap.get('userService'));\r\nlet http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nlet currentEntityValue = formData.value;\r\nlet currentEntityId = { id: widgetContext.datasources[0].entityId, entityType: widgetContext.datasources[0].entityType };\r\nlet rxjs = widgetContext.rxjs;\r\nlet translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\n\r\nconst absenceFrom = currentEntityValue.absenceFrom && currentEntityValue.absenceFromTime ? getMsTimeAfterAddTimeInDate(currentEntityValue.absenceFrom, currentEntityValue.absenceFromTime) : 0;\r\nconst absenceUntil =  currentEntityValue.absenceUntil && currentEntityValue.absenceUntilTime ?  getMsTimeAfterAddTimeInDate(currentEntityValue.absenceUntil, currentEntityValue.absenceUntilTime) : 0;\r\nconst nowDate = new Date().getTime();\r\nif(   absenceUntil > 0 && \r\n    ((absenceUntil < absenceFrom) || (absenceUntil < nowDate))\r\n) {\r\n    widgetContext.showToast('error',\r\n        translationService.instant('hawle-dashboard.invalid-date-selection'), 2000,\r\n        'top', 'left');\r\n    return;\r\n}\r\n\r\nfunction saveUser(payload, sendActivationEmail, entityGroupId, nextFn) {\r\n    userService.saveUser(payload, sendActivationEmail, entityGroupId).subscribe(\r\n        (user) => {\r\n            nextFn(user)\r\n            //   if (currentEntityValue.activationMethod === \"showActivationLink\") {\r\n            //     nextFn(user)\r\n            //   } else {\r\n            //     widgetContext.updateAliases();\r\n            //     openDashboardState('all_users');\r\n            //   }\r\n        },\r\n        (err) => {\r\n            widgetContext.isGenericLoading$.next(false);\r\n        }\r\n    );\r\n}\r\n\r\nwidgetContext.isGenericLoading$.next(true);\r\n\r\nfunction showToaster(message, isErrorType = false) {\r\n    const translatedMessage = translationService.instant(message);\r\n    if (isErrorType) {\r\n        widgetContext.showErrorToast(translatedMessage);\r\n    } else {\r\n        widgetContext.showSuccessToast(translatedMessage);\r\n    }\r\n}\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.isGenericLoading$.next(false);\r\n    showToaster('hawle-dashboard.user-saved-successfully');\r\n    widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.updateState(statedId,\r\n            params);\r\n    }\r\n}\r\nfunction saveEntityRelations(relationsFromToList = [], defaultRelationType = null) {\r\n    const relationPayload = []\r\n    relationsFromToList.forEach((relation) => {\r\n        relationPayload.push({\r\n            \"type\": defaultRelationType || relation.type,\r\n            \"additionalInfo\": relation.additionalInfo || null,\r\n            \"typeGroup\": relation.typeGroup || \"COMMON\",\r\n            \"from\": relation.from,\r\n            \"to\": relation.to\r\n        })\r\n    });\r\n    let url = `/api/relation/bulk`;\r\n    return http.post(url, relationPayload);\r\n}\r\n\r\nfunction saveServerAttributes(serverAttributes, entityType, EntityId) {\r\n    let url = `/api/plugins/telemetry/${entityType}/${EntityId}/SERVER_SCOPE`;\r\n    return http.post(url, serverAttributes);\r\n}\r\n\r\nfunction getServerScopes(entityType, entityId) {\r\n    let url = `/api/plugins/telemetry/${entityType}/${entityId}/values/attributes/SERVER_SCOPE`;\r\n    return http.get(url);\r\n}\r\n\r\nfunction getAlarmDefinationRealtionsFromServerScopes(serverScopes) {\r\n    return serverScopes.filter((serverScope) => {\r\n        if (serverScope.key.includes(\"alarmDefinition\")) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }).map((serverScope) => {\r\n        return serverScope.value;\r\n    });\r\n}\r\n\r\nfunction deleteBulkEntityRelations(relationPayload = []) {\r\n    let url = `/api/relationsByType`;\r\n    return http.post(url, relationPayload);\r\n}\r\nfunction deleteEntitiesFromGroup(entityIds, entityGroupId) {\r\n    let url = `/api/entityGroup/${entityGroupId}/deleteEntities`;\r\n    return http.post(url, entityIds);\r\n}\r\nfunction addEntitiesToGroup(entityIds, entityGroupId) {\r\n    let url = `/api/entityGroup/${entityGroupId}/addEntities`;\r\n    return http.post(url, entityIds);\r\n}\r\n\r\nfunction getMsTimeAfterAddTimeInDate(date, time) {\r\n    let newDate = new Date(date);\r\n    let newTime = new Date(time);\r\n    let hours = newTime.getHours();\r\n    let minutes = newTime.getMinutes();\r\n    newDate.setHours(hours);\r\n    newDate.setMinutes(minutes);\r\n    return newDate.getTime();\r\n}\r\n\r\nfunction addRelation(customerUserId, owner) {\r\n    if (owner.entityType === 'TENANT') {\r\n        return widgetContext.rxjs.of(null);\r\n    } else {\r\n        let relation = {\r\n            type: 'Owns',\r\n            typeGroup: 'COMMON',\r\n            to: owner,\r\n            from: customerUserId\r\n        };\r\n        return entityRelationService.saveRelation(relation);\r\n    }\r\n}\r\n\r\n\r\nfunction main() {\r\n    currentEntityValue.role = JSON.parse(currentEntityValue.role);\r\n    UsersTableConfigResolver.resolve().subscribe((\r\n        tableConfigResponse) => {\r\n        const userAuthority = widgetContext.currentUser.authority;\r\n\r\n        getIsSelectedUserGroupHasAllPermission(currentEntityValue.role.id).subscribe((hasAllPermission) => {\r\n            const payload = {\r\n                id: currentEntityId,\r\n                email: currentEntityValue.email,\r\n                phone: currentEntityValue.phone,\r\n                firstName: currentEntityValue.firstName,\r\n                lastName: currentEntityValue.lastName,\r\n                customerId: {\r\n                    entityType: 'CUSTOMER',\r\n                    id: widgetContext.currentUser.customerId\r\n                },\r\n                additionalInfo: {\r\n                    description: currentEntityValue.description,\r\n                    defaultDashboardId: null,\r\n                    defaultDashboardFullscreen: !hasAllPermission,\r\n                    homeDashboardId: null,\r\n                    homeDashboardHideToolbar: true\r\n                },\r\n                authority: userAuthority\r\n            }\r\n            saveUser(\r\n                payload,\r\n                false,\r\n                currentEntityValue.role.id,\r\n                (user) => {\r\n                    const serverAttributesPayload = {\r\n                        salutation: currentEntityValue.salutation,\r\n                        function: currentEntityValue.function,\r\n                        role: [currentEntityValue.role],\r\n                        description: currentEntityValue.description,\r\n                        absenceFrom: currentEntityValue.absenceFrom && currentEntityValue.absenceFromTime ?\r\n                            getMsTimeAfterAddTimeInDate(currentEntityValue.absenceFrom, currentEntityValue.absenceFromTime) : null,\r\n                        absenceFromTime: currentEntityValue.absenceFrom && currentEntityValue.absenceFromTime ?\r\n                            getMsTimeAfterAddTimeInDate(currentEntityValue.absenceFrom, currentEntityValue.absenceFromTime) : null,\r\n                        absenceUntil: currentEntityValue.absenceUntil && currentEntityValue.absenceUntilTime ?\r\n                            getMsTimeAfterAddTimeInDate(currentEntityValue.absenceUntil, currentEntityValue.absenceUntilTime) : null,\r\n                        absenceUntilTime: currentEntityValue.absenceUntil && currentEntityValue.absenceUntilTime ?\r\n                            getMsTimeAfterAddTimeInDate(currentEntityValue.absenceUntil, currentEntityValue.absenceUntilTime) : null\r\n                    }\r\n                    getServerScopes('USER', user.id.id).subscribe((prevServerScopes) => {\r\n                        saveServerAttributes(serverAttributesPayload, \"USER\", user.id.id).subscribe((_) => {\r\n                            const deleteBulkEntityRelationsPayload = [\r\n                                {\r\n                                    fromId: user.id.id,\r\n                                    fromType: \"USER\",\r\n                                    relationType: \"Owns\"\r\n                                }\r\n                            ]\r\n                            deleteBulkEntityRelations(deleteBulkEntityRelationsPayload).subscribe((_) => {\r\n                                getServerScopes('ENTITY_GROUP', currentEntityValue.role.id).subscribe((serverScopes) => {\r\n                                    const relationPayload = []\r\n                                    getAlarmDefinationRealtionsFromServerScopes(serverScopes).forEach((alarmDefination) => {\r\n                                        relationPayload.push({\r\n                                            \"type\": \"Owns\",\r\n                                            'from': user.id,\r\n                                            'to': {\r\n                                                'entityType': 'ASSET',\r\n                                                'id': alarmDefination.id\r\n                                            },\r\n                                        })\r\n                                    })\r\n                                    getAlarmDefinationRealtionsFromServerScopes(prevServerScopes).forEach((_alarmDefination) => {\r\n                                        relationPayload.push({\r\n                                            \"type\": \"Owns\",\r\n                                            'from': user.id,\r\n                                            'to': {\r\n                                                'entityType': 'ASSET',\r\n                                                'id': _alarmDefination.id\r\n                                            },\r\n                                        })\r\n                                    });\r\n\r\n                                    // making a relation customer user with customer\r\n                                    const customerUserId = user.id;\r\n                                    const owner = {\r\n                                        id: widgetContext.currentUser.authority === 'TENANT_ADMIN' ? widgetContext.currentUser.tenantId :\r\n                                            widgetContext.currentUser.customerId,\r\n                                        entityType: widgetContext.currentUser.authority === 'TENANT_ADMIN' ? 'TENANT' : 'CUSTOMER'\r\n                                    }\r\n                                    addRelation(customerUserId, owner).pipe().subscribe((addRelationResponse) => { });\r\n                                    saveEntityRelations(relationPayload).subscribe((relations) => {\r\n                                        const previousRole = prevServerScopes.find((serverScope) => serverScope.key === \"role\").value[0];\r\n                                        if (currentEntityValue.role.id !== previousRole.id) {\r\n                                            addEntitiesToGroup([user.id.id], currentEntityValue.role.id).subscribe((_) => {\r\n                                                deleteEntitiesFromGroup([user.id.id], previousRole.id).subscribe((_) => {\r\n                                                    widgetContext.updateAliases();\r\n                                                    openDashboardState('all_users');\r\n                                                });\r\n                                            })\r\n                                        } else {\r\n                                            widgetContext.updateAliases();\r\n                                            openDashboardState('all_users');\r\n                                        }\r\n                                    });\r\n                                });\r\n                            });\r\n                        });\r\n                    });\r\n\r\n                });\r\n        });\r\n    })\r\n}\r\n\r\nfunction getIsSelectedUserGroupHasAllPermission(entityId) {\r\n    const api = `/api/userGroup/${entityId}/groupPermissions`\r\n    return http.get(api).pipe(rxjs.map((permissions) =>\r\n        !!(permissions || []).find((permission) =>\r\n            permission.role && permission.role.permissions && permission.role.permissions.ALL && permission.role.permissions.ALL.includes(\"ALL\")\r\n        )\r\n    )\r\n    )\r\n}\r\n\r\nmain()"
          },
          "title": "Edit User",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false,
          "titleTooltip": "",
          "titleStyle": {
            "fontSize": "16px",
            "fontWeight": 400
          }
        },
        "row": 0,
        "col": 0,
        "id": "dfa8d0a4-fc67-9b70-3292-611742910188"
      },
      "84582bc7-cdfd-0451-96f3-10386d2e9a1g": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px 0px 8px 0px",
          "settings": {
            "cardHtml": "<div class='card'>\n    <span>\n        Overview of all D-Storz\n    </span>\n</div>",
            "cardCss": ".card {\n    font-weight: bold;\n    font-size: 32px;\n    color: #999;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: end;\n    justify-content: start;\n}\n\n.card span {\n    font-weight: 700;\n    color: #000;\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 1.2rem;\n}"
          },
          "title": "New HTML Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "84582bc7-cdfd-0451-96f3-10386d2e9a1g"
      },
      "84582bc7-cdfd-0451-96f3-10386d2e9a1e": {
        "isSystemType": true,
        "bundleAlias": "cards",
        "typeAlias": "html_card",
        "type": "static",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px 0px 8px 0px",
          "settings": {
            "cardCss": ".card {\n    font-weight: bold;\n    font-size: 32px;\n    color: #999;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: end;\n    justify-content: start;\n}\n\n.card span {\n    font-weight: 700;\n    color: #000;\n    margin: 0;\n    display: flex;\n    align-items: flex-end;\n    margin-left: 0.5rem;\n    line-height: normal;\n    font-size: 1.2rem;\n}",
            "cardHtml": "<div class='card'>\n    <span>\n        {i18n:hawle-dashboard.overview-of-all-hydrants}\n    </span>\n</div>"
          },
          "title": "New HTML Card",
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "84582bc7-cdfd-0451-96f3-10386d2e9a1e"
      },
      "ddc8e1bf-f5ce-6040-d4dc-ae0eebbd854b": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.7971254536169066
                },
                {
                  "name": "latitude",
                  "type": "attribute",
                  "label": "latitude",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.49009063569266265,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "return value ? value : 46.8182;"
                },
                {
                  "name": "longitude",
                  "type": "attribute",
                  "label": "longitude",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.18252476184266042,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "return value ? value : 8.2275;"
                },
                {
                  "name": "hydrantsBrand",
                  "type": "attribute",
                  "label": "brand",
                  "color": "#ffc107",
                  "settings": {},
                  "_hash": 0.7433201295650529,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "modelNumber",
                  "type": "attribute",
                  "label": "modelNumber",
                  "color": "#607d8b",
                  "settings": {},
                  "_hash": 0.5133114978214943,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "aboveGround",
                  "type": "attribute",
                  "label": "aboveGround",
                  "color": "#9c27b0",
                  "settings": {},
                  "_hash": 0.4430377334938993,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "networkInputPressure",
                  "type": "attribute",
                  "label": "networkInputPressure",
                  "color": "#8bc34a",
                  "settings": {},
                  "_hash": 0.4876396398724634
                },
                {
                  "name": "orificePlate",
                  "type": "attribute",
                  "label": "orificePlate",
                  "color": "#3f51b5",
                  "settings": {},
                  "_hash": 0.4487965140172647
                },
                {
                  "name": "doubleLocked",
                  "type": "attribute",
                  "label": "doubleLocked",
                  "color": "#e91e63",
                  "settings": {},
                  "_hash": 0.04228420678502354
                },
                {
                  "name": "outputPressure1",
                  "type": "attribute",
                  "label": "outputPressure1",
                  "color": "#ffeb3b",
                  "settings": {},
                  "_hash": 0.18503801124812447
                },
                {
                  "name": "outputPressure2",
                  "type": "attribute",
                  "label": "outputPressure2",
                  "color": "#03a9f4",
                  "settings": {},
                  "_hash": 0.20480836270829883
                },
                {
                  "name": "outputPressure3",
                  "type": "attribute",
                  "label": "outputPressure3",
                  "color": "#ff9800",
                  "settings": {},
                  "_hash": 0.7796763017106842
                },
                {
                  "name": "outputVolume1",
                  "type": "attribute",
                  "label": "outputVolume1",
                  "color": "#673ab7",
                  "settings": {},
                  "_hash": 0.8243880425542192
                },
                {
                  "name": "outputVolume1Unit",
                  "type": "attribute",
                  "label": "outputVolume1Unit",
                  "color": "#cddc39",
                  "settings": {},
                  "_hash": 0.734131298675101
                },
                {
                  "name": "outputVolume2",
                  "type": "attribute",
                  "label": "outputVolume2",
                  "color": "#009688",
                  "settings": {},
                  "_hash": 0.06625568859919428
                },
                {
                  "name": "outputVolume2Unit",
                  "type": "attribute",
                  "label": "outputVolume2Unit",
                  "color": "#795548",
                  "settings": {},
                  "_hash": 0.44751014873847317
                },
                {
                  "name": "outputVolume3",
                  "type": "attribute",
                  "label": "outputVolume3",
                  "color": "#00bcd4",
                  "settings": {},
                  "_hash": 0.6532124007917104
                },
                {
                  "name": "outputVolume3Unit",
                  "type": "attribute",
                  "label": "outputVolume3Unit",
                  "color": "#ff5722",
                  "settings": {},
                  "_hash": 0.6835018970623132
                },
                {
                  "name": "purchaseDate",
                  "type": "attribute",
                  "label": "purchaseDate",
                  "color": "#9e9e9e",
                  "settings": {},
                  "_hash": 0.9597283585204812
                },
                {
                  "name": "lastServiceDate",
                  "type": "attribute",
                  "label": "lastServiceDate",
                  "color": "#2962ff",
                  "settings": {},
                  "_hash": 0.16513841648626082
                },
                {
                  "name": "street",
                  "type": "attribute",
                  "label": "street",
                  "color": "#d50000",
                  "settings": {},
                  "_hash": 0.5669509276923232
                },
                {
                  "name": "zip",
                  "type": "attribute",
                  "label": "zip",
                  "color": "#ffab00",
                  "settings": {},
                  "_hash": 0.05715726478882499
                },
                {
                  "name": "state",
                  "type": "attribute",
                  "label": "state",
                  "color": "#455a64",
                  "settings": {},
                  "_hash": 0.5901267568418278
                },
                {
                  "name": "city",
                  "type": "attribute",
                  "label": "city",
                  "color": "#aa00ff",
                  "settings": {},
                  "_hash": 0.4654616036485133
                },
                {
                  "name": "country",
                  "type": "attribute",
                  "label": "country",
                  "color": "#64dd17",
                  "settings": {},
                  "_hash": 0.18593130243914624
                },
                {
                  "name": "undergroundHydrantBrand",
                  "type": "attribute",
                  "label": "undergroundHydrantBrand",
                  "color": "#64dd17",
                  "settings": {},
                  "_hash": 0.8541568846384631
                },
                {
                  "name": "undergroundHydrantModel",
                  "type": "attribute",
                  "label": "undergroundHydrantModel",
                  "color": "#304ffe",
                  "settings": {},
                  "_hash": 0.9715554461703448
                },
                {
                  "name": "undergroundHydrantDiggingDepth",
                  "type": "attribute",
                  "label": "undergroundHydrantDiggingDepth",
                  "color": "#c51162",
                  "settings": {},
                  "_hash": 0.048213622668231704
                },
                {
                  "name": "flowWithoutOrifice",
                  "type": "attribute",
                  "label": "flowWithoutOrifice",
                  "color": "#ffd600",
                  "settings": {},
                  "_hash": 0.012112136919059768
                },
                {
                  "name": "flowWithoutOrificeUnit",
                  "type": "attribute",
                  "label": "flowWithoutOrificeUnit",
                  "color": "#0091ea",
                  "settings": {},
                  "_hash": 0.9726093968831149
                },
                {
                  "name": "undergroundHydrantDiggingDepthUnit",
                  "type": "attribute",
                  "label": "undergroundHydrantDiggingDepthUnit",
                  "color": "#ff6d00",
                  "settings": {},
                  "_hash": 0.5266357389542051
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": true,
            "patchFormFunction": "// const data = widgetContext.data;\r\nconst $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nconst rxjs = widgetContext.rxjs;\r\nconst purchaseDate = widgetContext.data.find(data => data\r\n    .dataKey.name === \"purchaseDate\").data[0][1];\r\nconst lastServiceDate = widgetContext.data.find(data => data\r\n    .dataKey.name === \"lastServiceDate\").data[0][1];\r\nconst entityId = widgetContext.datasources[0].entityId;\r\nvar urlEntitiesQuery = `/api/entitiesQuery/find`;\r\n\r\n\r\n// getting data for map\r\nconst latitudeProps = widgetContext.data.find(data => data.dataKey.name === 'latitude');\r\nconst latitude = latitudeProps ? latitudeProps.data[0][1] : 0;\r\nconst longitudeProps = widgetContext.data.find(data => data.dataKey.name === 'longitude');\r\nconst longitude = longitudeProps ? longitudeProps.data[0][1] : 0;\r\nconst streetProps = widgetContext.data.find(data => data.dataKey.name === 'street');\r\nconst street = streetProps ? streetProps.data[0][1] : \"\";\r\nconst zipProps = widgetContext.data.find(data => data.dataKey.name === 'zip');\r\nconst zip = zipProps ? zipProps.data[0][1] : \"\";\r\nconst cityProps = widgetContext.data.find(data => data.dataKey.name === 'city');\r\nconst city = cityProps ? cityProps.data[0][1] : \"\";\r\nconst stateProps = widgetContext.data.find(data => data.dataKey.name === 'state');\r\nconst state = stateProps ? stateProps.data[0][1] : \"\";\r\nconst countryProps = widgetContext.data.find(data => data.dataKey.name === 'country');\r\nconst country = countryProps ? countryProps.data[0][1] : \"\";\r\nconst orificePlateProps = widgetContext.data.find(data => data.dataKey.name === 'orificePlate');\r\nconst orificePlate = orificePlateProps ? orificePlateProps.data[0][1] : false;\r\nconst doubleLockedProps = widgetContext.data.find(data => data.dataKey.name === 'doubleLocked');\r\nconst doubleLocked = doubleLockedProps ? doubleLockedProps.data[0][1] : false;\r\nconst aboveGroundProps = widgetContext.data.find(data => data.dataKey.name === 'aboveGround');\r\nconst aboveGround = aboveGroundProps ? aboveGroundProps.data[0][1] : false;\r\n\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        type: \"relationsQuery\",\r\n        rootEntity: {\r\n            entityType: \"ASSET\",\r\n            id: entityId\r\n        },\r\n        direction: \"FROM\",\r\n        maxLevel: 1,\r\n        fetchLastLevelOnly: true,\r\n        filters: [\r\n            {\r\n                relationType: \"Contains\",\r\n                entityTypes: [\r\n                    \"ASSET\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"description\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitDiameter\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nconst relatedZoneQuery = {\r\n    entityFilter: {\r\n        type: \"relationsQuery\",\r\n        rootEntity: {\r\n            entityType: \"ASSET\",\r\n            id: entityId\r\n        },\r\n        direction: \"TO\",\r\n        maxLevel: 1,\r\n        fetchLastLevelOnly: true,\r\n        filters: [\r\n            {\r\n                relationType: \"Contains\",\r\n                entityTypes: [\r\n                    \"ASSET\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nconst storzList$ = http.post(urlEntitiesQuery, relatedStorzQuery).pipe();\r\nconst zone$ = http.post(urlEntitiesQuery, relatedZoneQuery).pipe();\r\n\r\nreturn rxjs.forkJoin([storzList$, zone$]).pipe(rxjs.map((response) => {\r\n    const storzList = (response[0] && response[0].data && response[0].data.length) ? response[0].data : [];\r\n    const rZone = (response[1] && response[1].data && response[1].data.length) ? response[1].data : [];\r\n\r\n    return {\r\n        orificePlate: orificePlate === \"true\" ? true : false,\r\n        doubleLocked: doubleLocked === \"true\" ? true : false,\r\n        zone: rZone && rZone.length ? JSON.stringify({name: rZone[0].latest.ENTITY_FIELD.name.value, value: rZone[0].entityId.id}) : \"\",\r\n        purchaseDate: new Date(purchaseDate),\r\n        purchaseTime: new Date(purchaseDate),\r\n        lastServiceDate: lastServiceDate && lastServiceDate > 0 ? new Date(lastServiceDate) : null,\r\n        lastServiceTime: lastServiceDate && lastServiceDate > 0 ? new Date(lastServiceDate) : null,\r\n        storz1: storzList && storzList.length && getStorzFromList(storzList, 'storz1') && getStorzFromList(storzList, 'storz1').latest && getStorzFromList(storzList, 'storz1').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz1').latest.SERVER_ATTRIBUTE.exitDiameter.value : \"\",\r\n        storz1Description: storzList && storzList.length && getStorzFromList(storzList, 'storz1') && getStorzFromList(storzList, 'storz1').latest && getStorzFromList(storzList, 'storz1').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz1').latest.SERVER_ATTRIBUTE.description.value : \"\",\r\n        storz2: storzList && storzList.length && getStorzFromList(storzList, 'storz2') && getStorzFromList(storzList, 'storz2').latest && getStorzFromList(storzList, 'storz2').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz2').latest.SERVER_ATTRIBUTE.exitDiameter.value : \"\",\r\n        storz2Description: storzList && storzList.length && getStorzFromList(storzList, 'storz2') && getStorzFromList(storzList, 'storz2').latest && getStorzFromList(storzList, 'storz2').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz2').latest.SERVER_ATTRIBUTE.description.value : \"\",\r\n        storz3: storzList && storzList.length && getStorzFromList(storzList, 'storz3') && getStorzFromList(storzList, 'storz3').latest && getStorzFromList(storzList, 'storz3').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz3').latest.SERVER_ATTRIBUTE.exitDiameter.value : \"\",\r\n        storz3Description: storzList && storzList.length && getStorzFromList(storzList, 'storz3') && getStorzFromList(storzList, 'storz3').latest && getStorzFromList(storzList, 'storz3').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz3').latest.SERVER_ATTRIBUTE.description.value : \"\",\r\n        map_latitude: latitude,\r\n        map_longitude: longitude,\r\n        map_street: street,\r\n        map_zip: zip,\r\n        map_city: city,\r\n        map_state: state,\r\n        map_country: country,\r\n        aboveGround: aboveGround === \"true\" ? true : false,\r\n    }\r\n}));\r\n\r\n\r\nfunction getTimeFromDate(date) {\r\n    const hours = date.getHours().toString().padStart(2,\r\n        '0');\r\n    const minutes = date.getMinutes().toString().padStart(2,\r\n        '0');\r\n\r\n    return `${hours}:${minutes}`;\r\n}\r\n\r\n\r\nfunction getStorzFromList(storzList, name) {\r\n    return storzList.find(storz => storz.latest.ENTITY_FIELD.name.value.trim().split('-')[0] === name);\r\n}",
            "isExternalBtn": false,
            "formName": "hawle-dashboard.Edit-Hydrant",
            "steps": [
              {
                "stepName": "hawle-dashboard.General-Info",
                "formFields": [
                  {
                    "label": "hawle-dashboard.hydrant-number",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.brand",
                    "fieldName": "hydrantsBrand",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Hawle\", value: \"Hawle\"},\n\t{name: \"Von Roll\", value: \"Von Roll\"},\n\t{name: \"Hinni\", value: \"Hinni\"},\n\t{name: \"Wild\", value: \"Wild\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "dependantFields": "modelNumber",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.model",
                    "fieldName": "modelNumber",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\r\n  { name: 'H8370', value: 'H8370', hydrantsBrand: 'Hawle' },\r\n  { name: 'H4', value: 'H4', hydrantsBrand: 'Hawle' },\r\n  { name: 'H4-HV', value: 'H4-HV', hydrantsBrand: 'Hawle' },\r\n  { name: 'N492', value: 'N492', hydrantsBrand: 'Hawle' },\r\n  { name: 'HYTEC', value: 'HYTEC', hydrantsBrand: 'Von Roll' },\r\n  { name: 'CLASSIC', value: 'CLASSIC', hydrantsBrand: 'Von Roll' },\r\n  { name: '5000S', value: '5000S', hydrantsBrand: 'Von Roll' },\r\n  { name: 'DECO', value: 'DECO', hydrantsBrand: 'Von Roll' },\r\n  { name: 'HYPLUS', value: 'HYPLUS', hydrantsBrand: 'Von Roll' },\r\n  { name: 'VARIO 2.0', value: 'VARIO 2.0', hydrantsBrand: 'Von Roll' },\r\n  { name: '6000', value: '6000', hydrantsBrand: 'Hinni' },\r\n  { name: '6006', value: '6006', hydrantsBrand: 'Hinni' },\r\n  { name: 'UT-RADIAL', value: 'UT-RADIAL', hydrantsBrand: 'Hinni' },\r\n  { name: 'UNO 1', value: 'UNO 1', hydrantsBrand: 'Wild' }\r\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Field 4",
                    "fieldName": "step0field4",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Water abstraction</h3>\n<p style=\"font-size: 1rem;font-weight: 500;margin-bottom: 0.25rem;\">Select one from below</p>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Water abstraction</h3>\n<p style=\"font-size: 1rem;font-weight: 500;margin-bottom: 0.25rem;\">Select one from below</p>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Select-ground-*",
                    "fieldName": "aboveGround",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Above ground\", value: true, dependencyFor: [\"storz3\",\"storz3Description\", \"undergroundHydrantBrand\", \"undergroundHydrantModel\", \"undergroundHydrantDiggingDepth\", \"undergroundHydrantDiggingDepthUnit\", \"undergroundHydrantTitle\", \"outputPressure3\", \"outputVolume3\", \"outputVolume3Unit\"]},\n    {name: \"Below ground\", value: false},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Information above the cover",
                    "fieldName": "step0field6",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Information above the cover</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Information above the cover</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Storz-1",
                    "fieldName": "storz1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.description",
                    "fieldName": "storz1Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.Storz-2",
                    "fieldName": "storz2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.description",
                    "fieldName": "storz2Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.Storz-3",
                    "fieldName": "storz3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.description",
                    "fieldName": "storz3Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 13",
                    "fieldName": "undergroundHydrantTitle",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Add underground hydrant (Optional)</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Add underground hydrant (Optional)</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.brand",
                    "fieldName": "undergroundHydrantBrand",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Hawle\", value: \"Hawle\"},\n\t{name: \"Von Roll\", value: \"Von Roll\"},\n\t{name: \"Hinni\", value: \"Hinni\"},\n\t{name: \"Wild\", value: \"Wild\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "undergroundHydrantModel",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.model",
                    "fieldName": "undergroundHydrantModel",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n  { name: 'H8370', value: 'H8370', undergroundHydrantBrand: 'Hawle' },\n  { name: 'H4', value: 'H4', undergroundHydrantBrand: 'Hawle' },\n  { name: 'H4-HV', value: 'H4-HV', undergroundHydrantBrand: 'Hawle' },\n  { name: 'N492', value: 'N492', undergroundHydrantBrand: 'Hawle' },\n  { name: 'HYTEC', value: 'HYTEC', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'CLASSIC', value: 'CLASSIC', undergroundHydrantBrand: 'Von Roll' },\n  { name: '5000S', value: '5000S', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'DECO', value: 'DECO', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'HYPLUS', value: 'HYPLUS', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'VARIO 2.0', value: 'VARIO 2.0', undergroundHydrantBrand: 'Von Roll' },\n  { name: '6000', value: '6000', undergroundHydrantBrand: 'Hinni' },\n  { name: '6006', value: '6006', undergroundHydrantBrand: 'Hinni' },\n  { name: 'UT-RADIAL', value: 'UT-RADIAL', undergroundHydrantBrand: 'Hinni' },\n  { name: 'UNO 1', value: 'UNO 1', undergroundHydrantBrand: 'Wild' }\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "hawle-dashboard.Digging-depth",
                    "fieldName": "undergroundHydrantDiggingDepth",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "undergroundHydrantDiggingDepthUnit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"m\", value: \"m\"},\n    {name: \"cm\", value: \"cm\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  }
                ]
              },
              {
                "stepName": "hawle-dashboard.Pressure-Info",
                "formFields": [
                  {
                    "label": "hawle-dashboard.Main-Input-Pressure",
                    "fieldName": "networkInputPressure",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Aperture-Turn__",
                    "fieldName": "orificePlate",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "toggle",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Yes\", value: true},\n    {name: \"No\", value: false, dependencyFor: [\"step1field15\",\"flowWithoutOrifice\", \"flowWithoutOrificeUnit\"]}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Double-Shut-off__",
                    "fieldName": "doubleLocked",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "toggle",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Yes\", value: true},\n    {name: \"No\", value: false}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 4",
                    "fieldName": "step1field4",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Output pressure</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Output pressure</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 5",
                    "fieldName": "step1field5",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Volumetric flow</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Volumetric flow</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "1",
                    "fieldName": "outputPressure1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "1",
                    "fieldName": "outputVolume1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "outputVolume1Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "2",
                    "fieldName": "outputPressure2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "2",
                    "fieldName": "outputVolume2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "outputVolume2Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "3",
                    "fieldName": "outputPressure3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "3",
                    "fieldName": "outputVolume3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "outputVolume3Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 15",
                    "fieldName": "step1field15",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Flow without orifice plate</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Flow without orifice plate</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Flow",
                    "fieldName": "flowWithoutOrifice",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "flowWithoutOrificeUnit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  }
                ]
              },
              {
                "stepName": "hawle-dashboard.date",
                "formFields": [
                  {
                    "label": "Field 1",
                    "fieldName": "step2field1",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Purchase / Installation</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Purchase / Installation</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.date",
                    "fieldName": "purchaseDate",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "hawle-dashboard.time",
                    "fieldName": "purchaseTime",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 4",
                    "fieldName": "step2field4",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Last Service</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Last Service</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.date",
                    "fieldName": "lastServiceDate",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "hawle-dashboard.time",
                    "fieldName": "lastServiceTime",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              },
              {
                "stepName": "Location",
                "formFields": [
                  {
                    "label": "hawle-dashboard.zone",
                    "fieldName": "zone",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "autoComplete",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=zone&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: JSON.stringify({\n                    name: data.name,\n                    value: data.id.id\n                })\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "hawle-dashboard.map",
                    "fieldName": "map",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "map",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              }
            ],
            "genericFormFunction": "console.log(formData);\r\nconsole.log(widgetContext);\r\nconsole.log(stepsSettings);\r\n\r\nconst entityId = widgetContext.datasources[0].entity.id;\r\nconst $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    'http'));\r\nconst attributeService = $injector.get(widgetContext\r\n    .servicesMap.get('attributeService'));\r\nconst entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\nconst assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\nconst entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\r\nconst url = '/api/entityGroups/ASSET';\r\nvar urlEntitiesQuery = `/api/entitiesQuery/find`;\r\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\nvar assetCreateUrl = '';\r\nlet storzCount = 0;\r\n\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        type: \"relationsQuery\",\r\n        rootEntity: {\r\n            entityType: \"ASSET\",\r\n            id: entityId.id\r\n        },\r\n        direction: \"FROM\",\r\n        maxLevel: 1,\r\n        fetchLastLevelOnly: true,\r\n        filters: [\r\n            {\r\n                relationType: \"Contains\",\r\n                entityTypes: [\r\n                    \"ASSET\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"description\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitDiameter\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nconst relatedAllDStorzQuery = {\r\n    entityFilter: {\r\n        type: \"relationsQuery\",\r\n        rootEntity: {\r\n            entityType: \"ASSET\",\r\n            id: entityId.id\r\n        },\r\n        direction: \"FROM\",\r\n        maxLevel: 2,\r\n        fetchLastLevelOnly: true,\r\n        filters: [\r\n            {\r\n                relationType: \"Contains\",\r\n                entityTypes: [\r\n                    \"DEVICE\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        },\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"type\",\r\n        }\r\n    ],\r\n    latestValues: [],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nconst relatedZoneQuery = {\r\n    entityFilter: {\r\n        type: \"relationsQuery\",\r\n        rootEntity: {\r\n            entityType: \"ASSET\",\r\n            id: entityId.id\r\n        },\r\n        direction: \"TO\",\r\n        maxLevel: 1,\r\n        fetchLastLevelOnly: true,\r\n        filters: [\r\n            {\r\n                relationType: \"Contains\",\r\n                entityTypes: [\r\n                    \"ASSET\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nhttp.get(url).pipe().subscribe((\r\n    assetGroups) => {\r\n    assetGroups.forEach((\r\n        assetGroup) => {\r\n        if (assetGroup.name ===\r\n            \"All\") {\r\n            assetCreateUrl =\r\n                `/api/asset?entityGroupId=${assetGroup.id.id}`;\r\n        }\r\n    });\r\n    getEntityInfo(entityId);\r\n});\r\n\r\nfunction getEntityInfo(entityId) {\r\n    entityService.getEntity(entityId.entityType, entityId.id).pipe().subscribe((entityInfo) => {\r\n        if (entityInfo) {\r\n            entityInfo.name = formData.value.name;\r\n            assetService.saveAsset(entityInfo).pipe().subscribe((hydrantResponse) => {\r\n                // saving attributes\r\n                if (formData.value.aboveGround == false) {\r\n                    storzCount = countDefinedStorz([formData.value.storz1,formData.value.storz2 ]);\r\n                } else {\r\n                    storzCount = countDefinedStorz([formData.value.storz1,formData.value.storz2, formData.value.storz3 ]);\r\n                }\r\n                \r\n                saveAttributes('ASSET', entityId.id).subscribe(() => { });\r\n\r\n                updateStorz();\r\n\r\n                updateZone();\r\n\r\n                updateRelatedHydrantsZoneAttribute();\r\n                \r\n                setTimeout(() => {\r\n                    widgetContext.updateAliases();\r\n    \r\n                    widgetContext.showToast('success',\r\n                        translationService.instant('hawle-dashboard.hydrant-saved-successfully'), 2000,\r\n                        'top', 'left');\r\n                    openDashboardState('all_hydrants');\r\n                }, 1500)\r\n            })\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction updateStorz() {\r\n    http.post(urlEntitiesQuery, relatedStorzQuery).pipe().subscribe((storzInfo) => {\r\n\r\n        if (storzInfo && storzInfo.data && storzInfo.data.length) {\r\n            const storzNameList = [];\r\n            storzInfo.data.forEach((storz, index) => {\r\n                const fieldName = storz.latest.ENTITY_FIELD.name.value.trim().split('-')[0];\r\n                const fieldNumber = fieldName.trim().split('storz')[1];\r\n                storzNameList.push(fieldName);\r\n                const descriptionName = `${fieldName}Description`;\r\n                if (storz.latest.SERVER_ATTRIBUTE.exitDiameter.value != formData.value[fieldName] || storz.latest.SERVER_ATTRIBUTE.description.value != formData.value[descriptionName]) {\r\n                    saveStorzAttributes(storz.entityId.id, fieldNumber, formData.value[fieldName], formData.value[descriptionName]).subscribe(() => { });\r\n                }\r\n            });\r\n\r\n            if (storzNameList.length) {\r\n                if (formData.value.storz1 && !storzNameList.includes('storz1')) createStorzAndRelate(assetCreateUrl, entityId.id, formData.value.name, 1, formData.value.storz1, formData.value.storz1Description);\r\n                if (formData.value.storz2 && !storzNameList.includes('storz2')) createStorzAndRelate(assetCreateUrl, entityId.id, formData.value.name, 2, formData.value.storz2, formData.value.storz2Description);\r\n                if (formData.value.storz3 && !storzNameList.includes('storz3')) createStorzAndRelate(assetCreateUrl, entityId.id, formData.value.name, 3, formData.value.storz3, formData.value.storz3Description);\r\n            }\r\n\r\n            // if below ground has changed from above ground and storz3 available\r\n            if (formData.value.aboveGround == false && storzNameList.includes('storz3')) {\r\n                const storzToDelete = getStorzFromList(storzInfo.data, 'storz3');\r\n                \r\n                if (storzToDelete && storzToDelete.entityId && storzToDelete.entityId.id) {\r\n                    const storzDeleteURL = `/api/asset/${storzToDelete.entityId.id}`;\r\n                    const relatedDStorzQuery = {\r\n                        entityFilter: {\r\n                            type: \"relationsQuery\",\r\n                            rootEntity: {\r\n                                entityType: \"ASSET\",\r\n                                id: storzToDelete.entityId.id\r\n                            },\r\n                            direction: \"FROM\",\r\n                            maxLevel: 1,\r\n                            fetchLastLevelOnly: true,\r\n                            filters: [\r\n                                {\r\n                                    relationType: \"Contains\",\r\n                                    entityTypes: [\r\n                                        \"DEVICE\"\r\n                                    ]\r\n                                }\r\n                            ]\r\n                        },\r\n                        entityFields: [\r\n                            {\r\n                                type: \"ENTITY_FIELD\",\r\n                                key: \"name\",\r\n                            }\r\n                        ],\r\n                        latestValues: [\r\n                            {\r\n                                \"type\": \"SERVER_ATTRIBUTE\",\r\n                                \"key\": \"hydrantNumber\"\r\n                            }\r\n                        ],\r\n                        pageLink: {\r\n                            page: 0,\r\n                            pageSize: 10,\r\n                            sortOrder: {\r\n                                key: {\r\n                                    key: \"name\",\r\n                                    type: \"ENTITY_FIELD\",\r\n                                },\r\n                                direction: \"ASC\",\r\n                            }\r\n                        }\r\n                    };\r\n                    http.post(urlEntitiesQuery, relatedDStorzQuery).pipe().subscribe((storzResponse) => {\r\n                        if (storzResponse && storzResponse.data && storzResponse.data.length) {\r\n                            relatedDStorzId = storzResponse.data[0].entityId.id;\r\n                            relatedDStorzName = storzResponse.data[0].latest.ENTITY_FIELD.name.value;\r\n                            \r\n                            // unassinging dstorz;\r\n                            const sendToRuleEngineKey = \"resetAlarm\";\r\n                            const sendToRuleEngineURL = `/api/rule-engine/sendToRuleEngine?entityId=${entityId.id}&entityType=ASSET&key=${sendToRuleEngineKey}`;\r\n                            const sendToRuleEngineBody = {\r\n                                \"msg\": null,\r\n                                \"metadata\": {\r\n                                    \"deviceName\": relatedDStorzName,\r\n                                    \"deviceType\": \"d-storz\",\r\n                                    \"operationType\": \"UNASSIGN\"\r\n                                }\r\n                            }\r\n                            http.post(sendToRuleEngineURL, sendToRuleEngineBody).pipe().subscribe(() => {})\r\n                            \r\n                            const storzRelationDeleteURL = `/api/plugins/telemetry/DEVICE/${relatedDStorzId}/SERVER_SCOPE?keys=hydrantNumber,hydrantId,exitNode,hydrantsBrand,country,zip,city,street`;\r\n                            http.delete(storzRelationDeleteURL).pipe().subscribe(() => {\r\n                            \r\n                            });\r\n                        }\r\n                    });\r\n\r\n                    setTimeout(() => {\r\n                        http.delete(storzDeleteURL).pipe().subscribe(() => {\r\n                            http.post(urlEntitiesQuery, relatedAllDStorzQuery).pipe().subscribe((dStorzResponse) => {\r\n                                    if (dStorzResponse && dStorzResponse.data) {\r\n                                        let dstorzCount = dStorzResponse.data ? dStorzResponse.data.length : 0;\r\n                                        attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", [{key: \"dstorzCount\", value: dstorzCount}] ).subscribe(() => {});\r\n                                    }\r\n                            })\r\n                        });\r\n                    }, 1000);\r\n                }\r\n            }\r\n\r\n        } else if (storzInfo && storzInfo.data && storzInfo.data.length === 0) {\r\n            if (formData.value.storz1) createStorzAndRelate(assetCreateUrl, entityId.id, formData.value.name, 1, formData.value.storz1, formData.value.storz1Description);\r\n            if (formData.value.storz2) createStorzAndRelate(assetCreateUrl, entityId.id, formData.value.name, 2, formData.value.storz2, formData.value.storz2Description);\r\n            if (formData.value.storz3) createStorzAndRelate(assetCreateUrl, entityId.id, formData.value.name, 3, formData.value.storz3, formData.value.storz3Description);\r\n        }\r\n    });\r\n}\r\n\r\nfunction updateZone() {\r\n    http.post(urlEntitiesQuery, relatedZoneQuery).pipe().subscribe((zoneInfo) => {\r\n        if (zoneInfo && zoneInfo.data && zoneInfo.data.length) {\r\n            const zoneData = zoneInfo.data[0];\r\n            if (!formData.value.zone) {\r\n                deleteRelations(zoneData.entityId.id, entityId.id);\r\n            } else if (formData.value.zone && formData.value.zone.trim() && zoneData.entityId.id != JSON.parse(formData.value.zone.trim()).value) {\r\n                relateWithZone(JSON.parse(formData.value.zone).value, entityId.id);\r\n                deleteRelations(zoneData.entityId.id, entityId.id);\r\n            }\r\n        } else {\r\n            relateWithZone(JSON.parse(formData.value.zone).value, entityId.id);\r\n        }\r\n    });\r\n}\r\n\r\nfunction relateWithZone(zoneId, hydrantId) {\r\n    entityRelationService.saveRelation({\r\n        from: {\r\n            entityType: \"ASSET\",\r\n            id: zoneId\r\n        },\r\n        to: {\r\n            entityType: \"ASSET\",\r\n            id: hydrantId\r\n        },\r\n        type: \"Contains\",\r\n        typeGroup: \"COMMON\"\r\n    }).subscribe(() => { });\r\n}\r\n\r\nfunction deleteRelations(relationFrom, relationTo) {\r\n    entityRelationService.deleteRelation({ entityType: 'ASSET', id: relationFrom }, 'Contains', { entityType: 'ASSET', id: relationTo }).pipe().subscribe(() => { });\r\n}\r\n\r\nfunction createStorzAndRelate(assetCreateUrl, hydrantId, hydrantName, storzNumber, exitDiameter, description) {\r\n    const storzURL = assetCreateUrl;\r\n    const storzInfo = {\r\n        name: generateStorzName(8, hydrantName, storzNumber),\r\n        type: \"storz\"\r\n    }\r\n\r\n    http.post(storzURL, storzInfo)\r\n        .pipe().subscribe((storzResponse) => {\r\n\r\n            // saving attribute\r\n            saveStorzAttributes(storzResponse.id.id, storzNumber, exitDiameter, description).subscribe(() => { });\r\n\r\n            saveRelationWithStorz(hydrantId, storzResponse.id.id).subscribe(() => { });\r\n        })\r\n}\r\n\r\nfunction countDefinedStorz(array) {\r\n  return array.filter(element => element !== undefined && element !== null && element != \"\").length;\r\n}\r\n\r\n\r\nfunction saveAttributes(entityType, entityId) {\r\n    const attributes = {\r\n        hydrantsBrand: formData.value.hydrantsBrand,\r\n        modelNumber: formData.value.modelNumber,\r\n        storzCount: storzCount,\r\n        hydrantImage: 'https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&st=2023-11-02T15:08:18Z&se=2035-11-02T23:08:18Z&sv=2022-11-02&sr=b&sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D',\r\n        zone: formData.value.zone ? JSON.parse(formData.value.zone).name : \"\",\r\n        aboveGround: formData.value.aboveGround,\r\n        undergroundHydrantBrand: formData.value.undergroundHydrantBrand,\r\n        undergroundHydrantModel: formData.value.undergroundHydrantModel,\r\n        undergroundHydrantDiggingDepth: formData.value.undergroundHydrantDiggingDepth,\r\n        undergroundHydrantDiggingDepthUnit: formData.value.undergroundHydrantDiggingDepthUnit,\r\n        doubleLocked: formData.value.doubleLocked || formData.value.doubleLocked === \"true\" ? true : false,\r\n        selectedZone: formData.value.selectedZone,\r\n        networkInputPressure: formData.value.networkInputPressure,\r\n        networkInputPressureUnit: \"Bar\",\r\n        hydrantNumber: formData.value.name,\r\n        orificePlate: formData.value.orificePlate || formData.value.orificePlate === \"true\" ? true : false,\r\n        flowWithoutOrifice: formData.value.flowWithoutOrifice,\r\n        flowWithoutOrificeUnit: formData.value.flowWithoutOrificeUnit,\r\n        outputPressure1: formData.value.outputPressure1,\r\n        outputPressure2: formData.value.outputPressure2,\r\n        outputPressure3: formData.value.outputPressure3,\r\n        outputVolume1: formData.value.outputVolume1,\r\n        outputVolume1Unit: formData.value.outputVolume1Unit,\r\n        outputVolume2: formData.value.outputVolume2,\r\n        outputVolume2Unit: formData.value.outputVolume2Unit,\r\n        outputVolume3: formData.value.outputVolume3,\r\n        outputVolume3Unit: formData.value.outputVolume3Unit,\r\n        purchaseDate: getMsTimeAfterAddTimeInDate(formData.value.purchaseDate, formData.value.purchaseTime),\r\n        lastServiceDate: getMsTimeAfterAddTimeInDate(formData.value.lastServiceDate, formData.value.lastServiceTime),\r\n        latitude: formData.value.map_latitude,\r\n        longitude: formData.value.map_longitude,\r\n        street: formData.value.map_street,\r\n        zip: formData.value.map_zip,\r\n        city: formData.value.map_city,\r\n        state: formData.value.map_state,\r\n        country: formData.value.map_country\r\n    };\r\n    var serverAttributeUrl =\r\n        `/api/plugins/telemetry/${entityType}/${entityId}/SERVER_SCOPE`;\r\n    return http.post(serverAttributeUrl, attributes);\r\n}\r\n\r\nfunction saveStorzAttributes(entityId, storzNumber, exitDiameter, description) {\r\n    const attributes = {\r\n        storzNumber: storzNumber,\r\n        exitDiameter: exitDiameter,\r\n        exitName: `Exit ${storzNumber}`,\r\n        exitDiameterUnit: \"mm\"\r\n    };\r\n    if (description && description.trim()) attributes['description'] = description;\r\n    var serverAttributeUrl =\r\n        `/api/plugins/telemetry/ASSET/${entityId}/SERVER_SCOPE`;\r\n    return http.post(serverAttributeUrl, attributes);\r\n}\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.updateState(statedId,\r\n            params);\r\n    }\r\n}\r\n\r\nfunction getMsTimeAfterAddTimeInDate(date, time) {\r\n    let newDate = new Date(date);\r\n    let newTime = new Date(time);\r\n    let hours = newTime.getHours();\r\n    let minutes = newTime.getMinutes();\r\n    newDate.setHours(hours);\r\n    newDate.setMinutes(minutes);\r\n    return newDate.getTime();\r\n}\r\n\r\nfunction updateRelatedHydrantsZoneAttribute() {\r\n    const relatedEntitiesQuery = {\r\n        relatedEntityData: {\r\n            entityFilter: {\r\n                type: \"relationsQuery\",\r\n                rootEntity: {\r\n                    entityType: \"ASSET\",\r\n                    id: entityId.id\r\n                },\r\n                direction: \"FROM\",\r\n                maxLevel: 2,\r\n                fetchLastLevelOnly: true,\r\n                deviceType: [\r\n                    \"d-storz\"\r\n                ],\r\n                filters: [\r\n                    {\r\n                        relationType: \"Contains\",\r\n                        entityTypes: [\r\n                            \"DEVICE\"\r\n                        ]\r\n                    }\r\n                ]\r\n            },\r\n            keyFilters: [],\r\n            entityFields: [],\r\n            latestValues: [],\r\n            pageLink: {\r\n                sortOrder: {\r\n                    key: {\r\n                        key: \"name\",\r\n                        type: \"ENTITY_FIELD\"\r\n                    },\r\n                    direction: \"ASC\"\r\n                }\r\n            }\r\n        },\r\n        attributes: {\r\n            \"hydrantNumber\": formData.value.name,\r\n            \"hydrantsBrand\": formData.value.hydrantsBrand,\r\n            \"street\": formData.value.map_street,\r\n            \"zip\": formData.value.map_zip,\r\n            \"city\": formData.value.map_city,\r\n            \"state\": formData.value.map_state,\r\n            \"country\": formData.value.map_country\r\n        }\r\n    };\r\n\r\n    http.post('/api/updateRelatedEntityScope?scope=SERVER_SCOPE', relatedEntitiesQuery).pipe().subscribe((relatedEntities) => {\r\n    })\r\n}\r\n\r\n\r\nfunction generateStorzName(length, hydrantName, storzNumber) {\r\n    let result = [];\r\n    let hexRef = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\n    // for the given length\r\n    for (let n = 0; n < length; n++) {\r\n        // pick a random unit and store it in result\r\n        result.push(hexRef[Math.floor(Math.random() * 16)]);\r\n    }\r\n\r\n    // return the result as a string\r\n    return `storz${storzNumber}-${hydrantName}-${result.join('').toUpperCase()}`;\r\n}\r\n\r\nfunction saveRelationWithStorz(hydrantId, storzId) {\r\n    return entityRelationService.saveRelation({\r\n        from: {\r\n            entityType: \"ASSET\",\r\n            id: hydrantId\r\n        },\r\n        to: {\r\n            entityType: \"ASSET\",\r\n            id: storzId\r\n        },\r\n        type: \"Contains\",\r\n        typeGroup: \"COMMON\"\r\n    });\r\n}\r\n\r\nfunction getStorzFromList(storzList, name) {\r\n    return storzList.find(storz => storz.latest.ENTITY_FIELD.name.value.trim().split('-')[0] === name);\r\n}"
          },
          "title": "New Generic Form Builder",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "ddc8e1bf-f5ce-6040-d4dc-ae0eebbd854b"
      },
      "ddc8e1bf-f5ce-6040-d4dc-ae0eebbd854c": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.7971254536169066
                },
                {
                  "name": "latitude",
                  "type": "attribute",
                  "label": "latitude",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.49009063569266265,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "return value ? value : 46.8182;"
                },
                {
                  "name": "longitude",
                  "type": "attribute",
                  "label": "longitude",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.18252476184266042,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "return value ? value : 8.2275;"
                },
                {
                  "name": "hydrantsBrand",
                  "type": "attribute",
                  "label": "brand",
                  "color": "#ffc107",
                  "settings": {},
                  "_hash": 0.7433201295650529,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "modelNumber",
                  "type": "attribute",
                  "label": "modelNumber",
                  "color": "#607d8b",
                  "settings": {},
                  "_hash": 0.5133114978214943,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "aboveGround",
                  "type": "attribute",
                  "label": "aboveGround",
                  "color": "#9c27b0",
                  "settings": {},
                  "_hash": 0.4430377334938993,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": null,
                  "postFuncBody": null
                },
                {
                  "name": "networkInputPressure",
                  "type": "attribute",
                  "label": "networkInputPressure",
                  "color": "#8bc34a",
                  "settings": {},
                  "_hash": 0.4876396398724634
                },
                {
                  "name": "orificePlate",
                  "type": "attribute",
                  "label": "orificePlate",
                  "color": "#3f51b5",
                  "settings": {},
                  "_hash": 0.4487965140172647
                },
                {
                  "name": "doubleLocked",
                  "type": "attribute",
                  "label": "doubleLocked",
                  "color": "#e91e63",
                  "settings": {},
                  "_hash": 0.04228420678502354
                },
                {
                  "name": "outputPressure1",
                  "type": "attribute",
                  "label": "outputPressure1",
                  "color": "#ffeb3b",
                  "settings": {},
                  "_hash": 0.18503801124812447
                },
                {
                  "name": "outputPressure2",
                  "type": "attribute",
                  "label": "outputPressure2",
                  "color": "#03a9f4",
                  "settings": {},
                  "_hash": 0.20480836270829883
                },
                {
                  "name": "outputPressure3",
                  "type": "attribute",
                  "label": "outputPressure3",
                  "color": "#ff9800",
                  "settings": {},
                  "_hash": 0.7796763017106842
                },
                {
                  "name": "outputVolume1",
                  "type": "attribute",
                  "label": "outputVolume1",
                  "color": "#673ab7",
                  "settings": {},
                  "_hash": 0.8243880425542192
                },
                {
                  "name": "outputVolume1Unit",
                  "type": "attribute",
                  "label": "outputVolume1Unit",
                  "color": "#cddc39",
                  "settings": {},
                  "_hash": 0.734131298675101
                },
                {
                  "name": "outputVolume2",
                  "type": "attribute",
                  "label": "outputVolume2",
                  "color": "#009688",
                  "settings": {},
                  "_hash": 0.06625568859919428
                },
                {
                  "name": "outputVolume2Unit",
                  "type": "attribute",
                  "label": "outputVolume2Unit",
                  "color": "#795548",
                  "settings": {},
                  "_hash": 0.44751014873847317
                },
                {
                  "name": "outputVolume3",
                  "type": "attribute",
                  "label": "outputVolume3",
                  "color": "#00bcd4",
                  "settings": {},
                  "_hash": 0.6532124007917104
                },
                {
                  "name": "outputVolume3Unit",
                  "type": "attribute",
                  "label": "outputVolume3Unit",
                  "color": "#ff5722",
                  "settings": {},
                  "_hash": 0.6835018970623132
                },
                {
                  "name": "purchaseDate",
                  "type": "attribute",
                  "label": "purchaseDate",
                  "color": "#9e9e9e",
                  "settings": {},
                  "_hash": 0.9597283585204812
                },
                {
                  "name": "lastServiceDate",
                  "type": "attribute",
                  "label": "lastServiceDate",
                  "color": "#2962ff",
                  "settings": {},
                  "_hash": 0.16513841648626082
                },
                {
                  "name": "street",
                  "type": "attribute",
                  "label": "street",
                  "color": "#d50000",
                  "settings": {},
                  "_hash": 0.5669509276923232
                },
                {
                  "name": "zip",
                  "type": "attribute",
                  "label": "zip",
                  "color": "#ffab00",
                  "settings": {},
                  "_hash": 0.05715726478882499
                },
                {
                  "name": "state",
                  "type": "attribute",
                  "label": "state",
                  "color": "#455a64",
                  "settings": {},
                  "_hash": 0.5901267568418278
                },
                {
                  "name": "city",
                  "type": "attribute",
                  "label": "city",
                  "color": "#aa00ff",
                  "settings": {},
                  "_hash": 0.4654616036485133
                },
                {
                  "name": "country",
                  "type": "attribute",
                  "label": "country",
                  "color": "#64dd17",
                  "settings": {},
                  "_hash": 0.18593130243914624
                },
                {
                  "name": "undergroundHydrantBrand",
                  "type": "attribute",
                  "label": "undergroundHydrantBrand",
                  "color": "#64dd17",
                  "settings": {},
                  "_hash": 0.8541568846384631
                },
                {
                  "name": "undergroundHydrantModel",
                  "type": "attribute",
                  "label": "undergroundHydrantModel",
                  "color": "#304ffe",
                  "settings": {},
                  "_hash": 0.9715554461703448
                },
                {
                  "name": "undergroundHydrantDiggingDepth",
                  "type": "attribute",
                  "label": "undergroundHydrantDiggingDepth",
                  "color": "#c51162",
                  "settings": {},
                  "_hash": 0.048213622668231704
                },
                {
                  "name": "flowWithoutOrifice",
                  "type": "attribute",
                  "label": "flowWithoutOrifice",
                  "color": "#ffd600",
                  "settings": {},
                  "_hash": 0.012112136919059768
                },
                {
                  "name": "flowWithoutOrificeUnit",
                  "type": "attribute",
                  "label": "flowWithoutOrificeUnit",
                  "color": "#0091ea",
                  "settings": {},
                  "_hash": 0.9726093968831149
                },
                {
                  "name": "undergroundHydrantDiggingDepthUnit",
                  "type": "attribute",
                  "label": "undergroundHydrantDiggingDepthUnit",
                  "color": "#ff6d00",
                  "settings": {},
                  "_hash": 0.8060877323020503
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": true,
            "patchFormFunction": "// const data = widgetContext.data;\r\nconst $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nconst rxjs = widgetContext.rxjs;\r\nconst purchaseDate = widgetContext.data.find(data => data\r\n    .dataKey.name === \"purchaseDate\").data[0][1];\r\nconst lastServiceDate = widgetContext.data.find(data => data\r\n    .dataKey.name === \"lastServiceDate\").data[0][1];\r\nconst entityId = widgetContext.datasources[0].entityId;\r\nvar urlEntitiesQuery = `/api/entitiesQuery/find`;\r\n\r\n\r\n// getting data for map\r\nconst latitudeProps = widgetContext.data.find(data => data.dataKey.name === 'latitude');\r\nconst latitude = latitudeProps ? latitudeProps.data[0][1] : 0;\r\nconst longitudeProps = widgetContext.data.find(data => data.dataKey.name === 'longitude');\r\nconst longitude = longitudeProps ? longitudeProps.data[0][1] : 0;\r\nconst streetProps = widgetContext.data.find(data => data.dataKey.name === 'street');\r\nconst street = streetProps ? streetProps.data[0][1] : \"\";\r\nconst zipProps = widgetContext.data.find(data => data.dataKey.name === 'zip');\r\nconst zip = zipProps ? zipProps.data[0][1] : \"\";\r\nconst cityProps = widgetContext.data.find(data => data.dataKey.name === 'city');\r\nconst city = cityProps ? cityProps.data[0][1] : \"\";\r\nconst stateProps = widgetContext.data.find(data => data.dataKey.name === 'state');\r\nconst state = stateProps ? stateProps.data[0][1] : \"\";\r\nconst countryProps = widgetContext.data.find(data => data.dataKey.name === 'country');\r\nconst country = countryProps ? countryProps.data[0][1] : \"\";\r\nconst orificePlateProps = widgetContext.data.find(data => data.dataKey.name === 'orificePlate');\r\nconst orificePlate = orificePlateProps ? orificePlateProps.data[0][1] : false;\r\nconst doubleLockedProps = widgetContext.data.find(data => data.dataKey.name === 'doubleLocked');\r\nconst doubleLocked = doubleLockedProps ? doubleLockedProps.data[0][1] : false;\r\nconst aboveGroundProps = widgetContext.data.find(data => data.dataKey.name === 'aboveGround');\r\nconst aboveGround = aboveGroundProps ? aboveGroundProps.data[0][1] : false;\r\n\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        type: \"relationsQuery\",\r\n        rootEntity: {\r\n            entityType: \"ASSET\",\r\n            id: entityId\r\n        },\r\n        direction: \"FROM\",\r\n        maxLevel: 1,\r\n        fetchLastLevelOnly: true,\r\n        filters: [\r\n            {\r\n                relationType: \"Contains\",\r\n                entityTypes: [\r\n                    \"ASSET\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"description\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitDiameter\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nconst relatedZoneQuery = {\r\n    entityFilter: {\r\n        type: \"relationsQuery\",\r\n        rootEntity: {\r\n            entityType: \"ASSET\",\r\n            id: entityId\r\n        },\r\n        direction: \"TO\",\r\n        maxLevel: 1,\r\n        fetchLastLevelOnly: true,\r\n        filters: [\r\n            {\r\n                relationType: \"Contains\",\r\n                entityTypes: [\r\n                    \"ASSET\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nconst storzList$ = http.post(urlEntitiesQuery, relatedStorzQuery).pipe();\r\nconst zone$ = http.post(urlEntitiesQuery, relatedZoneQuery).pipe();\r\n\r\nreturn rxjs.forkJoin([storzList$, zone$]).pipe(rxjs.map((response) => {\r\n    const storzList = (response[0] && response[0].data && response[0].data.length) ? response[0].data : [];\r\n    const rZone = (response[1] && response[1].data && response[1].data.length) ? response[1].data : [];\r\n    return {\r\n        name: '',\r\n        orificePlate: orificePlate === \"true\" ? true : false,\r\n        doubleLocked: doubleLocked === \"true\" ? true : false,\r\n        zone: rZone && rZone.length ? JSON.stringify({name: rZone[0].latest.ENTITY_FIELD.name.value, value: rZone[0].entityId.id}) : \"\",\r\n        purchaseDate: new Date(purchaseDate),\r\n        purchaseTime: new Date(purchaseDate),\r\n        lastServiceDate: lastServiceDate ? new Date(lastServiceDate) : null,\r\n        lastServiceTime: lastServiceDate ? new Date(lastServiceDate) : null,\r\n        storz1: storzList && storzList.length && getStorzFromList(storzList, 'storz1') && getStorzFromList(storzList, 'storz1').latest && getStorzFromList(storzList, 'storz1').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz1').latest.SERVER_ATTRIBUTE.exitDiameter.value : \"\",\r\n        storz1Description: storzList && storzList.length && getStorzFromList(storzList, 'storz1') && getStorzFromList(storzList, 'storz1').latest && getStorzFromList(storzList, 'storz1').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz1').latest.SERVER_ATTRIBUTE.description.value : \"\",\r\n        storz2: storzList && storzList.length && getStorzFromList(storzList, 'storz2') && getStorzFromList(storzList, 'storz2').latest && getStorzFromList(storzList, 'storz2').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz2').latest.SERVER_ATTRIBUTE.exitDiameter.value : \"\",\r\n        storz2Description: storzList && storzList.length && getStorzFromList(storzList, 'storz2') && getStorzFromList(storzList, 'storz2').latest && getStorzFromList(storzList, 'storz2').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz2').latest.SERVER_ATTRIBUTE.description.value : \"\",\r\n        storz3: storzList && storzList.length && getStorzFromList(storzList, 'storz3') && getStorzFromList(storzList, 'storz3').latest && getStorzFromList(storzList, 'storz3').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz3').latest.SERVER_ATTRIBUTE.exitDiameter.value : \"\",\r\n        storz3Description: storzList && storzList.length && getStorzFromList(storzList, 'storz3') && getStorzFromList(storzList, 'storz3').latest && getStorzFromList(storzList, 'storz3').latest.SERVER_ATTRIBUTE ? getStorzFromList(storzList, 'storz3').latest.SERVER_ATTRIBUTE.description.value : \"\",\r\n        map_latitude: latitude,\r\n        map_longitude: longitude,\r\n        map_street: street,\r\n        map_zip: zip,\r\n        map_city: city,\r\n        map_state: state,\r\n        map_country: country,\r\n        aboveGround: aboveGround === \"true\" ? true : false,\r\n    }\r\n}));\r\n\r\n\r\nfunction getTimeFromDate(date) {\r\n    const hours = date.getHours().toString().padStart(2,\r\n        '0');\r\n    const minutes = date.getMinutes().toString().padStart(2,\r\n        '0');\r\n\r\n    return `${hours}:${minutes}`;\r\n}\r\n\r\n\r\nfunction getStorzFromList(storzList, name) {\r\n    return storzList.find(storz => storz.latest.ENTITY_FIELD.name.value.trim().split('-')[0] === name);\r\n}",
            "isExternalBtn": false,
            "formName": "hawle-dashboard.Duplicate-Hydrant",
            "steps": [
              {
                "stepName": "hawle-dashboard.General-Info",
                "formFields": [
                  {
                    "label": "hawle-dashboard.hydrant-number",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.brand",
                    "fieldName": "hydrantsBrand",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Hawle\", value: \"Hawle\"},\n\t{name: \"Von Roll\", value: \"Von Roll\"},\n\t{name: \"Hinni\", value: \"Hinni\"},\n\t{name: \"Wild\", value: \"Wild\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "dependantFields": "modelNumber",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.model",
                    "fieldName": "modelNumber",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\r\n  { name: 'H8370', value: 'H8370', hydrantsBrand: 'Hawle' },\r\n  { name: 'H4', value: 'H4', hydrantsBrand: 'Hawle' },\r\n  { name: 'H4-HV', value: 'H4-HV', hydrantsBrand: 'Hawle' },\r\n  { name: 'N492', value: 'N492', hydrantsBrand: 'Hawle' },\r\n  { name: 'HYTEC', value: 'HYTEC', hydrantsBrand: 'Von Roll' },\r\n  { name: 'CLASSIC', value: 'CLASSIC', hydrantsBrand: 'Von Roll' },\r\n  { name: '5000S', value: '5000S', hydrantsBrand: 'Von Roll' },\r\n  { name: 'DECO', value: 'DECO', hydrantsBrand: 'Von Roll' },\r\n  { name: 'HYPLUS', value: 'HYPLUS', hydrantsBrand: 'Von Roll' },\r\n  { name: 'VARIO 2.0', value: 'VARIO 2.0', hydrantsBrand: 'Von Roll' },\r\n  { name: '6000', value: '6000', hydrantsBrand: 'Hinni' },\r\n  { name: '6006', value: '6006', hydrantsBrand: 'Hinni' },\r\n  { name: 'UT-RADIAL', value: 'UT-RADIAL', hydrantsBrand: 'Hinni' },\r\n  { name: 'UNO 1', value: 'UNO 1', hydrantsBrand: 'Wild' }\r\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 48,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Field 4",
                    "fieldName": "step0field4",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Water abstraction</h3>\n<p style=\"font-size: 1rem;font-weight: 500;margin-bottom: 0.25rem;\">Select one from below</p>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Water abstraction</h3>\n<p style=\"font-size: 1rem;font-weight: 500;margin-bottom: 0.25rem;\">Select one from below</p>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Select-ground-*",
                    "fieldName": "aboveGround",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Above ground\", value: true, dependencyFor: [\"storz3\",\"storz3Description\", \"undergroundHydrantBrand\", \"undergroundHydrantModel\", \"undergroundHydrantDiggingDepth\", \"undergroundHydrantDiggingDepthUnit\", \"undergroundHydrantTitle\", \"outputPressure3\", \"outputVolume3\", \"outputVolume3Unit\"]},\n    {name: \"Below ground\", value: false},\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Information above the cover",
                    "fieldName": "step0field6",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Information above the cover</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Information above the cover</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Storz-1",
                    "fieldName": "storz1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.description",
                    "fieldName": "storz1Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.Storz-2",
                    "fieldName": "storz2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.description",
                    "fieldName": "storz2Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.Storz-3",
                    "fieldName": "storz3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.description",
                    "fieldName": "storz3Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 13",
                    "fieldName": "undergroundHydrantTitle",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Add underground hydrant (Optional)</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Add underground hydrant (Optional)</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.brand",
                    "fieldName": "undergroundHydrantBrand",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Hawle\", value: \"Hawle\"},\n\t{name: \"Von Roll\", value: \"Von Roll\"},\n\t{name: \"Hinni\", value: \"Hinni\"},\n\t{name: \"Wild\", value: \"Wild\"}\n]);\n",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "undergroundHydrantModel",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.model",
                    "fieldName": "undergroundHydrantModel",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n  { name: 'H8370', value: 'H8370', undergroundHydrantBrand: 'Hawle' },\n  { name: 'H4', value: 'H4', undergroundHydrantBrand: 'Hawle' },\n  { name: 'H4-HV', value: 'H4-HV', undergroundHydrantBrand: 'Hawle' },\n  { name: 'N492', value: 'N492', undergroundHydrantBrand: 'Hawle' },\n  { name: 'HYTEC', value: 'HYTEC', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'CLASSIC', value: 'CLASSIC', undergroundHydrantBrand: 'Von Roll' },\n  { name: '5000S', value: '5000S', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'DECO', value: 'DECO', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'HYPLUS', value: 'HYPLUS', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'VARIO 2.0', value: 'VARIO 2.0', undergroundHydrantBrand: 'Von Roll' },\n  { name: '6000', value: '6000', undergroundHydrantBrand: 'Hinni' },\n  { name: '6006', value: '6006', undergroundHydrantBrand: 'Hinni' },\n  { name: 'UT-RADIAL', value: 'UT-RADIAL', undergroundHydrantBrand: 'Hinni' },\n  { name: 'UNO 1', value: 'UNO 1', undergroundHydrantBrand: 'Wild' }\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "hawle-dashboard.Digging-depth",
                    "fieldName": "undergroundHydrantDiggingDepth",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "undergroundHydrantDiggingDepthUnit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"m\", value: \"m\"},\n    {name: \"cm\", value: \"cm\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  }
                ]
              },
              {
                "stepName": "Pressure Info",
                "formFields": [
                  {
                    "label": "hawle-dashboard.Main-Input-Pressure",
                    "fieldName": "networkInputPressure",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Aperture-Turn__",
                    "fieldName": "orificePlate",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "toggle",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Yes\", value: true},\n    {name: \"No\", value: false, dependencyFor: [\"step1field15\",\"flowWithoutOrifice\", \"flowWithoutOrificeUnit\"]}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Double-Shut-off__",
                    "fieldName": "doubleLocked",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "toggle",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Yes\", value: true},\n    {name: \"No\", value: false}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 4",
                    "fieldName": "step1field4",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Output pressure</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Output pressure</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 5",
                    "fieldName": "step1field5",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Volumetric flow</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Volumetric flow</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "1",
                    "fieldName": "outputPressure1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "1",
                    "fieldName": "outputVolume1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "outputVolume1Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "2",
                    "fieldName": "outputPressure2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "2",
                    "fieldName": "outputVolume2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "outputVolume2Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "3",
                    "fieldName": "outputPressure3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "3",
                    "fieldName": "outputVolume3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "outputVolume3Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 15",
                    "fieldName": "step1field15",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Flow without orifice plate</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Flow without orifice plate</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Flow",
                    "fieldName": "flowWithoutOrifice",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "flowWithoutOrificeUnit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  }
                ]
              },
              {
                "stepName": "hawle-dashboard.date",
                "formFields": [
                  {
                    "label": "Field 1",
                    "fieldName": "step2field1",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Purchase / Installation</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Purchase / Installation</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.date",
                    "fieldName": "purchaseDate",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": true,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "hawle-dashboard.time",
                    "fieldName": "purchaseTime",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": true,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 4",
                    "fieldName": "step2field4",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Last Service</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Last Service</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.date",
                    "fieldName": "lastServiceDate",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "hawle-dashboard.time",
                    "fieldName": "lastServiceTime",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              },
              {
                "stepName": "Location",
                "formFields": [
                  {
                    "label": "hawle-dashboard.zone",
                    "fieldName": "zone",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=zone&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: JSON.stringify({\n                    name: data.name,\n                    value: data.id.id\n                })\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "hawle-dashboard.map",
                    "fieldName": "map",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "map",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              }
            ],
            "genericFormFunction": "const $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    'http'));\r\nconst attributeService = $injector.get(widgetContext\r\n    .servicesMap.get('attributeService'));\r\nconst entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\nconst url = '/api/entityGroups/ASSET';\r\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\nlet storzCount = 0;\r\n\r\nhttp.get(url).pipe().subscribe((\r\n    assetGroups) => {\r\n        \r\n    var assetCreateUrl = '';\r\n    assetGroups.forEach((\r\n        assetGroup) => {\r\n        if (assetGroup.name ===\r\n            \"All\") {\r\n            assetCreateUrl =\r\n                `/api/asset?entityGroupId=${assetGroup.id.id}`;\r\n        }\r\n    });\r\n    if (assetCreateUrl !== '') {\r\n        const hydrantInfo = {\r\n            name: formData.value.name,\r\n            type: \"hydrant\"\r\n        }\r\n        \r\n        http.post(assetCreateUrl, hydrantInfo)\r\n            .pipe().subscribe((hydrantResponse) => {\r\n                \r\n                storzCount = countDefinedStorz([formData.value.storz1, formData.value.storz2, formData.value.storz3]);\r\n                \r\n                // saving attributes\r\n                saveAttributes('ASSET', hydrantResponse.id.id).subscribe(() => {});\r\n                \r\n                // saving timeseries\r\n                saveTelemetry('ASSET', hydrantResponse.id.id).subscribe(() => {});\r\n                \r\n                if (formData.value.storz1) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name,  1, formData.value.storz1, formData.value.storz1Description);\r\n                if (formData.value.storz2) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name, 2, formData.value.storz2, formData.value.storz2Description);\r\n                if (formData.value.storz3) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name, 3, formData.value.storz3, formData.value.storz3Description);\r\n\r\n                if (formData.value.zone) relateWithZone(JSON.parse(formData.value.zone).value, hydrantResponse.id.id);\r\n\r\n                widgetContext.showToast('success',\r\n                    translationService.instant('hawle-dashboard.hydrant-saved-successfully'), 2000,\r\n                    'top', 'left');\r\n                openDashboardState('all_hydrants');\r\n                widgetContext.updateAliases();\r\n            })\r\n    }\r\n});\r\n\r\nfunction relateWithZone(zoneId, hydrantId) {\r\n    entityRelationService.saveRelation({\r\n        from: {\r\n          entityType: \"ASSET\",\r\n          id: zoneId\r\n        },\r\n        to: {\r\n          entityType: \"ASSET\",\r\n          id: hydrantId\r\n        },\r\n        type: \"Contains\",\r\n        typeGroup: \"COMMON\"\r\n    }).subscribe(() => {});\r\n}\r\n\r\n\r\nfunction createStorzAndRelate(assetCreateUrl, hydrantId, hydrantName, storzNumber, exitDiameter, description) {\r\n    const storzURL = assetCreateUrl;\r\n    const storzInfo = {\r\n        name: generateStorzName(8, hydrantName, storzNumber),\r\n        type: \"storz\"\r\n    }\r\n    \r\n    http.post(storzURL, storzInfo)\r\n        .pipe().subscribe((storzResponse) => {\r\n            \r\n            // saving attribute\r\n            saveStorzAttributes(storzResponse.id.id, storzNumber, exitDiameter, description).subscribe(() => {});\r\n            \r\n            saveRelationWithStorz(hydrantId, storzResponse.id.id).subscribe(() => {});\r\n        })\r\n}\r\n\r\nfunction countDefinedStorz(array) {\r\n  return array.filter(element => element !== undefined && element !== null && element != \"\").length;\r\n}\r\n\r\n\r\nfunction saveAttributes(entityType, entityId) {\r\n    const attributes = {\r\n        hydrantsBrand: formData.value.hydrantsBrand,\r\n        modelNumber: formData.value.modelNumber,\r\n        storzCount: storzCount,\r\n        hydrantImage: 'https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&st=2023-11-02T15:08:18Z&se=2035-11-02T23:08:18Z&sv=2022-11-02&sr=b&sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D',\r\n        zone: formData.value.zone ? JSON.parse(formData.value.zone).name : \"\",\r\n        aboveGround: formData.value.aboveGround,\r\n        undergroundHydrantBrand: formData.value.undergroundHydrantBrand,\r\n        undergroundHydrantModel: formData.value.undergroundHydrantModel,\r\n        undergroundHydrantDiggingDepth: formData.value.undergroundHydrantDiggingDepth,\r\n        undergroundHydrantDiggingDepthUnit: formData.value.undergroundHydrantDiggingDepthUnit,\r\n        doubleLocked: formData.value.doubleLocked ? true : false,\r\n        selectedZone: formData.value.selectedZone,\r\n        networkInputPressure: formData.value.networkInputPressure,\r\n        networkInputPressureUnit: \"Bar\",\r\n        hydrantNumber: formData.value.name,\r\n        hydrantId: entityId,\r\n        orificePlate: formData.value.orificePlate ? true : false,\r\n        flowWithoutOrifice: formData.value.flowWithoutOrifice,\r\n        flowWithoutOrificeUnit: formData.value.flowWithoutOrificeUnit,\r\n        outputPressure1: formData.value.outputPressure1,\r\n        outputPressure2: formData.value.outputPressure2,\r\n        outputPressure3: formData.value.outputPressure3,\r\n        outputVolume1: formData.value.outputVolume1,\r\n        outputVolume1Unit: formData.value.outputVolume1Unit,\r\n        outputVolume2: formData.value.outputVolume2,\r\n        outputVolume2Unit: formData.value.outputVolume2Unit,\r\n        outputVolume3: formData.value.outputVolume3,\r\n        outputVolume3Unit: formData.value.outputVolume3Unit,\r\n        purchaseDate: getMsTimeAfterAddTimeInDate(formData.value.purchaseDate, formData.value.purchaseTime),\r\n        lastServiceDate: getMsTimeAfterAddTimeInDate(formData.value.lastServiceDate, formData.value.lastServiceTime),\r\n        latitude: formData.value.map_latitude,\r\n        longitude: formData.value.map_longitude,\r\n        street: formData.value.map_street,\r\n        zip: formData.value.map_zip,\r\n        city: formData.value.map_city,\r\n        state: formData.value.map_state,\r\n        country: formData.value.map_country\r\n    };\r\n    var serverAttributeUrl =\r\n        `/api/plugins/telemetry/${entityType}/${entityId}/SERVER_SCOPE`;\r\n    return http.post(serverAttributeUrl, attributes);\r\n}\r\n\r\nfunction saveTelemetry(entityType, entityId) {\r\n    const timeSeries = {\r\n        isNotAssigned: true\r\n    };\r\n    var timeSeriesUrl =\r\n        `/api/plugins/telemetry/${entityType}/${entityId}/timeseries/ANY`;\r\n    return http.post(timeSeriesUrl, timeSeries);\r\n}\r\n\r\nfunction saveStorzAttributes(entityId, storzNumber, exitDiameter, description) {\r\n    const attributes = {\r\n        storzNumber: storzNumber,\r\n        exitDiameter: exitDiameter,\r\n        exitName: `Exit ${storzNumber}`,\r\n        exitDiameterUnit: \"mm\"\r\n    };\r\n    if (description && description.trim()) attributes['description'] = description;\r\n    var serverAttributeUrl =\r\n        `/api/plugins/telemetry/ASSET/${entityId}/SERVER_SCOPE`;\r\n    return http.post(serverAttributeUrl, attributes);\r\n}\r\n\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.openState(statedId,\r\n            params);\r\n    }\r\n}\r\n\r\nfunction getMsTimeAfterAddTimeInDate(date, time) {\r\n    let newDate = new Date(date);\r\n    let newTime = new Date(time);\r\n    let hours = newTime.getHours();\r\n    let minutes = newTime.getMinutes();\r\n    newDate.setHours(hours);\r\n    newDate.setMinutes(minutes);\r\n    return newDate.getTime();\r\n}\r\n\r\n\r\n\r\nfunction generateStorzName(length, hydrantName, storzNumber)  {\r\n    let result = [];\r\n    let hexRef = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\n    // for the given length\r\n    for (let n = 0; n < length; n++) {\r\n      // pick a random unit and store it in result\r\n      result.push(hexRef[Math.floor(Math.random() * 16)]);\r\n    }\r\n    \r\n    // return the result as a string\r\n    return `storz${storzNumber}-${hydrantName}-${result.join('').toUpperCase()}`;\r\n}\r\n\r\nfunction saveRelationWithStorz(hydrantId, storzId) {\r\n    return entityRelationService.saveRelation({\r\n      from: {\r\n        entityType: \"ASSET\",\r\n        id: hydrantId\r\n      },\r\n      to: {\r\n        entityType: \"ASSET\",\r\n        id: storzId\r\n      },\r\n      type: \"Contains\",\r\n      typeGroup: \"COMMON\"\r\n    });\r\n  }"
          },
          "title": "New Generic Form Builder",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "ddc8e1bf-f5ce-6040-d4dc-ae0eebbd854c"
      },
      "0d9b56dd-360f-f4fb-bb4c-0ce173df58bf": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.4291951067313693
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": false,
            "isExternalBtn": false,
            "formName": "Add Hydrant for Zone",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Field 1",
                    "fieldName": "step0field1",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3>Select One Method</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3>Select One Method</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": " ",
                    "fieldName": "selectedOption",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\r\n    {name: \"From Existing List\", value: \"fromExisting\", selected: true },\r\n    {name: \"Add new\", value: \"new\", selected: false }\r\n])",
                    "radioAction": "console.log($event);\nconsole.log(formData);\nconsole.log(widgetContext);\nconsole.log(stepsSettings);\n\n\nconst zone = widgetContext.datasources[0].entity.id;\nconst zoneName = widgetContext.datasources[0].name;\n\nif ($event && $event.value === \"new\") {\n    const zoneInfo = {\n        id: zone.id,\n        name: zoneName,\n        entityType: zone.entityType\n    }\n    openDashboardState(zoneInfo, 'add_hydrant_from_zone_create');\n}\n\nfunction openDashboardState(element, statedId) {\n    // widgetContext.stateController.resetState();\n    var currentState = widgetContext.stateController\n        .getStateId();\n\n    var params = {\n        entityLabel: element.name,\n        entityName: element.name,\n        entityId: {\n            id: element.id,\n            entityType: element.entityType\n        }\n    };\n\n    if (currentState !== statedId) {\n        widgetContext.stateController.updateState(statedId, params);\n    }\n}",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Hydrant Number",
                    "fieldName": "selectedHydrant",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "autoComplete",
                    "fieldAction": "const $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\"http\"));\r\nconst rxjs = widgetContext.rxjs;\r\nconst url = `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=hydrant&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\r\n\r\nreturn http.get(url).pipe(rxjs.debounceTime(150),\r\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\r\n        response\r\n        .data.map(\r\n            data => ({\r\n                name: data.name,\r\n                value: JSON.stringify({name: data.name, value: data.id.id})\r\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  }
                ]
              }
            ],
            "genericFormFunction": "console.log(formData);\nconsole.log(widgetContext);\nconsole.log(stepsSettings);\n\nconst zoneId = widgetContext.datasources[0].entity.id;\nconst zoneName = widgetContext.datasources[0].entity.name;\nconst $injector = widgetContext.$scope.$injector;\nconst http = $injector.get(widgetContext.servicesMap.get(\n    'http'));\nconst rxjs = widgetContext.rxjs;\nconst attributeService = $injector.get(widgetContext\n    .servicesMap.get('attributeService'));\nconst entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\nconst url = '/api/entityGroups/ASSET';\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\n\nlet selectedFormValue = {\n    selectedOption: formData.value['selectedOption'],\n    selectedHydrant: formData.value['selectedHydrant']\n}\n\nif (selectedFormValue.selectedHydrant) {\n    const hydrantId = JSON.parse(selectedFormValue.selectedHydrant).value;\n    checkHydrantRelationWithZone(hydrantId).subscribe((isValid) => {\n        if (isValid) {\n            relateWithZone(zoneId.id, hydrantId);\n\n            var serverAttributeUrl = `/api/plugins/telemetry/ASSET/${hydrantId}/SERVER_SCOPE`;\n            http.post(serverAttributeUrl, { zone: zoneName }).subscribe(() => { });\n\n            widgetContext.updateAliases();\n            widgetContext.showToast('success', 'Hydrant Assigned Successfully', 2000,\n                'top', 'left');\n\n            openDashboardState('all_zone');\n        } else {\n            widgetContext.showToast('warn', 'This hydrant is already assigned to a zone', 2000,\n                'top', 'left');\n        }\n    })\n\n}\n\nfunction relateWithZone(entityId, hydrantId) {\n    entityRelationService.saveRelation({\n        from: {\n            entityType: \"ASSET\",\n            id: entityId\n        },\n        to: {\n            entityType: \"ASSET\",\n            id: hydrantId\n        },\n        type: \"Contains\",\n        typeGroup: \"COMMON\"\n    }).subscribe(() => { });\n}\n\nfunction openDashboardState(statedId) {\n    widgetContext.stateController.resetState();\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params);\n    }\n}\n\nfunction checkHydrantRelationWithZone(hydrant) {\n    const urlEntitiesQuery = `/api/entitiesQuery/find`;\n    const relationQuery = {\n        \"entityFields\": [\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"name\"\n            },\n            {\n                \"type\": \"ENTITY_FIELD\",\n                \"key\": \"type\"\n            }\n        ],\n        \"latestValues\": [],\n        \"entityFilter\": {\n            \"type\": \"relationsQuery\",\n            \"rootEntity\": {\n                \"entityType\": \"ASSET\",\n                \"id\": hydrant\n            },\n            \"direction\": \"TO\",\n            \"maxLevel\": 1,\n            \"fetchLastLevelOnly\": false,\n            \"filters\": [\n                {\n                    \"relationType\": \"Contains\",\n                    \"entityTypes\": [\n                        \"ASSET\"\n                    ],\n                }\n            ]\n        },\n        \"pageLink\": {\n            \"dynamic\": false,\n            \"pageSize\": 10,\n            \"page\": 0,\n            \"textSearch\": null,\n            \"sortOrder\": {\n                \"key\": {\n                    \"type\": \"ENTITY_FIELD\",\n                    \"key\": \"createdTime\"\n                },\n                \"direction\": \"DESC\"\n            }\n        }\n    }\n    return http.post(urlEntitiesQuery, relationQuery).pipe(rxjs.map((hydrantRelationResponse) => {\n        return (hydrantRelationResponse && hydrantRelationResponse.data && hydrantRelationResponse.data.length) ? false : true;\n    }));\n}"
          },
          "title": "New Generic Form Builder v1.0",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "0d9b56dd-360f-f4fb-bb4c-0ce173df58bf"
      },
      "1e8d82d8-11c8-9d51-4555-1e0bc8415ec9": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.8603665489798373
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": false,
            "isExternalBtn": false,
            "formName": "Add Hydrant for Zone",
            "steps": [
              {
                "stepName": "General Info",
                "formFields": [
                  {
                    "label": "Field 1",
                    "fieldName": "step0field1",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3>Select One Method</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3>Select One Method</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": " ",
                    "fieldName": "selectedOption",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\r\n    {name: \"From Existing List\", value: \"fromExisting\", selected: false},\r\n    {name: \"Add new\", value: \"new\", selected: true }\r\n])",
                    "radioAction": "console.log($event);\nconsole.log(formData);\nconsole.log(widgetContext);\nconsole.log(stepsSettings);\n\n\nconst zone = widgetContext.datasources[0].entity.id;\nconst zoneName = widgetContext.datasources[0].name;\n\nif ($event && $event.value === \"fromExisting\") {\n    const zoneInfo = {\n        id: zone.id,\n        name: zoneName,\n        entityType: zone.entityType\n    }\n    openDashboardState(zoneInfo, 'add_hydrant_from_zone_select');\n}\n\nfunction openDashboardState(element, statedId) {\n    // widgetContext.stateController.resetState();\n    var currentState = widgetContext.stateController\n        .getStateId();\n\n    var params = {\n        entityLabel: element.name,\n        entityName: element.name,\n        entityId: {\n            id: element.id,\n            entityType: element.entityType\n        }\n    };\n\n    if (currentState !== statedId) {\n        widgetContext.stateController.updateState(statedId, params);\n    }\n}",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 4",
                    "fieldName": "generalInfo",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3>General Info</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3>General Info</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Hydrant Number",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Brand",
                    "fieldName": "hydrantsBrand",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Hawle\", value: \"Hawle\"},\n\t{name: \"Von Roll\", value: \"Von Roll\"},\n\t{name: \"Hinni\", value: \"Hinni\"},\n\t{name: \"Wild\", value: \"Wild\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "dependantFields": "model",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Model",
                    "fieldName": "model",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\r\n  { name: 'H8370', value: 'H8370', hydrantsBrand: 'Hawle' },\r\n  { name: 'H4', value: 'H4', hydrantsBrand: 'Hawle' },\r\n  { name: 'H4-HV', value: 'H4-HV', hydrantsBrand: 'Hawle' },\r\n  { name: 'N492', value: 'N492', hydrantsBrand: 'Hawle' },\r\n  { name: 'HYTEC', value: 'HYTEC', hydrantsBrand: 'Von Roll' },\r\n  { name: 'CLASSIC', value: 'CLASSIC', hydrantsBrand: 'Von Roll' },\r\n  { name: '5000S', value: '5000S', hydrantsBrand: 'Von Roll' },\r\n  { name: 'DECO', value: 'DECO', hydrantsBrand: 'Von Roll' },\r\n  { name: 'HYPLUS', value: 'HYPLUS', hydrantsBrand: 'Von Roll' },\r\n  { name: 'VARIO 2.0', value: 'VARIO 2.0', hydrantsBrand: 'Von Roll' },\r\n  { name: '6000', value: '6000', hydrantsBrand: 'Hinni' },\r\n  { name: '6006', value: '6006', hydrantsBrand: 'Hinni' },\r\n  { name: 'UT-RADIAL', value: 'UT-RADIAL', hydrantsBrand: 'Hinni' },\r\n  { name: 'UNO 1', value: 'UNO 1', hydrantsBrand: 'Wild' }\r\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Field 8",
                    "fieldName": "waterAbstructionHTML",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Water abstraction</h3>\n<p style=\"font-size: 1rem;font-weight: 500;margin-bottom: 0.25rem;\">Select one from below</p>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Water abstraction</h3>\n<p style=\"font-size: 1rem;font-weight: 500;margin-bottom: 0.25rem;\">Select one from below</p>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Select ground *",
                    "fieldName": "aboveGround",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Above ground\", value: true, dependencyFor: [\"storz3\",\"storz3Description\", \"undergroundHydrantBrand\", \"undergroundHydrantModel\", \"undergroundHydrantDiggingDepth\", \"undergroundHydrantDiggingDepthUnit\", \"undergroundHydrantTitle\"]},\n    {name: \"Below ground\", value: false}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 10",
                    "fieldName": "coverHtml",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Information about the cover</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Information about the cover</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Storz 1",
                    "fieldName": "storz1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Description",
                    "fieldName": "storz1Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Storz 2",
                    "fieldName": "storz2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Description",
                    "fieldName": "storz2Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Storz 3",
                    "fieldName": "storz3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Description",
                    "fieldName": "storz3Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 17",
                    "fieldName": "undergroundHydrantTitle",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Add underground hydrant (Optional)</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Add underground hydrant (Optional)</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Brand",
                    "fieldName": "undergroundHydrantBrand",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Hawle\", value: \"Hawle\"},\n\t{name: \"Von Roll\", value: \"Von Roll\"},\n\t{name: \"Hinni\", value: \"Hinni\"},\n\t{name: \"Wild\", value: \"Wild\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "undergroundHydrantModel",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Model",
                    "fieldName": "undergroundHydrantModel",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n  { name: 'H8370', value: 'H8370', undergroundHydrantBrand: 'Hawle' },\n  { name: 'H4', value: 'H4', undergroundHydrantBrand: 'Hawle' },\n  { name: 'H4-HV', value: 'H4-HV', undergroundHydrantBrand: 'Hawle' },\n  { name: 'N492', value: 'N492', undergroundHydrantBrand: 'Hawle' },\n  { name: 'HYTEC', value: 'HYTEC', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'CLASSIC', value: 'CLASSIC', undergroundHydrantBrand: 'Von Roll' },\n  { name: '5000S', value: '5000S', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'DECO', value: 'DECO', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'HYPLUS', value: 'HYPLUS', undergroundHydrantBrand: 'Von Roll' },\n  { name: 'VARIO 2.0', value: 'VARIO 2.0', undergroundHydrantBrand: 'Von Roll' },\n  { name: '6000', value: '6000', undergroundHydrantBrand: 'Hinni' },\n  { name: '6006', value: '6006', undergroundHydrantBrand: 'Hinni' },\n  { name: 'UT-RADIAL', value: 'UT-RADIAL', undergroundHydrantBrand: 'Hinni' },\n  { name: 'UNO 1', value: 'UNO 1', undergroundHydrantBrand: 'Wild' }\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "hawle-dashboard.Digging-depth",
                    "fieldName": "undergroundHydrantDiggingDepth",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"m\", value: \"m\"},\n    {name: \"cm\", value: \"cm\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "undergroundHydrantDiggingDepthUnit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"m\", value: \"m\"},\n    {name: \"cm\", value: \"cm\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 21",
                    "fieldName": "pressureInfoTitle",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3>Pressure Info</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3>Pressure Info</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Main Input Pressure",
                    "fieldName": "networkInputPressure",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Orifice Plate (Turn it on if available)",
                    "fieldName": "orificePlate",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "toggle",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Yes\", value: true},\n    {name: \"No\", value: false, dependencyFor: [\"flowApertureTitle\",\"flowWithoutOrifice\", \"flowWithoutOrificeUnit\"]}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Double Shut-off (Turn it on if available)",
                    "fieldName": "doubleLocked",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "toggle",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Yes\", value: true},\n    {name: \"No\", value: false}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 25",
                    "fieldName": "outputPressureTitle",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Output pressure</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Output pressure</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 26",
                    "fieldName": "volumeFlowTItle",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Volumetric flow</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Volumetric flow</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "1",
                    "fieldName": "outputPressure1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "1",
                    "fieldName": "outputVolume1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "Unit",
                    "fieldName": "outputVolume1Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "2",
                    "fieldName": "outputPressure2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "2",
                    "fieldName": "outputVolume2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "Unit",
                    "fieldName": "outputVolume2Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "3",
                    "fieldName": "outputPressure3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "3",
                    "fieldName": "outputVolume3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "Unit",
                    "fieldName": "outputVolume3Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 36",
                    "fieldName": "flowApertureTitle",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Flow without orifice plate</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Flow without orifice plate</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Flow",
                    "fieldName": "flowWithoutOrifice",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Unit",
                    "fieldName": "flowWithoutOrificeUnit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 39",
                    "fieldName": "installationDateTitle",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3>Date</h3>\n<h3 style=\"font-size: 1.5rem;\">Purchase / Installation</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3>Date</h3>\n<h3 style=\"font-size: 1.5rem;\">Purchase / Installation</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "purchaseDate",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": true,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "purchaseTime",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": true,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 42",
                    "fieldName": "lastServiceTitile",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Last Service</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Last Service</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Date",
                    "fieldName": "lastServiceDate",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Time",
                    "fieldName": "lastServiceTime",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 45",
                    "fieldName": "locationTitle",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3>Location</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3>Location</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Map",
                    "fieldName": "map",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "map",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              }
            ],
            "genericFormFunction": "console.log(formData);\nconsole.log(widgetContext);\nconsole.log(stepsSettings);\n\nconst zoneId = widgetContext.datasources[0].entity.id;\nconst zoneName = widgetContext.datasources[0].entity.name;\nconst $injector = widgetContext.$scope.$injector;\nconst http = $injector.get(widgetContext.servicesMap.get(\n    'http'));\nconst rxjs = widgetContext.rxjs;\nconst attributeService = $injector.get(widgetContext\n    .servicesMap.get('attributeService'));\nconst entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\nconst url = '/api/entityGroups/ASSET';\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\nlet storzCount = 0;\n\nhttp.get(url).pipe().subscribe((\n        assetGroups) => {\n            \n        \n\n        var assetCreateUrl = '';\n        assetGroups.forEach((\n            assetGroup) => {\n            if (assetGroup.name ===\n                \"All\") {\n                assetCreateUrl =\n                    `/api/asset?entityGroupId=${assetGroup.id.id}`;\n            }\n        });\n        if (assetCreateUrl !== '') {\n            const hydrantInfo = {\n                name: formData.value.name,\n                type: \"hydrant\"\n            }\n\n            http.post(assetCreateUrl, hydrantInfo)\n                .pipe().subscribe((hydrantResponse) => {\n                    \n                    storzCount = countDefinedStorz([formData.value.storz1, formData.value.storz2, formData.value.storz3 ]);\n                    \n                    // saving attributes\n                    saveAttributes('ASSET', hydrantResponse.id.id).subscribe(() => { });\n\n                    // saving timeseries\n                    saveTelemetry('ASSET', hydrantResponse.id.id).subscribe(() => { });\n\n                    if (formData.value.storz1) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name, 1, formData.value.storz1, formData.value.storz1Description);\n                    if (formData.value.storz2) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name, 2, formData.value.storz2, formData.value.storz2Description);\n                    if (formData.value.storz3) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name, 3, formData.value.storz3, formData.value.storz3Description);\n\n                    if (zoneId.id) relateWithZone(zoneId.id, hydrantResponse.id.id);\n\n                    widgetContext.updateAliases();\n                    widgetContext.showToast('success', 'Hydrant Assigned Successfully', 2000,\n                        'top', 'left');\n                    openDashboardState('all_zone');\n                })\n        }\n    });\n\nfunction relateWithZone(entityId, hydrantId) {\n    entityRelationService.saveRelation({\n        from: {\n            entityType: \"ASSET\",\n            id: entityId\n        },\n        to: {\n            entityType: \"ASSET\",\n            id: hydrantId\n        },\n        type: \"Contains\",\n        typeGroup: \"COMMON\"\n    }).subscribe(() => { });\n}\n\nfunction createStorzAndRelate(assetCreateUrl, hydrantId, hydrantName, storzNumber, exitDiameter, description) {\n    const storzURL = assetCreateUrl;\n    const storzInfo = {\n        name: generateStorzName(8, hydrantName, storzNumber),\n        type: \"storz\"\n    }\n\n    http.post(storzURL, storzInfo)\n        .pipe().subscribe((storzResponse) => {\n\n            // saving attribute\n            saveStorzAttributes(storzResponse.id.id, storzNumber, exitDiameter, description).subscribe(() => { });\n\n            saveRelationWithStorz(hydrantId, storzResponse.id.id).subscribe(() => { });\n        })\n}\n\nfunction countDefinedStorz(array) {\n  return array.filter(element => element !== undefined && element !== null && element != \"\").length;\n}\n\nfunction saveAttributes(entityType, entityId) {\n    const attributes = {\n        hydrantsBrand: formData.value.hydrantsBrand,\n        modelNumber: formData.value.model,\n        storzCount: storzCount,\n        hydrantImage: 'https://seliseblob.blob.core.windows.net/selisecdn/cdn/tesenso/demo_hydrant.png',\n        zone: zoneName,\n        aboveGround: formData.value.aboveGround,\n        undergroundHydrantBrand: formData.value.undergroundHydrantBrand,\n        undergroundHydrantModel: formData.value.undergroundHydrantModel,\n        undergroundHydrantDiggingDepth: formData.value.undergroundHydrantDiggingDepth,\n        undergroundHydrantDiggingDepthUnit: formData.value.undergroundHydrantDiggingDepthUnit,\n        doubleLocked: formData.value.doubleLocked ? true : false,\n        selectedZone: formData.value.selectedZone,\n        networkInputPressure: formData.value.networkInputPressure,\n        networkInputPressureUnit: \"Bar\",\n        hydrantNumber: formData.value.name,\n        hydrantId: entityId,\n        orificePlate: formData.value.orificePlate ? true : false,\n        flowWithoutOrifice: formData.value.flowWithoutOrifice,\n        flowWithoutOrificeUnit: formData.value.flowWithoutOrificeUnit,\n        outputPressure1: formData.value.outputPressure1,\n        outputPressure2: formData.value.outputPressure2,\n        outputPressure3: formData.value.outputPressure3,\n        outputVolume1: formData.value.outputVolume1,\n        outputVolume1Unit: formData.value.outputVolume1Unit,\n        outputVolume2: formData.value.outputVolume2,\n        outputVolume2Unit: formData.value.outputVolume2Unit,\n        outputVolume3: formData.value.outputVolume3,\n        outputVolume3Unit: formData.value.outputVolume3Unit,\n        purchaseDate: getMsTimeAfterAddTimeInDate(formData.value.purchaseDate, formData.value.purchaseTime),\n        lastServiceDate: getMsTimeAfterAddTimeInDate(formData.value.lastServiceDate, formData.value.lastServiceTime),\n        latitude: formData.value.map_latitude,\n        longitude: formData.value.map_longitude,\n        street: formData.value.map_street,\n        zip: formData.value.map_zip,\n        city: formData.value.map_city,\n        state: formData.value.map_state,\n        country: formData.value.map_country\n    };\n    \n    var serverAttributeUrl =\n        `/api/plugins/telemetry/${entityType}/${entityId}/SERVER_SCOPE`;\n    return http.post(serverAttributeUrl, attributes);\n}\n\nfunction saveTelemetry(entityType, entityId) {\n    const timeSeries = {\n        isNotAssigned: true\n    };\n    var timeSeriesUrl =\n        `/api/plugins/telemetry/${entityType}/${entityId}/timeseries/ANY`;\n    return http.post(timeSeriesUrl, timeSeries);\n}\n\nfunction saveStorzAttributes(entityId, storzNumber, exitDiameter, description) {\n    const attributes = {\n        storzNumber: storzNumber,\n        exitDiameter: exitDiameter,\n        exitName: `Exit ${storzNumber}`,\n        exitDiameterUnit: \"mm\"\n    };\n    if (description && description.trim()) attributes['description'] = description;\n    var serverAttributeUrl =\n        `/api/plugins/telemetry/ASSET/${entityId}/SERVER_SCOPE`;\n    return http.post(serverAttributeUrl, attributes);\n}\n\nfunction openDashboardState(statedId) {\n    widgetContext.stateController.resetState();\n    var currentState = widgetContext.stateController\n        .getStateId();\n    if (currentState !== statedId) {\n        var params = {};\n        widgetContext.stateController.updateState(statedId,\n            params);\n    }\n}\n\nfunction getMsTimeAfterAddTimeInDate(date, time) {\n    let newDate = new Date(date);\n    let newTime = new Date(time);\n    let hours = newTime.getHours();\n    let minutes = newTime.getMinutes();\n    newDate.setHours(hours);\n    newDate.setMinutes(minutes);\n    return newDate.getTime();\n}\n\nfunction generateStorzName(length, hydrantName, storzNumber) {\n    let result = [];\n    let hexRef = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n    // for the given length\n    for (let n = 0; n < length; n++) {\n        // pick a random unit and store it in result\n        result.push(hexRef[Math.floor(Math.random() * 16)]);\n    }\n\n    // return the result as a string\n    return `storz${storzNumber}-${hydrantName}-${result.join('').toUpperCase()}`;\n}\n\nfunction saveRelationWithStorz(hydrantId, storzId) {\n    return entityRelationService.saveRelation({\n        from: {\n            entityType: \"ASSET\",\n            id: hydrantId\n        },\n        to: {\n            entityType: \"ASSET\",\n            id: storzId\n        },\n        type: \"Contains\",\n        typeGroup: \"COMMON\"\n    });\n}"
          },
          "title": "New Generic Form Builder v1.0",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "1e8d82d8-11c8-9d51-4555-1e0bc8415ec9"
      },
      "ab12ad7e-37f9-ec34-4c4a-f3de6fc6edde": {
        "isSystemType": false,
        "bundleAlias": "hawle_widgets",
        "typeAlias": "generic_form",
        "type": "latest",
        "title": "New widget",
        "image": null,
        "description": null,
        "sizeX": 7.5,
        "sizeY": 3,
        "config": {
          "datasources": [
            {
              "type": "entity",
              "name": null,
              "entityAliasId": "47e98369-cf0a-b023-8265-bae4a12e01e0",
              "filterId": null,
              "dataKeys": [
                {
                  "name": "name",
                  "type": "entityField",
                  "label": "Name",
                  "color": "#2196f3",
                  "settings": {},
                  "_hash": 0.7971254536169066
                },
                {
                  "name": "latitude",
                  "type": "attribute",
                  "label": "latitude",
                  "color": "#4caf50",
                  "settings": {},
                  "_hash": 0.49009063569266265,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "return value ? value : 46.8182;"
                },
                {
                  "name": "longitude",
                  "type": "attribute",
                  "label": "longitude",
                  "color": "#f44336",
                  "settings": {},
                  "_hash": 0.18252476184266042,
                  "units": null,
                  "decimals": null,
                  "funcBody": null,
                  "usePostProcessing": true,
                  "postFuncBody": "return value ? value : 8.2275;"
                }
              ]
            }
          ],
          "timewindow": {
            "realtime": {
              "timewindowMs": 60000
            }
          },
          "showTitle": false,
          "backgroundColor": "rgba(255,255,255,0)",
          "color": "rgba(0, 0, 0, 0.87)",
          "padding": "8px",
          "settings": {
            "isEditMode": false,
            "isExternalBtn": true,
            "externalBtnName": "Save & Add Alarm Definition",
            "externalBtnFunction": "//CREATE HYDRANT + ADD AD NEW\r\n\r\nconsole.log(formData);\r\nconsole.log(widgetContext);\r\nconsole.log(stepsSettings);\r\n\r\n\r\nconst $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    'http'));\r\nconst attributeService = $injector.get(widgetContext\r\n    .servicesMap.get('attributeService'));\r\nconst entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\nconst url = '/api/entityGroups/ASSET';\r\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\nlet storzCount = 0;\r\nconst rxjs = widgetContext.rxjs;\r\nconst urlEntitiesQuery = `/api/entitiesQuery/find`;\r\nlet hydrantId;\r\nlet dstorzCountForHydrant = 0;\r\nlet hydrantEntity;\r\n\r\nlet selectedFormValue = {\r\n    exit1Option: formData.value['exit1Option'] || null,\r\n    exit1DStorz: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).value : null,\r\n    exit1DStorzSerialNumber: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).name : null,\r\n    exit1DStorzName: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).originalName : null,\r\n    exit1line1: formData.value['exit1line1'] || null,\r\n    exit1line2: formData.value['exit1line2'] || null,\r\n    exit2Option: formData.value['exit2Option'] || null,\r\n    exit2DStorz: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).value : null,\r\n    exit2DStorzSerialNumber: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).name : null,\r\n    exit2DStorzName: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).originalName : null,\r\n    exit2line1: formData.value['exit2line1'] || null,\r\n    exit2line2: formData.value['exit2line2'] || null,\r\n    exit3Option: formData.value['exit3Option'] || null,\r\n    exit3DStorz: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).value : null,\r\n    exit3DStorzSerialNumber: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).name : null,\r\n    exit3DStorzName: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).originalName : null,\r\n    exit3line1: formData.value['exit3line1'] || null,\r\n    exit3line2: formData.value['exit3line2'] || null\r\n}\r\n\r\nlet errorList = [];\r\n\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        type: \"relationsQuery\",\r\n        rootEntity: {\r\n            entityType: \"ASSET\",\r\n            id: \"\"\r\n        },\r\n        direction: \"FROM\",\r\n        maxLevel: 1,\r\n        fetchLastLevelOnly: true,\r\n        filters: [\r\n            {\r\n                relationType: \"Contains\",\r\n                entityTypes: [\r\n                    \"ASSET\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"description\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitDiameter\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitDiameterUnit\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitName\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nconst hydrantRelatedAttributesPayload = [\r\n    {\r\n        key: 'hydrantNumber',\r\n        value: formData.value.name\r\n    },\r\n    {\r\n        key: 'hydrantId',\r\n        value: \"\"\r\n    },\r\n    {\r\n        key: 'hydrantsBrand',\r\n        value: formData.value.hydrantsBrand\r\n    },\r\n    {\r\n        key: 'country',\r\n        value: formData.value.map_country\r\n    },\r\n    {\r\n        key: 'zip',\r\n        value: formData.value.map_zip\r\n    },\r\n    {\r\n        key: 'city',\r\n        value: formData.value.map_city\r\n    },\r\n    {\r\n        key: 'street',\r\n        value: formData.value.map_street\r\n    },\r\n    {\r\n        key: 'state',\r\n        value: formData.value.map_state\r\n    }\r\n]\r\n\r\nfunction addDStorz() {\r\n    return new Promise((resolve, reject) => {\r\n        if (!selectedFormValue.exit1Option && !selectedFormValue.exit2Option && !selectedFormValue.exit3Option) {\r\n            widgetContext.showToast('warn',\r\n                \"DStorz Option not selected yet\",\r\n                2000,\r\n                'top', 'left');\r\n            resolve();\r\n        } else {\r\n            if ((selectedFormValue.exit1Option === 'fromExisting' && !selectedFormValue.exit1DStorz) || (selectedFormValue.exit2Option === 'fromExisting' && !selectedFormValue.exit2DStorz) || (selectedFormValue.exit3Option === 'fromExisting' && !selectedFormValue.exit3DStorz)) {\r\n                widgetContext.showToast('warn',\r\n                    \"Please select DStorz Correctly\",\r\n                    2000,\r\n                    'top', 'left');\r\n                resolve();\r\n            } else if (hasDuplicates([selectedFormValue.exit1DStorz, selectedFormValue.exit2DStorz, selectedFormValue.exit3DStorz])) {\r\n                widgetContext.showToast('warn',\r\n                    \"You can't choose same D-Storz for multiple Storz\",\r\n                    2000,\r\n                    'top', 'left');\r\n                resolve();\r\n            } else {\r\n                setTimeout(() => {\r\n                    const storzList$ = http.post(urlEntitiesQuery, relatedStorzQuery).pipe();\r\n                    storzList$.subscribe((storzList) => {\r\n                        if (storzList && storzList.data && storzList.data.length) {\r\n                            const storzIdList = [];\r\n                            storzIdList[0] = storzList && storzList.data && storzList.data.length > 0 ? storzList.data[0].entityId.id : \"\";\r\n                            storzIdList[1] = storzList && storzList.data && storzList.data.length > 1 ? storzList.data[1].entityId.id : \"\";\r\n                            storzIdList[2] = storzList && storzList.data && storzList.data.length > 2 ? storzList.data[2].entityId.id : \"\";\r\n                            widgetContext.isGenericLoading$.next(true);\r\n    \r\n                            if (storzIdList && storzIdList.length) {\r\n                                var storzProcessed = new Promise((resolve, reject) => {\r\n                                    storzIdList.forEach((storzId, index, array) => {\r\n                                        const optionName = `exit${index + 1}Option`;\r\n                                        if (selectedFormValue[optionName] === 'fromExisting') {\r\n                                            const name = `exit${index + 1}DStorz`;\r\n                                            checkDStorzRelationWithHydrant(selectedFormValue[name]).subscribe((isValid) => {\r\n                                                if (!storzId) {\r\n                                                    errorList.push(`Exit ${index}: This exit does not exist on hydrant`)\r\n                                                } else if (isValid && selectedFormValue[name] && storzId) {\r\n                                                    const line1 = `exit${index}line1`;\r\n                                                    const line2 = `exit${index}line2`;\r\n                                                    let currentStorz = storzList.data.find(storzEntity => storzEntity.entityId.id == storzId)\r\n                                                    hydrantRelatedAttributesPayload.push(\r\n                                                        {\r\n                                                            key: 'exitNode',\r\n                                                            value: currentStorz.latest.SERVER_ATTRIBUTE.exitDiameter.value + (currentStorz.latest.SERVER_ATTRIBUTE.exitDiameterUnit.value || 'mm') + ', ' + currentStorz.latest.SERVER_ATTRIBUTE.exitName.value\r\n                                                        }\r\n                                                    )\r\n                                                    saveEntityAttributes(selectedFormValue[name], hydrantRelatedAttributesPayload, 'DEVICE').subscribe(() => { });\r\n    \r\n                                                    saveEntityAttributes(storzId, [\r\n                                                        {   \r\n                                                            key: \"assignedDStorz\", \r\n                                                            value: selectedFormValue[`${name}Name`] \r\n                                                        },\r\n                                                        {   \r\n                                                            key: \"assignedDStorzSerialNumber\", \r\n                                                            value: selectedFormValue[`${name}SerialNumber`]\r\n                                                        }\r\n                                                        ] ).subscribe(() => { });\r\n    \r\n                                                    saveRelationWithDStorz(storzId, selectedFormValue[name]).subscribe(() => {\r\n                                                        dstorzCountForHydrant++;\r\n                                                        const deviceId = selectedFormValue[name];\r\n                                                        \r\n                                                        // assign dstorz;\r\n                                                        const sendToRuleEngineKey = \"resetAlarm\";\r\n                                                        const sendToRuleEngineURL = `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=${sendToRuleEngineKey}`;\r\n                                                        const sendToRuleEngineBody = {\r\n                                                            \"msg\": null,\r\n                                                            \"metadata\": {\r\n                                                                \"deviceName\": selectedFormValue[`${name}Name`],\r\n                                                                \"deviceType\": \"d-storz\",\r\n                                                                \"operationType\": \"ASSIGN\"\r\n                                                            }\r\n                                                        }\r\n                                                        http.post(sendToRuleEngineURL, sendToRuleEngineBody).pipe().subscribe(() => { })\r\n                                                    });\r\n                                                } else {\r\n                                                    errorList.push(`Exit ${index}: This device is already connected with hydrant`)\r\n                                                }\r\n                                            })\r\n                                        } else if (selectedFormValue[optionName] === 'new') {\r\n                                            if (checkPermission()) {\r\n                                                const line1 = `exit${index + 1}line1`;\r\n                                                const line2 = `exit${index + 1}line2`\r\n                                                if(selectedFormValue[line1] && selectedFormValue[line1].length < 6) {\r\n                                                    widgetContext.showToast('warn',\r\n                                                    translationService.instant(\"hawle-dashboard.line-one-value-should-be-six-character-long\"), 2000,\r\n                                                    'top', 'left', widgetContext.toastTargetId);\r\n                                                    return;\r\n                                                } else if(selectedFormValue[line2] && selectedFormValue[line2].length < 6) {\r\n                                                    widgetContext.showToast('warn',\r\n                                                    translationService.instant(\"hawle-dashboard.line-two-value-should-be-six-character-long\"), 2000,\r\n                                                    'top', 'left', widgetContext.toastTargetId);\r\n                                                    return;\r\n                                                } else {\r\n                                                    executeClaim(selectedFormValue[line1], selectedFormValue[line2], index + 1, storzList, storzId);\r\n                                                }\r\n                                            } else {\r\n                                                errorList.push(`Exit ${index}: You don't need to claim your own device.`)\r\n                                            }\r\n                                        }\r\n                                        if (index === array.length - 1) resolve();\r\n                                    });\r\n                                });\r\n    \r\n                                storzProcessed.then(() => {\r\n                                    setTimeout(() => {\r\n                                        widgetContext.isGenericLoading$.next(false)\r\n                                        if (errorList && errorList.length) {\r\n                                            const content = errorList.join('\\n\\n');\r\n                                            const title = 'Unable to assigning all d-storz';\r\n                                            showAlertDialog(title, content)\r\n                                        } else {\r\n                                            widgetContext.showToast('success',\r\n                                                \"All Device assigned successfully \",\r\n                                                2000,\r\n                                                'top', 'left');\r\n                                        }\r\n                                        saveEntityAttributes(hydrantId.id, [{\r\n                                            key: \"dstorzCount\",\r\n                                            value: dstorzCountForHydrant\r\n                                        }]).subscribe();\r\n                                        resolve();\r\n                                    }, 2000)\r\n                                })\r\n    \r\n                            }\r\n                        } else {\r\n                            widgetContext.showToast('warn',\r\n                                \"You need storz to attach d-storz\",\r\n                                2000,\r\n                                'top', 'left');\r\n                            resolve();\r\n                        }\r\n                    });\r\n                }, 1000)\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction createHydrant() {\r\n    return new Promise((resolve, reject) => {\r\n        http.get(url).pipe().subscribe((assetGroups) => {\r\n            // Process the result of the first request\r\n            var assetCreateUrl = '';\r\n            assetGroups.forEach((\r\n                assetGroup) => {\r\n                if (assetGroup.name ===\r\n                    \"All\") {\r\n                    assetCreateUrl =\r\n                        `/api/asset?entityGroupId=${assetGroup.id.id}`;\r\n                }\r\n            });\r\n            if (assetCreateUrl !== '') {\r\n                const hydrantInfo = {\r\n                    name: formData.value.name,\r\n                    type: \"hydrant\"\r\n                }\r\n                \r\n                http.post(assetCreateUrl, hydrantInfo)\r\n                    .pipe().subscribe((hydrantResponse) => {\r\n                        hydrantId = hydrantResponse.id;\r\n                        relatedStorzQuery.entityFilter.rootEntity.id = hydrantResponse.id.id;\r\n                        hydrantRelatedAttributesPayload.find(attribute => attribute.key == \"hydrantId\").value = hydrantResponse.id.id;\r\n                        hydrantEntity = {\r\n                            id: hydrantResponse.id,\r\n                            name: hydrantResponse.name,\r\n                            label: hydrantResponse.label\r\n                        }\r\n                        storzCount = countDefinedStorz([formData.value.storz1, formData.value.storz2, formData.value.storz3 ]);\r\n                        \r\n                        // saving attributes\r\n                        saveAttributes('ASSET', hydrantResponse.id.id).subscribe(() => {});\r\n                        \r\n                        // saving timeseries\r\n                        saveTelemetry('ASSET', hydrantResponse.id.id).subscribe(() => {});\r\n                        \r\n                        if (formData.value.storz1) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name,  1, formData.value.storz1, formData.value.storz1Description);\r\n                        if (formData.value.storz2) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name, 2, formData.value.storz2, formData.value.storz2Description);\r\n                        if (formData.value.storz3) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name, 3, formData.value.storz3, formData.value.storz3Description);\r\n        \r\n                        if (formData.value.zone) relateWithZone(JSON.parse(formData.value.zone).value, hydrantResponse.id.id);\r\n    \r\n                        \r\n        \r\n                        widgetContext.showToast('success',\r\n                            translationService.instant('hawle-dashboard.hydrant-saved-successfully'), 2000,\r\n                            'top', 'left');\r\n                        widgetContext.updateAliases();\r\n                        resolve();\r\n                    })\r\n            }\r\n        })\r\n    })\r\n}\r\n\r\ncreateHydrant().then(() => {\r\n    addDStorz().then(() => {\r\n        widgetContext.updateAliases();\r\n        openDashboardState(hydrantEntity, 'alarm_definition_from_hydrant');\r\n    })\r\n})\r\n\r\n//FUNCTIONS FROM CREATE HYDRANT\r\n\r\nfunction relateWithZone(zoneId, hydrantId) {\r\n    entityRelationService.saveRelation({\r\n        from: {\r\n          entityType: \"ASSET\",\r\n          id: zoneId\r\n        },\r\n        to: {\r\n          entityType: \"ASSET\",\r\n          id: hydrantId\r\n        },\r\n        type: \"Contains\",\r\n        typeGroup: \"COMMON\"\r\n    }).subscribe(() => {});\r\n}\r\n\r\n\r\nfunction createStorzAndRelate(assetCreateUrl, hydrantId, hydrantName, storzNumber, exitDiameter, description) {\r\n    const storzURL = assetCreateUrl;\r\n    const storzInfo = {\r\n        name: generateStorzName(8, hydrantName, storzNumber),\r\n        type: \"storz\"\r\n    }\r\n    \r\n    http.post(storzURL, storzInfo)\r\n        .pipe().subscribe((storzResponse) => {\r\n            \r\n            // saving attribute\r\n            saveStorzAttributes(storzResponse.id.id, storzNumber, exitDiameter, description).subscribe(() => {});\r\n            \r\n            saveRelationWithStorz(hydrantId, storzResponse.id.id).subscribe(() => {});\r\n        })\r\n}\r\n\r\nfunction countDefinedStorz(array) {\r\n  return array.filter(element => element !== undefined && element !== null && element != \"\").length;\r\n}\r\n\r\n\r\nfunction saveAttributes(entityType, entityId) {\r\n    const attributes = {\r\n        hydrantsBrand: formData.value.hydrantsBrand,\r\n        modelNumber: formData.value.model,\r\n        storzCount: storzCount,\r\n        hydrantImage: 'https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&st=2023-11-02T15:08:18Z&se=2035-11-02T23:08:18Z&sv=2022-11-02&sr=b&sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D',\r\n        zone: formData.value.zone ? JSON.parse(formData.value.zone).name : \"\",\r\n        aboveGround: formData.value.aboveGround,\r\n        undergroundHydrantBrand: formData.value.undergroundHydrantBrand,\r\n        undergroundHydrantModel: formData.value.undergroundHydrantModel,\r\n        undergroundHydrantDiggingDepth: formData.value.undergroundHydrantDiggingDepth,\r\n        undergroundHydrantDiggingDepthUnit: formData.value.undergroundHydrantDiggingDepthUnit,\r\n        doubleLocked: formData.value.doubleLocked ? true : false,\r\n        selectedZone: formData.value.selectedZone,\r\n        networkInputPressure: formData.value.networkInputPressure,\r\n        networkInputPressureUnit: \"Bar\",\r\n        hydrantNumber: formData.value.name,\r\n        hydrantId: entityId,\r\n        orificePlate: formData.value.orificePlate ? true : false,\r\n        flowWithoutOrifice: formData.value.flowWithoutOrifice,\r\n        flowWithoutOrificeUnit: formData.value.flowWithoutOrificeUnit,\r\n        outputPressure1: formData.value.outputPressure1,\r\n        outputPressure2: formData.value.outputPressure2,\r\n        outputPressure3: formData.value.outputPressure3,\r\n        outputVolume1: formData.value.outputVolume1,\r\n        outputVolume1Unit: formData.value.outputVolume1Unit,\r\n        outputVolume2: formData.value.outputVolume2,\r\n        outputVolume2Unit: formData.value.outputVolume2Unit,\r\n        outputVolume3: formData.value.outputVolume3,\r\n        outputVolume3Unit: formData.value.outputVolume3Unit,\r\n        purchaseDate: getMsTimeAfterAddTimeInDate(formData.value.purchaseDate, formData.value.purchaseTime),\r\n        lastServiceDate: getMsTimeAfterAddTimeInDate(formData.value.lastServiceDate, formData.value.lastServiceTime),\r\n        latitude: formData.value.map_latitude,\r\n        longitude: formData.value.map_longitude,\r\n        street: formData.value.map_street,\r\n        zip: formData.value.map_zip,\r\n        city: formData.value.map_city,\r\n        state: formData.value.map_state,\r\n        country: formData.value.map_country\r\n    };\r\n    var serverAttributeUrl =\r\n        `/api/plugins/telemetry/${entityType}/${entityId}/SERVER_SCOPE`;\r\n    return http.post(serverAttributeUrl, attributes);\r\n}\r\n\r\nfunction saveTelemetry(entityType, entityId) {\r\n    const timeSeries = {\r\n        isNotAssigned: true\r\n    };\r\n    var timeSeriesUrl =\r\n        `/api/plugins/telemetry/${entityType}/${entityId}/timeseries/ANY`;\r\n    return http.post(timeSeriesUrl, timeSeries);\r\n}\r\n\r\nfunction saveStorzAttributes(entityId, storzNumber, exitDiameter, description) {\r\n    const attributes = {\r\n        storzNumber: storzNumber,\r\n        exitDiameter: exitDiameter,\r\n        exitName: `Exit ${storzNumber}`,\r\n        exitDiameterUnit: \"mm\"\r\n    };\r\n    if (description && description.trim()) attributes['description'] = description;\r\n    var serverAttributeUrl =\r\n        `/api/plugins/telemetry/ASSET/${entityId}/SERVER_SCOPE`;\r\n    return http.post(serverAttributeUrl, attributes);\r\n}\r\n\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.openState(statedId,\r\n            params);\r\n    }\r\n}\r\n\r\nfunction getMsTimeAfterAddTimeInDate(date, time) {\r\n    let newDate = new Date(date);\r\n    let newTime = new Date(time);\r\n    let hours = newTime.getHours();\r\n    let minutes = newTime.getMinutes();\r\n    newDate.setHours(hours);\r\n    newDate.setMinutes(minutes);\r\n    return newDate.getTime();\r\n}\r\n\r\n\r\n\r\nfunction generateStorzName(length, hydrantName, storzNumber)  {\r\n    let result = [];\r\n    let hexRef = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\n    // for the given length\r\n    for (let n = 0; n < length; n++) {\r\n      // pick a random unit and store it in result\r\n      result.push(hexRef[Math.floor(Math.random() * 16)]);\r\n    }\r\n    \r\n    // return the result as a string\r\n    return `storz${storzNumber}-${hydrantName}-${result.join('').toUpperCase()}`;\r\n}\r\n\r\nfunction saveRelationWithStorz(hydrantId, storzId) {\r\n    return entityRelationService.saveRelation({\r\n      from: {\r\n        entityType: \"ASSET\",\r\n        id: hydrantId\r\n      },\r\n      to: {\r\n        entityType: \"ASSET\",\r\n        id: storzId\r\n      },\r\n      type: \"Contains\",\r\n      typeGroup: \"COMMON\"\r\n    });\r\n  }\r\n\r\n\r\n//FUNCTIONS FROM ADD DSTORZ\r\nfunction executeClaim(line1, line2, index, storzList, storzId) {\r\n    const serialNumber =\r\n        `${line1}${line2}`;\r\n    validateSerialNumber(serialNumber).subscribe((\r\n        validationResponse) => {\r\n        if (validationResponse && validationResponse\r\n            .device && validationResponse\r\n                .deviceCredentials) {\r\n            const deviceToken = validationResponse\r\n                .deviceCredentials.credentialsId;\r\n            const deviceName = validationResponse\r\n                .device.name;\r\n            const deviceId = validationResponse\r\n                .device.id.id;\r\n            saveSecretKeyInDevice(deviceToken, \"\")\r\n                .subscribe((\r\n                    saveDeviceInfoResponse) => {\r\n                    claimDeviceToCustomer(\r\n                        deviceName, \"\")\r\n                        .subscribe((\r\n                            claimResponse\r\n                        ) => {\r\n                            \r\n                            sendToRuleEngine(deviceId, deviceName).subscribe(() => {});\r\n                            \r\n                            let currentStorz = storzList.data.find(storzEntity => storzEntity.entityId.id == storzId);\r\n                            const line1 = `exit${index}line1`;\r\n                            const line2 = `exit${index}line2`;\r\n                            hydrantRelatedAttributesPayload.push(\r\n                                {\r\n                                    key: 'exitNode',\r\n                                    value: currentStorz.latest.SERVER_ATTRIBUTE.exitDiameter.value + (currentStorz.latest.SERVER_ATTRIBUTE.exitDiameterUnit.value || 'mm') + ', ' + currentStorz.latest.SERVER_ATTRIBUTE.exitName.value\r\n                                }\r\n                            )\r\n                            saveEntityAttributes(deviceId, hydrantRelatedAttributesPayload, 'DEVICE').subscribe(() => { });\r\n\r\n                            saveEntityAttributes(storzId, [\r\n                                {\r\n                                    key: \"assignedDStorz\", \r\n                                    value: deviceName \r\n                                },\r\n                                {   \r\n                                    key: \"assignedDStorzSerialNumber\", \r\n                                    value: `${selectedFormValue[line1]}${selectedFormValue[line2]}`\r\n                                }\r\n                            ] ).subscribe(() => { });\r\n                            \r\n                            saveRelationWithDStorz(storzId, deviceId).subscribe(() => {  \r\n                                dstorzCountForHydrant++; \r\n                                \r\n                                // assign dstorz;\r\n                                const sendToRuleEngineKey = \"resetAlarm\";\r\n                                const sendToRuleEngineURL = `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=${sendToRuleEngineKey}`;\r\n                                const sendToRuleEngineBody = {\r\n                                    \"msg\": null,\r\n                                    \"metadata\": {\r\n                                        \"deviceName\": deviceName,\r\n                                        \"deviceType\": \"d-storz\",\r\n                                        \"operationType\": \"ASSIGN\"\r\n                                    }\r\n                                }\r\n                                http.post(sendToRuleEngineURL, sendToRuleEngineBody).pipe().subscribe(() => { })\r\n                                \r\n                            });\r\n                        })\r\n                })\r\n        } else {\r\n            errorList.push(`Exit ${index}: Could not found any device with this serial number`)\r\n        }\r\n    })\r\n}\r\n\r\nfunction validateSerialNumber(serialNumber) {\r\n    const apiURL =\r\n        `/api/device/deviceInfo/serverAttribute?serverAttributeKey=serialNumber&serverAttributeValue=${serialNumber}`;\r\n    return http.get(apiURL).pipe();\r\n}\r\n\r\nfunction saveSecretKeyInDevice(deviceToken, secretKey) {\r\n    const payload = {\r\n        \"secretKey\": secretKey\r\n    }\r\n    const apiURL = `/api/v1/${deviceToken}/claim`;\r\n    return http.post(apiURL, payload).pipe();\r\n}\r\n\r\nfunction claimDeviceToCustomer(deviceName, secretKey) {\r\n    const payload = {\r\n        \"secretKey\": secretKey\r\n    }\r\n    const apiURL =\r\n        `/api/customer/device/${deviceName}/claim`;\r\n    return http.post(apiURL, payload).pipe();\r\n}\r\n\r\nfunction checkPermission() {\r\n    const authority = widgetContext.currentUser.authority;\r\n    if (authority === \"CUSTOMER_USER\") return true\r\n    return false;\r\n}\r\n\r\n\r\nfunction openDashboardState(element, statedId) {\r\n    // widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n\r\n    var params = {\r\n        entityLabel: element.name,\r\n        entityName: element.name,\r\n        entityId: {\r\n            id: element.id.id,\r\n            entityType: element.id.entityType\r\n        }\r\n    };\r\n\r\n    if (currentState !== statedId) {\r\n        widgetContext.stateController.updateState(statedId, params);\r\n    }\r\n}\r\n\r\nfunction saveRelationWithDStorz(storzId, dstorzId) {\r\n    return entityRelationService.saveRelation({\r\n        from: {\r\n            entityType: \"ASSET\",\r\n            id: storzId\r\n        },\r\n        to: {\r\n            entityType: \"DEVICE\",\r\n            id: dstorzId\r\n        },\r\n        type: \"Contains\",\r\n        typeGroup: \"COMMON\"\r\n    });\r\n}\r\n\r\nfunction checkDStorzRelationWithHydrant(dStorzId) {\r\n    const relationQuery = {\r\n        \"entityFields\": [\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"name\"\r\n            },\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"type\"\r\n            }\r\n        ],\r\n        \"latestValues\": [],\r\n        \"entityFilter\": {\r\n            \"type\": \"relationsQuery\",\r\n            \"rootEntity\": {\r\n                \"entityType\": \"DEVICE\",\r\n                \"id\": dStorzId\r\n            },\r\n            \"direction\": \"TO\",\r\n            \"maxLevel\": 2,\r\n            \"fetchLastLevelOnly\": false,\r\n            \"filters\": [\r\n                {\r\n                    \"relationType\": \"Contains\",\r\n                    \"entityTypes\": [\r\n                        \"ASSET\"\r\n                    ],\r\n                }\r\n            ]\r\n        },\r\n        \"pageLink\": {\r\n            \"dynamic\": false,\r\n            \"pageSize\": 10,\r\n            \"page\": 0,\r\n            \"textSearch\": null,\r\n            \"sortOrder\": {\r\n                \"key\": {\r\n                    \"type\": \"ENTITY_FIELD\",\r\n                    \"key\": \"createdTime\"\r\n                },\r\n                \"direction\": \"DESC\"\r\n            }\r\n        }\r\n    }\r\n    return http.post(urlEntitiesQuery, relationQuery).pipe(rxjs.map((dStrozRelationResponse) => {\r\n        return (dStrozRelationResponse && dStrozRelationResponse.data && dStrozRelationResponse.data.length) ? false : true;\r\n    }));\r\n}\r\n\r\nfunction showAlertDialog(title, content) {\r\n    setTimeout(() => {\r\n        const className = [];\r\n        widgetContext.dialogs.customAlert(title, content, null, className).subscribe((alertResponse) => {\r\n\r\n        });\r\n    }, 100);\r\n}\r\n\r\nfunction saveEntityAttributes(entityId, attributes, entityType = \"ASSET\") {\r\n    return attributeService.saveEntityAttributes({ entityType: entityType, id: entityId }, \"SERVER_SCOPE\", attributes);\r\n}\r\n\r\nfunction hasDuplicates(arr) {\r\n  const nonNullArray = arr.filter(item => item !== null);\r\n  const uniqueSet = new Set(nonNullArray);\r\n  return nonNullArray.length !== uniqueSet.size;\r\n}\r\n\r\nfunction sendToRuleEngine(deviceId, deviceName) {\r\n    const apiURL =\r\n        `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=swisscom`;\r\n    const payload = {\r\n        \"msg\": null,\r\n        \"metadata\": {\r\n            \"deviceName\": deviceName,\r\n            \"deviceType\": \"d-storz\",\r\n            \"operationType\": \"CREATE\"\r\n        }\r\n    }\r\n    return http.post(apiURL, payload).pipe();\r\n}",
            "formName": "hawle-dashboard.Create-New-Hydrant",
            "steps": [
              {
                "stepName": "hawle-dashboard.General-Info",
                "formFields": [
                  {
                    "label": "hawle-dashboard.hydrant-number",
                    "fieldName": "name",
                    "type": "ENTITY_FIELD",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.brand",
                    "fieldName": "hydrantsBrand",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Hawle\", value: \"Hawle\"},\n\t{name: \"Von Roll\", value: \"Von Roll\"},\n\t{name: \"Hinni\", value: \"Hinni\"},\n\t{name: \"Wild\", value: \"Wild\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "dependantFields": "model",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.model",
                    "fieldName": "model",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\r\n  { name: 'H8370', value: 'H8370', hydrantsBrand: 'Hawle' },\r\n  { name: 'H4', value: 'H4', hydrantsBrand: 'Hawle' },\r\n  { name: 'H4-HV', value: 'H4-HV', hydrantsBrand: 'Hawle' },\r\n  { name: 'N492', value: 'N492', hydrantsBrand: 'Hawle' },\r\n  { name: 'HYTEC', value: 'HYTEC', hydrantsBrand: 'Von Roll' },\r\n  { name: 'CLASSIC', value: 'CLASSIC', hydrantsBrand: 'Von Roll' },\r\n  { name: '5000S', value: '5000S', hydrantsBrand: 'Von Roll' },\r\n  { name: 'DECO', value: 'DECO', hydrantsBrand: 'Von Roll' },\r\n  { name: 'HYPLUS', value: 'HYPLUS', hydrantsBrand: 'Von Roll' },\r\n  { name: 'VARIO 2.0', value: 'VARIO 2.0', hydrantsBrand: 'Von Roll' },\r\n  { name: '6000', value: '6000', hydrantsBrand: 'Hinni' },\r\n  { name: '6006', value: '6006', hydrantsBrand: 'Hinni' },\r\n  { name: 'UT-RADIAL', value: 'UT-RADIAL', hydrantsBrand: 'Hinni' },\r\n  { name: 'UNO 1', value: 'UNO 1', hydrantsBrand: 'Wild' }\r\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 4",
                    "fieldName": "step0field4",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Water-abstruction' | translate}}</h3>-->\n<!--<p style=\"font-size: 1rem;font-weight: 500;margin-bottom: 0.25rem;\">{{'hawle-dashboard.Select-one-from-below' | translate}}</p>-->\n\n<h3 style=\"font-size: 1.5rem;\">Water abstraction</h3>\n<p style=\"font-size: 1rem;font-weight: 500;margin-bottom: 0.25rem;\">Select one from below</p>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Water-abstruction' | translate}}</h3>-->\n<!--<p style=\"font-size: 1rem;font-weight: 500;margin-bottom: 0.25rem;\">{{'hawle-dashboard.Select-one-from-below' | translate}}</p>-->\n\n<h3 style=\"font-size: 1.5rem;\">Water abstraction</h3>\n<p style=\"font-size: 1rem;font-weight: 500;margin-bottom: 0.25rem;\">Select one from below</p>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Select-ground-*",
                    "fieldName": "aboveGround",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Above ground\", value: true, dependencyFor: [\"storz3\",\"storz3Description\", \"undergroundHydrantBrand\", \"undergroundHydrantModel\", \"undergroundHydrantDiggingDepth\", \"undergroundHydrantDiggingDepthUnit\", \"undergroundHydrantTitle\", \"exit3Title\", \"exit3Option\", \"exit3DStorz\", \"exit3line1\", \"exit3line2\", \"outputPressure3\", \"outputVolume3\", \"outputVolume3Unit\"], multiDependency: true},\n    {name: \"Below ground\", value: false}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Information above the cover",
                    "fieldName": "step0field6",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Information-about-the-cover' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Information about the cover</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Information-about-the-cover' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Information about the cover</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Storz-1",
                    "fieldName": "storz1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.description",
                    "fieldName": "storz1Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.Storz-2",
                    "fieldName": "storz2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.description",
                    "fieldName": "storz2Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.Storz-3",
                    "fieldName": "storz3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"75mm\", value: \"75\"},\n    {name: \"55mm\", value: \"55\"},\n    {name: \"110mm\", value: \"110\"},\n    {name: \"-\", value: \"-\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.description",
                    "fieldName": "storz3Description",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"No Description\", value: \"No Description\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 13",
                    "fieldName": "undergroundHydrantTitle",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Add-underground-hydrant-(Optional)' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Add underground hydrant (Optional)</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Add-underground-hydrant-(Optional)' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Add underground hydrant (Optional)</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.brand",
                    "fieldName": "undergroundHydrantBrand",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Hawle\", value: \"Hawle\"},\n\t{name: \"Von Roll\", value: \"Von Roll\"},\n\t{name: \"Hinni\", value: \"Hinni\"},\n\t{name: \"Wild\", value: \"Wild\"}\n]);",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "undergroundHydrantModel",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.model",
                    "fieldName": "undergroundHydrantModel",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\r\n  { name: 'H8370', value: 'H8370', undergroundHydrantBrand: 'Hawle' },\r\n  { name: 'H4', value: 'H4', undergroundHydrantBrand: 'Hawle' },\r\n  { name: 'H4-HV', value: 'H4-HV', undergroundHydrantBrand: 'Hawle' },\r\n  { name: 'N492', value: 'N492', undergroundHydrantBrand: 'Hawle' },\r\n  { name: 'HYTEC', value: 'HYTEC', undergroundHydrantBrand: 'Von Roll' },\r\n  { name: 'CLASSIC', value: 'CLASSIC', undergroundHydrantBrand: 'Von Roll' },\r\n  { name: '5000S', value: '5000S', undergroundHydrantBrand: 'Von Roll' },\r\n  { name: 'DECO', value: 'DECO', undergroundHydrantBrand: 'Von Roll' },\r\n  { name: 'HYPLUS', value: 'HYPLUS', undergroundHydrantBrand: 'Von Roll' },\r\n  { name: 'VARIO 2.0', value: 'VARIO 2.0', undergroundHydrantBrand: 'Von Roll' },\r\n  { name: '6000', value: '6000', undergroundHydrantBrand: 'Hinni' },\r\n  { name: '6006', value: '6006', undergroundHydrantBrand: 'Hinni' },\r\n  { name: 'UT-RADIAL', value: 'UT-RADIAL', undergroundHydrantBrand: 'Hinni' },\r\n  { name: 'UNO 1', value: 'UNO 1', undergroundHydrantBrand: 'Wild' }\r\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "hawle-dashboard.Digging-depth",
                    "fieldName": "undergroundHydrantDiggingDepth",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"m\", value: \"m\"},\n    {name: \"cm\", value: \"cm\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "undergroundHydrantDiggingDepthUnit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"m\", value: \"m\"},\n    {name: \"cm\", value: \"cm\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  }
                ]
              },
              {
                "stepName": "hawle-dashboard.Pressure-Info",
                "formFields": [
                  {
                    "label": "hawle-dashboard.Main-Input-Pressure",
                    "fieldName": "networkInputPressure",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Aperture-Turn__",
                    "fieldName": "orificePlate",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "toggle",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Yes\", value: true},\n    {name: \"No\", value: false, dependencyFor: [\"step1field15\",\"flowWithoutOrifice\", \"flowWithoutOrificeUnit\"]}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Double-Shut-off__",
                    "fieldName": "doubleLocked",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "toggle",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"Yes\", value: true},\n    {name: \"No\", value: false}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Field 8",
                    "fieldName": "step1field8",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "\n<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Output-pressure' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Output pressure</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "\n<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Output-pressure' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Output pressure</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 9",
                    "fieldName": "step1field9",
                    "type": "SHARED_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Volumetric-flow' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Volumetric flow</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Volumetric-flow' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Volumetric flow</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "1",
                    "fieldName": "outputPressure1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "1",
                    "fieldName": "outputVolume1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "outputVolume1Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "2",
                    "fieldName": "outputPressure2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "2",
                    "fieldName": "outputVolume2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "outputVolume2Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "3",
                    "fieldName": "outputPressure3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "Bar",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "3",
                    "fieldName": "outputVolume3",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "number",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 100000000,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 25
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "outputVolume3Unit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 25,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  },
                  {
                    "label": "Field 15",
                    "fieldName": "step1field15",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Flow-without-aperture' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Flow without orifice plate</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Flow-without-aperture' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Flow without orifice plate</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.Flow",
                    "fieldName": "flowWithoutOrifice",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "hawle-dashboard.Unit",
                    "fieldName": "flowWithoutOrificeUnit",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "dropdown",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"l/min\", value: \"l/min\"},\n    {name: \"l/sec\", value: \"l/sec\"},\n    {name: \"m3/h\", value: \"m3/h\"}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": {
                      "_isScalar": false
                    },
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50,
                    "filteredOptionList": {
                      "_isScalar": false
                    }
                  }
                ]
              },
              {
                "stepName": "hawle-dashboard.date",
                "formFields": [
                  {
                    "label": "Field 1",
                    "fieldName": "step2field1",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Purchase-/-Installation' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Purchase / Installation</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Purchase-/-Installation' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Purchase / Installation</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.date",
                    "fieldName": "purchaseDate",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": true,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "hawle-dashboard.time",
                    "fieldName": "purchaseTime",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": true,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": true,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 4",
                    "fieldName": "step2field4",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Last-Service' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Last Service</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<!--<h3 style=\"font-size: 1.5rem;\">{{'hawle-dashboard.Last-Service' | translate}}</h3>-->\n<h3 style=\"font-size: 1.5rem;\">Last Service</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "hawle-dashboard.date",
                    "fieldName": "lastServiceDate",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "date",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "hawle-dashboard.time",
                    "fieldName": "lastServiceTime",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "time",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 50
                  }
                ]
              },
              {
                "stepName": "Location",
                "formFields": [
                  {
                    "label": "hawle-dashboard.zone",
                    "fieldName": "zone",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "autoComplete",
                    "fieldAction": "let $injector = widgetContext.$scope.$injector;\nlet http = $injector.get(widgetContext.servicesMap.get(\n    \"http\"));\nlet rxjs = widgetContext.rxjs;\nconst url =\n    `/api/user/assets?pageSize=50&page=0&sortProperty=name&sortOrder=ASC&type=zone&textSearch=${searchTerm && searchTerm.trim() ? searchTerm.trim() : ''}`;\n\n\nreturn http.get(url).pipe(rxjs.debounceTime(150),\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\n        response\n        .data.map(\n            data => ({\n                name: data.name,\n                value: JSON.stringify({\n                    name: data.name,\n                    value: data.id.id\n                })\n            }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "hawle-dashboard.map",
                    "fieldName": "map",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "map",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              },
              {
                "stepName": "D-Storz",
                "formFields": [
                  {
                    "label": "Field 1",
                    "fieldName": "step4field1",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Exit 1</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Exit 1</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Choose an option",
                    "fieldName": "exit1Option",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"From Existing List\", value: \"fromExisting\", dependencyFor: ['exit1DStorz'] },\n    {name: \"Add new\", value: \"new\", dependencyFor: ['exit1line1', 'exit1line2'] }\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Select from the list",
                    "fieldName": "exit1DStorz",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "autoComplete",
                    "fieldAction": "const $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    \"http\"));\r\nconst rxjs = widgetContext.rxjs;\r\n\r\nconst urlEntitiesURL = `/api/entitiesQuery/find`;\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        deviceNameFilter: \"\",\r\n        deviceType: \"d-storz\",\r\n        resolveMultiple: true,\r\n        type: \"deviceType\"\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"serialNumber\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 20,\r\n        textSearch: searchTerm && searchTerm.trim() ? searchTerm.trim() : '',\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nreturn http.post(urlEntitiesURL, relatedStorzQuery).pipe(rxjs.debounceTime(150),\r\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\r\n        response\r\n            .data.map(\r\n                data => ({\r\n                    name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                    value: JSON.stringify({\r\n                        originalName: data.latest.ENTITY_FIELD.name.value,\r\n                        name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                        value: data.entityId.id\r\n                    })\r\n                }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Line 1",
                    "fieldName": "exit1line1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Line 2",
                    "fieldName": "exit1line2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 6",
                    "fieldName": "step4field6",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Exit 2</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Exit 2</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Choose an option",
                    "fieldName": "exit2Option",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"From Existing List\", value: \"fromExisting\", dependencyFor: ['exit2DStorz']},\n    {name: \"Add new\", value: \"new\", dependencyFor: ['exit2line1', 'exit2line2']}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Select from the list",
                    "fieldName": "exit2DStorz",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "autoComplete",
                    "fieldAction": "const $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    \"http\"));\r\nconst rxjs = widgetContext.rxjs;\r\n\r\nconst urlEntitiesURL = `/api/entitiesQuery/find`;\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        deviceNameFilter: \"\",\r\n        deviceType: \"d-storz\",\r\n        resolveMultiple: true,\r\n        type: \"deviceType\"\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"serialNumber\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 20,\r\n        textSearch: searchTerm && searchTerm.trim() ? searchTerm.trim() : '',\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nreturn http.post(urlEntitiesURL, relatedStorzQuery).pipe(rxjs.debounceTime(150),\r\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\r\n        response\r\n            .data.map(\r\n                data => ({\r\n                    name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                    value: JSON.stringify({\r\n                        originalName: data.latest.ENTITY_FIELD.name.value,\r\n                        name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                        value: data.entityId.id\r\n                    })\r\n                }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Line 1",
                    "fieldName": "exit2line1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Line 2",
                    "fieldName": "exit2line2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 11",
                    "fieldName": "exit3Title",
                    "type": "CLIENT_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<h3 style=\"font-size: 1.5rem;\">Exit 3</h3>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<h3 style=\"font-size: 1.5rem;\">Exit 3</h3>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Choose an option",
                    "fieldName": "exit3Option",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "radio",
                    "fieldAction": "return widgetContext.rxjs.of([\n    {name: \"From Existing List\", value: \"fromExisting\", dependencyFor: ['exit3DStorz']},\n    {name: \"Add new\", value: \"new\", dependencyFor: ['exit3line1', 'exit3line2']}\n])",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 100
                  },
                  {
                    "label": "Select from the list",
                    "fieldName": "exit3DStorz",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "autoComplete",
                    "fieldAction": "const $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    \"http\"));\r\nconst rxjs = widgetContext.rxjs;\r\n\r\nconst urlEntitiesURL = `/api/entitiesQuery/find`;\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        deviceNameFilter: \"\",\r\n        deviceType: \"d-storz\",\r\n        resolveMultiple: true,\r\n        type: \"deviceType\"\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"serialNumber\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 20,\r\n        textSearch: searchTerm && searchTerm.trim() ? searchTerm.trim() : '',\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nreturn http.post(urlEntitiesURL, relatedStorzQuery).pipe(rxjs.debounceTime(150),\r\n    rxjs.distinctUntilChanged(), rxjs.map((response) =>\r\n        response\r\n            .data.map(\r\n                data => ({\r\n                    name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                    value: JSON.stringify({\r\n                        originalName: data.latest.ENTITY_FIELD.name.value,\r\n                        name: data.latest.SERVER_ATTRIBUTE.serialNumber.value,\r\n                        value: data.entityId.id\r\n                    })\r\n                }))));",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    },
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 100,
                    "filteredOptionList": {
                      "_isScalar": false,
                      "source": {
                        "_isScalar": false,
                        "source": {
                          "_isScalar": false,
                          "source": {
                            "_isScalar": false,
                            "source": {
                              "_isScalar": false,
                              "source": {
                                "_isScalar": false,
                                "source": {
                                  "_isScalar": false
                                },
                                "operator": {
                                  "concurrent": 1
                                }
                              },
                              "operator": {}
                            },
                            "operator": {}
                          },
                          "operator": {
                            "dueTime": 150,
                            "scheduler": {
                              "actions": [],
                              "active": false
                            }
                          }
                        },
                        "operator": {}
                      },
                      "operator": {}
                    }
                  },
                  {
                    "label": "Line 1",
                    "fieldName": "exit3line1",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Line 2",
                    "fieldName": "exit3line2",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "text",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "",
                    "fieldCss": "",
                    "parsedHtml": "",
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 6,
                    "maxLength": 6,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": false,
                    "value": "",
                    "fxFlex": 50
                  },
                  {
                    "label": "Field 16",
                    "fieldName": "step4field16",
                    "type": "SERVER_ATTRIBUTE",
                    "fieldType": "html",
                    "fieldAction": "",
                    "radioAction": "",
                    "fieldHtml": "<div style=\"width:100%;height:100%; display: flex; justify-content: center; align-items: bottom;\">\n    <div style=\"height: 200px; width: 200px;\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&amp;st=2023-11-02T15:08:18Z&amp;se=2035-11-02T23:08:18Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n    \n    <div style=\"height: 250px; width: 200px\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_qr.png?sp=r&amp;st=2023-11-02T15:08:45Z&amp;se=2035-11-02T23:08:45Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=lWjN20%2FcXQugQxx9QuU9HbBmbNwkiFQPmjRZT%2BdZ0O4%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n</div>\n<div style=\"text-align: center; margin-bottom: 30px;\">\n    <div>\n       <b style=\"margin: 0 auto;\">Where to find Line 1 & Line 2 ?</b> \n    </div>\n    <div style=\"margin: 0 auto;\">\n         They are under the QR code of your D-Storz\n    </div>\n</div>",
                    "fieldCss": "",
                    "parsedHtml": {
                      "changingThisBreaksApplicationSecurity": "<div style=\"width:100%;height:100%; display: flex; justify-content: center; align-items: bottom;\">\n    <div style=\"height: 200px; width: 200px;\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&amp;st=2023-11-02T15:08:18Z&amp;se=2035-11-02T23:08:18Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n    \n    <div style=\"height: 250px; width: 200px\">\n        <img src=\"https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_qr.png?sp=r&amp;st=2023-11-02T15:08:45Z&amp;se=2035-11-02T23:08:45Z&amp;sv=2022-11-02&amp;sr=b&amp;sig=lWjN20%2FcXQugQxx9QuU9HbBmbNwkiFQPmjRZT%2BdZ0O4%3D\" style=\"width:100%;height:100%;\" />\n    </div>\n</div>\n<div style=\"text-align: center; margin-bottom: 30px;\">\n    <div>\n       <b style=\"margin: 0 auto;\">Where to find Line 1 & Line 2 ?</b> \n    </div>\n    <div style=\"margin: 0 auto;\">\n         They are under the QR code of your D-Storz\n    </div>\n</div>"
                    },
                    "optionList": [],
                    "selectedOptionList": [],
                    "required": false,
                    "suffix": "",
                    "dependantFields": "",
                    "minLength": 0,
                    "maxLength": 0,
                    "minValue": 0,
                    "maxValue": 0,
                    "isCurrent": false,
                    "row": 0,
                    "column": 0,
                    "visible": true,
                    "value": "",
                    "fxFlex": 100
                  }
                ]
              }
            ],
            "genericFormFunction": "//CREATE HYDRANT NEW\r\n\r\nconsole.log(formData);\r\nconsole.log(widgetContext);\r\nconsole.log(stepsSettings);\r\n\r\n\r\nconst $injector = widgetContext.$scope.$injector;\r\nconst http = $injector.get(widgetContext.servicesMap.get(\r\n    'http'));\r\nconst attributeService = $injector.get(widgetContext\r\n    .servicesMap.get('attributeService'));\r\nconst entityRelationService = $injector.get(widgetContext.servicesMap.get(\"entityRelationService\"));\r\nconst url = '/api/entityGroups/ASSET';\r\nconst translationService = $injector.get(widgetContext.servicesMap.get(\"translate\"));\r\nlet storzCount = 0;\r\nconst rxjs = widgetContext.rxjs;\r\nconst urlEntitiesQuery = `/api/entitiesQuery/find`;\r\nlet hydrantId;\r\nlet dstorzCountForHydrant = 0;\r\n\r\n\r\nlet selectedFormValue = {\r\n    exit1Option: formData.value['exit1Option'] || null,\r\n    exit1DStorz: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).value : null,\r\n    exit1DStorzSerialNumber: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).name : null,\r\n    exit1DStorzName: formData.value['exit1DStorz'] && formData.value['exit1DStorz'].trim() ? JSON.parse(formData.value['exit1DStorz'].trim()).originalName : null,\r\n    exit1line1: formData.value['exit1line1'] || null,\r\n    exit1line2: formData.value['exit1line2'] || null,\r\n    exit2Option: formData.value['exit2Option'] || null,\r\n    exit2DStorz: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).value : null,\r\n    exit2DStorzSerialNumber: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).name : null,\r\n    exit2DStorzName: formData.value['exit2DStorz'] && formData.value['exit2DStorz'].trim() ? JSON.parse(formData.value['exit2DStorz'].trim()).originalName : null,\r\n    exit2line1: formData.value['exit2line1'] || null,\r\n    exit2line2: formData.value['exit2line2'] || null,\r\n    exit3Option: formData.value['exit3Option'] || null,\r\n    exit3DStorz: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).value : null,\r\n    exit3DStorzSerialNumber: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).name : null,\r\n    exit3DStorzName: formData.value['exit3DStorz'] && formData.value['exit3DStorz'].trim() ? JSON.parse(formData.value['exit3DStorz'].trim()).originalName : null,\r\n    exit3line1: formData.value['exit3line1'] || null,\r\n    exit3line2: formData.value['exit3line2'] || null\r\n}\r\n\r\nlet errorList = [];\r\n\r\nconst relatedStorzQuery = {\r\n    entityFilter: {\r\n        type: \"relationsQuery\",\r\n        rootEntity: {\r\n            entityType: \"ASSET\",\r\n            id: \"\"\r\n        },\r\n        direction: \"FROM\",\r\n        maxLevel: 1,\r\n        fetchLastLevelOnly: true,\r\n        filters: [\r\n            {\r\n                relationType: \"Contains\",\r\n                entityTypes: [\r\n                    \"ASSET\"\r\n                ]\r\n            }\r\n        ]\r\n    },\r\n    entityFields: [\r\n        {\r\n            type: \"ENTITY_FIELD\",\r\n            key: \"name\",\r\n        }\r\n    ],\r\n    latestValues: [\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"description\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitDiameter\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitDiameterUnit\",\r\n        },\r\n        {\r\n            type: \"SERVER_ATTRIBUTE\",\r\n            key: \"exitName\",\r\n        }\r\n    ],\r\n    pageLink: {\r\n        page: 0,\r\n        pageSize: 10,\r\n        sortOrder: {\r\n            key: {\r\n                key: \"name\",\r\n                type: \"ENTITY_FIELD\",\r\n            },\r\n            direction: \"ASC\",\r\n        }\r\n    }\r\n};\r\n\r\nconst hydrantRelatedAttributesPayload = [\r\n    {\r\n        key: 'hydrantNumber',\r\n        value: formData.value.name\r\n    },\r\n    {\r\n        key: 'hydrantId',\r\n        value: \"\"\r\n    },\r\n    {\r\n        key: 'hydrantsBrand',\r\n        value: formData.value.hydrantsBrand\r\n    },\r\n    {\r\n        key: 'country',\r\n        value: formData.value.map_country\r\n    },\r\n    {\r\n        key: 'zip',\r\n        value: formData.value.map_zip\r\n    },\r\n    {\r\n        key: 'city',\r\n        value: formData.value.map_city\r\n    },\r\n    {\r\n        key: 'street',\r\n        value: formData.value.map_street\r\n    },\r\n    {\r\n        key: 'state',\r\n        value: formData.value.map_state\r\n    }\r\n]\r\n\r\nfunction addDStorz() {\r\n    return new Promise((resolve, reject) => {\r\n        if (!selectedFormValue.exit1Option && !selectedFormValue.exit2Option && !selectedFormValue.exit3Option) {\r\n            widgetContext.showToast('warn',\r\n                \"DStorz Option not selected yet\",\r\n                2000,\r\n                'top', 'left');\r\n            resolve();\r\n        } else {\r\n            if ((selectedFormValue.exit1Option === 'fromExisting' && !selectedFormValue.exit1DStorz) || (selectedFormValue.exit2Option === 'fromExisting' && !selectedFormValue.exit2DStorz) || (selectedFormValue.exit3Option === 'fromExisting' && !selectedFormValue.exit3DStorz)) {\r\n                widgetContext.showToast('warn',\r\n                    \"Please select DStorz Correctly\",\r\n                    2000,\r\n                    'top', 'left');\r\n                resolve();\r\n            } else if (hasDuplicates([selectedFormValue.exit1DStorz, selectedFormValue.exit2DStorz, selectedFormValue.exit3DStorz])) {\r\n                widgetContext.showToast('warn',\r\n                    \"You can't choose same D-Storz for multiple Storz\",\r\n                    2000,\r\n                    'top', 'left');\r\n                resolve();\r\n            } else {\r\n                setTimeout(() => {\r\n                    const storzList$ = http.post(urlEntitiesQuery, relatedStorzQuery).pipe();\r\n                    storzList$.subscribe((storzList) => {\r\n                        if (storzList && storzList.data && storzList.data.length) {\r\n                            const storzIdList = [];\r\n                            storzIdList[0] = storzList && storzList.data && storzList.data.length > 0 ? storzList.data[0].entityId.id : \"\";\r\n                            storzIdList[1] = storzList && storzList.data && storzList.data.length > 1 ? storzList.data[1].entityId.id : \"\";\r\n                            storzIdList[2] = storzList && storzList.data && storzList.data.length > 2 ? storzList.data[2].entityId.id : \"\";\r\n                            widgetContext.isGenericLoading$.next(true);\r\n    \r\n                            if (storzIdList && storzIdList.length) {\r\n                                var storzProcessed = new Promise((resolve, reject) => {\r\n                                    storzIdList.forEach((storzId, index, array) => {\r\n                                        const optionName = `exit${index + 1}Option`;\r\n                                        if (selectedFormValue[optionName] === 'fromExisting') {\r\n                                            const name = `exit${index + 1}DStorz`;\r\n                                            checkDStorzRelationWithHydrant(selectedFormValue[name]).subscribe((isValid) => {\r\n                                                if (!storzId) {\r\n                                                    errorList.push(`Exit ${index}: This exit does not exist on hydrant`)\r\n                                                } else if (isValid && selectedFormValue[name] && storzId) {\r\n                                                    const line1 = `exit${index}line1`;\r\n                                                    const line2 = `exit${index}line2`;\r\n                                                    let currentStorz = storzList.data.find(storzEntity => storzEntity.entityId.id == storzId)\r\n                                                    hydrantRelatedAttributesPayload.push(\r\n                                                        {\r\n                                                            key: 'exitNode',\r\n                                                            value: currentStorz.latest.SERVER_ATTRIBUTE.exitDiameter.value + (currentStorz.latest.SERVER_ATTRIBUTE.exitDiameterUnit.value || 'mm') + ', ' + currentStorz.latest.SERVER_ATTRIBUTE.exitName.value\r\n                                                        }\r\n                                                    )\r\n                                                    saveEntityAttributes(selectedFormValue[name], hydrantRelatedAttributesPayload, 'DEVICE').subscribe(() => { });\r\n    \r\n                                                    saveEntityAttributes(storzId, [\r\n                                                        {   \r\n                                                            key: \"assignedDStorz\", \r\n                                                            value: selectedFormValue[`${name}Name`] \r\n                                                        },\r\n                                                        {   \r\n                                                            key: \"assignedDStorzSerialNumber\", \r\n                                                            value: selectedFormValue[`${name}SerialNumber`]\r\n                                                        }\r\n                                                        ] ).subscribe(() => { });\r\n    \r\n                                                    saveRelationWithDStorz(storzId, selectedFormValue[name]).subscribe(() => {\r\n                                                        dstorzCountForHydrant++;\r\n                                                        const deviceId = selectedFormValue[name];\r\n                                                        \r\n                                                        // assign dstorz;\r\n                                                        const sendToRuleEngineKey = \"resetAlarm\";\r\n                                                        const sendToRuleEngineURL = `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=${sendToRuleEngineKey}`;\r\n                                                        const sendToRuleEngineBody = {\r\n                                                            \"msg\": null,\r\n                                                            \"metadata\": {\r\n                                                                \"deviceName\": selectedFormValue[`${name}Name`],\r\n                                                                \"deviceType\": \"d-storz\",\r\n                                                                \"operationType\": \"ASSIGN\"\r\n                                                            }\r\n                                                        }\r\n                                                        http.post(sendToRuleEngineURL, sendToRuleEngineBody).pipe().subscribe(() => { })\r\n                                                    });\r\n                                                } else {\r\n                                                    errorList.push(`Exit ${index}: This device is already connected with hydrant`)\r\n                                                }\r\n                                            })\r\n                                        } else if (selectedFormValue[optionName] === 'new') {\r\n                                            if (checkPermission()) {\r\n                                                const line1 = `exit${index + 1}line1`;\r\n                                                const line2 = `exit${index + 1}line2`\r\n                                                if(selectedFormValue[line1] && selectedFormValue[line1].length < 6) {\r\n                                                    widgetContext.showToast('warn',\r\n                                                    translationService.instant(\"hawle-dashboard.line-one-value-should-be-six-character-long\"), 2000,\r\n                                                    'top', 'left', widgetContext.toastTargetId);\r\n                                                    return;\r\n                                                } else if(selectedFormValue[line2] && selectedFormValue[line2].length < 6) {\r\n                                                    widgetContext.showToast('warn',\r\n                                                    translationService.instant(\"hawle-dashboard.line-two-value-should-be-six-character-long\"), 2000,\r\n                                                    'top', 'left', widgetContext.toastTargetId);\r\n                                                    return;\r\n                                                } else {\r\n                                                    executeClaim(selectedFormValue[line1], selectedFormValue[line2], index + 1, storzList, storzId);\r\n                                                }\r\n                                            } else {\r\n                                                errorList.push(`Exit ${index}: You don't need to claim your own device.`)\r\n                                            }\r\n                                        }\r\n                                        if (index === array.length - 1) resolve();\r\n                                    });\r\n                                });\r\n    \r\n                                storzProcessed.then(() => {\r\n                                    setTimeout(() => {\r\n                                        widgetContext.isGenericLoading$.next(false)\r\n                                        if (errorList && errorList.length) {\r\n                                            const content = errorList.join('\\n\\n');\r\n                                            const title = 'Unable to assigning all d-storz';\r\n                                            showAlertDialog(title, content)\r\n                                        } else {\r\n                                            widgetContext.showToast('success',\r\n                                                \"All Device assigned successfully \",\r\n                                                2000,\r\n                                                'top', 'left');\r\n                                        }\r\n                                        saveEntityAttributes(hydrantId.id, [{\r\n                                            key: \"dstorzCount\",\r\n                                            value: dstorzCountForHydrant\r\n                                        }]).subscribe();\r\n                                        resolve();\r\n                                    }, 2000)\r\n                                })\r\n    \r\n                            }\r\n                        } else {\r\n                            widgetContext.showToast('warn',\r\n                                \"You need storz to attach d-storz\",\r\n                                2000,\r\n                                'top', 'left');\r\n                            resolve();\r\n                        }\r\n                    });\r\n                }, 1000)\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\nfunction createHydrant() {\r\n    return new Promise((resolve, reject) => {\r\n        http.get(url).pipe().subscribe((assetGroups) => {\r\n            // Process the result of the first request\r\n            var assetCreateUrl = '';\r\n            assetGroups.forEach((\r\n                assetGroup) => {\r\n                if (assetGroup.name ===\r\n                    \"All\") {\r\n                    assetCreateUrl =\r\n                        `/api/asset?entityGroupId=${assetGroup.id.id}`;\r\n                }\r\n            });\r\n            if (assetCreateUrl !== '') {\r\n                const hydrantInfo = {\r\n                    name: formData.value.name,\r\n                    type: \"hydrant\"\r\n                }\r\n                \r\n                http.post(assetCreateUrl, hydrantInfo)\r\n                    .pipe().subscribe((hydrantResponse) => {\r\n                        hydrantId = hydrantResponse.id;\r\n                        relatedStorzQuery.entityFilter.rootEntity.id = hydrantResponse.id.id;\r\n                        hydrantRelatedAttributesPayload.find(attribute => attribute.key == \"hydrantId\").value = hydrantResponse.id.id;\r\n                        storzCount = countDefinedStorz([formData.value.storz1, formData.value.storz2, formData.value.storz3 ]);\r\n                        \r\n                        // saving attributes\r\n                        saveAttributes('ASSET', hydrantResponse.id.id).subscribe(() => {});\r\n                        \r\n                        // saving timeseries\r\n                        saveTelemetry('ASSET', hydrantResponse.id.id).subscribe(() => {});\r\n                        \r\n                        if (formData.value.storz1) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name,  1, formData.value.storz1, formData.value.storz1Description);\r\n                        if (formData.value.storz2) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name, 2, formData.value.storz2, formData.value.storz2Description);\r\n                        if (formData.value.storz3) createStorzAndRelate(assetCreateUrl, hydrantResponse.id.id, hydrantResponse.name, 3, formData.value.storz3, formData.value.storz3Description);\r\n        \r\n                        if (formData.value.zone) relateWithZone(JSON.parse(formData.value.zone).value, hydrantResponse.id.id);\r\n    \r\n                        \r\n        \r\n                        widgetContext.showToast('success',\r\n                            translationService.instant('hawle-dashboard.hydrant-saved-successfully'), 2000,\r\n                            'top', 'left');\r\n                        //  openDashboardState('all_hydrants');\r\n                        widgetContext.updateAliases();\r\n                        resolve();\r\n                    })\r\n            }\r\n        })\r\n    })\r\n}\r\n\r\n\r\ncreateHydrant().then(() => {\r\n    addDStorz().then(() => {\r\n        widgetContext.updateAliases();\r\n        openDashboardState('all_hydrants');\r\n    })\r\n})\r\n\r\n\r\n//FUNCTIONS FROM CREATE HYDRANT\r\n\r\nfunction relateWithZone(zoneId, hydrantId) {\r\n    entityRelationService.saveRelation({\r\n        from: {\r\n          entityType: \"ASSET\",\r\n          id: zoneId\r\n        },\r\n        to: {\r\n          entityType: \"ASSET\",\r\n          id: hydrantId\r\n        },\r\n        type: \"Contains\",\r\n        typeGroup: \"COMMON\"\r\n    }).subscribe(() => {});\r\n}\r\n\r\n\r\nfunction createStorzAndRelate(assetCreateUrl, hydrantId, hydrantName, storzNumber, exitDiameter, description) {\r\n    const storzURL = assetCreateUrl;\r\n    const storzInfo = {\r\n        name: generateStorzName(8, hydrantName, storzNumber),\r\n        type: \"storz\"\r\n    }\r\n    \r\n    http.post(storzURL, storzInfo)\r\n        .pipe().subscribe((storzResponse) => {\r\n            \r\n            // saving attribute\r\n            saveStorzAttributes(storzResponse.id.id, storzNumber, exitDiameter, description).subscribe(() => {});\r\n            \r\n            saveRelationWithStorz(hydrantId, storzResponse.id.id).subscribe(() => {});\r\n        })\r\n}\r\n\r\nfunction countDefinedStorz(array) {\r\n  return array.filter(element => element !== undefined && element !== null && element != \"\").length;\r\n}\r\n\r\n\r\nfunction saveAttributes(entityType, entityId) {\r\n    const attributes = {\r\n        hydrantsBrand: formData.value.hydrantsBrand,\r\n        modelNumber: formData.value.model,\r\n        storzCount: storzCount,\r\n        hydrantImage: 'https://datasheetblobstorage.blob.core.windows.net/hawlefileshared/demo_hydrant.png?sp=r&st=2023-11-02T15:08:18Z&se=2035-11-02T23:08:18Z&sv=2022-11-02&sr=b&sig=bsjcjkyP3ctkOymQ2tA3OfvIjNhArwZRL7ggptwSMWw%3D',\r\n        zone: formData.value.zone ? JSON.parse(formData.value.zone).name : \"\",\r\n        aboveGround: formData.value.aboveGround,\r\n        undergroundHydrantBrand: formData.value.undergroundHydrantBrand,\r\n        undergroundHydrantModel: formData.value.undergroundHydrantModel,\r\n        undergroundHydrantDiggingDepth: formData.value.undergroundHydrantDiggingDepth,\r\n        undergroundHydrantDiggingDepthUnit: formData.value.undergroundHydrantDiggingDepthUnit,\r\n        doubleLocked: formData.value.doubleLocked ? true : false,\r\n        selectedZone: formData.value.selectedZone,\r\n        networkInputPressure: formData.value.networkInputPressure,\r\n        networkInputPressureUnit: \"Bar\",\r\n        hydrantNumber: formData.value.name,\r\n        hydrantId: entityId,\r\n        orificePlate: formData.value.orificePlate ? true : false,\r\n        flowWithoutOrifice: formData.value.flowWithoutOrifice,\r\n        flowWithoutOrificeUnit: formData.value.flowWithoutOrificeUnit,\r\n        outputPressure1: formData.value.outputPressure1,\r\n        outputPressure2: formData.value.outputPressure2,\r\n        outputPressure3: formData.value.outputPressure3,\r\n        outputVolume1: formData.value.outputVolume1,\r\n        outputVolume1Unit: formData.value.outputVolume1Unit,\r\n        outputVolume2: formData.value.outputVolume2,\r\n        outputVolume2Unit: formData.value.outputVolume2Unit,\r\n        outputVolume3: formData.value.outputVolume3,\r\n        outputVolume3Unit: formData.value.outputVolume3Unit,\r\n        purchaseDate: getMsTimeAfterAddTimeInDate(formData.value.purchaseDate, formData.value.purchaseTime),\r\n        lastServiceDate: getMsTimeAfterAddTimeInDate(formData.value.lastServiceDate, formData.value.lastServiceTime),\r\n        latitude: formData.value.map_latitude,\r\n        longitude: formData.value.map_longitude,\r\n        street: formData.value.map_street,\r\n        zip: formData.value.map_zip,\r\n        city: formData.value.map_city,\r\n        state: formData.value.map_state,\r\n        country: formData.value.map_country\r\n    };\r\n    var serverAttributeUrl =\r\n        `/api/plugins/telemetry/${entityType}/${entityId}/SERVER_SCOPE`;\r\n    return http.post(serverAttributeUrl, attributes);\r\n}\r\n\r\nfunction saveTelemetry(entityType, entityId) {\r\n    const timeSeries = {\r\n        isNotAssigned: true\r\n    };\r\n    var timeSeriesUrl =\r\n        `/api/plugins/telemetry/${entityType}/${entityId}/timeseries/ANY`;\r\n    return http.post(timeSeriesUrl, timeSeries);\r\n}\r\n\r\nfunction saveStorzAttributes(entityId, storzNumber, exitDiameter, description) {\r\n    const attributes = {\r\n        storzNumber: storzNumber,\r\n        exitDiameter: exitDiameter,\r\n        exitName: `Exit ${storzNumber}`,\r\n        exitDiameterUnit: \"mm\"\r\n    };\r\n    if (description && description.trim()) attributes['description'] = description;\r\n    var serverAttributeUrl =\r\n        `/api/plugins/telemetry/ASSET/${entityId}/SERVER_SCOPE`;\r\n    return http.post(serverAttributeUrl, attributes);\r\n}\r\n\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.openState(statedId,\r\n            params);\r\n    }\r\n}\r\n\r\nfunction getMsTimeAfterAddTimeInDate(date, time) {\r\n    let newDate = new Date(date);\r\n    let newTime = new Date(time);\r\n    let hours = newTime.getHours();\r\n    let minutes = newTime.getMinutes();\r\n    newDate.setHours(hours);\r\n    newDate.setMinutes(minutes);\r\n    return newDate.getTime();\r\n}\r\n\r\n\r\n\r\nfunction generateStorzName(length, hydrantName, storzNumber)  {\r\n    let result = [];\r\n    let hexRef = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\n    // for the given length\r\n    for (let n = 0; n < length; n++) {\r\n      // pick a random unit and store it in result\r\n      result.push(hexRef[Math.floor(Math.random() * 16)]);\r\n    }\r\n    \r\n    // return the result as a string\r\n    return `storz${storzNumber}-${hydrantName}-${result.join('').toUpperCase()}`;\r\n}\r\n\r\nfunction saveRelationWithStorz(hydrantId, storzId) {\r\n    return entityRelationService.saveRelation({\r\n      from: {\r\n        entityType: \"ASSET\",\r\n        id: hydrantId\r\n      },\r\n      to: {\r\n        entityType: \"ASSET\",\r\n        id: storzId\r\n      },\r\n      type: \"Contains\",\r\n      typeGroup: \"COMMON\"\r\n    });\r\n  }\r\n\r\n\r\n//FUNCTIONS FROM ADD DSTORZ\r\nfunction executeClaim(line1, line2, index, storzList, storzId) {\r\n    const serialNumber =\r\n        `${line1}${line2}`;\r\n    validateSerialNumber(serialNumber).subscribe((\r\n        validationResponse) => {\r\n        if (validationResponse && validationResponse\r\n            .device && validationResponse\r\n                .deviceCredentials) {\r\n            const deviceToken = validationResponse\r\n                .deviceCredentials.credentialsId;\r\n            const deviceName = validationResponse\r\n                .device.name;\r\n            const deviceId = validationResponse\r\n                .device.id.id;\r\n            saveSecretKeyInDevice(deviceToken, \"\")\r\n                .subscribe((\r\n                    saveDeviceInfoResponse) => {\r\n                    claimDeviceToCustomer(\r\n                        deviceName, \"\")\r\n                        .subscribe((\r\n                            claimResponse\r\n                        ) => {\r\n                            \r\n                            sendToRuleEngine(deviceId, deviceName).subscribe(() => {});\r\n                            \r\n                            let currentStorz = storzList.data.find(storzEntity => storzEntity.entityId.id == storzId);\r\n                            const line1 = `exit${index}line1`;\r\n                            const line2 = `exit${index}line2`;\r\n                            hydrantRelatedAttributesPayload.push(\r\n                                {\r\n                                    key: 'exitNode',\r\n                                    value: currentStorz.latest.SERVER_ATTRIBUTE.exitDiameter.value + (currentStorz.latest.SERVER_ATTRIBUTE.exitDiameterUnit.value || 'mm') + ', ' + currentStorz.latest.SERVER_ATTRIBUTE.exitName.value\r\n                                }\r\n                            )\r\n                            saveEntityAttributes(deviceId, hydrantRelatedAttributesPayload, 'DEVICE').subscribe(() => { });\r\n\r\n                            saveEntityAttributes(storzId, [\r\n                                {\r\n                                    key: \"assignedDStorz\", \r\n                                    value: deviceName \r\n                                },\r\n                                {   \r\n                                    key: \"assignedDStorzSerialNumber\", \r\n                                    value: `${selectedFormValue[line1]}${selectedFormValue[line2]}`\r\n                                }\r\n                            ] ).subscribe(() => { });\r\n                            \r\n                            saveRelationWithDStorz(storzId, deviceId).subscribe(() => {  \r\n                                dstorzCountForHydrant++; \r\n                                \r\n                                // assign dstorz;\r\n                                const sendToRuleEngineKey = \"resetAlarm\";\r\n                                const sendToRuleEngineURL = `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=${sendToRuleEngineKey}`;\r\n                                const sendToRuleEngineBody = {\r\n                                    \"msg\": null,\r\n                                    \"metadata\": {\r\n                                        \"deviceName\": deviceName,\r\n                                        \"deviceType\": \"d-storz\",\r\n                                        \"operationType\": \"ASSIGN\"\r\n                                    }\r\n                                }\r\n                                http.post(sendToRuleEngineURL, sendToRuleEngineBody).pipe().subscribe(() => { })\r\n                                \r\n                            });\r\n                        })\r\n                })\r\n        } else {\r\n            errorList.push(`Exit ${index}: Could not found any device with this serial number`)\r\n        }\r\n    })\r\n}\r\n\r\nfunction validateSerialNumber(serialNumber) {\r\n    const apiURL =\r\n        `/api/device/deviceInfo/serverAttribute?serverAttributeKey=serialNumber&serverAttributeValue=${serialNumber}`;\r\n    return http.get(apiURL).pipe();\r\n}\r\n\r\nfunction saveSecretKeyInDevice(deviceToken, secretKey) {\r\n    const payload = {\r\n        \"secretKey\": secretKey\r\n    }\r\n    const apiURL = `/api/v1/${deviceToken}/claim`;\r\n    return http.post(apiURL, payload).pipe();\r\n}\r\n\r\nfunction claimDeviceToCustomer(deviceName, secretKey) {\r\n    const payload = {\r\n        \"secretKey\": secretKey\r\n    }\r\n    const apiURL =\r\n        `/api/customer/device/${deviceName}/claim`;\r\n    return http.post(apiURL, payload).pipe();\r\n}\r\n\r\nfunction checkPermission() {\r\n    const authority = widgetContext.currentUser.authority;\r\n    if (authority === \"CUSTOMER_USER\") return true\r\n    return false;\r\n}\r\n\r\nfunction openDashboardState(statedId) {\r\n    widgetContext.stateController.resetState();\r\n    var currentState = widgetContext.stateController\r\n        .getStateId();\r\n    if (currentState !== statedId) {\r\n        var params = {};\r\n        widgetContext.stateController.updateState(statedId,\r\n            params);\r\n    }\r\n}\r\n\r\nfunction saveRelationWithDStorz(storzId, dstorzId) {\r\n    return entityRelationService.saveRelation({\r\n        from: {\r\n            entityType: \"ASSET\",\r\n            id: storzId\r\n        },\r\n        to: {\r\n            entityType: \"DEVICE\",\r\n            id: dstorzId\r\n        },\r\n        type: \"Contains\",\r\n        typeGroup: \"COMMON\"\r\n    });\r\n}\r\n\r\nfunction checkDStorzRelationWithHydrant(dStorzId) {\r\n    const relationQuery = {\r\n        \"entityFields\": [\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"name\"\r\n            },\r\n            {\r\n                \"type\": \"ENTITY_FIELD\",\r\n                \"key\": \"type\"\r\n            }\r\n        ],\r\n        \"latestValues\": [],\r\n        \"entityFilter\": {\r\n            \"type\": \"relationsQuery\",\r\n            \"rootEntity\": {\r\n                \"entityType\": \"DEVICE\",\r\n                \"id\": dStorzId\r\n            },\r\n            \"direction\": \"TO\",\r\n            \"maxLevel\": 2,\r\n            \"fetchLastLevelOnly\": false,\r\n            \"filters\": [\r\n                {\r\n                    \"relationType\": \"Contains\",\r\n                    \"entityTypes\": [\r\n                        \"ASSET\"\r\n                    ],\r\n                }\r\n            ]\r\n        },\r\n        \"pageLink\": {\r\n            \"dynamic\": false,\r\n            \"pageSize\": 10,\r\n            \"page\": 0,\r\n            \"textSearch\": null,\r\n            \"sortOrder\": {\r\n                \"key\": {\r\n                    \"type\": \"ENTITY_FIELD\",\r\n                    \"key\": \"createdTime\"\r\n                },\r\n                \"direction\": \"DESC\"\r\n            }\r\n        }\r\n    }\r\n    return http.post(urlEntitiesQuery, relationQuery).pipe(rxjs.map((dStrozRelationResponse) => {\r\n        return (dStrozRelationResponse && dStrozRelationResponse.data && dStrozRelationResponse.data.length) ? false : true;\r\n    }));\r\n}\r\n\r\nfunction showAlertDialog(title, content) {\r\n    setTimeout(() => {\r\n        const className = [];\r\n        widgetContext.dialogs.customAlert(title, content, null, className).subscribe((alertResponse) => {\r\n\r\n        });\r\n    }, 100);\r\n}\r\n\r\nfunction saveEntityAttributes(entityId, attributes, entityType = \"ASSET\") {\r\n    return attributeService.saveEntityAttributes({ entityType: entityType, id: entityId }, \"SERVER_SCOPE\", attributes);\r\n}\r\n\r\nfunction hasDuplicates(arr) {\r\n  const nonNullArray = arr.filter(item => item !== null);\r\n  const uniqueSet = new Set(nonNullArray);\r\n  return nonNullArray.length !== uniqueSet.size;\r\n}\r\n\r\nfunction sendToRuleEngine(deviceId, deviceName) {\r\n    const apiURL =\r\n        `/api/rule-engine/sendToRuleEngine?entityId=${deviceId}&entityType=DEVICE&key=swisscom`;\r\n    const payload = {\r\n        \"msg\": null,\r\n        \"metadata\": {\r\n            \"deviceName\": deviceName,\r\n            \"deviceType\": \"d-storz\",\r\n            \"operationType\": \"CREATE\"\r\n        }\r\n    }\r\n    return http.post(apiURL, payload).pipe();\r\n}"
          },
          "title": "New Generic Form Builder",
          "showTitleIcon": false,
          "dropShadow": false,
          "enableFullscreen": false,
          "widgetStyle": {},
          "widgetCss": "",
          "enableDataExport": false,
          "pageSize": 1024,
          "noDataDisplayMessage": "",
          "showLegend": false
        },
        "row": 0,
        "col": 0,
        "id": "ab12ad7e-37f9-ec34-4c4a-f3de6fc6edde"
      }
    },
    "states": {
      "default": {
        "name": "Hawle Dashboard",
        "root": true,
        "layouts": {
          "main": {
            "widgets": {
              "8bcdb52e-37cf-e493-5737-b1c7af71a155": {
                "sizeX": 13,
                "sizeY": 8,
                "row": 3,
                "col": 0
              },
              "7f901ab5-0fce-7740-b669-00ddd53555ac": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 0
              },
              "cbd4ca76-42c2-b889-b698-24150c5d1268": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 26
              },
              "c8b4bfec-67b7-37cf-9a35-ae810ed2bc94": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 40
              },
              "2b7f85e5-1353-34e1-baf0-4d42d4e5ac8c": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 53
              },
              "a9c8b8e5-362e-606e-8501-a73f6003c5f7": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 13
              },
              "06a3e4e9-13ce-e29e-d11f-5d67f57b1c71": {
                "sizeX": 13,
                "sizeY": 8,
                "row": 3,
                "col": 53
              },
              "5b8117f2-0490-0b8a-20ea-bf064a325988": {
                "sizeX": 13,
                "sizeY": 8,
                "row": 3,
                "col": 13
              },
              "f48435c6-1d35-90bc-a397-fca503fbfc53": {
                "sizeX": 14,
                "sizeY": 8,
                "row": 3,
                "col": 26
              },
              "64b077d1-7fcb-6335-6106-2921ae9979fa": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 66
              },
              "1709baca-3220-86cd-2d98-75812f4487bd": {
                "sizeX": 80,
                "sizeY": 3,
                "row": 11,
                "col": 0
              },
              "ce2c8f7d-2cf4-3c83-ef03-4f6ed5905287": {
                "sizeX": 13,
                "sizeY": 8,
                "row": 3,
                "col": 40
              },
              "c7cc8224-3512-2cd2-be2f-101a26b78564": {
                "sizeX": 14,
                "sizeY": 8,
                "row": 3,
                "col": 66
              },
              "a549e8da-5b5a-eb58-1206-ff491ea9aec8": {
                "sizeX": 80,
                "sizeY": 28,
                "row": 14,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "all_zone": {
        "name": "Zones",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "7c584cea-91f7-ff30-6bf1-193b1c0a9be1": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 0
              },
              "39c1efb7-b93e-1eb6-9132-257d3b17ee80": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 26
              },
              "b02607e3-f61a-38f3-b8db-c775bb1d8a29": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 40
              },
              "f142ee74-ac62-1500-0ceb-d04067e36365": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 53
              },
              "ff2800c8-35fc-08de-7074-b3f41bfb5cd7": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 13
              },
              "7ff56556-8e7c-c0f1-47e2-4dba5f571e46": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 67
              },
              "8ab51863-328e-59f0-a81a-ed280cd2ad28": {
                "sizeX": 80,
                "sizeY": 40,
                "row": 3,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "add_zone": {
        "name": "Create New Zone",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "b6909eb6-5b86-e105-802d-c3f1f15dbe5b": {
                "sizeX": 24,
                "sizeY": 9,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      },
      "all_temporary_deactivation": {
        "name": "Alarm Management",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "ce60fbd9-9e40-9724-ad58-7d0c30f52c6f": {
                "sizeX": 80,
                "sizeY": 37,
                "row": 6,
                "col": 0
              },
              "081fcf54-dd5b-87e1-98ff-f54427298848": {
                "sizeX": 37,
                "sizeY": 3,
                "row": 3,
                "col": 0
              },
              "e5d9c957-5e21-85df-af04-96508d709f5c": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 0
              },
              "e8a506f7-eecf-a789-32af-b54423d8ab7c": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 26
              },
              "fdd96616-e2d5-0b9d-0a57-81e5d23beddc": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 40
              },
              "1f5939cb-880e-d574-da18-68f297bd9da7": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 53
              },
              "3bc61c07-7415-ffab-2c1f-10b906f5b8d9": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 66
              },
              "a1b2524c-1afc-bed7-558f-9c802b2bdc17": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 13
              },
              "53098cdf-8c66-9e9c-7de4-e8be25f76c94": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 3,
                "col": 67
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "all_hydrants": {
        "name": "Hydrants",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "41a2cd82-b348-0db8-1359-4760842ecbdc": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 0
              },
              "00de56a8-b968-cddb-2f0e-31cf131da2d5": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 26
              },
              "d1a7364e-91bf-2377-b5c5-5fc69b19278a": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 40
              },
              "1c4a1fba-136d-b514-d1e7-cc92a934ffc6": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 53
              },
              "a39857d7-dd20-bac7-a128-9bb9d0466ad7": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 13
              },
              "98beea11-9156-36fd-b3a2-f99859dab7b5": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 66
              },
              "afa125eb-1832-ed60-2571-430378a4484f": {
                "sizeX": 80,
                "sizeY": 21,
                "row": 22,
                "col": 0
              },
              "a549e8da-5b5a-eb58-1206-ff491ea9aec8": {
                "sizeX": 80,
                "sizeY": 16,
                "row": 6,
                "col": 0
              },
              "016ce364-1831-adf9-6925-591118c1eb8c": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 3,
                "col": 67
              },
              "84582bc7-cdfd-0451-96f3-10386d2e9a1e": {
                "sizeX": 67,
                "sizeY": 3,
                "row": 3,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "all_dstorz": {
        "name": "D-Storz",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "aff7f168-577f-f559-0040-d4bb014facec": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 0
              },
              "87031e3b-90aa-31b4-5d93-1ed6d724db47": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 26
              },
              "40efd6ff-0b45-8cda-c615-28380e7d7bfd": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 40
              },
              "a1a6974b-1088-7830-e725-bca39b47e5df": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 53
              },
              "93f8c934-0246-3f41-3a6f-e4b508404c83": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 13
              },
              "926190cf-913a-b319-a106-ed763d318044": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 66
              },
              "e20ac5ab-3780-200b-444a-f8f03032e6fd": {
                "sizeX": 80,
                "sizeY": 37,
                "row": 6,
                "col": 0
              },
              "016ce364-1831-adf9-6925-591118c1eb8c": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 3,
                "col": 67
              },
              "84582bc7-cdfd-0451-96f3-10386d2e9a1g": {
                "sizeX": 67,
                "sizeY": 3,
                "row": 3,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "all_users": {
        "name": "Users",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "bc16cad2-b29c-eef0-ddfe-15508b69a414": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 0
              },
              "7ac22cac-8802-e4a8-5a91-386be95a2d45": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 40
              },
              "455681d1-2f60-76ed-0daa-8bb6249dbc2a": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 26
              },
              "8c25eab5-743a-a1a3-7899-688ab4ee9f31": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 53
              },
              "2e51ee7b-565f-920d-0edc-1f2d6d0315e5": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 13
              },
              "7d8233d2-e9cb-13d9-04c3-a3e9e0ac499b": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 66
              },
              "1313106f-9f61-b401-f05e-a145e63183f1": {
                "sizeX": 80,
                "sizeY": 40,
                "row": 3,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "add_temporary_deactivation": {
        "name": "Add temporary deactivation",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "ed5f1dcc-d356-fdad-8b31-662b65da78cc": {
                "sizeX": 24,
                "sizeY": 12,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      },
      "home_alarm_view": {
        "name": "Hawle Dashboard",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "7c93901c-d903-148b-8a02-d2c923adfe2e": {
                "sizeX": 80,
                "sizeY": 3,
                "row": 11,
                "col": 0
              },
              "d136a63b-95af-76fd-2f6a-b3f3b4289496": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 0
              },
              "ef31ef0a-77ea-feca-63dd-76aeab802626": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 26
              },
              "5f343c86-576d-769b-4633-c9beaebfe254": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 40
              },
              "c62a592b-6910-95ae-e52a-74ea3d8abac0": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 53
              },
              "902e6c53-f7bc-996d-d842-34be9cf9694e": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 66
              },
              "3eee72e2-5bce-2dec-c533-ec4e5c061411": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 13
              },
              "40750290-5432-d807-03bf-187545ebd1fd": {
                "sizeX": 13,
                "sizeY": 8,
                "row": 3,
                "col": 0
              },
              "20991c15-aa4f-d11e-c6c6-432e35ec4332": {
                "sizeX": 13,
                "sizeY": 8,
                "row": 3,
                "col": 13
              },
              "779ac906-6371-31b2-6b35-4a33d80c61d4": {
                "sizeX": 14,
                "sizeY": 8,
                "row": 3,
                "col": 66
              },
              "470d1891-ca89-6fca-02ce-74c464f9a2a7": {
                "sizeX": 14,
                "sizeY": 8,
                "row": 3,
                "col": 26
              },
              "d734c24d-6434-f7c7-3ed2-db3843659ba3": {
                "sizeX": 13,
                "sizeY": 8,
                "row": 3,
                "col": 40
              },
              "7ae4654b-9cef-e159-2e47-fae1368eeab8": {
                "sizeX": 13,
                "sizeY": 8,
                "row": 3,
                "col": 53
              },
              "f80aeac6-e8c5-1a09-9cb0-c5f007706c6a": {
                "sizeX": 80,
                "sizeY": 28,
                "row": 14,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "all_alarms": {
        "name": "Alarm Management",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "05614578-5db8-2af7-a6aa-5258cb4dbc0a": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 0
              },
              "5fba6445-9b81-8cb9-1dcb-bb315239c2f0": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 26
              },
              "9073d270-e707-6771-e646-19aebe15237f": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 53
              },
              "4bcb63ca-5fe1-cabd-f1ae-5a200e716188": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 40
              },
              "a754e896-f74e-96eb-bb9c-26c424693a45": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 13
              },
              "56b95217-fb6f-717e-3c59-cbc3cd6bf9f1": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 66
              },
              "6bcc11a3-bec5-717d-fd32-f02d88f376e8": {
                "sizeX": 37,
                "sizeY": 3,
                "row": 3,
                "col": 0
              },
              "016ce364-1831-adf9-6925-591118c1eb8c": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 3,
                "col": 67
              },
              "f80aeac6-e8c5-1a09-9cb0-c5f007706c6a": {
                "sizeX": 80,
                "sizeY": 16,
                "row": 6,
                "col": 0
              },
              "573590ac-38af-3398-75c4-dbf010cacb9a": {
                "sizeX": 80,
                "sizeY": 21,
                "row": 22,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "all_alarm_definitions": {
        "name": "Alarm Management",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "26abbf97-d406-0cd7-37c9-a5237cba176b": {
                "sizeX": 37,
                "sizeY": 3,
                "row": 3,
                "col": 0
              },
              "b98f4ed8-852a-2959-798a-5454e5ce5ce2": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 0
              },
              "16f67d2c-d8b1-3dbc-5776-2f6e04290bf4": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 26
              },
              "cf00e5f6-7a94-c498-6572-a930cf7b7ee8": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 40
              },
              "b391ee46-129c-17eb-ddbd-fe85e2119d20": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 53
              },
              "a7618d32-117e-5f3c-f63b-070e7d04b90b": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 66
              },
              "4ea993dc-c627-8595-5315-fa7175e15bb6": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 13
              },
              "f68737b4-e45b-6ba0-6bec-4db08f846a16": {
                "sizeX": 80,
                "sizeY": 37,
                "row": 6,
                "col": 0
              },
              "74b5face-9df4-2a88-79a4-3885ac77476b": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 3,
                "col": 67
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "all_alarm_history": {
        "name": "Alarm History",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "98f3c67b-235c-14eb-38da-167601367842": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 0
              },
              "7e710b98-54a5-b5e8-dc3b-f6cf28156a80": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 26
              },
              "1d1a6afa-bd46-3c21-a6af-cb81b1a2b72b": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 40
              },
              "b6e05da9-b14a-ed31-c577-a13c9109e35d": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 53
              },
              "ab8a6511-f479-5734-15b7-e4c0c83ff88c": {
                "sizeX": 14,
                "sizeY": 3,
                "row": 0,
                "col": 66
              },
              "89e6dbc1-c3af-2a9f-67f1-20ceec89ab59": {
                "sizeX": 13,
                "sizeY": 3,
                "row": 0,
                "col": 13
              },
              "c2940664-443d-b015-3a7c-12699c28b8ce": {
                "sizeX": 10,
                "sizeY": 3,
                "row": 3,
                "col": 0
              },
              "0e8df222-8684-c564-7698-04eb2515a6d0": {
                "sizeX": 80,
                "sizeY": 37,
                "row": 6,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "add_dstorz": {
        "name": "Create New D-Storz",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "1929837c-df75-f3d1-a1d9-97bcfaa324eb": {
                "sizeX": 80,
                "sizeY": 43,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "edit_dstorz": {
        "name": "Edit DStorz",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "06ab9b5a-8df5-f17a-563a-24ec23ede392": {
                "sizeX": 24,
                "sizeY": 12,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      },
      "edit_zone": {
        "name": "Edit Zone",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "4c9cc318-dcb2-6c1a-f6fc-a67b29fb8934": {
                "sizeX": 24,
                "sizeY": 8,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      },
      "add_hydrant": {
        "name": "Add Hydrant",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "ab12ad7e-37f9-ec34-4c4a-f3de6fc6edde": {
                "sizeX": 80,
                "sizeY": 43,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "edit_hydrant": {
        "name": "Edit Hydrant",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "ddc8e1bf-f5ce-6040-d4dc-ae0eebbd854b": {
                "sizeX": 80,
                "sizeY": 42,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "add_alarm_definition": {
        "name": "Add Alarm Definition",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "6090588a-7d1c-c59d-a43f-c6e3a617d8e0": {
                "sizeX": 24,
                "sizeY": 12,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      },
      "add_user": {
        "name": "Add User",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "50fefbdb-b137-4839-6eb5-7c908ce2036c": {
                "sizeX": 80,
                "sizeY": 43,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "edit_alarm_definition": {
        "name": "Edit Alarm Definition",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "7f42ebb4-f81c-298f-aae8-d868a60d338c": {
                "sizeX": 24,
                "sizeY": 12,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      },
      "add_dstorz_from_hydrant": {
        "name": "Add DStorz",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "80412516-56d5-3928-469f-d16fe4d7b1c2": {
                "sizeX": 24,
                "sizeY": 17,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      },
      "edit_temporary_deactivation": {
        "name": "Edit Temporary Deactivation",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "ed5f1dcc-d356-fdad-8b31-662b65da78cd": {
                "sizeX": 24,
                "sizeY": 12,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      },
      "duplicate_temporary_deactivation": {
        "name": "Duplicate Temporary Deactivation",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "ed5f1dcc-d356-fdad-8b31-662b65da78ce": {
                "sizeX": 24,
                "sizeY": 12,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      },
      "duplicate_alarm_definition": {
        "name": "Duplicate Alarm Definition",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "7f42ebb4-f81c-298f-aae8-d868a60d338d": {
                "sizeX": 24,
                "sizeY": 12,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      },
      "alarm_definition_from_hydrant": {
        "name": "Alarm Definition",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "664daa22-a7b0-a663-f474-588360b88b01": {
                "sizeX": 24,
                "sizeY": 11,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      },
      "duplicate_hydrant": {
        "name": "Duplicate Hydrant",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "ddc8e1bf-f5ce-6040-d4dc-ae0eebbd854c": {
                "sizeX": 80,
                "sizeY": 43,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "edit_user": {
        "name": "Edit User",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "dfa8d0a4-fc67-9b70-3292-611742910188": {
                "sizeX": 80,
                "sizeY": 43,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "add_hydrant_from_zone_select": {
        "name": "Add Hydrant",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "0d9b56dd-360f-f4fb-bb4c-0ce173df58bf": {
                "sizeX": 80,
                "sizeY": 46,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 80,
              "margin": 10,
              "backgroundSizeMode": "100%",
              "autoFillHeight": false,
              "backgroundImageUrl": null,
              "mobileAutoFillHeight": false,
              "mobileRowHeight": 70
            }
          }
        }
      },
      "add_hydrant_from_zone_create": {
        "name": "Add Hydrant",
        "root": false,
        "layouts": {
          "main": {
            "widgets": {
              "1e8d82d8-11c8-9d51-4555-1e0bc8415ec9": {
                "sizeX": 24,
                "sizeY": 36,
                "row": 0,
                "col": 0
              }
            },
            "gridSettings": {
              "backgroundColor": "#eeeeee",
              "columns": 24,
              "margin": 10,
              "backgroundSizeMode": "100%"
            }
          }
        }
      }
    },
    "entityAliases": {
      "823fc6e4-b7e0-35d0-05c3-23e30810c28a": {
        "id": "823fc6e4-b7e0-35d0-05c3-23e30810c28a",
        "alias": "All Zone",
        "filter": {
          "type": "assetType",
          "resolveMultiple": true,
          "assetType": "zone",
          "assetNameFilter": ""
        }
      },
      "793b3a27-c500-48ae-d75c-383cda3397a8": {
        "id": "793b3a27-c500-48ae-d75c-383cda3397a8",
        "alias": "All Hydrant",
        "filter": {
          "type": "assetType",
          "resolveMultiple": true,
          "assetType": "hydrant",
          "assetNameFilter": ""
        }
      },
      "4c30635a-474a-9dbd-0d25-b9a38527e2cf": {
        "id": "4c30635a-474a-9dbd-0d25-b9a38527e2cf",
        "alias": "All D-Storz",
        "filter": {
          "type": "deviceType",
          "resolveMultiple": true,
          "deviceType": "d-storz",
          "deviceNameFilter": ""
        }
      },
      "5d6aae4b-1d67-f7b4-f915-d2e30c8a3eb5": {
        "id": "5d6aae4b-1d67-f7b4-f915-d2e30c8a3eb5",
        "alias": "All temporary deactivation",
        "filter": {
          "type": "assetType",
          "resolveMultiple": true,
          "assetType": "temporaryDeactivation",
          "assetNameFilter": ""
        }
      },
      "4d2ec0c3-6e69-c1a7-0039-19a117669949": {
        "id": "4d2ec0c3-6e69-c1a7-0039-19a117669949",
        "alias": "All Alarm Defintion",
        "filter": {
          "type": "assetType",
          "resolveMultiple": true,
          "assetType": "alarmDefinition",
          "assetNameFilter": ""
        }
      },
      "b1c13d37-1982-e4ab-6bbc-3d274f7ecf6a": {
        "id": "b1c13d37-1982-e4ab-6bbc-3d274f7ecf6a",
        "alias": "All Users",
        "filter": {
          "type": "entityType",
          "resolveMultiple": true,
          "entityType": "USER"
        }
      },
      "b7de8762-fa19-07c4-3f86-eac939251f91": {
        "id": "b7de8762-fa19-07c4-3f86-eac939251f91",
        "alias": "All Alaram Defintion",
        "filter": {
          "type": "assetType",
          "resolveMultiple": true,
          "assetType": "alarm_definition",
          "assetNameFilter": ""
        }
      },
      "65fb773e-c74e-f9cd-bb64-1f2b5c766574": {
        "id": "65fb773e-c74e-f9cd-bb64-1f2b5c766574",
        "alias": "DStorz State",
        "filter": {
          "type": "stateEntity",
          "resolveMultiple": false,
          "stateEntityParamName": null,
          "defaultStateEntity": null
        }
      },
      "47e98369-cf0a-b023-8265-bae4a12e01e0": {
        "id": "47e98369-cf0a-b023-8265-bae4a12e01e0",
        "alias": "Sample Hydrant",
        "filter": {
          "type": "singleEntity",
          "resolveMultiple": false,
          "singleEntity": {
            "entityType": "ASSET",
            "id": "fdfe20e0-53aa-11ee-a206-df71d97f5c01"
          }
        }
      },
      "852a4008-a4df-0350-7561-a86b82b6b796": {
        "id": "852a4008-a4df-0350-7561-a86b82b6b796",
        "alias": "Sample DStorz",
        "filter": {
          "type": "singleEntity",
          "resolveMultiple": false,
          "singleEntity": {
            "entityType": "DEVICE",
            "id": "663611d0-4a51-11ee-aead-c73321ce0fce"
          }
        }
      },
      "f7212e92-3520-134b-4d52-8f2f44117e37": {
        "id": "f7212e92-3520-134b-4d52-8f2f44117e37",
        "alias": "Devices related to zone",
        "filter": {
          "type": "relationsQuery",
          "resolveMultiple": true,
          "rootStateEntity": true,
          "stateEntityParamName": null,
          "defaultStateEntity": null,
          "rootEntity": {
            "entityType": "ASSET",
            "id": "bcb488e0-c7f0-11ed-bef5-0f9e3ddf7cc8"
          },
          "direction": "FROM",
          "maxLevel": 1,
          "fetchLastLevelOnly": false,
          "filters": [
            {
              "relationType": "manageDevices",
              "entityTypes": [
                "DEVICE"
              ]
            }
          ]
        }
      },
      "e6827e40-2fb9-c684-d40e-5b4096875213": {
        "id": "e6827e40-2fb9-c684-d40e-5b4096875213",
        "alias": "Generic Dashboard State",
        "filter": {
          "type": "stateEntity",
          "resolveMultiple": false,
          "stateEntityParamName": null,
          "defaultStateEntity": null
        }
      }
    },
    "filters": {
      "d3faba8f-907e-6c1c-b078-3dc5ab0be7a7": {
        "id": "d3faba8f-907e-6c1c-b078-3dc5ab0be7a7",
        "filter": "AlarmActive",
        "keyFilters": [
          {
            "key": {
              "type": "ATTRIBUTE",
              "key": "alarmActive"
            },
            "valueType": "BOOLEAN",
            "predicates": [
              {
                "keyFilterPredicate": {
                  "operation": "EQUAL",
                  "value": {
                    "defaultValue": true,
                    "dynamicValue": null
                  },
                  "type": "BOOLEAN"
                },
                "userInfo": {
                  "editable": true,
                  "label": "",
                  "autogeneratedLabel": true,
                  "order": 0
                }
              }
            ]
          }
        ],
        "editable": true
      },
      "8ab15e25-053b-a74e-8266-2fa26c703042": {
        "id": "8ab15e25-053b-a74e-8266-2fa26c703042",
        "filter": "alarmLowBattery Active",
        "keyFilters": [
          {
            "key": {
              "type": "ATTRIBUTE",
              "key": "alarmLowBattery"
            },
            "valueType": "BOOLEAN",
            "predicates": [
              {
                "keyFilterPredicate": {
                  "operation": "EQUAL",
                  "value": {
                    "defaultValue": true,
                    "dynamicValue": null
                  },
                  "type": "BOOLEAN"
                },
                "userInfo": {
                  "editable": true,
                  "label": "",
                  "autogeneratedLabel": true,
                  "order": 0
                }
              }
            ]
          }
        ],
        "editable": true
      },
      "b81fa118-cf4f-587a-98f0-127bfba72cb1": {
        "id": "b81fa118-cf4f-587a-98f0-127bfba72cb1",
        "filter": "AlarmNoSignal Active",
        "keyFilters": [
          {
            "key": {
              "type": "ATTRIBUTE",
              "key": "alarmNoSignal"
            },
            "valueType": "BOOLEAN",
            "predicates": [
              {
                "keyFilterPredicate": {
                  "operation": "EQUAL",
                  "value": {
                    "defaultValue": true,
                    "dynamicValue": null
                  },
                  "type": "BOOLEAN"
                },
                "userInfo": {
                  "editable": true,
                  "label": "",
                  "autogeneratedLabel": true,
                  "order": 0
                }
              }
            ]
          }
        ],
        "editable": true
      },
      "2374dcb2-ca2b-f398-aa6b-67f4ee4c4c21": {
        "id": "2374dcb2-ca2b-f398-aa6b-67f4ee4c4c21",
        "filter": "AlarmOpen Active",
        "keyFilters": [
          {
            "key": {
              "type": "ATTRIBUTE",
              "key": "alarmOpen"
            },
            "valueType": "BOOLEAN",
            "predicates": [
              {
                "keyFilterPredicate": {
                  "operation": "EQUAL",
                  "value": {
                    "defaultValue": true,
                    "dynamicValue": null
                  },
                  "type": "BOOLEAN"
                },
                "userInfo": {
                  "editable": true,
                  "label": "",
                  "autogeneratedLabel": true,
                  "order": 0
                }
              }
            ]
          }
        ],
        "editable": true
      },
      "7a2d47fb-ad76-ece8-36f2-053945031378": {
        "id": "7a2d47fb-ad76-ece8-36f2-053945031378",
        "filter": "AlarmClose Active",
        "keyFilters": [
          {
            "key": {
              "type": "ATTRIBUTE",
              "key": "alarmClose"
            },
            "valueType": "BOOLEAN",
            "predicates": [
              {
                "keyFilterPredicate": {
                  "operation": "EQUAL",
                  "value": {
                    "defaultValue": true,
                    "dynamicValue": null
                  },
                  "type": "BOOLEAN"
                },
                "userInfo": {
                  "editable": true,
                  "label": "",
                  "autogeneratedLabel": true,
                  "order": 0
                }
              }
            ]
          }
        ],
        "editable": true
      }
    },
    "timewindow": {
      "hideInterval": false,
      "hideAggregation": false,
      "hideAggInterval": false,
      "hideTimezone": false,
      "selectedTab": 1,
      "history": {
        "historyType": 0,
        "timewindowMs": 2592000000,
        "interval": 1000,
        "fixedTimewindow": {
          "startTimeMs": 1696830984912,
          "endTimeMs": 1696917384912
        },
        "quickInterval": "CURRENT_DAY"
      },
      "aggregation": {
        "type": "NONE",
        "limit": 25000
      },
      "displayValue": "History - last 30 days "
    },
    "settings": {
      "stateControllerId": "entity",
      "showTitle": false,
      "showDashboardsSelect": false,
      "showEntitiesSelect": false,
      "showDashboardTimewindow": true,
      "showDashboardExport": true,
      "toolbarAlwaysOpen": true,
      "titleColor": "rgba(0,0,0,0.870588)",
      "showDashboardLogo": false,
      "dashboardLogoUrl": null,
      "hideToolbar": false,
      "showFilters": true,
      "showUpdateDashboardImage": true,
      "showTimeWindowInDefaultPage": true,
      "dashboardCss": ""
    }
  },
  "externalId": null,
  "name": "Hawle Dashboard [Map] v2023.12.11.1",
  "ownerId": {
    "entityType": "TENANT",
    "id": "3bcdd400-4a2e-11ee-aead-c73321ce0fce"
  }
}